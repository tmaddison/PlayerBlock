!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=145)}([function(e,t,n){"use strict";n.r(t),n.d(t,"uiVersion",(function(){return u})),n.d(t,"ContentEntryBuilder",(function(){return _})),n.d(t,"ContentEntryDataBuilder",(function(){return h})),n.d(t,"ContentEntryOptionsBuilder",(function(){return y})),n.d(t,"StandardExtend",(function(){return C})),n.d(t,"StandardExtendWithArrayAssignment",(function(){return E})),n.d(t,"ConfigInstance",(function(){return T})),n.d(t,"PlayConfigBuilder",(function(){return P})),n.d(t,"PlayerConfigBuilder",(function(){return j})),n.d(t,"SetupConfigBuilder",(function(){return O})),n.d(t,"CueHelpers",(function(){return q})),n.d(t,"MocksHelpers",(function(){return Q})),n.d(t,"PlayerVersionHelper",(function(){return Ke})),n.d(t,"PlayerVersion",(function(){return We})),n.d(t,"SCTEMetadataHelpers",(function(){return L})),n.d(t,"AdBreakPosition",(function(){return $})),n.d(t,"AdErrorType",(function(){return Z})),n.d(t,"AdState",(function(){return ee})),n.d(t,"AnalyticsMarkName",(function(){return te})),n.d(t,"AnalyticsMeasureName",(function(){return ne})),n.d(t,"AuthCdnTokenType",(function(){return re})),n.d(t,"AuthDrmTokenType",(function(){return ie})),n.d(t,"AutoPlayPreloadBehavior",(function(){return oe})),n.d(t,"CategoryCode",(function(){return ae})),n.d(t,"CategoryType",(function(){return se})),n.d(t,"CCChannel",(function(){return ue})),n.d(t,"CCLang",(function(){return ce})),n.d(t,"CCSettingsSource",(function(){return le})),n.d(t,"CCSource",(function(){return de})),n.d(t,"CCState",(function(){return fe})),n.d(t,"CmsProviderKey",(function(){return pe})),n.d(t,"Color",(function(){return he})),n.d(t,"ComponentCategory",(function(){return ge})),n.d(t,"TCFNativeKeys",(function(){return ye})),n.d(t,"ContentProtectionType",(function(){return r})),n.d(t,"DeviceType",(function(){return ve})),n.d(t,"DRMDataSource",(function(){return _e})),n.d(t,"Edge",(function(){return me})),n.d(t,"EncryptionMode",(function(){return i})),n.d(t,"ErrorSeverity",(function(){return be})),n.d(t,"FontType",(function(){return Ce})),n.d(t,"LifecycleEvent",(function(){return Ee})),n.d(t,"LifecycleState",(function(){return Te})),n.d(t,"MarkerEventType",(function(){return Se})),n.d(t,"MarkerType",(function(){return Pe})),n.d(t,"MediaDeliveryType",(function(){return o})),n.d(t,"MediaFileType",(function(){return a})),n.d(t,"MediaJSONPlatform",(function(){return Me})),n.d(t,"MediaState",(function(){return Oe})),n.d(t,"MediumVersion",(function(){return ke})),n.d(t,"ModelEvents",(function(){return Ae})),n.d(t,"ModelKeys",(function(){return we})),n.d(t,"ModelUpdateMode",(function(){return Re})),n.d(t,"ModuleEventCategory",(function(){return Ie})),n.d(t,"ModuleType",(function(){return je})),n.d(t,"Opacity",(function(){return De})),n.d(t,"PlayerCommandType",(function(){return Le})),n.d(t,"PlayerEventType",(function(){return Ne})),n.d(t,"PlayerFriendlyObstructionPurpose",(function(){return Fe})),n.d(t,"PlayerHookName",(function(){return Ue})),n.d(t,"PlayerState",(function(){return xe})),n.d(t,"PlayModeOptions",(function(){return Be})),n.d(t,"Size",(function(){return Ve})),n.d(t,"SubjectToGDPROptions",(function(){return qe})),n.d(t,"TCFVersion",(function(){return He})),n.d(t,"TCFVersionDefault",(function(){return yt})),n.d(t,"TextTrackKind",(function(){return s})),n.d(t,"ToggleableSections",(function(){return ze})),n.d(t,"TransactionEventType",(function(){return Ge})),n.d(t,"TransactionState",(function(){return Ye})),n.d(t,"VideoEngineCommandType",(function(){return Je})),n.d(t,"VideoEngineEventType",(function(){return Qe})),n.d(t,"VideoEngineMetadataSourceType",(function(){return Xe})),n.d(t,"VideoEngineMetadataType",(function(){return V})),n.d(t,"ViewMode",(function(){return $e})),n.d(t,"ViewState",(function(){return Ze})),n.d(t,"CueEventType",(function(){return et})),n.d(t,"CueSource",(function(){return tt})),n.d(t,"CueState",(function(){return nt})),n.d(t,"CueType",(function(){return A})),n.d(t,"KeySystems",(function(){return rt})),n.d(t,"Domain",(function(){return it})),n.d(t,"PlatformErrorCode",(function(){return ot})),n.d(t,"GDPRConsentErrors",(function(){return at})),n.d(t,"MockMessageTriggerName",(function(){return U})),n.d(t,"MockMessageType",(function(){return x})),n.d(t,"SCTEDescriptorType",(function(){return w})),n.d(t,"SCTESegmentationProperties",(function(){return R})),n.d(t,"SCTESegmentationType",(function(){return I})),n.d(t,"SCTESpliceCommandType",(function(){return B})),n.d(t,"UIClickAction",(function(){return st})),n.d(t,"UIComponentType",(function(){return ut})),n.d(t,"UIContainer",(function(){return ct})),n.d(t,"UIControlLocation",(function(){return lt})),n.d(t,"UIControlName",(function(){return dt})),n.d(t,"UIControlSet",(function(){return ft})),n.d(t,"UISlate",(function(){return pt})),n.d(t,"UITheme",(function(){return ht})),n.d(t,"ComScoreMediaType",(function(){return gt}));var r,i,o,a,s,u="2.5.0-1.rc.1",c=n(2);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e.Unknown="unknown",e.Preview="preview",e.PlayReady="playready",e.MultiDRM="multidrm",e.Fairplay="fairplay",e.Primetime="primetime",e.Widevine="widevine",e.BulkAES="bulkaes",e.Unprotected="unprotected"}(r||(r={})),function(e){e.CENC="cenc",e.CBCS="cbcs",e.Unknown="unknown",e.Unencrypted="unencrypted"}(i||(i={})),function(e){e.Progressive="progressive",e.Streaming="streaming",e.Unknown="unknown"}(o||(o={})),function(e){e.MP4="mp4",e.M3U8="m3u8",e.Unknown="unknown"}(a||(a={})),function(e){e.Subtitle="subtitle",e.Caption="caption"}(s||(s={}));var d={url:null,playlistProtection:null,contentProtection:r.Unprotected,type:a.Unknown,encryptionMode:i.Unknown,deliveryType:o.Unknown},f={type:null,format:null,platform:null,tracks:[]},p={id:null,metadata:{},files:[],validators:{},isLive:!1,segments:[],captions:{enabled:!0,sources:[]}},h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=c.ObjectUtils.extendDeep({},p),this._playlistProtection=null}var t,n,r;return t=e,r=[{key:"createEntryId",value:function(){return"entry-".concat(e._entryId++)}},{key:"create",value:function(){return new e}},{key:"fromPlaylistItem",value:function(t){return e.create().withContentEntryData(t.entry)}}],(n=[{key:"_getExistingCaptionSource",value:function(e){var t;return null!==(t=this._data.captions.sources.find((function(t){return t.type===e.type&&t.format===e.format&&t.platform===e.platform})))&&void 0!==t?t:null}},{key:"withContentEntryData",value:function(e){return c.ObjectUtils.extendDeep(this._data,e),this}},{key:"withId",value:function(e){return this._data.id=e,this}},{key:"withMetadata",value:function(e){return this._data.metadata=e,this}},{key:"withRemoteMetadata",value:function(e){return this._data.metadata=e,this}},{key:"addFile",value:function(e){return this._data.files.push(Object.assign(Object.assign({},d),e)),this}},{key:"_handleAddingCaptionTrackToSource",value:function(e,t,n,r,i){var o=this._getExistingCaptionSource(e),a={channel:"",label:t,lang:n,url:r,kind:i};o?o.tracks.push(a):(e.tracks.push(a),this.addCaptionSource(e))}},{key:"addExternalWebVTTTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.Caption,i={format:"webvtt",platform:null,type:"external",tracks:[]};return this._handleAddingCaptionTrackToSource(i,n,t,e,r),this}},{key:"addExternalSRTTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.Caption,i={format:"srt",platform:null,type:"external",tracks:[]};return this._handleAddingCaptionTrackToSource(i,n,t,e,r),this}},{key:"addExternalTTMLTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.Caption,i={format:"ttml",platform:null,type:"external",tracks:[]};return this._handleAddingCaptionTrackToSource(i,n,t,e,r),this}},{key:"requiresCDNAuth",value:function(e){return this._playlistProtection=e,this}},{key:"isLive",value:function(e){return this._data.isLive=e,this}},{key:"withTrt",value:function(e){return this._data.trt=e,this}},{key:"addValidator",value:function(e,t){return this._data.validators[e]=t,this}},{key:"addSegment",value:function(e){return this._data.segments.push(e),this}},{key:"addCaptionSource",value:function(e){return this._data.captions.sources.push(Object.assign(Object.assign({},f),e)),this}},{key:"addCaptionTrackEmbedded",value:function(e,t){var n={source:e,track:t};n.source.type="embedded";var r=this._getExistingCaptionSource(n.source);if(r)r.tracks.push(n.track);else{var i=n.source;i.tracks=[n.track],this.addCaptionSource(i)}return this}},{key:"build",value:function(){var t=this;return this._data.id||(this._data.id=e.createEntryId()),this._playlistProtection&&this._data.files.forEach((function(e){null===e.playlistProtection&&(e.playlistProtection=t._playlistProtection)})),c.ObjectUtils.extendDeep({},this._data)}}])&&l(t.prototype,n),r&&l(t,r),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}h._entryId=0;var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}var t,n,r;return t=e,r=[{key:"create",value:function(){return new e}},{key:"fromPlaylistItem",value:function(t){return e.create().withContentEntryOptions(t.options)}}],(n=[{key:"withContentEntryOptions",value:function(e){return c.ObjectUtils.extendDeep(this._data,e),this}},{key:"withMVPDId",value:function(e){return this._data.mvpdId=e,this}},{key:"withAccessTokenType",value:function(e){return this._data.accessTokenType=e,this}},{key:"withAccessToken",value:function(e){return this._data.accessToken=e,this}},{key:"withTokenParams",value:function(e){return this._data.tokenParams=e,this}},{key:"withAssetType",value:function(e){return this._data.assetType=e,this}},{key:"withPlayConfigOverrides",value:function(e){return this._data.config=e,this}},{key:"build",value:function(){return c.ObjectUtils.extendDeep({},this._data)}}])&&g(t.prototype,n),r&&g(t,r),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"forEntryData",value:function(){return h.create()}},{key:"forEntryOptions",value:function(){return y.create()}}],(n=null)&&v(t.prototype,n),r&&v(t,r),e}(),m=n(59);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return c.ObjectUtils.extendDeep.apply(c.ObjectUtils,[{},e].concat(n))}},E=function(){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return c.ObjectUtils.extendDeepWithArrayAssignment.apply(c.ObjectUtils,[{},e].concat(n))}},T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t}var t,n,r;return t=e,(n=[{key:"getAuthForType",value:function(e){var t=c.ObjectUtils.getOrElse(this._config,"auth",{});if(null==t?void 0:t.cdn.services)return t.cdn.services.find((function(t){return t.type===e}))}},{key:"isSectionEnabled",value:function(e){var t=this.get(e);return!t.isNone()&&t.value.enabled}},{key:"getOrElse",value:function(e,t){var n=c.ObjectUtils.getOrElse(this._config,e,t);return c.ObjectUtils.isPlainObject(n)&&(n=c.ObjectUtils.extendDeep({},n)),n}},{key:"getOrElseNullable",value:function(e,t){var n=c.ObjectUtils.get(this._config,e,t);return Object(m.fromNullable)(n).getOrElse(t)}},{key:"get",value:function(e){var t=c.ObjectUtils.get(this._config,e);return Object(m.fromNullable)(t)}},{key:"set",value:function(e,t){c.ObjectUtils.set(this._config,e,t)}},{key:"toData",value:function(){return C()(this._config)}},{key:"extend",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._config=E().apply(void 0,[this._config].concat(t))}}])&&b(t.prototype,n),r&&b(t,r),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=new T({})}var t,n,r;return t=e,r=[{key:"create",value:function(){return new e}}],(n=[{key:"withFeatures",value:function(e){return this._data.extend({features:e}),this}},{key:"withCaptions",value:function(e){return this._data.extend({captions:e}),this}},{key:"withConviva",value:function(e){return this._data.extend({analytics:{conviva:e}}),this}},{key:"withMoat",value:function(e){return this._data.extend({analytics:{moat:e}}),this}},{key:"withComscore",value:function(e){return this._data.extend({analytics:{comscore:e}}),this}},{key:"withOpenMeasurement",value:function(e){return this._data.extend({analytics:{openMeasurement:e}}),this}},{key:"withIas",value:function(e){return this._data.extend({analytics:{ias:e}}),this}},{key:"withAds",value:function(e){return this._data.extend({ads:e}),this}},{key:"withAuth",value:function(e){return this._data.extend({auth:e}),this}},{key:"withCms",value:function(e){return this._data.extend({cms:e}),this}},{key:"withDrm",value:function(e){return this._data.extend({drm:e}),this}},{key:"withMedia",value:function(e){return this._data.extend({media:e}),this}},{key:"withPlayback",value:function(e){return this._data.extend({playback:e}),this}},{key:"withMonitors",value:function(e){return this._data.extend({monitors:e}),this}},{key:"withMetadata",value:function(e){return this._data.extend({metadata:e}),this}},{key:"withLifecycle",value:function(e){return this._data.extend({lifecycle:e}),this}},{key:"withUI",value:function(e){return this._data.extend({ui:e}),this}},{key:"withMocks",value:function(e){return this._data.extend({mocks:e}),this}},{key:"withDebug",value:function(e){return this._data.extend({debug:e}),this}},{key:"build",value:function(){return this._data.toData()}}])&&S(t.prototype,n),r&&S(t,r),e}();function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._setupConfigData=new T({}),this._playConfigBuilder=new P}var t,n,r;return t=e,r=[{key:"create",value:function(){return new e}}],(n=[{key:"withContainer",value:function(e){return this._setupConfigData.extend({container:e}),this}},{key:"withFeatures",value:function(e){return this._playConfigBuilder.withFeatures(e),this}},{key:"withConviva",value:function(e){return this._playConfigBuilder.withConviva(e),this}},{key:"withCaptions",value:function(e){return this._playConfigBuilder.withCaptions(e),this}},{key:"withMoat",value:function(e){return this._playConfigBuilder.withMoat(e),this}},{key:"withComscore",value:function(e){return this._playConfigBuilder.withComscore(e),this}},{key:"withOpenMeasurement",value:function(e){return this._playConfigBuilder.withOpenMeasurement(e),this}},{key:"withIas",value:function(e){return this._playConfigBuilder.withIas(e),this}},{key:"withAds",value:function(e){return this._playConfigBuilder.withAds(e),this}},{key:"withAuth",value:function(e){return this._playConfigBuilder.withAuth(e),this}},{key:"withCms",value:function(e){return this._playConfigBuilder.withCms(e),this}},{key:"withDrm",value:function(e){return this._playConfigBuilder.withDrm(e),this}},{key:"withMedia",value:function(e){return this._playConfigBuilder.withMedia(e),this}},{key:"withPlayback",value:function(e){return this._playConfigBuilder.withPlayback(e),this}},{key:"withMonitors",value:function(e){return this._playConfigBuilder.withMonitors(e),this}},{key:"withMetadata",value:function(e){return this._playConfigBuilder.withMetadata(e),this}},{key:"withLifecycle",value:function(e){return this._playConfigBuilder.withLifecycle(e),this}},{key:"withUI",value:function(e){return this._playConfigBuilder.withUI(e),this}},{key:"withMocks",value:function(e){return this._playConfigBuilder.withMocks(e),this}},{key:"withDebug",value:function(e){return this._playConfigBuilder.withDebug(e),this}},{key:"build",value:function(){var e=this._setupConfigData.toData(),t=this._playConfigBuilder.build();return Object.keys(t).length>0&&(e.config=t),e}}])&&M(t.prototype,n),r&&M(t,r),e}();function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A,w,R,I,j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"forSetup",value:function(){return O.create()}},{key:"forPlay",value:function(){return P.create()}},{key:"forUpdate",value:function(){return P.create()}}],(n=null)&&k(t.prototype,n),r&&k(t,r),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e.Ext_Out="extOut",e.Ext_Out_Cont="extOutCont",e.Ext_In="extIn",e.Ext_Discontinuity="extDisco",e.Ext_Asset="extAsset",e.ID3="id3",e.SCTE="SCTE",e.Unknown="unknown"}(A||(A={})),function(e){e[e.Avail=0]="Avail",e[e.Segmentation=2]="Segmentation",e[e.Unknown=-1]="Unknown"}(w||(w={})),function(e){e.Type_ID="segmentation_type_id",e.No_Regional_Blackout="no_regional_blackout_flag",e.Web_Delivery_Allowed="web_delivery_allowed_flag",e.Airing_ID="segmentation_upid",e.Duration="segmentation_duration"}(R||(R={})),function(e){e[e.Not_Indicated=0]="Not_Indicated",e[e.Content_Identification=1]="Content_Identification",e[e.Program_Start=16]="Program_Start",e[e.Program_End=17]="Program_End",e[e.Program_Early_Termination=18]="Program_Early_Termination",e[e.Program_Breakaway=19]="Program_Breakaway",e[e.Program_Resumption=20]="Program_Resumption",e[e.Program_Runover_Planned=21]="Program_Runover_Planned",e[e.Program_Runover_Unplanned=22]="Program_Runover_Unplanned",e[e.Program_Overlap_Start=23]="Program_Overlap_Start",e[e.Program_Blackout_Override=24]="Program_Blackout_Override",e[e.Program_Start_In_Progress=25]="Program_Start_In_Progress",e[e.Chapter_Start=32]="Chapter_Start",e[e.Chapter_End=33]="Chapter_End",e[e.Break_Start=34]="Break_Start",e[e.Break_End=35]="Break_End",e[e.Provider_Ad_Start=48]="Provider_Ad_Start",e[e.Provider_Ad_End=49]="Provider_Ad_End",e[e.Distributor_Ad_Start=50]="Distributor_Ad_Start",e[e.Distributor_Ad_End=51]="Distributor_Ad_End",e[e.Provider_Placement_Opp_Start=52]="Provider_Placement_Opp_Start",e[e.Provider_Placement_Opp_End=53]="Provider_Placement_Opp_End",e[e.Distributor_Placement_Opp_Start=54]="Distributor_Placement_Opp_Start",e[e.Distributor_Placement_Opp_End=55]="Distributor_Placement_Opp_End",e[e.Unscheduled_Event_Start=64]="Unscheduled_Event_Start",e[e.Unscheduled_Event_End=65]="Unscheduled_Event_End",e[e.Network_Start=80]="Network_Start",e[e.Network_End=81]="Network_End",e[e.Unknown=-1]="Unknown"}(I||(I={}));var L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"containsSegmentationType",value:function(t,n){return e.getSegmentationDescriptors(t,n).length>0}},{key:"getSegmentationDescriptors",value:function(e,t){var n=(null==e?void 0:e.splice_descriptors)||[];return n=n.filter((function(e){return e.type===w.Segmentation})),"number"==typeof t&&(n=n.filter((function(e){return e.segmentation_type_id===t}))),n}},{key:"getFirstSegmentationDescriptor",value:function(t,n){var r=e.getSegmentationDescriptors(t,n)[0];return r||null}},{key:"isChapterStart",value:function(t){return e.containsSegmentationType(t,I.Chapter_Start)}},{key:"isChapterEnd",value:function(t){return e.containsSegmentationType(t,I.Chapter_End)}},{key:"isProgramStart",value:function(t){return e.containsSegmentationType(t,I.Program_Start)}},{key:"isProgramEnd",value:function(t){return e.containsSegmentationType(t,I.Program_End)}},{key:"isProgramOverlapStart",value:function(t){return e.containsSegmentationType(t,I.Program_Overlap_Start)}},{key:"getChapterStart",value:function(t){return e.getFirstSegmentationDescriptor(t,I.Chapter_Start)}},{key:"getChapterEnd",value:function(t){return e.getFirstSegmentationDescriptor(t,I.Chapter_End)}},{key:"getProgramStart",value:function(t){return e.getFirstSegmentationDescriptor(t,I.Program_Start)}},{key:"getProgramEnd",value:function(t){return e.getFirstSegmentationDescriptor(t,I.Program_End)}},{key:"getProgramOverlapStart",value:function(t){return e.getFirstSegmentationDescriptor(t,I.Program_Overlap_Start)}},{key:"getTypeIdProp",value:function(e){return c.ObjectUtils.getOrElse(e,R.Type_ID,null)}},{key:"getRegionalBlackoutProp",value:function(e){var t=c.ObjectUtils.getOrElse(e,R.No_Regional_Blackout,null);return null===t?null:0===t}},{key:"getWebDeliveryAllowedProp",value:function(e){var t=c.ObjectUtils.getOrElse(e,R.Web_Delivery_Allowed,null);return null===t?null:0!==t}},{key:"getAiringIdProp",value:function(e){return c.ObjectUtils.getOrElse(e,R.Airing_ID,null)}},{key:"getDurationProp",value:function(e){return c.ObjectUtils.getOrElse(e,R.Duration,null)}}],(n=null)&&D(t.prototype,n),r&&D(t,r),e}();function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e){return c.ObjectUtils.get(e,"cue",e)}var U,x,B,V,q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"beforeTime",value:function(e,t){return e.data.range.start<t}},{key:"findNextChapterStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Array.isArray(e)||"number"!=typeof t)return null;var n=e.filter((function(e){return e.type===A.SCTE})).filter((function(e){return L.isChapterStart(e.data.content.metadata)})).filter((function(e){return e.data.range.start>=t})).sort((function(e,t){return e.data.range.start-t.data.range.start})),r=n[0];return r||null}},{key:"findPreviousChapterStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Array.isArray(e)||"number"!=typeof t)return null;var n=e.filter((function(e){return e.type===A.SCTE})).filter((function(e){return L.isChapterStart(e.data.content.metadata)})).filter((function(e){return e.data.range.start<=t})).sort((function(e,t){return e.data.range.start-t.data.range.start})),r=n[n.length-1];return r||null}},{key:"findNextChapterEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Array.isArray(e)||"number"!=typeof t)return null;var n=e.filter((function(e){return e.type===A.SCTE})).filter((function(e){return L.isChapterEnd(e.data.content.metadata)})).filter((function(e){return e.data.range.start>=t})).sort((function(e,t){return e.data.range.start-t.data.range.start})),r=n[0];return r||null}},{key:"findPreviousChapterEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Array.isArray(e)||"number"!=typeof t)return null;var n=e.filter((function(e){return e.type===A.SCTE})).filter((function(e){return L.isChapterEnd(e.data.content.metadata)})).filter((function(e){return e.data.range.start<=t})).sort((function(e,t){return e.data.range.start-t.data.range.start})),r=n[n.length-1];return r||null}},{key:"findChaptersInProgramBoundary",value:function(e,t,n){return t&&n?e.filter((function(e){return e.type===A.SCTE})).filter((function(e){var t=e.data.content.metadata;return L.isChapterStart(t)||L.isChapterEnd(t)})).filter((function(e){var r=e.data.range.start>=t.data.range.start,i=e.data.range.end<=n.data.range.start;return r&&i})).sort((function(e,t){return e.data.range.start-t.data.range.start})):[]}},{key:"findChaptersInActiveProgramBoundary",value:function(t,n){var r=e.findPreviousProgramStart(t,n),i=e.findNextProgramEnd(t,n);return r&&i?e.findChaptersInProgramBoundary(t,r,i):[]}},{key:"findNextProgramStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Array.isArray(e)||"number"!=typeof t)return null;var n=e.filter((function(e){return e.type===A.SCTE})).filter((function(e){return L.isProgramStart(e.data.content.metadata)})).filter((function(e){return e.data.range.start>=t})).sort((function(e,t){return e.data.range.start-t.data.range.start})),r=n[0];return r||null}},{key:"findPreviousProgramStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Array.isArray(e)||"number"!=typeof t)return null;var n=e.filter((function(e){return e.type===A.SCTE})).filter((function(e){return L.isProgramStart(e.data.content.metadata)})).filter((function(e){return e.data.range.start<=t})).sort((function(e,t){return e.data.range.start-t.data.range.start})),r=n[n.length-1];return r||null}},{key:"findNextProgramEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Array.isArray(e)||"number"!=typeof t)return null;var n=e.filter((function(e){return e.type===A.SCTE})).filter((function(e){return L.isProgramEnd(e.data.content.metadata)})).filter((function(e){return e.data.range.start>=t})).sort((function(e,t){return e.data.range.start-t.data.range.start})),r=n[0];return r||null}},{key:"findPreviousProgramEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Array.isArray(e)||"number"!=typeof t)return null;var n=e.filter((function(e){return e.type===A.SCTE})).filter((function(e){return L.isProgramEnd(e.data.content.metadata)})).filter((function(e){return e.data.range.start<=t})).sort((function(e,t){return e.data.range.start-t.data.range.start})),r=n[n.length-1];return r||null}},{key:"isChapterStart",value:function(e){var t=F(e);return!(t.type!==A.SCTE)&&L.isChapterStart(t.data.content.metadata)}},{key:"isChapterEnd",value:function(e){var t=F(e);return!(t.type!==A.SCTE)&&L.isChapterEnd(t.data.content.metadata)}},{key:"isProgramStart",value:function(e){var t=F(e);return!(t.type!==A.SCTE)&&L.isProgramStart(t.data.content.metadata)}},{key:"isProgramEnd",value:function(e){var t=F(e);return!(t.type!==A.SCTE)&&L.isProgramEnd(t.data.content.metadata)}},{key:"isProgramOverlapStart",value:function(e){var t=F(e);return!(t.type!==A.SCTE)&&L.isProgramOverlapStart(t.data.content.metadata)}}],(n=null)&&N(t.prototype,n),r&&N(t,r),e}();function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e.Content_Time="model.contentTime",e.Media_Time="model.mediaTime",e.Ad_Time="model.adTime"}(U||(U={})),function(e){e.Timed_Metadata="timedMetadata"}(x||(x={})),function(e){e[e.Null=0]="Null",e[e.Schedule=4]="Schedule",e[e.Insert=5]="Insert",e[e.Time_Signal=6]="Time_Signal",e[e.Bandwidth_Reservation=7]="Bandwidth_Reservation",e[e.Private=255]="Private"}(B||(B={})),function(e){e.EMSG="emsg",e.ID3="id3",e.CUETAG="cueTag",e.DATERANGE="dateRange",e.CUSTOM="custom",e.SCTE="scte",e.CAST="cast",e.EVENT_STREAM="eventStream"}(V||(V={}));var G=function(e){return"number"==typeof e},Y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"+";if(G(e)&&G(t))switch(n){case"+":return e+t;case"-":return e-t;default:return""}return"".concat(e,"(").concat(n,")").concat(t)},J=function(e,t){var n=[],r=0;return e.forEach((function(e){var i,o=null!==(i=e.startOffset)&&void 0!==i?i:0,a=e.duration,s=e.processTime,u=e.data,c=r+o,l=s?Y(c,s):void 0,d=c+a,f=s?Y(d,s):void 0,p=Y(t,c),h=l?Y(t,l):void 0,g=Y(t,d),y=f?Y(t,f):void 0;n.push(Q.createChapterStart({startTime:p,processTime:h,metadata:u}),Q.createChapterEnd({startTime:g,processTime:y,metadata:u})),r=d})),n},Q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"mocksEnabled",value:function(e){return e.debug.enableMocks&&e.debug.enabled}},{key:"createChapterBoundary",value:function(t){var n=t.offset,r=t.duration,i=t.processTime,o=t.metadata,a=Y(n,r),s=i?Y(i,r):void 0;return[e.createChapterStart({startTime:n,processTime:i,metadata:o}),e.createChapterEnd({startTime:a,processTime:s,metadata:o})]}},{key:"createChapterEnd",value:function(t){var n=t.metadata||{};return e.createSegmentationSCTE(I.Chapter_End,n,t.startTime,t.processTime)}},{key:"createChapterStart",value:function(t){var n=t.metadata||{};return e.createSegmentationSCTE(I.Chapter_Start,n,t.startTime,t.processTime)}},{key:"createProgramBoundary",value:function(t){var n=t.assetId,r=t.offset,i=t.duration,o=t.processTime,a=t.programChapters,s=[],u=Y(r,i),c=o?Y(o,i):void 0;return s.push(e.createProgramStart({assetId:n,startTime:r,processTime:o})),Array.isArray(a)&&s.push.apply(s,K(J(a,r))),s.push(e.createProgramEnd({assetId:n,startTime:u,processTime:c})),s}},{key:"createProgramBoundarySet",value:function(t){var n=t.assetIds,r=t.offset,i=t.duration,o=t.processTime,a=t.programChapters,s=[],u=0;return n.forEach((function(t){var n=u+i,c=Y(r,u),l=o?Y(o,u):void 0,d=Y(r,n),f=o?Y(o,n):void 0;if(s.push(e.createProgramStart({assetId:t,startTime:c,processTime:l})),void 0!==a){var p=a[t];Array.isArray(p)&&s.push.apply(s,K(J(p,c)))}s.push(e.createProgramEnd({assetId:t,startTime:d,processTime:f})),u+=i})),s}},{key:"createProgramEnd",value:function(t){return e.createSegmentationSCTE(I.Program_End,H({},R.Airing_ID,t.assetId),t.startTime,t.processTime)}},{key:"createProgramStart",value:function(t){return e.createSegmentationSCTE(I.Program_Start,H({},R.Airing_ID,t.assetId),t.startTime,t.processTime)}},{key:"createSegmentationSCTE",value:function(t,n,r,i){return e.createSCTE({command:B.Time_Signal,descriptors:H({},w[w.Segmentation],Object.assign({subType:t},n)),startTime:r,processTime:i})}},{key:"createSCTE",value:function(t){var n,r;return e.createTimedMetadata({metadataType:V.SCTE,metadata:{spliceType:t.command,descriptors:t.descriptors},startTime:t.startTime},H({},U.Content_Time,null!==(n=t.processTime)&&void 0!==n?n:t.startTime),H({},U.Content_Time,null!==(r=t.processTime)&&void 0!==r?r:t.startTime))}},{key:"createID3",value:function(t){var n,r;return e.createTimedMetadata({metadataType:V.ID3,metadata:{id:t.id,message:t.message},startTime:t.startTime},H({},U.Content_Time,null!==(n=t.processTime)&&void 0!==n?n:t.startTime),H({},U.Content_Time,null!==(r=t.processTime)&&void 0!==r?r:t.startTime))}},{key:"createTimedMetadata",value:function(e,t,n){return{type:x.Timed_Metadata,triggers:t,retriggers:n||{},data:e}}}],(n=null)&&z(t.prototype,n),r&&z(t,r),e}();function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $,Z,ee,te,ne,re,ie,oe,ae,se,ue,ce,le,de,fe,pe,he,ge,ye,ve,_e,me,be,Ce,Ee,Te,Se,Pe,Me,Oe,ke,Ae,we,Re,Ie,je,De,Le,Ne,Fe,Ue,xe,Be,Ve,qe,He,Ke=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dependencies=[]}var t,n,r;return t=e,(n=[{key:"libVersion",get:function(){return"2.5.0-1.rc.1"}},{key:"nexusVersion",get:function(){return"2.0.0-rc.5"}},{key:"dependencyVersions",get:function(){return this.dependencies},set:function(e){this.dependencies=e}},{key:"buildTime",get:function(){return 1630445788788..toString()}},{key:"buildTimeISO",get:function(){return"2021-08-31T21:36:28.788Z"}},{key:"commitSHA",get:function(){return"5494251cc"}},{key:"toString",value:function(){return"".concat(this.libVersion,"-").concat(this.buildTime,"-").concat(this.commitSHA)}}])&&X(t.prototype,n),r&&X(t,r),e}(),We=new Ke;!function(e){e.Unknown="unknown",e.Preroll="preroll",e.Midroll="midroll",e.Postroll="postroll"}($||($={})),function(e){e.PolicyError="policyerror",e.YospaceError="yospaceerror"}(Z||(Z={})),function(e){e.Pending="pending",e.Starting="starting",e.Loaded="loaded",e.Playing="playing",e.Paused="paused",e.Buffering="buffering",e.Stopped="stopped",e.Finished="finished"}(ee||(ee={})),function(e){e.Transaction_Initializing="transactionInitializing",e.Transaction_Details_Resolved="transactionDetailsResolved",e.Transaction_Initialized="transactionInitialized",e.Transaction_Preparing="transactionPreparing",e.Transaction_Transforming="transactionTransforming",e.Transaction_Waiting="transactionWaiting",e.Transaction_User_Action="transactionUserAction",e.Transaction_Media_Beginning="transactionMediaBeginning",e.MediaEngine_Started="mediaEngineStarted"}(te||(te={})),function(e){e.CMS_Resolution="cmsResolution",e.Transaction_Setup="transactionSetup",e.Transaction_Initialized="transactionInitialized",e.Content_Resolution="contentResolution",e.Total_Time_To_First_Frame="totalTimeToFirstFrame",e.Time_Waiting_For_User="timeWaitingForUser"}(ne||(ne={})),function(e){e.Spe="spe"}(re||(re={})),function(e){e.iSP="isp"}(ie||(ie={})),function(e){e.None="none",e.Full="full"}(oe||(oe={})),function(e){e.Unspecified="___",e.NetworkRequestFailure="000",e.NetworkConnectionLost="001",e.PlayerInitFailure="100",e.ViewAttachFailure="200",e.ViewDetachFailure="201",e.TransactionInitFailure="300",e.TransactionStateTransitionFailure="301",e.TransactionComponentSetupFailure="302",e.ContentResolutionFailure="500",e.ContentSelectionFailure="501",e.ContentSupportFailure="502",e.CDNTokenFailure="600",e.DRMTokenFailure="601",e.DRMAssetMetadataFailure="602",e.TokenMismatch="603",e.MaxAllowedStreamsExceeded="604",e.MaxAllowedRenewalsExceeded="605",e.AdPlaybackFailure="800",e.AdSessionTimeout="801",e.MediaPlaybackFailure="900",e.MediaContentFailure="901",e.MediaNetworkFailure="902",e.MediaDRMFailure="903",e.CaptionsStorageFailure="1000",e.AnalyticsDisabled="1100",e.AnalyticsConfigFailure="1101"}(ae||(ae={})),function(e){e.Unknown="UN",e.Player="PL",e.View="VW",e.Transaction="TR",e.Comp_Config="CCG",e.Comp_CMS="CCM",e.Comp_Auth="CAU",e.Comp_Timeline="CTM",e.Comp_Ads="CAD",e.Comp_Media="CME",e.Comp_Captions="CCC",e.Comp_Analytics="CAY",e.UI="UI"}(se||(se={})),function(e){e.CC1="cc1",e.CC2="cc2",e.CC3="cc3",e.CC4="cc4",e.Unknown="unknown"}(ue||(ue={})),function(e){e.English="english",e.Spanish="spanish",e.French="french",e.Deutsch="deutsch",e.Unknown="unknown"}(ce||(ce={})),function(e){e.User="user",e.System="system"}(le||(le={})),function(e){e.CEA_608="cea608",e.CEA_708="cea708",e.WebVTT="webvtt",e.SRT="srt",e.TTML="ttml",e.Unknown="unknown"}(de||(de={})),function(e){e.Pending="pending",e.Ready="ready",e.Changing_Track="changingTrack",e.Showing_Track="showingTrack",e.Disabled="disabled"}(fe||(fe={})),function(e){e.URL="top.cms.provider.url",e.MediaJSON="top.cms.provider.mediaJson"}(pe||(pe={})),function(e){e.Default="default",e.Black="black",e.Blue="blue",e.Cyan="cyan",e.Green="green",e.Magenta="magenta",e.Red="red",e.White="white",e.Yellow="yellow"}(he||(he={})),function(e){e.Analytics="analytics",e.Auth="auth",e.AuthDRM="authDRM",e.Captions="captions",e.CMS="cms",e.Cues="cues",e.Lifecycle="lifecycle",e.PlatformHelper="platformHelper",e.UI="ui",e.Video_Engine="videoEngine",e.Mocks="mocks",e.Custom="custom"}(ge||(ge={})),function(e){e.SDK_ID="tcf.IABTCF_CmpSdkID",e.SDK_VERSION="tcf.IABTCF_CmpSdkVersion",e.POLICY_VERSION="tcf.IABTCF_PolicyVersion",e.GDPR_APPLIES="tcf.IABTCF_gdprApplies",e.PUBLISHER_CC="tcf.IABTCF_PublisherCC",e.PURPOSE_ONE_TREATMENT="tcf.IABTCF_PurposeOneTreatment",e.TC_STRING="tcf.IABTCF_TCString",e.VENDOR_CONSENTS="tcf.IABTCF_VendorConsents",e.PURPOSE_CONSENTS="tcf.IABTCF_PurposeConsents",e.PUBLISHER_CONSENT="tcf.IABTCF_PublisherConsent"}(ye||(ye={})),function(e){e.Android_Tv="android_tv",e.Fire_Tv="fire_tv",e.Tv_Os="tv_os",e.Phone="phone",e.Tablet="tablet",e.Desktop="desktop",e.Console="console",e.Unknown="unknown"}(ve||(ve={})),function(e){e.Manifest="manifest",e.Metadata="metadata"}(_e||(_e={})),function(e){e.Default="default",e.None="none",e.Raised="raised",e.Depressed="depressed",e.Uniform="uniform",e.Drop_Shadow_Left="dropShadowLeft",e.Drop_Shadow_Right="dropShadowRight"}(me||(me={})),function(e){e.Error="error",e.Warn="warn",e.Fatal="fatal"}(be||(be={})),function(e){e.Default="default",e.Monospaced_With_Serifs="monospacedWithSerifs",e.Monospaced_Without_Serifs="monospacedWithoutSerifs",e.Proportional_With_Serifs="proportionalWithSerifs",e.Proportional_Without_Serifs="proportionalWithoutSerifs",e.Casual="casual",e.Cursive="cursive",e.Small_Capitals="smallCapitals"}(Ce||(Ce={})),function(e){e.Playback="playback",e.FocusLost="focusLost",e.Background="background",e.Unload="unload"}(Ee||(Ee={})),function(e){e.Continue="continue",e.Pause="pause",e.Unload="unload"}(Te||(Te={})),function(e){e.Approaching="approaching",e.Activated="activated",e.Finishing="finishing",e.Deactivated="deactivated"}(Se||(Se={})),function(e){e.Media="media",e.Ad_Break="adBreak"}(Pe||(Pe={})),function(e){e.TV="tv",e.Desktop="desktop",e.Tablet="tablet",e.Phone="phone"}(Me||(Me={})),function(e){e.Pending="pending",e.Starting="starting",e.Loaded="loaded",e.Playing="playing",e.Paused="paused",e.Buffering="buffering",e.Seeking="seeking",e.Stopped="stopped",e.Finished="finished",e.Error="error"}(Oe||(Oe={})),function(e){e.V1="v1",e.V2="v2"}(ke||(ke={})),function(e){e.Model_Updated="modelUpdated"}(Ae||(Ae={})),function(e){e.Root_Container="rootContainer",e.Sub_Container="subContainer",e.Player_State="playerState",e.Content_State="contentState",e.View_State="viewState",e.Lifecycle_State="lifecycleState",e.Config="config",e.Playlist_Item="playlistItem",e.Volume="volume",e.Muted="muted",e.Timeline_Time="timelineTime",e.Timeline_Markers="timelineMarkers",e.Current_Ad_Break="currentAdBreak",e.Current_Ad_Creative="currentAdCreative",e.Ad_Breaks="adBreaks",e.Media_State="mediaState",e.Media_Time="mediaTime",e.Media_Duration="mediaDuration",e.Content_Seekable_Range="contentSeekableRange",e.Content_Is_Live="contentIsLive",e.Content_Buffered_Range="contentBufferedRange",e.Caption_State="captionState",e.Caption_Tracks="captionTracks",e.Caption_Cues="captionCues",e.Caption_Settings="captionSettings",e.Analytic_Marks="analyticMarks",e.Analytic_Measures="analyticMeasures",e.Timed_Metadata_Cues="timedMetadataCues"}(we||(we={})),function(e){e.Overwrite="overwrite",e.Extend="extend",e.Array_Append="arrayAppend",e.Array_Remove_By_Position="arrayRemoveByPos"}(Re||(Re={})),function(e){e.Component_Event="componentEventCategory"}(Ie||(Ie={})),function(e){e.Video_Engine="videoEngineModule",e.Timeline="timelineModule",e.Captions="captionsModule",e.Lifecycle="lifecycleModule",e.Analytics="analyticsModule",e.Cues="cuesModule",e.UI="uiModule",e.Mocks="mocksModule",e.Auth="authModule"}(je||(je={})),function(e){e.Default="default",e.Opacity_0="opacity0",e.Opacity_25="opacity25",e.Opacity_50="opacity50",e.Opacity_75="opacity75",e.Opacity_100="opacity100"}(De||(De={})),function(e){e.Attach="attach",e.Detach="detach",e.Update_Config="update_config",e.Preload_Content="preload_content",e.Play="play",e.Proceed="proceed",e.Pause="pause",e.Resume="resume",e.Seek="seek",e.Seek_To_Live="seek_to_live",e.Resize="resize",e.Captions_Select_Track="captionsSelectTrack",e.Captions_Select_Track_By_Lang="captionsSelectTrackByLang",e.Captions_Set_Enabled="captionsSetEnabled",e.Captions_Update_Settings="captionsUpdateSettings",e.Enter_Fullscreen="enter_fullscreen",e.Exit_Fullscreen="exit_fullscreen",e.Set_Player_Mode="set_player_mode",e.Send_Message_To_UI="sendMessageToUI",e.Message_From_UI="messageFromUI",e.Stop="stop",e.Replay="replay",e.Report_Event="report_event",e.Report_Error="report_error",e.Destroy="destroy",e.Ad_Clicked="ad_clicked"}(Le||(Le={})),function(e){e.Model_Updated="modelUpdated",e.Player_Error="playerError",e.Player_State_Changed="playerStateChanged",e.Player_Initialized="playerInitialized",e.Player_Ready="playerReady",e.Player_Listening="playerListening",e.Content_State_Changed="contentStateChanged",e.Content_Beginning="contentBeginning",e.Content_Setup="contentSetup",e.Content_Waiting="contentWaiting",e.Volume_Changed="volumeChanged",e.Mute_Changed="muteChanged",e.Media_Command_Received="mediaCommandReceived",e.Media_Command_Rejected="mediaCommandRejected",e.Media_State_Changed="mediaStateChanged",e.Media_Ready="mediaReady",e.Media_Starting="mediaStarting",e.Media_Blocked="mediaBlocked",e.Media_Loaded="mediaLoaded",e.Media_Started="mediaStarted",e.Media_Buffering_Started="mediaBufferingStarted",e.Media_Buffering_Finished="mediaBufferingFinished",e.Media_Seeking_Started="mediaSeekingStarted",e.Media_Seeking_Finished="mediaSeekingFinished",e.Media_Request_Profile_Changed="mediaRequestProfileChanged",e.Media_Profile_Changed="mediaProfileChanged",e.Media_Time_Changed="mediaTimeChanged",e.Media_Paused="mediaPaused",e.Media_Resumed="mediaResumed",e.Media_Recovery_Started="mediaRecoveryStarted",e.Media_Recovery_Finished="mediaRecoveryFinished",e.Media_Resized="mediaResized",e.Media_Stopped="mediaStopped",e.Media_Timed_Metadata_Parsed="mediaTimedMetadataParsed",e.Media_Timed_Metadata_Received="mediaTimedMetadataReceived",e.Media_Finished="mediaFinished",e.Media_Error="mediaError",e.Media_Stalled="mediaStalled",e.Media_Audio_Track_Availability_Changed="mediaAudioTrackAvailabilityChanged",e.Media_Audio_Track_Selected="mediaAudioTrackSelected",e.Ad_State_Changed="adStateChanged",e.Ad_Starting="adStarting",e.Ad_Started="adStarted",e.Ad_Blocked="adBlocked",e.Ad_Loaded="adLoaded",e.Ad_Creative_Started="adCreativeStarted",e.Ad_Time_Changed="adTimeChanged",e.Ad_Paused="adPaused",e.Ad_Resumed="adResumed",e.Ad_Stopped="adStopped",e.Ad_Creative_Ended="adCreativeEnded",e.Ad_Finished="adFinished",e.Ad_Error="adError",e.Timeline_Marker_Added="timelineMarkerAdded",e.Timeline_Marker_Approaching="timelineMarkerApproaching",e.Timeline_Marker_Activated="timelineMarkerActivated",e.Timeline_Marker_Finishing="timelineMarkerFinishing",e.Timeline_Marker_Deactivated="timelineMarkerDeactivated",e.Timeline_Marker_Removed="timelineMarkerRemoved",e.Lifecycle_State_Changed="lifecycleStateChanged",e.Captions_State_Changed="captionsStateChanged",e.Caption_Settings_Updated="captionSettingsUpdated",e.Caption_Track_Added="captionTrackAdded",e.Caption_Track_Removed="captionTrackRemoved",e.Caption_Track_Selected="captionTrackSelected",e.Caption_Track_Deselected="captionTrackDeselected",e.Caption_Cue_Parsed="captionCueParsed",e.Caption_Cue_Entered="captionCueEntered",e.Caption_Cue_Exited="captionCueExited",e.Caption_Cue_Updated="captionCueUpdated",e.Cue_State_Changed="cueStateChanged",e.Cue_Processed="cueProcessed",e.Cue_Activated="cueActivated",e.Content_Interrupted="contentInterrupted",e.Content_Completed="contentCompleted",e.Content_Error="contentError",e.Content_Ended="contentEnded",e.View_State_Changed="viewStateChanged",e.View_Mode_Changed="viewModeChanged",e.Message_To_UI="messageToUI",e.Message_From_UI="messageFromUI",e.Mock_Message_Triggered="mockMessageTriggered",e.Token_Response_Received="tokenResponseReceived"}(Ne||(Ne={})),function(e){e.MediaControls="mediaControls",e.CloseAd="closeAd",e.NotVisible="notVisible",e.Other="other"}(Fe||(Fe={})),function(e){e.Check_Auto_Play="checkAutoPlay",e.Check_GDPR_Consent="checkGDPRConsent",e.Add_Platform_Metadata="addPlatformMetadata",e.Auth_Refresh="authRefresh",e.Validate_Content_Resolution="validateContentResolution",e.Validate_DRM_Token_Request="validateDRMTokenRequest",e.Validate_DRM_Token_Response="validateDRMTokenResponse"}(Ue||(Ue={})),function(e){e.Pending="playerPending",e.Initializing="playerInitializing",e.Initialized="playerInitialized",e.Attaching="playerAttaching",e.Attached="playerAttached",e.Listening="playerListening",e.Detaching="playerDetaching",e.Detached="playerDetached",e.Destroying="playerDestroying",e.Destroyed="playerDestroyed",e.Error="playerError"}(xe||(xe={})),function(e){e.Inline="inline",e.Fullscreen="fullscreen"}(Be||(Be={})),function(e){e.Default="default",e.Small="small",e.Medium="medium",e.Large="large"}(Ve||(Ve={})),function(e){e.Yes="1",e.No="0",e.Unknown="-1"}(qe||(qe={})),function(e){e.V1="v1",e.V2="v2"}(He||(He={}));var ze,Ge,Ye,Je,Qe,Xe,$e,Ze,et,tt,nt,rt,it,ot,at,st,ut,ct,lt,dt,ft,pt,ht,gt,yt=He.V1;!function(e){e.Feature_CCPA="features.ccpa",e.Feature_GDPR="features.gdpr",e.Feature_TVE="features.tve",e.Auth="auth",e.AuthCDN="auth.cdn",e.AuthDRM="auth.drm",e.Ads="ads",e.Analytics="analytics",e.Analytics_Bitmovin="analytics.bitmovin",e.Analytics_Conviva="analytics.conviva",e.Analytics_Comscore="analytics.comscore",e.DRM="drm",e.DRM_Widevine="drm.widevine",e.DRM_Playready="drm.playready",e.DRM_Fairplay="drm.fairplay",e.Lifecycle="lifecycle",e.Monitors_Live_Ads_Session="monitors.liveAdSession",e.Monitors_Content_Stall="monitors.contentStall",e.Monitors_Prune="monitors.prune",e.UI="ui",e.Debug="debug"}(ze||(ze={})),function(e){e.Module_Notification="moduleNotification",e.State_Changed="stateChanged",e.Config_Updated="configUpdated"}(Ge||(Ge={})),function(e){e.Pending="pending",e.Initializing="initializing",e.Preparing="preparing",e.Transforming="transforming",e.Initialized="initialized",e.Waiting="waiting",e.Validating="validating",e.Validated="validated",e.Ads_Beginning="adsBeginning",e.Ads_Playback="adsPlayback",e.Ads_Completed="adsCompleted",e.Authorizing="authorizing",e.Authorized="authorized",e.Media_Beginning="mediaBeginning",e.Media_Playback="mediaPlayback",e.Media_Completed="mediaCompleted",e.Interrupting="interrupting",e.Interrupted="interrupted",e.Finished="finished",e.Error="error",e.Ending="ending",e.Ended="ended"}(Ye||(Ye={})),function(e){e.Handle_DRM_Token_Request="handleDRMTokenRequest",e.Handle_Time_Changed="handleTimeChanged",e.Handle_Paused="handlePaused",e.Handle_Resumed="handleResumed",e.Handle_Mute_Changed="handleMuteChanged",e.Handle_Stopped="handleStopped",e.Handle_Media_Ready="handleMediaReady",e.Handle_Media_Starting="handleMediaStarting",e.Handle_Media_Blocked="handleMediaBlocked",e.Handle_Media_Loaded="handleMediaLoaded",e.Handle_Media_Request_Profile_Changed="handleMediaRequestProfileChanged",e.Handle_Media_Profile_Changed="handleMediaProfileChanged",e.Handle_Media_Buffering_Started="handleMediaBufferingStarted",e.Handle_Media_Buffering_Finished="handleMediaBufferingFinished",e.Handle_Media_Started="handleMediaStarted",e.Handle_Media_Seeking_Started="handleMediaSeekingStarted",e.Handle_Media_Seeking_Finished="handleMediaSeekingFinished",e.Handle_Media_Volume_Changed="handleMediaVolumeChanged",e.Handle_Media_Resized="handleMediaResized",e.Handle_Media_Timed_Metadata_Parsed="handleMediaTimedMetadataParsed",e.Handle_Media_Timed_Metadata_Received="handleMediaTimedMetadataReceived",e.Handle_Media_Audio_Track_Availability_Changed="handleMediaAudioTrackAvailabilityChanged",e.Handle_Media_Audio_Track_Selected="handleMediaAudioTrackSelected",e.Handle_Media_Finished="handleMediaFinished",e.Handle_Media_Stalled="handleMediaStalled",e.Handle_Media_Error="handleMediaError",e.Handle_Ad_Break_List_Change="handleAdBreakListChange",e.Handle_Ad_Starting="handleAdStarting",e.Handle_Ad_Started="handleAdStarted",e.Handle_Ad_Blocked="handleAdBlocked",e.Handle_Ad_Loaded="handleAdLoaded",e.Handle_Ad_Creative_Started="handleAdCreativeStarted",e.Handle_Ad_Creative_Ended="handleAdCreativeEnded",e.Handle_Ad_Finished="handleAdFinished",e.Handle_Ad_Error="handleAdError",e.Handle_Caption_Track="handleCaptionTrack",e.Handle_Caption_Cue="handleCaptionCue",e.Handle_Remote_Playback="handleRemotePlayback"}(Je||(Je={})),function(e){e.Model_Update_Request="modelUpdateRequest",e.DRM_Token_Request="drmTokenRequest",e.Volume_Changed="mediaVolumeChanged",e.Mute_Changed="mediaMuteChanged",e.Media_Command_Received="mediaCommandReceived",e.Media_Command_Rejected="mediaCommandRejected",e.Media_State_Changed="mediaStateChanged",e.Media_Ready="mediaReady",e.Media_Starting="mediaStarting",e.Media_Blocked="mediaBlocked",e.Media_Loaded="mediaLoaded",e.Media_Started="mediaStarted",e.Media_Buffering_Started="mediaBufferingStarted",e.Media_Buffering_Finished="mediaBufferingFinished",e.Media_Seeking_Started="mediaSeekingStarted",e.Media_Seeking_Finished="mediaSeekingFinished",e.Media_Request_Profile_Changed="mediaRequestProfileChanged",e.Media_Profile_Changed="mediaProfileChanged",e.Media_Time_Changed="mediaTimeChanged",e.Media_Paused="mediaPaused",e.Media_Resumed="mediaResumed",e.Media_Recovery_Started="mediaRecoveryStarted",e.Media_Recovery_Finished="mediaRecoveryFinished",e.Media_Resized="mediaResized",e.Media_Stopped="mediaStopped",e.Media_Timed_Metadata_Parsed="mediaTimedMetadataParsed",e.Media_Timed_Metadata_Received="mediaTimedMetadataReceived",e.Media_Audio_Track_Availability_Changed="mediaAudioTrackAvailabilityChanged",e.Media_Audio_Track_Selected="mediaAudioTrackSelected",e.Media_Finished="mediaFinished",e.Media_Error="mediaError",e.Media_Stalled="mediaStalled",e.Ad_State_Changed="adStateChanged",e.Ad_Starting="adStarting",e.Ad_Started="adStarted",e.Ad_Buffering_Started="adBufferingStarted",e.Ad_Buffering_Finished="adBufferingFinished",e.Ad_Blocked="adBlocked",e.Ad_Loaded="adLoaded",e.Ad_Creative_Started="adCreativeStarted",e.Ad_Time_Changed="adTimeChanged",e.Ad_Paused="adPaused",e.Ad_Resumed="adResumed",e.Ad_Stopped="adStopped",e.Ad_Creative_Ended="adCreativeEnded",e.Ad_Finished="adFinished",e.Ad_Error="adError",e.Caption_Track_Added="captionTrackAdded",e.Caption_Track_Removed="captionTrackRemoved",e.Caption_Track_Selected="captionTrackSelected",e.Caption_Track_Deselected="captionTrackDeselected",e.Caption_Cue_Parsed="captionCueParsed",e.Caption_Cue_Entered="captionCueEntered",e.Caption_Cue_Exited="captionCueExited",e.Caption_Cue_Updated="captionCueUpdated",e.Remote_Playback_Selected="remotePlaybackSelected",e.Remote_Playback_Deselected="remotePlaybackDeselected"}(Qe||(Qe={})),function(e){e.EMBEDDED="embedded",e.TAG="tag",e.OTHER="other"}(Xe||(Xe={})),function(e){e.Pending="pending",e.Windowed="windowed",e.Fullscreen="fullscreen",e.Remote="remote"}($e||($e={})),function(e){e.Pending="pending",e.Creating="creating",e.Created="created",e.Attaching="attaching",e.Attached="attached",e.Windowed="windowed",e.Entering_Fullscreen="enteringFullscreen",e.Fullscreen="fullscreen",e.Exiting_Fullscreen="exitingFullscreen",e.Entering_Remote="enteringRemote",e.Remote="remote",e.Exiting_Remote="exitingRemote",e.Detaching="detaching",e.Detached="detached",e.Destroying="destroying",e.Destroyed="destroyed",e.Error="error"}(Ze||(Ze={})),function(e){e.State_Changed="stateChanged",e.Processed="processed",e.Activated="activated"}(et||(et={})),function(e){e.Embedded="embedded",e.Manifest="manifest",e.Unknown="unknown"}(tt||(tt={})),function(e){e.Pending="pending",e.Processing="processing",e.Processed="processed",e.Listening="listening",e.Activated="activated",e.Completed="completed"}(nt||(nt={})),function(e){e.Widevine="widevine",e.Fairplay="fairplay",e.Playready="playready"}(rt||(rt={})),function(e){e.Unknown="UN",e.Nexus="NX",e.Target="TA",e.Shared="SH",e.Native_Service="NS"}(it||(it={})),function(e){e.Unknown="00",e.Web="01",e.iOS="02",e.Android="03",e.React_Native="04"}(ot||(ot={})),function(e){e.Provider_Does_Not_Exist="The GDPR Transparency and Consent Framework does not exist.",e.Request_Timeout="Request for the GDPR consent data timed out. Ensure to accept the prompt displayed by the CMP provider.",e.Request_Error="There was an error when retrieving the GDPR consent data.",e.Mismatch_Error="The configured GDPR Transparency and Consent Framework version does not match the version available."}(at||(at={})),function(e){e.Default="default",e.None="none",e.Toggle_Pause="togglePause",e.Toggle_Controls="toggleControls"}(st||(st={})),function(e){e.Controls="controls",e.Slates="slates",e.Containers="containers"}(ut||(ut={})),function(e){e.Root_Surface="RootSurface"}(ct||(ct={})),function(e){e.Left="left",e.Right="right",e.Center="center",e.Top_Left="topLeft",e.Top_Right="topRight"}(lt||(lt={})),function(e){e.Play="Play",e.Volume="Volume",e.Closed_Captions="ClosedCaptions",e.Time_Duration="TimeDuration",e.Fullscreen="Fullscreen",e.Progress_Bar="ProgressBar",e.Live="Live",e.Air_Play="AirPlay"}(dt||(dt={})),function(e){e.Live="LIVE",e.VOD="VOD",e.Live_No_DVR="LIVE_NO_DVR"}(ft||(ft={})),function(e){e.Giant_Play="GiantPlaySlate",e.Start="StartSlate",e.Buffering="BufferingSlate",e.End="EndSlate",e.Ad="AdSlate",e.Media_Playback="MediaPlaybackSlate"}(pt||(pt={})),function(e){e.Default="default"}(ht||(ht={})),function(e){e[e.LongFormOnDemand=0]="LongFormOnDemand",e[e.ShortFormOnDemand=1]="ShortFormOnDemand",e[e.Live=2]="Live",e[e.UserGeneratedLongFormOnDemand=3]="UserGeneratedLongFormOnDemand",e[e.UserGeneratedShortFormOnDemand=4]="UserGeneratedShortFormOnDemand",e[e.UserGeneratedLive=5]="UserGeneratedLive",e[e.Bumper=6]="Bumper",e[e.Other=7]="Other"}(gt||(gt={}))},function(module,exports,__webpack_require__){var e;window,e=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=69)}([function(e,t,n){"use strict";n.r(t);var r=Array.isArray;t.default=r},function(e,t,n){"use strict";t.a=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";n.r(t),t.default=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";var r=n(54),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();t.a=o},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return a}));var r=function(e){return e},i=function(e){return function(t){return function(n,r){return e(t(n),t(r))}}},o=function(e,t){var n=e.length;if(0===n)return t;var r=t.length;if(0===r)return e;for(var i=Array(n+r),o=0;o<n;o++)i[o]=e[o];for(o=0;o<r;o++)i[o+n]=t[o];return i},a=function(e){if("string"==typeof e)return JSON.stringify(e);if(e instanceof Date)return"new Date('"+e.toISOString()+"')";if(Array.isArray(e))return"["+e.map(a).join(", ")+"]";if("function"==typeof e)return(t=e).displayName||t.name||"<function"+t.length+">";var t;if(null==e)return String(e);if("function"==typeof e.toString&&e.toString!==Object.prototype.toString)return e.toString();try{return JSON.stringify(e,null,2)}catch(t){return String(e)}}},function(e,t,n){"use strict";var r=n(6),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r.a?r.a.toStringTag:void 0,u=Object.prototype.toString,c=r.a?r.a.toStringTag:void 0;t.a=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}(e):function(e){return u.call(e)}(e)}},function(e,t,n){"use strict";var r=n(3).a.Symbol;t.a=r},function(e,t,n){"use strict";var r,i=n(30),o=n(3).a["__core-js_shared__"],a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",s=n(2),u=n(17),c=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,f=l.toString,p=d.hasOwnProperty,h=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=function(e){return!(!Object(s.default)(e)||function(e){return!!a&&a in e}(e))&&(Object(i.default)(e)?h:c).test(Object(u.a)(e))};t.a=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return g(n)?n:void 0}},function(e,t,n){"use strict";var r=n(21),i=n(39);t.a=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?Object(i.a)(n,c,l):Object(r.a)(n,c,l)}return n}},function(e,t,n){"use strict";t.a=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(30),i=n(37);t.a=function(e){return null!=e&&Object(i.a)(e.length)&&!Object(r.default)(e)}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(116)),r(n(119)),r(n(81)),r(n(120)),r(n(73)),r(n(124)),r(n(82)),r(n(125)),r(n(127)),r(n(74)),r(n(128))},function(e,t,n){"use strict";var r,i,o,a,s,u,c;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Enabled="enabled",e.Theme="theme",e.Instances="loggerInstances",e.Targets="targets",e.Sources="sources",e.Categories="categories",e.Levels="levels"}(r||(r={})),t.LogDataProperty=r,function(e){e.Unsourced=""}(i||(i={})),t.LogSourceType=i,function(e){e.Verbose="verbose",e.Debug="debug",e.Info="info",e.Warn="warn",e.Error="error"}(o||(o={})),t.LogLevelType=o,function(e){e.All="all",e.Dev="dev"}(a||(a={})),t.LogLevelCompositeType=a,function(e){e.Light="light",e.Dark="dark"}(s||(s={})),t.LogTheme=s,function(e){e.All="all"}(u||(u={})),t.LogSourceCompositeType=u,function(e){e.All="all"}(c||(c={})),t.LogCategoryCompositeType=c},function(e,t,n){"use strict";(function(e){var r=n(3),i=n(110),o=exports&&!exports.nodeType&&exports,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.a.Buffer:void 0,u=(s?s.isBuffer:void 0)||i.a;t.a=u}).call(this,n(72)(e))},function(e,t,n){"use strict";var r=n(7),i=n(3),o=Object(r.a)(i.a,"DataView"),a=n(26),s=Object(r.a)(i.a,"Promise"),u=n(29),c=Object(r.a)(i.a,"WeakMap"),l=n(5),d=n(17),f=Object(d.a)(o),p=Object(d.a)(a.a),h=Object(d.a)(s),g=Object(d.a)(u.a),y=Object(d.a)(c),v=l.a;(o&&"[object DataView]"!=v(new o(new ArrayBuffer(1)))||a.a&&"[object Map]"!=v(new a.a)||s&&"[object Promise]"!=v(s.resolve())||u.a&&"[object Set]"!=v(new u.a)||c&&"[object WeakMap]"!=v(new c))&&(v=function(e){var t=Object(l.a)(e),n="[object Object]"==t?e.constructor:void 0,r=n?Object(d.a)(n):"";if(r)switch(r){case f:return"[object DataView]";case p:return"[object Map]";case h:return"[object Promise]";case g:return"[object Set]";case y:return"[object WeakMap]"}return t}),t.a=v},function(e,t,n){"use strict";var r=n(5),i=n(1),o=function(e){return Object(i.a)(e)&&"[object Arguments]"==Object(r.a)(e)},a=Object.prototype,s=a.hasOwnProperty,u=a.propertyIsEnumerable,c=o(function(){return arguments}())?o:function(e){return Object(i.a)(e)&&s.call(e,"callee")&&!u.call(e,"callee")};t.a=c},function(e,t,n){"use strict";(function(e){var r=n(54),i=exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.a.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();t.a=s}).call(this,n(72)(e))},function(e,t,n){"use strict";var r=Function.prototype.toString;t.a=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){"use strict";t.a=function(e){return function(t){return e(t)}}},function(e,t,n){"use strict";var r=/^(?:0|[1-9]\d*)$/;t.a=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){"use strict";var r=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){"use strict";var r=n(39),i=n(9),o=Object.prototype.hasOwnProperty;t.a=function(e,t,n){var a=e[t];o.call(e,t)&&Object(i.a)(a,n)&&(void 0!==n||t in e)||Object(r.a)(e,t,n)}},function(e,t,n){"use strict";var r=n(5),i=n(1);t.a=function(e){return"symbol"==typeof e||Object(i.a)(e)&&"[object Symbol]"==Object(r.a)(e)}},function(e,t,n){"use strict";var r=n(9),i=function(e,t){for(var n=e.length;n--;)if(Object(r.a)(e[n][0],t))return n;return-1},o=Array.prototype.splice;function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}a.prototype.clear=function(){this.__data__=[],this.size=0},a.prototype.delete=function(e){var t=this.__data__,n=i(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))},a.prototype.get=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]},a.prototype.has=function(e){return i(this.__data__,e)>-1},a.prototype.set=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},t.a=a},function(e,t,n){"use strict";var r=n(67),i=n(20),o=n(58),a=Object(o.a)(Object.keys,Object),s=Object.prototype.hasOwnProperty,u=n(10);t.a=function(e){return Object(u.a)(e)?Object(r.a)(e):function(e){if(!Object(i.a)(e))return a(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}},function(e,t,n){"use strict";var r=n(67),i=n(2),o=n(20),a=Object.prototype.hasOwnProperty,s=function(e){if(!Object(i.default)(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Object(o.a)(e),n=[];for(var r in e)("constructor"!=r||!t&&a.call(e,r))&&n.push(r);return n},u=n(10);t.a=function(e){return Object(u.a)(e)?Object(r.a)(e,!0):s(e)}},function(e,t,n){"use strict";var r=n(7),i=n(3),o=Object(r.a)(i.a,"Map");t.a=o},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(31);function i(e){return{equals:function(t,n){return t===n||e(t,n)}}}var o={equals:function(e,t){return e===t}},a=o,s=o,u=o,c={URI:"Eq",contramap:function(e,t){return i((function(n,r){return e.equals(t(n),t(r))}))}};Object(r.pipeable)(c).contramap,c.contramap(s,(function(e){return e.valueOf()}))},function(e,t,n){"use strict";var r=n(23),i=n(26),o=n(32);function a(e){var t=this.__data__=new r.a(e);this.size=t.size}a.prototype.clear=function(){this.__data__=new r.a,this.size=0},a.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},a.prototype.get=function(e){return this.__data__.get(e)},a.prototype.has=function(e){return this.__data__.has(e)},a.prototype.set=function(e,t){var n=this.__data__;if(n instanceof r.a){var a=n.__data__;if(!i.a||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o.a(a)}return n.set(e,t),this.size=n.size,this},t.a=a},function(e,t,n){"use strict";var r=n(7),i=n(3),o=Object(r.a)(i.a,"Set");t.a=o},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(2);t.default=function(e){if(!Object(i.default)(e))return!1;var t=Object(r.a)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){"use strict";n.r(t),n.d(t,"pipe",(function(){return i})),n.d(t,"pipeable",(function(){return o}));var r=n(4);function i(e,t,n,r,i,o,a,s,u,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return o(i(r(n(t(e)))));case 7:return a(o(i(r(n(t(e))))));case 8:return s(a(o(i(r(n(t(e)))))));case 9:return u(s(a(o(i(r(n(t(e))))))));case 10:return c(u(s(a(o(i(r(n(t(e)))))))))}}function o(e){var t={};return function(e){return"function"==typeof e.map}(e)&&(t.map=function(t){return function(n){return e.map(n,t)}}),function(e){return"function"==typeof e.contramap}(e)&&(t.contramap=function(t){return function(n){return e.contramap(n,t)}}),function(e){return"function"==typeof e.mapWithIndex}(e)&&(t.mapWithIndex=function(t){return function(n){return e.mapWithIndex(n,t)}}),function(e){return"function"==typeof e.ap}(e)&&(t.ap=function(t){return function(n){return e.ap(n,t)}},t.apFirst=function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}),function(e){return"function"==typeof e.chain}(e)&&(t.chain=function(t){return function(n){return e.chain(n,t)}},t.chainFirst=function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}},t.flatten=function(t){return e.chain(t,r.b)}),function(e){return"function"==typeof e.bimap}(e)&&(t.bimap=function(t,n){return function(r){return e.bimap(r,t,n)}},t.mapLeft=function(t){return function(n){return e.bimap(n,t,r.b)}}),function(e){return"function"==typeof e.extend}(e)&&(t.extend=function(t){return function(n){return e.extend(n,t)}},t.duplicate=function(t){return e.extend(t,r.b)}),function(e){return"function"==typeof e.reduce}(e)&&(t.reduce=function(t,n){return function(r){return e.reduce(r,t,n)}},t.foldMap=function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}},t.reduceRight=function(t,n){return function(r){return e.foldr(r,t,n)}}),function(e){return"function"==typeof e.reduceWithIndex}(e)&&(t.reduceWithIndex=function(t,n){return function(r){return e.reduceWithIndex(r,t,n)}},t.foldMapWithIndex=function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}},t.reduceRightWithIndex=function(t,n){return function(r){return e.foldrWithIndex(r,t,n)}}),function(e){return"function"==typeof e.alt}(e)&&(t.alt=function(t){return function(n){return e.alt(n,t())}}),function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)&&(t.filter=function(t){return function(n){return e.filter(n,t)}},t.filterMap=function(t){return function(n){return e.filterMap(n,t)}},t.partition=function(t){return function(n){return e.partition(n,t)}},t.partitionMap=function(t){return function(n){return e.partitionMap(n,t)}}),function(e){return"function"==typeof e.filterWithIndex}(e)&&(t.filterWithIndex=function(t){return function(n){return e.filterWithIndex(n,t)}},t.filterMapWithIndex=function(t){return function(n){return e.filterMapWithIndex(n,t)}},t.partitionWithIndex=function(t){return function(n){return e.partitionWithIndex(n,t)}},t.partitionMapWithIndex=function(t){return function(n){return e.partitionMapWithIndex(n,t)}}),function(e){return"function"==typeof e.promap}(e)&&(t.promap=function(t,n){return function(r){return e.promap(r,t,n)}}),function(e){return"function"==typeof e.compose}(e)&&(t.compose=function(t){return function(n){return e.compose(n,t)}}),function(e){return"function"==typeof e.throwError}(e)&&(t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.value):e.of(t.value)},t.fromPredicate=function(t,n){return function(r){return t(r)?e.of(r):e.throwError(n(r))}},t.filterOrElse=function(t,n){return function(r){return e.chain(r,(function(r){return t(r)?e.of(r):e.throwError(n(r))}))}}),t}},function(e,t,n){"use strict";var r=n(7),i=Object(r.a)(Object,"create"),o=Object.prototype.hasOwnProperty,a=Object.prototype.hasOwnProperty;function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=function(){this.__data__=i?i(null):{},this.size=0},s.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},s.prototype.get=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0},s.prototype.has=function(e){var t=this.__data__;return i?void 0!==t[e]:a.call(t,e)},s.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this};var u=s,c=n(23),l=n(26),d=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}f.prototype.clear=function(){this.size=0,this.__data__={hash:new u,map:new(l.a||c.a),string:new u}},f.prototype.delete=function(e){var t=d(this,e).delete(e);return this.size-=t?1:0,t},f.prototype.get=function(e){return d(this,e).get(e)},f.prototype.has=function(e){return d(this,e).has(e)},f.prototype.set=function(e,t){var n=d(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},t.a=f},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(114)),r(n(135)),r(n(136)),r(n(97)),r(n(95)),r(n(92)),r(n(93)),r(n(96)),r(n(12))},function(e,t,n){"use strict";t.a=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){"use strict";t.a=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){"use strict";t.a=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){"use strict";t.a=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){"use strict";var r=n(58),i=Object(r.a)(Object.getPrototypeOf,Object);t.a=i},function(e,t,n){"use strict";var r=n(46);t.a=function(e,t,n){"__proto__"==t&&r.a?Object(r.a)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){"use strict";var r=n(47);t.a=function(e){var t=new e.constructor(e.byteLength);return new r.a(t).set(new r.a(e)),t}},function(e,t,n){"use strict";var r=n(22);t.a=function(e){if("string"==typeof e||Object(r.a)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){"use strict";var r=n(0),i=n(22),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,s=n(32);function u(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(u.Cache||s.a),n}u.Cache=s.a;var c=u,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,f=function(e){var t=c((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(l,(function(e,n,r,i){t.push(r?i.replace(d,"$1"):n||e)})),t}),(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}(),p=n(66);t.a=function(e,t){return Object(r.default)(e)?e:function(e,t){if(Object(r.default)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Object(i.a)(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:f(Object(p.a)(e))}},function(e,t,n){"use strict";var r=n(62),i=n(9),o=n(10),a=n(19),s=n(2),u=function(e,t,n){if(!Object(s.default)(n))return!1;var r=typeof t;return!!("number"==r?Object(o.a)(n)&&Object(a.a)(t,n.length):"string"==r&&t in n)&&Object(i.a)(n[t],e)};t.a=function(e){return Object(r.a)((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&u(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}},function(e,t,n){"use strict";var r=n(5),i=n(37),o=n(1),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=n(18),u=n(16),c=u.a&&u.a.isTypedArray,l=c?Object(s.a)(c):function(e){return Object(o.a)(e)&&Object(i.a)(e.length)&&!!a[Object(r.a)(e)]};t.a=l},function(e,t,n){"use strict";var r=n(59),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(o(e),(function(t){return i.call(e,t)})))}:r.a;t.a=a},function(e,t,n){"use strict";var r=n(7),i=function(){try{var e=Object(r.a)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.a=i},function(e,t,n){"use strict";var r=n(3).a.Uint8Array;t.a=r},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(38),o=n(1),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,l=u.call(Object);t.default=function(e){if(!Object(o.a)(e)||"[object Object]"!=Object(r.a)(e))return!1;var t=Object(i.a)(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},function(e,t,n){"use strict";var r=n(57),i=n(45),o=n(24);t.a=function(e){return Object(r.a)(e,o.a,i.a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Adobe="adobe",e.JWS="jws"}(t.AuthTokenType||(t.AuthTokenType={}))},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(0),o=n(1);t.default=function(e){return"string"==typeof e||!Object(i.default)(e)&&Object(o.a)(e)&&"[object String]"==Object(r.a)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.METADATA="metadata",e.ERROR="error",e.QOS="qos"}(t.SpotlightEventCategory||(t.SpotlightEventCategory={})),function(e){e.INFO="info",e.WARN="warn",e.ERROR="error",e.CRITICAL="critical"}(t.SpotlightEventLevel||(t.SpotlightEventLevel={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33);t.SpotlightLogger=r.Log.getLogger("Spotlight").filter("spotlight")},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(71))},function(e,t,n){"use strict";t.a=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){"use strict";t.a=function(e,t){return e.has(t)}},function(e,t,n){"use strict";var r=n(36),i=n(0);t.a=function(e,t,n){var o=t(e);return Object(i.default)(e)?o:Object(r.a)(o,n(e))}},function(e,t,n){"use strict";t.a=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){"use strict";t.a=function(){return[]}},function(e,t,n){"use strict";(function(e){var r=n(3),i=exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(72)(e))},function(e,t,n){"use strict";var r=n(40);t.a=function(e,t){var n=t?Object(r.a)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){"use strict";var r=function(e){return e},i=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},o=Math.max,a=function(e){return function(){return e}},s=n(46),u=s.a?function(e,t){return Object(s.a)(e,"toString",{configurable:!0,enumerable:!1,value:a(t),writable:!0})}:r,c=Date.now,l=function(e){var t=0,n=0;return function(){var r=c(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(u);t.a=function(e,t){return l(function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=o(r.length-t,0),u=Array(s);++a<s;)u[a]=r[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=r[a];return c[t]=n(u),i(e,this,c)}}(e,t,r),e+"")}},function(e,t,n){"use strict";var r=n(28),i=n(39),o=n(9),a=function(e,t,n){(void 0!==n&&!Object(o.a)(e[t],n)||void 0===n&&!(t in e))&&Object(i.a)(e,t,n)},s=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e},u=n(60),c=n(61),l=n(34),d=n(68),f=n(15),p=n(0),h=n(10),g=n(1),y=function(e){return Object(g.a)(e)&&Object(h.a)(e)},v=n(13),_=n(30),m=n(2),b=n(48),C=n(44),E=function(e,t){if("__proto__"!=t)return e[t]},T=n(8),S=n(25),P=function(e){return Object(T.a)(e,Object(S.a)(e))},M=function(e,t,n,r,i,o,s){var h=E(e,n),g=E(t,n),T=s.get(g);if(T)a(e,n,T);else{var S=o?o(h,g,n+"",e,t,s):void 0,M=void 0===S;if(M){var O=Object(p.default)(g),k=!O&&Object(v.a)(g),A=!O&&!k&&Object(C.a)(g);S=g,O||k||A?Object(p.default)(h)?S=h:y(h)?S=Object(l.a)(h):k?(M=!1,S=Object(u.a)(g,!0)):A?(M=!1,S=Object(c.a)(g,!0)):S=[]:Object(b.default)(g)||Object(f.a)(g)?(S=h,Object(f.a)(h)?S=P(h):Object(m.default)(h)&&!Object(_.default)(h)||(S=Object(d.a)(g))):M=!1}M&&(s.set(g,S),i(S,g,r,o,s),s.delete(g)),a(e,n,S)}};t.a=function e(t,n,i,o,u){t!==n&&s(n,(function(s,c){if(Object(m.default)(s))u||(u=new r.a),M(t,n,c,i,e,o,u);else{var l=o?o(E(t,c),s,c+"",t,n,u):void 0;void 0===l&&(l=s),a(t,c,l)}}),S.a)}},function(e,t,n){"use strict";var r=function(e){return e!=e};t.a=function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,r,n)}},function(e,t,n){"use strict";var r=n(32);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r.a;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},i.prototype.has=function(e){return this.__data__.has(e)},t.a=i},function(e,t,n){"use strict";var r=n(6),i=n(55),o=n(0),a=n(22),s=r.a?r.a.prototype:void 0,u=s?s.toString:void 0;t.a=function(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(Object(o.default)(t))return Object(i.a)(t,e)+"";if(Object(a.a)(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}(e)}},function(e,t,n){"use strict";var r=n(15),i=n(0),o=n(13),a=n(19),s=n(44),u=Object.prototype.hasOwnProperty;t.a=function(e,t){var n=Object(i.default)(e),c=!n&&Object(r.a)(e),l=!n&&!c&&Object(o.a)(e),d=!n&&!c&&!l&&Object(s.a)(e),f=n||c||l||d,p=f?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],h=p.length;for(var g in e)!t&&!u.call(e,g)||f&&("length"==g||l&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||Object(a.a)(g,h))||p.push(g);return p}},function(e,t,n){"use strict";var r=n(2),i=Object.create,o=function(){function e(){}return function(t){if(!Object(r.default)(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),a=n(38),s=n(20);t.a=function(e){return"function"!=typeof e.constructor||Object(s.a)(e)?{}:o(Object(a.a)(e))}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(111)),r(n(87)),r(n(146)),r(n(70)),r(n(147)),r(n(150)),r(n(33)),r(n(86)),r(n(102)),r(n(11)),r(n(109))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(80)),r(n(132)),r(n(85))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(121)),a=i(n(122)),s=i(n(123)),u=i(n(168)),c=i(n(170)),l=i(n(171)),d=i(n(48)),f=function(){function e(){}return e.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o.default.apply(void 0,r([e],t))},e.extendDeep=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return a.default.apply(void 0,r([e],t))},e.extendDeepWithArrayAssignment=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return s.default.apply(void 0,r([e],t,[function(e,t,n,r,i,o){if(Array.isArray(t))return t}]))},e.keyValues=function(e){return Object.keys(e).map((function(t){return{key:t,value:e[t]}}))},e.mapValues=function(t,n){return Object.keys(t).forEach((function(r){var i=e.get(t,r);e.set(t,r,n(r,i))})),t},e.keysLike=function(e,t){return Object.keys(e).filter((function(e){return t.test(e)}))},e.getValues=function(e){return Object.keys(e).map((function(t){return e[t]}))},e.isFunc=function(e){return"function"==typeof e},e.isObj=function(e){return!!e&&(e.constructor&&e.constructor===Object||"object"==typeof e)},e.has=function(e,t){return u.default(e,t)},e.set=function(e,t,n){l.default(e,t,n)},e.get=function(e,t,n){return c.default(e,t,n)},e.getOrElse=function(t,n,r){return e.get(t,n,r)},e.isPlainObject=function(e){return d.default(e)},e.updateValues=function(t,n){return Object.keys(t).forEach((function(r){var i=t[r],o=n[r];void 0!==n[r]&&(e.isObj(i)?e.updateValues(i,o):t[r]=o)})),t},e.filter=function(t,n){var r=e.extendDeep({},t),i=function(t){Object.keys(t).forEach((function(r){var o=t[r];e.isObj(o)?(i(o),e.isEmpty(o)&&delete t[r]):o!==n&&delete t[r]}))};return i(r),r},e.compact=function(t){return Object.keys(t).forEach((function(n){var r=t[n];e.isObj(r)&&(e.isEmpty(r)||e.compact(r),e.isEmpty(r)&&delete t[n])})),t},e.isEmpty=function(e){return 0===Object.keys(e).length},e}();t.ObjectUtils=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(75);!function(e){e.Timeout="timeout",e.Interval="interval"}(r||(r={})),t.TimerMode=r;var o=function(e,t,n){var o,a,s=-1;switch(e){case r.Interval:o=function(){s=setInterval(t,n)},a=function(){clearInterval(s),s=-1};break;case r.Timeout:o=function(){s=setTimeout(t,n)},a=function(){clearTimeout(s),s=-1};break;default:throw new i.UnreachableCaseError(e)}return{start:o,stop:a}};t.Timer=o,t.delay=function(e,t){void 0===t&&(t=0);var n=o(r.Timeout,e,t);return n.start(),n}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,"Unreachable case: "+t)||this}return i(t,e),t}(Error);t.UnreachableCaseError=o},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(83)),o=n(11),a=function(){function e(){}return e.getFactory=function(t,n,r){return{events:function(){return t},eventMap:function(){return n},context:function(){return r},mapTo:function(t){var r=[],i={};return Object.keys(n).forEach((function(e){var o=function(e){var n={before:e.before,after:e.after,around:e.around}[t];if(n)return n;throw new Error("Invalid mapEvent type: "+t)}(n[e]);r.push(o),i[e]=o})),e.getFactory(r,i)}}},e.createFromFactory=function(e){return new i.default(e.events(),e.eventMap(),e.context())},e.isListenForMap=function(e){return o.ObjectUtils.isObj(e)},e.isEventCollectionHandler=function(e){return o.ObjectUtils.isFunc(e)},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Verbose="verbose",e.Debug="debug",e.Info="info",e.Warning="warning",e.Error="error",e.Config_Changed="configChanged"}(t.LogEventType||(t.LogEventType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Peripheral="peripheral",e.Default="default"}(t.HookHandlerType||(t.HookHandlerType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),i=n(77);function o(e){return r.createEvent(e)}t.createLogEvent=o,t.createLogEventCollection=function(){return r.createEventCollection({verbose:o(i.LogEventType.Verbose),debug:o(i.LogEventType.Debug),info:o(i.LogEventType.Info),warning:o(i.LogEventType.Warning),error:o(i.LogEventType.Error),configChanged:o(i.LogEventType.Config_Changed)})}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(115)),r(n(84)),r(n(76)),r(n(83))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(163)),o=r(n(30)),a=r(n(117)),s=r(n(162)),u=r(n(118)),c=r(n(51));t.isEqual=function(e,t){return i.default(e,t)},t.isFunction=function(e){return o.default(e)},t.isBoolean=function(e){return a.default(e)},t.isString=function(e){return c.default(e)},t.cloneDeep=function(e){return s.default(e)},t.isNull=function(e){return u.default(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchedRight=function(e){if("string"!=typeof e.input||"number"!=typeof e.index)return"";var t=e.index+e[0].length;return e.input.substr(t,e.input.length-t)},t.split=function(e,t){return e.replace(t,"#__delim__#").split("#__delim__#")},t.escape=function(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=n(84),a=r(n(76)),s=function(){function e(e,t,n){this._context=n,this._events=e,this._eventsMap=t,this._bindings=[],this._length=this._events.length}return e.prototype._doEach=function(e){this._events.forEach((function(t){return e(t)}))},e.prototype._doListen=function(e){var t;if(a.default.isEventCollectionHandler(e))t=this._doListenForAll(e);else{if(!a.default.isListenForMap(e))throw new Error("[doListen] invalid handler data type, got: "+e);t=this._doListenForMap(e)}return this._bindings.push(t),t},e.prototype._doHas=function(e){return e instanceof o.EventBindingCollection&&-1!==this._bindings.indexOf(e)},e.prototype._doUnlisten=function(e){if(e instanceof o.EventBindingCollection){var t=this._bindings.indexOf(e);this._bindings.splice(t,1),e.detach()}},e.prototype._doListenOnce=function(e){var t;if(a.default.isEventCollectionHandler(e))t=this._doListenOnceForAll(e);else{if(!a.default.isListenForMap(e))throw new Error("[doListenOnce] invalid handler data type, got: "+e);t=this._doListenForMapOnce(e)}return this._bindings.push(t),t},e.prototype._doListenOnceForAll=function(e){var t=this,n=new o.EventBindingCollection;return this._doEach((function(r){var i=e,o=t._toEventCollectionHandler(r.type,i),a=r.once(o);a.onDetached((function(){t._removeSingleBinding(n.id,a)})),n.add(a)})),n},e.prototype._doListenForMapOnce=function(e){var t=this,n=new o.EventBindingCollection;return i.ObjectUtils.keyValues(e).forEach((function(e){var r=t._eventsMap[e.key],i=e.value,o=t._toEventCollectionHandler(r.type,i);if(r){var a=r.once(o);a.onDetached((function(){t._removeSingleBinding(n.id,a)})),n.add(a)}})),n},e.prototype._doListenForAll=function(e){var t=this,n=new o.EventBindingCollection;return this._doEach((function(r){var i=e,o=t._toEventCollectionHandler(r.type,i),a=r.listen(o);n.add(a)})),n},e.prototype._doListenForMap=function(e){var t=this,n=new o.EventBindingCollection;return i.ObjectUtils.keyValues(e).forEach((function(e){var r=t._eventsMap[e.key],i=e.value;if(r){var o=r.listen(i);n.add(o)}})),n},e.prototype._toEventCollectionHandler=function(e,t){return t.bind(this._context||null,e)},e.prototype._removeSingleBinding=function(e,t){var n=this._getCollectionBinding(e);null!==n&&(n.remove(t),n.empty()&&this.unlisten(n))},e.prototype._getCollectionBinding=function(e){for(var t=null,n=0,r=this._bindings;n<r.length;n++){var i=r[n];if(i.id===e){t=i;break}}return t},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.each=function(e){return this._doEach(e),this},e.prototype.once=function(e){return this._doListenOnce(e)},e.prototype.listen=function(e){return this._doListen(e)},e.prototype.has=function(e){return this._doHas(e)},e.prototype.unlisten=function(e){return this._doUnlisten(e),this},e.prototype.unlistenAll=function(){return this._bindings.forEach((function(e){e.detach()})),this._bindings=[],this},e.prototype.removeAllListeners=function(){return this.unlistenAll(),this.each((function(e){e.unlistenAll()})),this},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){this.id="collection_"+e.count++,this._bindings=t||[],this._detachedHandlers=[]}return e.prototype.add=function(e){this._bindings.push(e)},e.prototype.remove=function(e){var t=this._bindings.indexOf(e);return-1!==t&&(this._bindings.splice(t,1),!0)},e.prototype.detach=function(){var e=!0;return this._bindings.forEach((function(t){e=e&&t.detach()})),this._detachedHandlers.forEach((function(e){e()})),this._detachedHandlers=[],e},e.prototype.onDetached=function(e){this._detachedHandlers.push(e)},e.prototype.empty=function(){return 0===this._bindings.length},e.count=1,e}();t.EventBindingCollection=r},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(86),o=function(){function e(e,t){this._type=e,this._context=t,this._signal=new i.Signal(t),this._before=new i.Signal(t),this._around=new i.Signal(t),this._after=new i.Signal(t)}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"before",{get:function(){return this._before},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"around",{get:function(){return this._around},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this._after},enumerable:!0,configurable:!0}),e.prototype.listen=function(e,t){return this._signal.listen(e,t)},e.prototype.once=function(e,t){return this._signal.once(e,t)},e.prototype.dispatch=function(e){var t={type:this.type};e&&(t=r(r({},e),t)),this._before.dispatch(t),this._around.dispatch(t),this._signal.dispatch(t),this._around.dispatch(t),this._after.dispatch(t)},e.prototype.has=function(e){return this._signal.has(e)},e.prototype.count=function(){return this._signal.count()},e.prototype.unlisten=function(e){this._signal.unlisten(e)},e.prototype.unlistenAll=function(){this._signal.unlistenAll()},e}();t.EventSignal=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(133)),r(n(89)),r(n(88))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(134))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(89);t.createBindingForHandler=function(e){var t=e.context,n=e.signal,i=e.once,o=e.onDetached,a=e.handler;t&&(a=a.bind(t));var s=new r.SignalBinding(a);return"function"==typeof o&&s.onDetached(o),s.owner=n,s.once=i,s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=!1),this.owner=null,this.once=t,this._handler=e,this._detachedHandlers=[]}return Object.defineProperty(e.prototype,"handler",{get:function(){return this._handler},enumerable:!0,configurable:!0}),e.prototype.detach=function(){return null!==this.owner&&(this._detachedHandlers.forEach((function(e){e()})),this._detachedHandlers.length=0,!0)},e.prototype.onDetached=function(e){this._detachedHandlers.push(e)},e}();t.SignalBinding=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.cssConsole=function(e){return""!==e.contextDetail?"%c"+e.context+" %c("+e.contextDetail+") "+e.message:"%c"+e.context+" %c"+e.message},e}();t.DefaultFormatters=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Debug="topdebug",e.Enabled="toplogenabled",e.Sources="toplogsources",e.Category="toplogcat",e.Levels="toploglevels",e.Theme="toplogtheme"}(r||(r={})),t.LogQueryParam=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(93),i=n(73),o=new(function(){function e(e){var t;if(this._presets={},this._manager=r.LogManager,e){Object.assign(this._presets,e);var n=e.source,i=e.enabled;null!=n&&null!=i&&this._manager.updateConfig({sources:(t={},t[n]=i,t)})}}return e.prototype.factory=function(t){return new e(t)},Object.defineProperty(e.prototype,"data",{get:function(){return this._manager.data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._manager.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this._manager.events},enumerable:!0,configurable:!0}),e.prototype.getLogger=function(e,t){return this._manager.getLogger(e,i.ObjectUtils.extendDeep({},this._presets,t))},e.prototype.setEnabled=function(e){this.updateConfig({enabled:e})},e.prototype.setTheme=function(e){this._manager.setTheme(e)},e.prototype.updateSources=function(e){this.updateConfig({sources:e})},e.prototype.updateCategories=function(e){this.updateConfig({categories:e})},e.prototype.updateLevels=function(e){this.updateConfig({levels:e})},e.prototype.updateConfig=function(e){this._manager.updateConfig(e)},e.prototype.useDefaults=function(){this._manager.useDefaults()},e}());t.Log=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),a=n(12),s=n(94),u=n(95),c=n(96),l=n(97),d=n(79),f=new(function(){function e(){this._enabled=!1,this.events=d.createLogEventCollection(),this._data=c.LogManagerDefaults.data(),this._activeTargets=[new u.ConsoleTarget({theme:this._data.theme}).init(),new u.LogEventTarget(this.events).init()]}return e.prototype._notifyConfigChanged=function(){this.events.configChanged.dispatch({data:this.data})},Object.defineProperty(e.prototype,"data",{get:function(){return o.ObjectUtils.extendDeep({},this._data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),e.prototype.getLogger=function(e,t){var n,i;void 0===t&&(t={});var u=t.source,c=void 0===u?a.LogSourceType.Unsourced:u,d=c===a.LogSourceCompositeType.All?a.LogSourceType.Unsourced:s.normalizeSource(c),f=this._data,p=f.sources,h=f.categories,g=f.levels,y={manager:this,context:e,contextDetail:"",targets:this._activeTargets,enabled:(i=p[d],null!=i&&i),source:d,sources:r({},p),categories:r({},h),levels:r({},g),filters:[]},v=o.ObjectUtils.extendDeep(y,t,{source:d});d in p||this.updateConfig({sources:(n={},n[d]=v.enabled,n)});var _=(new l.DefaultLogger).init(v);return this.storeLoggerInstance(_),_},e.prototype._setEnabled=function(e){this._enabled=e,this._notifyConfigChanged()},e.prototype._updateTargetsTheme=function(){var e=this._data.theme;this._activeTargets.forEach((function(t){t.updateTheme(e)}))},e.prototype.setTheme=function(e){this._data.theme=e,this._updateTargetsTheme(),this._notifyConfigChanged()},e.prototype._setTargets=function(e){var t=this;e!==this._activeTargets&&(this._activeTargets.length&&this._activeTargets.forEach((function(e){return e.detach()})),this._activeTargets=e,this._updateTargetsTheme(),this._data.loggerInstances.forEach((function(e){e.setTargets(t._activeTargets)})))},e.prototype._updateSources=function(e){var t=r({},this._data.sources),n=r({},t),i=o.ObjectUtils.keyValues(e);i.sort(s.bySource),i.forEach((function(e){var r=e.key,i=e.value;r===a.LogSourceCompositeType.All?Object.keys(t).forEach((function(e){n[e]=i})):n[r]=i})),Object.assign(this._data.sources,n),this._data.loggerInstances.forEach((function(e){e.updateSources(n)}))},e.prototype._updateCategories=function(e){var t=r({},this._data.categories),n=Object.keys(t),u=r({},t),c=function(e,t){e.forEach((function(e){return u[e]=t}))},l=o.ObjectUtils.keyValues(e);l.sort(s.byReversedNamespaceDepth),l.sort(s.byCategory),l.forEach((function(e){var t=e.key,r=e.value;if(t===a.LogCategoryCompositeType.All)c(n,r);else{var o=i([t],s.findChildCategoryKeys(n,t));c(o,r)}})),this._data.categories=u,this._data.loggerInstances.forEach((function(e){e.updateCategories(u)}))},e.prototype._updateLevels=function(e){var t=r({},this._data.levels),n=r({},t),i=o.ObjectUtils.keyValues(e);i.sort(s.byLevel),i.forEach((function(e){var t=e.key,r=e.value;s.LogLevelCompositeTypeValues.includes(t)?s.expandCompositeLevel(t).forEach((function(e){return n[e]=r})):n[t]=r})),this._data.levels=n,this._data.loggerInstances.forEach((function(e){e.updateLevels(n)}))},e.prototype.updateConfig=function(e){var t=e.theme,n=e.targets,r=e.enabled,i=e.sources,a=e.categories,u=e.levels,c=!1;if(null!=t&&(this.setTheme(t),c=!0),Array.isArray(n)&&(this._setTargets(n),c=!0),null!=r&&(this._setEnabled(Boolean(r)),c=!0),null!=i){var l=o.ObjectUtils.keyValues(i).reduce((function(e,t){var n=t.key,r=t.value;return e[s.normalizeSource(n)]=Boolean(r),e}),{});this._updateSources(l),c=!0}null==a||o.ObjectUtils.isEmpty(a)||(this._updateCategories(a),c=!0),null==u||o.ObjectUtils.isEmpty(u)||(this._updateLevels(u),c=!0),c&&this._notifyConfigChanged()},e.prototype.storeLoggerInstance=function(e){this._data.loggerInstances.push(e)},e.prototype.removeLoggerInstance=function(e){o.ArrayUtils.remove(this._data.loggerInstances,e)},e.prototype.registerFilter=function(e){var t=this._data.categories;if(!(e in t)){var n=!o.ObjectUtils.isEmpty(t)&&s.getFilterVisibility(t,e);this._data.categories[e]=n}},e.prototype.useDefaults=function(){var e=c.LogManagerDefaults.data(),t=e.categories,n=e.levels;this._data.categories=t,this._data.levels=n,this._data.loggerInstances.forEach((function(e){e.updateCategories(t),e.updateLevels(n)}))},e}());t.LogManager=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(82);t.LogLevelCompositeTypeValues=Object.values(r.LogLevelCompositeType),t.normalizeSource=function(e){return String(e).toLowerCase()},t.expandCompositeLevel=function(e){switch(e){case r.LogLevelCompositeType.All:return[r.LogLevelType.Verbose,r.LogLevelType.Debug,r.LogLevelType.Info,r.LogLevelType.Warn,r.LogLevelType.Error];case r.LogLevelCompositeType.Dev:return[r.LogLevelType.Debug,r.LogLevelType.Info,r.LogLevelType.Warn,r.LogLevelType.Error];default:return[e]}},t.bySource=function(e,t){var n=e.key,i=t.key;return n===r.LogSourceCompositeType.All?-1:i===r.LogSourceCompositeType.All?1:0},t.byLevel=function(e,n){var i=e.key,o=n.key;return i===r.LogLevelCompositeType.All?-1:o===r.LogLevelCompositeType.All?1:t.LogLevelCompositeTypeValues.includes(i)&&!t.LogLevelCompositeTypeValues.includes(o)?-1:t.LogLevelCompositeTypeValues.includes(o)&&!t.LogLevelCompositeTypeValues.includes(i)?1:0},t.byCategory=function(e,t){var n=e.key,i=t.key;return n===r.LogCategoryCompositeType.All?-1:i===r.LogCategoryCompositeType.All?1:0},t.byReversedNamespaceDepth=function(e,t){var n=e.key,r=t.key,i=n.split(".").length,o=r.split(".").length;return i>o?-1:i<o?1:0},t.findChildCategoryKeys=function(e,t){var n=new RegExp("^"+i.escape(t)+"\\.");return e.filter((function(e){return n.test(e)}))},t.getFilterVisibility=function(e,n){if(n in e)return e[n];var r=n.split(".");if(!(r.length>1))return!1;var i=r.slice(0,-1).join(".");return t.getFilterVisibility(e,i)}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(138)),r(n(139))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=function(){function e(){}return e.data=function(){var e,t;return{enabled:!1,theme:r.LogTheme.Light,loggerInstances:[],sources:(e={},e[r.LogSourceType.Unsourced]=!0,e),categories:{},levels:(t={},t[r.LogLevelType.Verbose]=!1,t[r.LogLevelType.Debug]=!1,t[r.LogLevelType.Info]=!0,t[r.LogLevelType.Warn]=!0,t[r.LogLevelType.Error]=!0,t)}},e}();t.LogManagerDefaults=i},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(140)),r(n(141))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(165);t.fromNullable=r.fromNullable,t.none=r.none,t.fromEither=r.fromEither,t.map=r.map;var i=n(172);t.right=i.right,t.left=i.left;var o=n(31);t.pipe=o.pipe},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(148)),r(n(100))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Before_Event="beforeEvent",e.State_Entered="stateEntered",e.State_Changed="stateChanged",e.After_Event="afterEvent",e.Error="error"}(r||(r={})),t.FsmEventType=r},function(e,t,n){"use strict";var r,i,o,a,s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Wildcard="*"}(r||(r={})),t.FsmDefaultEvents=r,function(e){e.No_State="__no_state__"}(i||(i={})),t.FsmDefaultStates=i,function(e){e.Sync="sync",e.Async="async"}(o||(o={})),t.FsmModes=o,function(e){e.Succeeded="succeeded",e.No_Transition="no_transition",e.Canceled="canceled",e.Pending="pending",e.Error="error"}(a||(a={})),t.FsmTransitionResult=a,function(e){e[e.Invalid_Transition=100]="Invalid_Transition",e[e.Pending_Transition=200]="Pending_Transition"}(s||(s={})),t.FsmError=s},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(103)),r(n(152)),r(n(104)),r(n(106)),r(n(105))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this)||this;return n._taskHandler=t,n}return i(t,e),t.prototype.map=function(e){var n=this;return new t((function(t){n.fold((function(e){return t.reject(e)}),(function(n){try{var r=e(n);t.resolve(r)}catch(e){t.reject(e)}}))})).onExecuted((function(){n.execute()}))},t.prototype.mapAsync=function(e){var n=this;return new t((function(t){n.fold((function(e){return t.reject(e)}),(function(n){try{e(n).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)}))}catch(e){t.reject(e)}}))})).onExecuted((function(){n.execute()}))},t.prototype.mapLeft=function(e){var n=this;return new t((function(t){n.fold((function(n){try{var r=e(n);t.reject(r)}catch(e){t.reject(e)}}),(function(e){return t.resolve(e)}))})).onExecuted((function(){n.execute()}))},t.prototype.pipe=function(e){var n=this;return new t((function(t){n.fold(t.reject,(function(n){e(n).execute().fold((function(e){return t.reject(e)}),(function(e){return t.resolve(e)}))}))})).onExecuted((function(){n.execute()}))},t.prototype.chain=function(e){var n=this;return new t((function(t){n.fold((function(e){t.reject(e)}),(function(n){e.execute().fold((function(e){t.reject(e)}),(function(e){Array.isArray(n)?(n.push(e),t.resolve(n)):t.resolve([n,e])}))}))})).onExecuted((function(){n.execute()}))},t.prototype.execute=function(){return this.running||this.completed||(this._notifyExecuting(),this._taskHandler(this._createResolver())),this},t}(n(104).Task);t.DefaultTask=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(98),i=n(33),o=n(75),a=n(105),s=i.Log.getLogger("Task").filter("lib.tasks"),u=function(){function e(){var t=this;this._handleResolved=function(e){if(t.running=!1,t.resolved=!0,t.canceled)return t._handleCanceled();t._value=r.right(e),t._triggerHandlersFor(a.TaskEventType.Resolved),t._handleCompleted()},this._handleRejected=function(e){if(t.running=!1,t.rejected=!0,t.canceled)return t._handleCanceled();t._value=r.left(e),t._triggerHandlersFor(a.TaskEventType.Rejected),t._handleCompleted()},this._logger=s,this.id=e.createTaskId(),this._handlers=new Map([[a.TaskEventType.Executed,[]],[a.TaskEventType.Resolved,[]],[a.TaskEventType.Rejected,[]],[a.TaskEventType.Canceled,[]],[a.TaskEventType.Completed,[]]]),this.running=!1,this.canceled=!1,this.resolved=!1,this.rejected=!1,this.completed=!1}return e.createTaskId=function(){return"task-"+e._taskId++},e.prototype.onExecuted=function(e){return this._addHandler(a.TaskEventType.Executed,e),this},e.prototype.onResolved=function(e){return this._addHandler(a.TaskEventType.Resolved,e),this},e.prototype.onRejected=function(e){return this._addHandler(a.TaskEventType.Rejected,e),this},e.prototype.onCanceled=function(e){return this._addHandler(a.TaskEventType.Canceled,e),this},e.prototype.onCompleted=function(e){return this._addHandler(a.TaskEventType.Completed,e),this},e.prototype.fold=function(e,t){return this._addHandler(a.TaskEventType.Rejected,e),this._addHandler(a.TaskEventType.Resolved,t),this},e.prototype.cancel=function(){return this.canceled=!0,this},e.prototype.toOptional=function(){return this.resolved?r.fromEither(this._value):r.none},e.prototype._notifyExecuting=function(){this.running=!0,this._triggerHandlersFor(a.TaskEventType.Executed)},e.prototype._createResolver=function(){return{resolve:this._handleResolved,reject:this._handleRejected}},e.prototype._handleCanceled=function(){this._triggerHandlersFor(a.TaskEventType.Canceled),this._handleCompleted()},e.prototype._handleCompleted=function(){this.completed=!0,this._triggerHandlersFor(a.TaskEventType.Completed)},e.prototype._addHandler=function(e,t){var n=!1;switch(e){case a.TaskEventType.Executed:n=this.running;break;case a.TaskEventType.Resolved:n=this.resolved;break;case a.TaskEventType.Rejected:n=this.rejected;break;case a.TaskEventType.Canceled:n=this.canceled;break;case a.TaskEventType.Completed:n=this.resolved||this.rejected||this.canceled;break;default:throw new o.UnreachableCaseError(e)}n?this._triggerHandler(e,t):r.pipe(r.fromNullable(this._handlers.get(e)),r.map((function(e){return e.push(t)})))},e.prototype._triggerHandlersFor=function(e){for(var t,n=null!=(t=this._handlers.get(e))?t:[];n.length>0;){var r=n.shift();r&&this._triggerHandler(e,r)}this._handlers.set(e,[])},e.prototype._triggerHandler=function(e,t){e===a.TaskEventType.Executed||e===a.TaskEventType.Canceled||e===a.TaskEventType.Completed?t():t(this._value.value)},e._taskId=0,e}();t.Task=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Executed="executed",e.Resolved="resolved",e.Rejected="rejected",e.Canceled="canceled",e.Completed="completed"}(t.TaskEventType||(t.TaskEventType={}))},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(74)),a=n(103),s=function(){function e(){}return e.create=function(e){return new a.DefaultTask(e)},e.resolve=function(t){return e.create((function(e){e.resolve(t)}))},e.resolveDelayed=function(t,n){return e.delay(t,(function(e){e.resolve(n)}))},e.reject=function(t){return e.create((function(e){e.reject(t)}))},e.rejectDelayed=function(t,n){return e.delay(t,(function(e){e.reject(n)}))},e.delay=function(t,n){return e.create((function(e){o.delay(n.bind(null,e),t)}))},e.seq=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)return e.resolve([]).execute();if(1===t.length)return t[0].map((function(e){return[e]}));for(var r=t[0],i=1;i<t.length;i++)r=r.chain(t[i]);return r.execute()},e.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)return e.resolve([]).execute();var i=e.create((function(e){var n={tasks:t.length,resolved:0},i=r(new Array(n.tasks)),o=function(t){e.reject(t)};t.forEach((function(t,r){t.onRejected(o),t.onResolved((function(t){return function(t,r){n.resolved++,i[r]=t,n.resolved===n.tasks&&e.resolve(i)}(t,r)})),t.running||t.execute()}))}));return i.execute()},e}();t.TaskFactory=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(108),i=n(69);t.BridgeHookEventProxyHandler=function(e,t,n){void 0===t&&(t="hook:event");var o=i.Log.getLogger("BridgeHookEventProxyHandler|"+t),a={};return function(s){var u,c,l,d,f,p=s.type,h=s.hook;switch(p){case r.BridgeHookEventType.Added:var g=s,y=g.handlerId,v=g.handlerType,_=function(n){var o=i.createDeferred();a[y].executionPromise=o;var s={type:r.BridgeHookEventType.Executing,hook:h,handlerId:y,handlerType:v,data:n};return e.send(t,s),o.promise};a[y]={executionPromise:null,handler:_,handlerType:v},(null===(u=n)||void 0===u?void 0:u.onHandlerAdded)&&n.onHandlerAdded(_,{type:p,hook:h,handlerId:y,handlerType:v});break;case r.BridgeHookEventType.Removed:var m=s,b=m.handlerId,C=m.handlerType;if(b){var E=a[b].handler;(null===(c=n)||void 0===c?void 0:c.onHandlerRemoved)&&n.onHandlerRemoved(E,{hook:h,type:p,handlerId:b,handlerType:C}),delete a[b]}else C?((null===(l=n)||void 0===l?void 0:l.onHandlerRemoved)&&n.onHandlerRemoved(C,{hook:h,type:p,handlerId:b,handlerType:C}),Object.keys(a).forEach((function(e){a[e].handlerType===C&&delete a[e]}))):o.warn("Unable to clear hook handler for "+h);break;case r.BridgeHookEventType.Executing:if(null===(d=n)||void 0===d?void 0:d.onExecuting){var T=s,S=T.handlerId,P=T.handlerType,M=T.data;n.onExecuting({hook:h,type:p,handlerId:S,handlerType:P,data:M})}break;case r.BridgeHookEventType.Executed:var O=s,k=O.handlerId,A=O.handlerType,w=O.error,R=O.result,I=a[k].executionPromise;if(!I){o.warn("Could not resolve or reject hook handler for "+h);break}(null===(f=n)||void 0===f?void 0:f.onExecuted)&&n.onExecuted({hook:h,type:p,handlerId:k,handlerType:A,error:w,result:R}),w?I.rejector(w):I.resolver(R);break;default:throw new i.UnreachableCaseError(p)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Added="added",e.Removed="removed",e.Executing="executing",e.Executed="executed"}(t.BridgeHookEventType||(t.BridgeHookEventType={}))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(52);t.SpotlightEventCategory=i.SpotlightEventCategory,t.SpotlightEventLevel=i.SpotlightEventLevel;var o=n(156),a=n(160),s=n(53),u=n(161);t.SpotlightWrapper=u.SpotlightWrapper,t.SpotlightWrapperInitBehavior=u.SpotlightWrapperInitBehavior;var c=r(n(2)),l={getClient:function(e){try{if(!e||!c.default)throw new TypeError("Requires a SpotlightConfig param");var t=e.appId,n=e.source;if(!t)throw new TypeError('SpotlightConfig requires "appId"');if(!n)throw new TypeError('SpotlightConfig requires "source"');return o.SpotlightBroker.createClient(e)}catch(e){return s.SpotlightLogger.warn("Spotlight.getClient failure: "+e),new a.NoOpSpotlightClient}},dispose:function(){o.SpotlightBroker.disposeAll()}};t.Spotlight=l},function(e,t,n){"use strict";t.a=function(){return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(112))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(113)),r(n(50))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(50),o=n(33),a=n(142),s=r(n(51)),u=r(n(48)),c=n(98),l=o.Log.getLogger("AuthTokenHelper").filter("auth");function d(e){return u.default(e)&&void 0!==e.expiresAt}var f=function(){function e(){}return e.parse=function(e,t){var n,r=function(){switch(t){case i.AuthTokenType.Adobe:return a.AdobeTokenParser;case i.AuthTokenType.JWS:return a.JWSTokenParser}}();if(!r)return l.error("Could not select parser for token type: "+t),c.none;try{n=r.parse(e)}catch(e){return l.error("Unable to parse "+t+" auth token: "+e.toString()),c.none}return c.fromNullable(n)},e.isExpired=function(t,n,r){var i,o,a,u,l=null;if(s.default(t)?l=e.parse(t,n).toNullable():d(t)&&(l=t),!l||!d(l))return c.none;var f=null!=(o=null===(i=r)||void 0===i?void 0:i.currentTime)?o:Date.now(),p=null!=(u=null===(a=r)||void 0===a?void 0:a.expiredThreshold)?u:10;return c.fromNullable(l.expiresAt.getTime()-f<=p)},e}();t.AuthTokenHelper=f},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(79)),r(n(77))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(n(76)),a=function(){function e(e,t){var n=i.ObjectUtils.getValues(e),r=o.default.getFactory(n,e,t);this._default=o.default.createFromFactory(r),this._before=o.default.createFromFactory(r.mapTo("before")),this._after=o.default.createFromFactory(r.mapTo("after")),this._around=o.default.createFromFactory(r.mapTo("around")),this._length=n.length}return Object.defineProperty(e.prototype,"before",{get:function(){return this._before},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"around",{get:function(){return this._around},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this._after},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.each=function(e){return this._default.each(e),this._default},e.prototype.once=function(e){return this._default.once(e)},e.prototype.listen=function(e){return this._default.listen(e)},e.prototype.has=function(e){return this._default.has(e)},e.prototype.unlisten=function(e){return this._default.unlisten(e),this._default},e.prototype.unlistenAll=function(){return this._default.unlistenAll(),this._default},e.prototype.removeAllListeners=function(){return this._default.removeAllListeners(),this._default},e}();t.EventCollection=a},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(166)),a=i(n(164)),s=i(n(167)),u=n(81),c=function(){function e(){}return e.remove=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o.default.apply(void 0,r([e],t))},e.dedupe=function(e){return a.default(e)},e.lastIndex=function(e){return e.length-1},e.take=function(e,t){return e.slice(0,t)},e.deepCopy=function(e){return u.cloneDeep(e)},e.flatten=function(e){return s.default(e)},e.mapToObj=function(e,t){var n={};return e.forEach((function(e){return t(e,n)})),n},e}();t.ArrayUtils=c},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(1);t.default=function(e){return!0===e||!1===e||Object(i.a)(e)&&"[object Boolean]"==Object(r.a)(e)}},function(e,t,n){"use strict";n.r(t),t.default=function(e){return null===e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return Object.keys(e)};t.getEnumKeys=r,t.getEnumValues=function(e){return r(e).map((function(t){return e[t]}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomInt=function(e){return void 0===e&&(e=1),Math.floor(Math.random()*Math.floor(e))}},function(e,t,n){"use strict";n.r(t);var r=n(21),i=n(8),o=n(43),a=n(10),s=n(20),u=n(24),c=Object.prototype.hasOwnProperty,l=Object(o.a)((function(e,t){if(Object(s.a)(t)||Object(a.a)(t))Object(i.a)(t,Object(u.a)(t),e);else for(var n in t)c.call(t,n)&&Object(r.a)(e,n,t[n])}));t.default=l},function(e,t,n){"use strict";n.r(t);var r=n(63),i=n(43),o=Object(i.a)((function(e,t,n){Object(r.a)(e,t,n)}));t.default=o},function(e,t,n){"use strict";n.r(t);var r=n(63),i=n(43),o=Object(i.a)((function(e,t,n,i){Object(r.a)(e,t,n,i)}));t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDeferred=function(){var e={};return e.promise=new Promise((function(t,n){e.resolver=t,e.rejector=n})),e}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(73),o=r(n(126));t.replaceTokens=function(e,t,n){var r=i.ObjectUtils.extendDeep({},{pattern:"{token}"},n||{});return Object.keys(t).forEach((function(n){var i=t[n],o=r.pattern.split("token").join(n);e=e.split(o).join(i)})),e},t.hashCode=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n},t.getUniqueId=function(e){return o.default(e)},t.stringify=function(e,t,n){return void 0===t&&(t=4),void 0===n&&(n=2),JSON.stringify(e,function(e){var t=[];return function(n,r){if(t.length>0){var i=t.indexOf(this);i>-1?t.splice(i+1):t.push(this),t.indexOf(r)>-1?r="[Circular JSON]":t.length>e&&!function(e){return"boolean"==typeof e||"string"==typeof e||"number"==typeof e||null==e}(r)&&(r="...")}else t.push(r);return r}}(t),n)}},function(e,t,n){"use strict";n.r(t);var r=n(66),i=0;t.default=function(e){var t=++i;return Object(r.a)(e)+t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.greaterThanRange=function(e,t,n){return void 0===n&&(n=!0),e.start==t.start?e.duration>t.duration:n?e.start>=t.end:e.start>t.end},e.lessThanRange=function(e,t,n){return void 0===n&&(n=!0),e.start==t.start?e.duration<t.duration:n?e.end<=t.start:e.end<t.start},e.intersectsRange=function(e,t){var n=e.start<t.start?e:t;return(n===e?t:e).start<n.end},e.outsideRange=function(e,t){return!e.contains(t.start)},e}();t.TimeRangeUtils=r;var i=function(){function e(e,t){this.start=e,this.end=t,this.duration=this.end-this.start}return e.create=function(t,n){return new e(t,t+n)},e.createWithEnd=function(t,n){return new e(t,n)},e.prototype.contains=function(e){return e>=this.start&&e<=this.end},e.prototype.equals=function(e){return this.start===e.start&&this.end===e.end},e.prototype.toString=function(){return"[TimeRange] "+this.start+" -> "+this.end+" : "+this.duration},e.prototype.toJSON=function(){return{start:this.start,end:this.end,duration:this.duration}},e}();t.TimeRange=i},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(129));function a(e){return o.default(e,!0)}t.parse=a,t.extension=function(e){var t=o.default(e);return t.pathname.substring(t.pathname.lastIndexOf(".")+1,t.pathname.length)},t.directory=function(e){var t=o.default(e);return t.pathname.substr(0,t.pathname.lastIndexOf("/")+1)};var s=/^(https?\:)/;function u(e){return o.default(e,!0).query}t.normalizeHTTPProtocol=function(e){return e.replace(s,"")},t.appendQuery=function(e,t){var n=a(e);return n.set("query",r(r({},n.query),t)),n.toString()},t.getQueryAsMap=u,t.containsEnabledTOPDebug=function(e){var t=u(e).topdebug;return!!t&&/^true/.test(t)}},function(e,t,n){"use strict";(function(t){var r=n(130),i=n(131),o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function c(e){var n,r=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new d(unescape(e.pathname),{});else if("string"===o)for(n in i=new d(e,{}),u)delete i[n];else if("object"===o){for(n in e)n in u||(i[n]=e[n]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function l(e){var t=o.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function d(e,t,n){if(!(this instanceof d))return new d(e,t,n);var o,a,u,f,p,h,g=s.slice(),y=typeof t,v=this,_=0;for("object"!==y&&"string"!==y&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),t=c(t),o=!(a=l(e||"")).protocol&&!a.slashes,v.slashes=a.slashes||o&&t.slashes,v.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(g[3]=[/(.*)/,"pathname"]);_<g.length;_++)"function"!=typeof(f=g[_])?(u=f[0],h=f[1],u!=u?v[h]=e:"string"==typeof u?~(p=e.indexOf(u))&&("number"==typeof f[2]?(v[h]=e.slice(0,p),e=e.slice(p+f[2])):(v[h]=e.slice(p),e=e.slice(0,p))):(p=u.exec(e))&&(v[h]=p[1],e=e.slice(0,p.index)),v[h]=v[h]||o&&f[3]&&t[h]||"",f[4]&&(v[h]=v[h].toLowerCase())):e=f(e);n&&(v.query=n(v.query)),o&&t.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==t.pathname)&&(v.pathname=function(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(v.pathname,t.pathname)),r(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(f=v.auth.split(":"),v.username=f[0]||"",v.password=f[1]||""),v.origin=v.protocol&&v.host&&"file:"!==v.protocol?v.protocol+"//"+v.host:"null",v.href=v.toString()}d.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;default:o[e]=t}for(var u=0;u<s.length;u++){var c=s[u];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},d.extractProtocol=l,d.location=c,d.qs=i,e.exports=d}).call(this,n(71))},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,i,a=[];for(i in"string"!=typeof t&&(t="?"),e)if(r.call(e,i)){if((n=e[i])||null!=n&&!isNaN(n)||(n=""),i=o(i),n=o(n),null===i||null===n)continue;a.push(i+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=i(t[1]),a=i(t[2]);null===o||null===a||o in r||(r[o]=a)}return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(80),i=n(85);t.createEvent=function(e,t){return new i.EventSignal(e,t)},t.createEventCollection=function(e,t){var n=new r.EventCollection(e,t);return Object.keys(e).forEach((function(t){return n[t]=e[t]})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(87),i=n(88),o=function(){function e(e){this._context=e,this._bindings=new r.LinkedList}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),e.prototype.listen=function(e,t){var n=this,r=i.createBindingForHandler({signal:this,handler:e,once:!1,onDetached:function(){n._bindings.remove(r)},context:t||this._context});return this._bindings.add(r),r},e.prototype.once=function(e,t){var n=this,r=i.createBindingForHandler({signal:this,handler:e,once:!0,onDetached:function(){n._bindings.remove(r)},context:t||this._context});return this._bindings.add(r),r},e.prototype.dispatch=function(e){this._bindings.iterator().forEach((function(t){t.once&&t.detach();try{t.handler(e)}catch(e){try{console.error("[dispatch] An error occured (dev-mode only): ",e)}catch(e){}}}))},e.prototype.has=function(e){return this._bindings.iterator().filter((function(t){return t===e})).length>0},e.prototype.count=function(){return this._bindings.length},e.prototype.unlisten=function(e){e.detach()},e.prototype.unlistenAll=function(){var e=this;this._bindings.iterator().forEach((function(t){return e.unlisten(t)}))},e}();t.Signal=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._length=0,this._head=null,this._tail=null}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail},enumerable:!0,configurable:!0}),e.prototype.insertBefore=function(e,t){var n=this.findNodeBy((function(t){return t===e}));if(null===n)return!1;var r=i.create(t),o=n.previous;return o&&(n.previous=r,o.next=r,r.previous=o,r.next=n),this._length++,!0},e.prototype.insertAfter=function(e,t){var n=this.findNodeBy((function(t){return t===e}));if(null===n)return!1;var r=i.create(t),o=n.next;return o&&(n.next=r,o.previous=r,r.previous=n,r.next=o),this._length++,!0},e.prototype.findBy=function(e){var t=this.findNodeBy(e);return t?t.value:null},e.prototype.peekBefore=function(e){var t=this.findNodeBy((function(t){return t===e}));if(!t)return null;var n=t.previous;return n?n.value:null},e.prototype.peekAfter=function(e){var t=this.findNodeBy((function(t){return t===e}));if(!t)return null;var n=t.next;return n?n.value:null},e.prototype.isLast=function(e){return e===this.last()},e.prototype.findNodeBy=function(e){for(var t=this._head;null!==t;){if(e(t.value))return t;t=t.next}return null},e.prototype.findPreviousNodeBy=function(e){var t=this.findNodeBy(e);return t?t.previous:null},e.prototype.add=function(e){var t=this._tail,n=i.create(e);t&&(t.next=n,n.previous=t),this._head||(this._head=n),this._tail=n,this._length++},e.prototype.push=function(e){var t=this._head,n=i.create(e);t&&(t.previous=n,n.next=t),this._tail||(this._tail=n),this._head=n,this._length++},e.prototype.first=function(){return this._head?this._head.value:null},e.prototype.last=function(){return this._tail?this._tail.value:null},e.prototype.pop=function(){if(!this._head)return null;var e=this._head.value;return this._head=this._head.next,this._head||(this._tail=null),this._length--,e},e.prototype.isEmpty=function(){return null===this._head},e.prototype.remove=function(e){for(var t=this._head;null!==t;){if(t.value===e)return t.previous?t.next?(t.previous.next=t.next,t.next.previous=t.previous):(this._tail=this._tail.previous,this._tail&&(this._tail.next=null)):(this._head=this._head.next,this._head&&(this._head.previous=null),this._tail===t&&(this._tail=this._head)),this._length--,t.value;t=t.next}return null},e.prototype.clear=function(){this._head=null,this._tail=null,this._length=0},e.prototype.iterator=function(){for(var e=[],t=this._head;null!==t;)e.push(t.value),t=t.next;return e},e}();t.LinkedList=r;var i=function(){function e(e){this.value=e,this.previous=null,this.next=null}return e.create=function(t,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var i=new e(t);return r&&(i.next=r),n&&(i.previous=n),i},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(90))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(137)),r(n(91))},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(91),o=n(11),a=n(92),s=n(12),u=function(e){var t=o.getQueryAsMap(e);return o.ObjectUtils.keyValues(t).map((function(e){var t=e.key,n=e.value;switch(n=n||"",t){case i.LogQueryParam.Debug:return c(n);case i.LogQueryParam.Enabled:return l(n);case i.LogQueryParam.Theme:return d(n);case i.LogQueryParam.Category:return f(n);case i.LogQueryParam.Sources:return p(n);case i.LogQueryParam.Levels:return h(n)}})).reduce((function(e,t){return o.ObjectUtils.extendDeep(e,t),e}),{})},c=function(e){var t;if("true"===e)return{enabled:!0,levels:(t={},t[s.LogLevelCompositeType.Dev]=!0,t)}},l=function(e){var t="true"===e;if(t)return{enabled:t}},d=function(e){switch(e){case s.LogTheme.Dark:return{theme:s.LogTheme.Dark};case s.LogTheme.Light:return{theme:s.LogTheme.Light}}},f=function(e){var t=g(e);if(t.length>0)return{categories:o.ArrayUtils.mapToObj(t,(function(e,t){t[e]=!0}))}},p=function(e){var t,n=g(e);if(n.length>0){var i=o.ArrayUtils.mapToObj(n,(function(e,t){t[e]=!0}));return{sources:r((t={},t[s.LogSourceCompositeType.All]=!1,t),i)}}},h=function(e){var t,n=g(e);if(n.length>0){var i=o.ArrayUtils.mapToObj(n,(function(e,t){t[e]=!0}));return{levels:r((t={},t[s.LogSourceCompositeType.All]=!1,t),i)}}},g=function(e,t){void 0===t&&(t="|");var n=encodeURIComponent(t),r=new RegExp(o.escape(t)+"|"+o.escape(n),"g");return o.split(e,r).map((function(e){return e.trim()}))};t.LogOverrideHelper={applyOverridesFromURL:function(e){var t=u(e);t&&a.Log.updateConfig(t)},getLogConfigFromURL:u}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=n(12),a=n(90),s=function(){function e(e){this._enabled=!0;var t={theme:o.LogTheme.Light};e=e||{};var n=r(r({},t),e);this.updateTheme(n.theme)}return e.prototype.detach=function(){this._enabled=!1},e.prototype.init=function(e){return this._options=i.ObjectUtils.extendDeep({formatter:a.DefaultFormatters.cssConsole},e||{}),this._formatter=this._options.formatter,this},e.prototype.updateTheme=function(e){switch(e){case o.LogTheme.Dark:this._contextStyle="color: #00AAFF;",this._msgStyle="color: #FFFFFF;";break;default:this._contextStyle="color: #00008B;",this._msgStyle="color: #000;"}},e.prototype.sendMessage=function(e){if(this._enabled){var t=this._formatter(e);switch(e.type){case o.LogLevelType.Verbose:console.log(t,this._contextStyle,this._msgStyle);break;case o.LogLevelType.Debug:console.debug(t,this._contextStyle,this._msgStyle);break;case o.LogLevelType.Info:console.info(t,this._contextStyle,this._msgStyle);break;case o.LogLevelType.Warn:console.warn(t,this._contextStyle,this._msgStyle);break;case o.LogLevelType.Error:console.error(t,this._contextStyle,this._msgStyle)}}},e}();t.ConsoleTarget=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(77),o=function(){function e(e){this._events=e}return e.prototype.detach=function(){this._events=void 0},e.prototype.init=function(e){return this._options=e,this},e.prototype.updateTheme=function(e){},e.prototype.sendMessage=function(e){var t;if(this._events){var n=((t={})[r.LogLevelType.Debug]=i.LogEventType.Debug,t[r.LogLevelType.Info]=i.LogEventType.Info,t[r.LogLevelType.Verbose]=i.LogEventType.Verbose,t[r.LogLevelType.Warn]=i.LogEventType.Warning,t[r.LogLevelType.Error]=i.LogEventType.Error,t)[e.type];n?this._events[n].dispatch({entry:e}):console.warn("[sendMessage] No event could be matched for log entry: ",e)}},e}();t.LogEventTarget=o},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=n(12),a=n(94),s=function(){function e(){this._sources={},this._categories={},this._levels={}}return e.prototype._sendMessage=function(e,t){var n={time:Date.now(),context:this._context,contextDetail:this._contextDetail,type:e,message:t};this._targets.forEach((function(e){try{e.sendMessage(n)}catch(e){console.warn("[sendMessage] Unable to send log message to target, error:",e)}}))},e.prototype._applyFiltersAndToggle=function(){var e=this;this._enabled=this._canBeEnabled,this._enabled&&this._filters&&this._filters.forEach((function(t){var n=!0===t||i.isString(t)&&a.getFilterVisibility(e._categories,t);e._enabled=e._enabled&&n}))},e.prototype._createChildLogger=function(t){var n;void 0===t&&(t={});var r=i.ObjectUtils.extendDeep({},this._options,t);r.filters=i.ArrayUtils.dedupe(r.filters);var o=(new e).init(r);return null===(n=this._manager)||void 0===n||n.storeLoggerInstance(o),o},e.prototype._sendMessageWithType=function(e,t){this._manager.enabled&&this._enabled&&this._levels[e]&&this._sendMessage(e,t)},e.prototype.init=function(e){void 0===e&&(e={});var t={context:"",contextDetail:"",targets:[],source:o.LogSourceType.Unsourced,enabled:!0,categories:{},levels:{},filters:[]},n=i.ObjectUtils.extendDeep(t,e),r=n.manager,a=n.context,s=n.contextDetail,u=n.targets,c=n.enabled,l=n.source,d=n.sources,f=n.categories,p=n.levels,h=n.filters;return r&&(this._manager=r),this._context=a,this._contextDetail=s,this._source=l,this._targets=u,this._filters=h,this._options=n,this.setEnabled(c),this.updateSources(d),this.updateCategories(f),this.updateLevels(p),this},e.prototype.verbose=function(e){this._sendMessageWithType(o.LogLevelType.Verbose,e)},e.prototype.debug=function(e){this._sendMessageWithType(o.LogLevelType.Debug,e)},e.prototype.info=function(e){this._sendMessageWithType(o.LogLevelType.Info,e)},e.prototype.warn=function(e){this._sendMessageWithType(o.LogLevelType.Warn,e)},e.prototype.error=function(e){this._sendMessageWithType(o.LogLevelType.Error,e)},e.prototype.filter=function(e){i.isString(e)&&this._manager.registerFilter(e);var t=r(this._filters,[e]);return this._createChildLogger({filters:t})},e.prototype.child=function(e){var t=""===this._contextDetail?e:this._contextDetail+" | "+e;return this._createChildLogger({contextDetail:t})},e.prototype.setEnabled=function(e){this._canBeEnabled=e,this._applyFiltersAndToggle()},e.prototype.setTargets=function(e){this._targets=e},e.prototype.getSource=function(){return this._source},e.prototype.updateSources=function(e){Object.assign(this._sources,e);var t=this.getSource();t in e&&this.setEnabled(e[t]),this._applyFiltersAndToggle()},e.prototype.updateCategories=function(e){Object.assign(this._categories,e),this._applyFiltersAndToggle()},e.prototype.updateLevels=function(e){Object.assign(this._levels,e),this._applyFiltersAndToggle()},e.prototype.destroy=function(){var e;null===(e=this._manager)||void 0===e||e.removeLoggerInstance(this)},e}();t.DefaultLogger=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=function(){function e(e){this._className=e}return e.prototype._call=function(e,t){var n="["+this._className+"] "+t;switch(e){case r.LogLevelType.Debug:console.debug(n);break;case r.LogLevelType.Info:console.info(n);break;case r.LogLevelType.Warn:console.warn(n);break;case r.LogLevelType.Error:console.error(n);break;default:console.log(n)}},e.prototype.init=function(e){return this},e.prototype.debug=function(e){this._call(r.LogLevelType.Debug,e)},e.prototype.info=function(e){this._call(r.LogLevelType.Info,e)},e.prototype.warn=function(e){this._call(r.LogLevelType.Warn,e)},e.prototype.error=function(e){this._call(r.LogLevelType.Error,e)},e.prototype.verbose=function(e){this._call(r.LogLevelType.Verbose,e)},e.prototype.filter=function(e){return this},e.prototype.child=function(e){return this},e.prototype.setEnabled=function(e){},e.prototype.setTargets=function(e){},e.prototype.getSource=function(){return r.LogSourceType.Unsourced},e.prototype.updateSources=function(e){},e.prototype.updateCategories=function(e){},e.prototype.updateLevels=function(e){},e}();t.SimpleLogger=i},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(143)),r(n(144))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=/\<ttl\>(\d+)\<\/ttl\>/,o=/\<issueTime\>(.+)\<\/issueTime\>/,a=/\<requestorID\>(.+)\<\/requestorID\>/,s=/\<resourceID\>(.+)\<\/resourceID\>/;t.AdobeTokenParser={parse:function(e){var t={ttl:i.exec(e),issueTime:o.exec(e),requestorId:a.exec(e),resourceId:s.exec(e)},n="",u="",c="",l=0;t.ttl&&t.issueTime&&(c=t.issueTime[1],l=parseInt(t.ttl[1],10));var d,f,p=function(e){return"Invalid Date"!==e.toString()},h=new Date(c);p(h)||(h=new Date((f=(d=c.split(" "))[2].substr(0,3)+":"+d[2].substr(3,5),d[0]+"T"+d[1]+f)));var g=new Date(h.getTime()+l);if(!p(h))throw new Error("Invalid date string encountered while parsing Adobe auth token: "+c);return t.requestorId&&(n=t.requestorId[1]),t.resourceId&&(u=t.resourceId[1]),{type:r.AuthTokenType.Adobe,requestorId:n,resourceId:u,issuedAt:h,expiresAt:g}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(145);t.JWSTokenParser={parse:function(e){var t=e.split(".")[1],n=JSON.parse(i.Base64.atob(t)),o=n.requestorId,a=n.resourceId,s=n.createdAt,u=n.expiresAt;return{type:r.AuthTokenType.JWS,requestorId:o,resourceId:a,issuedAt:new Date(s),expiresAt:new Date(u)}}}},function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,t,e;t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,e=function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.2",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),t>=2?"=":b64chars.charAt(n>>>6&63),t>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)?e.toString("base64"):btoa(utob(String(e)))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):_encode(e)},encodeURI=function(e){return encode(e,!0)},re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,r=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),i=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum((function(){return decode(this)}))),Object.defineProperty(String.prototype,"toBase64",noEnum((function(e){return encode(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",noEnum((function(){return encode(this,!0)})))}}return global.Meteor&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}},module.exports=e(t)}).call(this,__webpack_require__(71))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(75))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(99)),r(n(149)),r(n(101))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),i=n(100);function o(e){return r.createEvent(e)}t.createFsmEvent=o,t.createFsmEventCollection=function(){return r.createEventCollection({beforeEvent:o(i.FsmEventType.Before_Event),stateEntered:o(i.FsmEventType.State_Entered),stateChanged:o(i.FsmEventType.State_Changed),afterEvent:o(i.FsmEventType.After_Event),error:o(i.FsmEventType.Error)})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),o=n(99),a=n(101),s=i.Log.getLogger("Fsm").filter("std");s.setEnabled(!1);var u=function(){function e(){this._events=o.createFsmEventCollection(),this._eventTransitions=new Map,this._stateTransitions=new Map,this._eventList=new Map,this._previousState=null,this._currentState=null,this._finalState=null,this._currentTransition=null,this._currentTransitionCBs=this._getTransitionCBs({})}return e.prototype._doInit=function(e){var t=this;this._config=e,this._initialState=e.initial,this._finalState=e.end?e.end:null,this._addEvent({name:this._initialState.name,from:[null],to:this._initialState.state},!0),e.events.forEach((function(e){return t._addEvent(e)})),this._stateTransitions.forEach((function(e,n){t._eventList.set(n,t._buildEvent(n,e))})),this._currentState=null,this._doFire(this._initialState.name)},e.prototype._doFire=function(e,t){var n=this._eventList.get(e);return n?n(t):a.FsmTransitionResult.Error},e.prototype._doCanFire=function(e){var t,n=this._stateTransitions.get(e),r=null===this._currentTransition&&n&&n.has(this._currentState),i=this._stateTransitions.has(a.FsmDefaultEvents.Wildcard)||(null===(t=n)||void 0===t?void 0:t.has(a.FsmDefaultEvents.Wildcard));return r||i},e.prototype._doCannotFire=function(e){return!this._doCanFire(e)},e.prototype._addEvent=function(e,t){void 0===t&&(t=!1);var n=t?a.FsmDefaultStates.No_State:a.FsmDefaultEvents.Wildcard,i=e.to,o=e.from?e.from:[n];this._stateTransitions.has(e.name)||this._stateTransitions.set(e.name,new Map);for(var s=0;s<o.length;s++){this._eventTransitions.has(o[s])||this._eventTransitions.set(o[s],[]),this._eventTransitions.get(o[s]).push(e.name);var u=this._stateTransitions.get(e.name);u&&u.set(o[s],r({name:e.name,to:i||o[s]},this._getTransitionCBs(e)))}i&&!this._eventTransitions.has(i)&&this._eventTransitions.set(i,[])},e.prototype._buildEvent=function(e,t){var n=this;return function(r){r=r||[];var i,o=n._currentState,s=t.get(o);if(s&&(i=s.to),i||(i=t.get(a.FsmDefaultEvents.Wildcard)&&t.get(a.FsmDefaultEvents.Wildcard).to&&t.get(a.FsmDefaultEvents.Wildcard).to!==a.FsmDefaultEvents.Wildcard?t.get(a.FsmDefaultEvents.Wildcard).to:o),null!==n._currentTransition)return n._handleError(e,o,i,r,a.FsmError.Pending_Transition,"event "+e+" inappropriate because previous transition did not complete"),a.FsmTransitionResult.Error;if(n.cannotFireTransition(e))return n._handleError(e,o,i,r,a.FsmError.Invalid_Transition,"event "+e+" inappropriate in current state "+o),a.FsmTransitionResult.Error;if(n._currentTransitionCBs=n._getTransitionCBs(s),!1===n._handleBeforeEvent(e,o,i,r))return a.FsmTransitionResult.Canceled;if(o===i)return n._handleAfterEvent(e,o,i,r),a.FsmTransitionResult.No_Transition;n._currentTransition=n._createTransition(e,o,i,r);var u=n._handleLeaveState(e,o,i,r);return!1===u?(n._currentTransition=null,a.FsmTransitionResult.Canceled):u===a.FsmModes.Async?a.FsmTransitionResult.Pending:null!==n._currentTransition?n._currentTransition.execute():a.FsmTransitionResult.Error}},e.prototype._createTransition=function(e,t,n,r){var i=this;return{execute:function(){return i._currentTransition=null,i._previousState=i._currentState,i._currentState=n,i._handleStateEntered(e,t,n,r),i._handleStateChanged(e,t,n,r),i._handleAfterEvent(e,t,n,r),a.FsmTransitionResult.Succeeded},cancel:function(){return i._currentTransition=null,i._handleAfterEvent(e,t,n,r),a.FsmTransitionResult.Canceled}}},e.prototype._getTransitionCBs=function(e){var t=function(){},n=function(){return!0};return{onBeforeEvent:(e=e||{}).onBeforeEvent||n,onStateEntered:e.onStateEntered||t,onStateChanged:e.onStateChanged||t,onAfterEvent:e.onAfterEvent||t,onLeave:e.onLeave||n,onError:e.onError||t}},e.prototype._handleError=function(e,t,n,r,i,o){s.debug("[handleError] trigger: "+e+", from: "+this._previousState+", to: "+n+", errorType: "+i+", desc: "+o),this._currentTransitionCBs.onError(e,this._previousState,n,r,i,o),this._notifyError(e,this._previousState,n,r,i,o)},e.prototype._handleBeforeEvent=function(e,t,n,r){return s.debug("[handleBeforeEvent] trigger: "+e+", from: "+this._currentState+", to: "+n),!!this._currentTransitionCBs.onBeforeEvent(e,this._currentState,n,r)&&(this._notifyBeforeEvent(e,this._currentState,n,r),!0)},e.prototype._handleLeaveState=function(e,t,n,r){return this._currentTransitionCBs.onLeave(e,t,n,r)},e.prototype._handleStateEntered=function(e,t,n,r){s.debug("[handleStateEntered] trigger: "+e+", from: "+this._previousState+", to: "+n),this._currentTransitionCBs.onStateEntered(e,this._previousState,n,r),this._notifyStateEntered(e,this._previousState,n,r)},e.prototype._handleStateChanged=function(e,t,n,r){s.debug("[handleStateChanged] trigger: "+e+", from: "+this._previousState+", to: "+n),this._currentTransitionCBs.onStateChanged(e,this._previousState,n,r),this._notifyStateChanged(e,this._previousState,n,r)},e.prototype._handleAfterEvent=function(e,t,n,r){s.debug("[handleAfterEvent] trigger: "+e+", from: "+this._previousState+", to: "+n),this._currentTransitionCBs.onAfterEvent(e,this._previousState,n,r),this._notifyAfterEvent(e,this._previousState,n,r)},e.prototype._notifyBeforeEvent=function(e,t,n,r){this._events.beforeEvent.dispatch({name:e,from:t,to:n,args:r})},e.prototype._notifyStateEntered=function(e,t,n,r){this._events.stateEntered.dispatch({name:e,from:t,to:n,args:r})},e.prototype._notifyStateChanged=function(e,t,n,r){this._events.stateChanged.dispatch({name:e,from:t,to:n,args:r})},e.prototype._notifyAfterEvent=function(e,t,n,r){this._events.afterEvent.dispatch({name:e,from:t,to:n,args:r})},e.prototype._notifyError=function(e,t,n,r,i,o){this._events.error.dispatch({name:e,from:t,to:n,args:r,errorType:i,errorDesc:o})},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.init=function(e){return this._doInit(e),this},e.prototype.currentState=function(){return this._currentState},e.prototype.previousState=function(){return this._previousState},e.prototype.fireTransition=function(e,t){return this._doFire(e,t)},e.prototype.attemptTransition=function(e,t){return this.cannotFireTransition(e)?(s.warn("[_attemptTransition] Unable to fire "+e+" from current state: "+this.currentState()),null):this.fireTransition(e,t)},e.prototype.canFireTransition=function(e){return this._doCanFire(e)},e.prototype.cannotFireTransition=function(e){return this._doCannotFire(e)},e.prototype.completeTransition=function(){return this._currentTransition?this._currentTransition.execute():a.FsmTransitionResult.No_Transition},e.prototype.cancelTransition=function(){return this._currentTransition?this._currentTransition.cancel():a.FsmTransitionResult.No_Transition},e.prototype.isTransitioning=function(){return null!==this._currentTransition},e}();t.Fsm=u},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(151)),r(n(153)),r(n(78)),r(n(154))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(102),i=n(11),o=n(78),a=function(){function e(e){var t,n,r;this._options={executionTimeout:(r=null===(n=e)||void 0===n?void 0:n.executionTimeout,null!=r?r:1e4)},this._baseHandler=function(e){return Promise.resolve(e)},this._handlers=((t={})[o.HookHandlerType.Peripheral]=[],t[o.HookHandlerType.Default]=[],t),this._activeTask=null}return e.prototype._cleanupActiveTask=function(){this._activeTask&&(this._activeTask.cancel(),this._activeTask=null)},e.prototype._handlersToPipeables=function(e){return this._handlers[e].map((function(e){return function(t){return r.TaskFactory.create((function(n){e(t).then((function(e){return n.resolve(e)})).catch((function(e){return n.reject(e)}))}))}}))},Object.defineProperty(e.prototype,"hasRegisteredHandlers",{get:function(){return this._handlers.default.length>0||this._handlers.peripheral.length>0},enumerable:!0,configurable:!0}),e.prototype.hasRegisteredHandlersByType=function(e){return this._handlers[e].length>0},e.prototype.add=function(e,t){return void 0===t&&(t=o.HookHandlerType.Default),this._handlers[t].push(e),this},e.prototype.remove=function(e,t){return void 0===t&&(t=o.HookHandlerType.Default),i.ArrayUtils.remove(this._handlers[t],e),this},e.prototype.execute=function(e){var t=this;this._cleanupActiveTask();var n=r.TaskFactory.create((function(n){t._baseHandler(e).then((function(e){return n.resolve(e)})).catch((function(e){return n.reject(e)}))}));return this._activeTask=r.TaskFactory.create((function(e){var a,s,u=(a=t._options.executionTimeout,s=null,r.TaskFactory.create((function(e){(s=i.Timer(i.TimerMode.Timeout,(function(){e.reject("Hook execution timeout of "+a+"ms reached")}),a)).start()})).onCanceled((function(){s&&(s.stop(),s=null)}))).execute().onRejected((function(t){return e.reject(t)})),c=[{type:o.HookHandlerType.Peripheral,handlers:t._handlersToPipeables(o.HookHandlerType.Peripheral)},{type:o.HookHandlerType.Default,handlers:t._handlersToPipeables(o.HookHandlerType.Default)}],l=n;c.forEach((function(e){e.handlers.forEach((function(e){return l=l.pipe(e)}))})),l.execute().fold((function(t){u.cancel(),e.reject(t)}),(function(t){u.cancel(),e.resolve(t)}))})),this._activeTask.execute()},e.prototype.cancel=function(){return this._cleanupActiveTask(),this},e.prototype.clear=function(e){return void 0===e&&(e=o.HookHandlerType.Default),this._handlers[e].length=0,this},e.prototype.clearAll=function(){var e=this;return Object.keys(this._handlers).forEach((function(t){var n=t;e.clear(n)})),this},e}();t.CoreHook=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(106);t.NetworkTask=function(e,t){return r.TaskFactory.create((function(n){fetch(e,t).then((function(e){if(e.ok)return e;throw e})).then((function(e){var n;return(null===(n=t)||void 0===n?void 0:n.passthrough)?e:e.json()})).then(n.resolve,n.reject)}))},t.isResponse=function(e){return void 0!==e.status}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69),i=n(78),o=function(){function e(e,t){this._hookName=e,this._logger=t,this._handlers=new Map}return e.createFor=function(t){return new e(t,r.Log.getLogger("Hook:"+t))},Object.defineProperty(e.prototype,"handlers",{get:function(){var e={};return this._handlers.forEach((function(t,n){return e[n]=t})),e},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){void 0===t&&(t=i.HookHandlerType.Default);var n=this._handlers.get(t)||[];switch(t){case i.HookHandlerType.Peripheral:this._logger.info("Setting peripheral handler"),n.length>0&&(this._logger.warn("Only one peripheral handler may be set per-hook"),r.ArrayUtils.remove(n,n[0]));break;default:this._logger.info("Adding default hook handler")}n.push(e),this._handlers.set(t,n)},e.prototype.clear=function(e){if("function"==typeof e){var t=e;return this._logger.info("Removing given handler from hook"),void this._handlers.forEach((function(e){return r.ArrayUtils.remove(e,t)}))}var n=e||i.HookHandlerType.Default;this._logger.info("Removing "+n+" handlers for hook"),this._handlers.delete(n)},e.prototype.clearAll=function(){this._handlers.clear()},e}();t.BaseHook=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(155)),r(n(107)),r(n(108))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(107),i=function(){function e(){}return e.createFor=function(e,t,n){return void 0===t&&(t="hook:event"),r.BridgeHookEventProxyHandler(e,t,n)},e}();t.BridgeHookEventHandler=i},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(52),u=n(157),c=n(74),l=n(158),d=n(53),f=i(n(2)),p=function(e){try{return JSON.stringify(e)}catch(e){return""}};!function(e){e[e.SLEEPING=0]="SLEEPING",e[e.INITING=1]="INITING",e[e.WORKING=2]="WORKING",e[e.DEAD=3]="DEAD"}(o||(o={})),function(e){e[e.EMPTY_EVENT_QUEUE=0]="EMPTY_EVENT_QUEUE",e[e.NO_CLIENTS=1]="NO_CLIENTS",e[e.SERVICE_FAILURE=2]="SERVICE_FAILURE",e[e.DISPOSE=3]="DISPOSE"}(a||(a={}));var h={serviceUrl:"https://spotlight.ngtv.io",lazyInit:!0,helloRetries:3,batchRetries:5},g=function(){function e(e){this._clients=[],this._inited=!1,this._initTime=0,this._events=[],this._helloAttempts=0,this._batchAttempts=0,this._lastBatchAttemptTime=0,this._serviceConfig=new l.SpotlightServiceConfigManager,this._state=o.SLEEPING,this._config=e;var t=this._config.serviceUrl,n=void 0===t?"https://spotlight.ngtv.io":t;this._helloUrl=n+"/hello",this._batchUrl=n+"/batch"}return e.getBroker=function(t){var n=t.appId,r=t.serviceUrl,i=n+"::"+(void 0===r?"https://spotlight.ngtv.io":r);return e.brokers[i]||(e.brokers[i]=new e(t))},e.createClient=function(t){var n=Object.assign({},h,t);return e.getBroker(n).createClient(n)},e.disposeAll=function(){Object.values(e.brokers).forEach((function(e){return e.dispose()}))},e.prototype.createClient=function(e){var t=new u.SpotlightClient(this,e);return this._clients.push(t),t},e.prototype.init=function(){this._inited||this._isDead()||(d.SpotlightLogger.debug("Broker:init - manually and explicitly init()ed"),this._hello())},e.prototype._isServiceConfigStale=function(){return(Date.now()-this._initTime)/1e3>5*this._serviceConfig.helloPingInterval},e.prototype.queue=function(e){if(!this._isDead()){d.SpotlightLogger.debug("Broker:queue - "+p(e)),this._isSleeping()&&(this._inited?this._isServiceConfigStale()&&(d.SpotlightLogger.debug("Broker:queue - service config has grown stale, re-hello-ing"),this._hello()):this._config.lazyInit?(d.SpotlightLogger.debug("Broker:queue - lazy-initing now that a message is queued"),this._hello()):d.SpotlightLogger.info("Broker:queue - lazy-init disabled; init() must be manually called"));var t=Object.assign({timestamp:Date.now()},e);this._inited&&0===this._events.length&&(d.SpotlightLogger.debug("Broker:queue - re-starting batch timer"),this._restartBatchTimer()),this._events.push(t);var n=this._events.length,r=this._serviceConfig.maxBatchSize;n>=r&&(d.SpotlightLogger.debug("Broker:queue - event queue ("+n+") meets or exceeds maxBatchSize ("+r+"), batching..."),this._batch())}},e.prototype._hello=function(){var e=this;if(!this._isDead())if(this._isIniting())d.SpotlightLogger.debug("Broker:hello - disallowing concurrent hello calls");else{if(this._config.helloRetries&&this._helloAttempts>this._config.helloRetries)return d.SpotlightLogger.info("Broker:hello - too many retries ... dead"),void this._stop(a.SERVICE_FAILURE);this._state=o.INITING,d.SpotlightLogger.debug("Broker:hello request"),this._helloAttempts+=1;var t=this._serviceConfig.sessionId,n=t?this._helloUrl+"/"+t:this._helloUrl;fetch(n,{method:"GET",mode:"cors",headers:{"app-id":this._config.appId,"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(t){if(!f.default(t))throw new Error("Spotlight /hello service returned invalid data");if(e._serviceConfig.update(t),!e._serviceConfig.sessionId)throw new Error("Spotlight client requires sessionId from server");d.SpotlightLogger.debug("Broker:hello response - "+p(e._serviceConfig)),e._state=o.WORKING,e._inited=!0,e._initTime=Date.now(),e._helloAttempts=0,e._batch()}),(function(t){d.SpotlightLogger.info("Broker:hello service error - "+(t.status?t.status+": "+t.statusText:t)),e._state=o.SLEEPING})).catch((function(t){d.SpotlightLogger.info("Broker:hello client error - "+t),e._state=o.SLEEPING}))}},e.prototype._batch=function(){var e=this;if(!this._isDead()){if(this._lastBatchAttemptTime){var t=Math.floor((Date.now()-this._lastBatchAttemptTime)/1e3),n=this._serviceConfig.flushInterval;if(t<n)return void d.SpotlightLogger.debug("Broker:batch - because last batch attempt failed, waiting until flushInterval ("+n+"s) has passed - "+(n-t)+"s remaining")}if(0===this._events.length)return d.SpotlightLogger.debug("Broker:batch - nothing to batch; sleeping"),void this._stop(a.EMPTY_EVENT_QUEUE);if(this._inited){if(this._config.batchRetries&&this._batchAttempts>this._config.batchRetries)return d.SpotlightLogger.info("Broker:batch - too many retries ... dead"),void this._stop(a.SERVICE_FAILURE);var i=this._filterEvents(this._events.splice(0,this._serviceConfig.maxBatchSize));0!==i.length?(this._inited&&this._isSleeping()&&(d.SpotlightLogger.debug("Broker:batch - restarting hello"),this._restartHelloTimer()),this._batchAttempts+=1,this._lastBatchAttemptTime=Date.now(),this._postEvents(i).then((function(){d.SpotlightLogger.debug("Broker:batch response - success!"),e._batchAttempts=0,e._lastBatchAttemptTime=0}),(function(t){var n;d.SpotlightLogger.info("Broker:batch service error - "+(t.status?t.status+": "+t.statusText:t)),t.status>=500&&(n=e._events).splice.apply(n,r([0,0],i)),e._queueServiceError(t.clone())})).catch((function(e){d.SpotlightLogger.info("Broker:batch client error - "+e)})).finally((function(){e._restartBatchTimer()}))):d.SpotlightLogger.debug("Broker:batch filtered out all events, nothing to POST")}else d.SpotlightLogger.debug("Broker:batch - waiting for hello")}},e.prototype._queueServiceError=function(e){var t,n,r={},i={timestamp:Date.now(),type:"spotlight",category:s.SpotlightEventCategory.ERROR,level:s.SpotlightEventLevel.CRITICAL,source:"spotlight",data:r};if(e instanceof Response){var o=[];null===(n=(t=e.headers).forEach)||void 0===n||n.call(t,(function(e,t){return o.push([t,e])}));var a={res_headers:o.map((function(e){return e[0]+"="+e[1]})).join(","),res_ok:e.ok,res_redirected:e.redirected,res_status:e.status,res_statusText:e.statusText,res_type:e.type,res_url:e.url};Object.assign(r,a)}else r.error_message=String(e);this._events.splice(0,0,i)},e.prototype._filterEvents=function(e){return e.filter(this._serviceConfig.filterEvent)},e.prototype._postEvents=function(e){d.SpotlightLogger.debug("Broker:_postEvents - "+p(e));var t={sessionId:this._serviceConfig.sessionId,events:e};return fetch(this._batchUrl,{method:"POST",mode:"cors",headers:{"app-id":this._config.appId,"Content-Type":"application/json",Accept:"application/json"},body:p(t)}).then((function(e){return e.ok?e:Promise.reject(e)}))},e.prototype.detachClient=function(e){var t=this._clients.findIndex((function(t){return t===e}));-1!==t&&this._clients.splice(t,1),0===this._clients.length&&(this._stop(a.NO_CLIENTS),this._flush())},e.prototype._stop=function(e){var t,n;d.SpotlightLogger.debug("Broker:_stop - reason: "+a[e]),null===(t=this._helloTimer)||void 0===t||t.stop(),e!==a.NO_CLIENTS&&(null===(n=this._batchTimer)||void 0===n||n.stop()),this._state=e===a.SERVICE_FAILURE||e===a.DISPOSE?o.DEAD:o.SLEEPING},e.prototype.dispose=function(){this._stop(a.DISPOSE),this._clients.forEach((function(e){return e.dispose()}))},e.prototype._flush=function(){if(this._inited&&this._events.length>0){var e=this._filterEvents(this._events.splice(0,this._serviceConfig.maxBatchSize));e.length>0&&(d.SpotlightLogger.debug("Broker:_flush - "+p(e)),this._postEvents(e))}},e.prototype._restartHelloTimer=function(){var e;if(!this._isDead()){var t=this._serviceConfig.helloPingInterval;d.SpotlightLogger.debug("Broker:_restartHelloTimer - interval hello ping: "+t+" seconds"),null===(e=this._helloTimer)||void 0===e||e.stop();var n=this._hello.bind(this);this._helloTimer=c.Timer(c.TimerMode.Timeout,n,1e3*t),this._helloTimer.start()}},e.prototype._restartBatchTimer=function(){var e;if(!this._isDead()){var t=this._serviceConfig.flushInterval;d.SpotlightLogger.debug("Broker:_restartBatchTimer - interval batching: "+t+" seconds"),null===(e=this._batchTimer)||void 0===e||e.stop();var n=this._batch.bind(this);this._batchTimer=c.Timer(c.TimerMode.Timeout,n,1e3*t),this._batchTimer.start()}},e.prototype._isSleeping=function(){return this._state===o.SLEEPING},e.prototype._isIniting=function(){return this._state===o.INITING},e.prototype._isDead=function(){return this._state===o.DEAD},e.brokers={},e}();t.SpotlightBroker=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=function(){function e(e,t){this._broker=e,this._config=t,this._source=this._config.source,this._source||r.SpotlightLogger.warn('Spotlight requires a "source"')}return e.prototype.init=function(){var e;null===(e=this._broker)||void 0===e||e.init()},e.prototype.send=function(e){var t,n=Object.assign({},e,{source:this._source});null===(t=this._broker)||void 0===t||t.queue(n)},e.prototype.dispose=function(){var e;null===(e=this._broker)||void 0===e||e.detachClient(this),this._broker=void 0},e}();t.SpotlightClient=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(52),o=r(n(169)),a=r(n(0)),s=r(n(159)),u=r(n(51)),c=n(53),l={eventTypesAllowed:"*",categoryAllowed:[i.SpotlightEventCategory.ERROR],throttleLevel:[i.SpotlightEventLevel.CRITICAL],maxBatchSize:200,flushInterval:10,helloPingInterval:600},d=function(){function e(){var e=this;this._serviceConfig=Object.assign({},l),this.filterEvent=function(t){if(!t.level)return c.SpotlightLogger.verbose('ServiceConfig - event has no "level"'),!1;if(!t.category)return c.SpotlightLogger.verbose('ServiceConfig - event has no "category"'),!1;if(!t.type)return c.SpotlightLogger.verbose('ServiceConfig - event has no "type"'),!1;if(u.default(e.throttleLevel)){if("*"!==e.throttleLevel&&e.throttleLevel!==t.level)return c.SpotlightLogger.verbose('ServiceConfig - config "throttleLevel" string value "'+e.throttleLevel+'" does not allow event level "'+t.level+'"'),!1}else{if(!a.default(e.throttleLevel))return c.SpotlightLogger.verbose('ServiceConfig - invalid "throttleLevel" value'),!1;if(0===e.throttleLevel.length)return c.SpotlightLogger.verbose('ServiceConfig - config "throttleLevel" is empty array; no events allowed'),!1;if(!e.throttleLevel.includes(t.level))return c.SpotlightLogger.verbose('ServiceConfig - config "throttleLevel" does not contain "'+t.level+'"'),!1}if(u.default(e.categoryAllowed)){if("*"!==e.categoryAllowed&&e.categoryAllowed!==t.category)return c.SpotlightLogger.verbose('ServiceConfig - config "categoryAllowed" string value "'+e.categoryAllowed+'" does not allow event category "'+t.category+'"'),!1}else{if(!a.default(e.categoryAllowed))return c.SpotlightLogger.verbose('ServiceConfig - invalid "categoryAllowed" value'),!1;if(0===e.categoryAllowed.length)return c.SpotlightLogger.verbose('ServiceConfig - config "categoryAllowed" is empty array; no events allowed'),!1;if(!e.categoryAllowed.includes(t.category))return c.SpotlightLogger.verbose('ServiceConfig - config "categoryAllowed" does not contain "'+t.category+'"'),!1}if(u.default(e.eventTypesAllowed)){if("*"!==e.eventTypesAllowed&&e.eventTypesAllowed!==t.type)return c.SpotlightLogger.verbose('ServiceConfig - config "eventTypesAllowed" string value "'+e.eventTypesAllowed+'" does not allow event type "'+t.type+'"'),!1}else{if(!a.default(e.eventTypesAllowed))return c.SpotlightLogger.verbose('ServiceConfig - invalid "eventTypesAllowed" value'),!1;if(0===e.eventTypesAllowed.length)return c.SpotlightLogger.verbose('ServiceConfig - config "eventTypesAllowed" is empty array; no events allowed'),!1;if(!e.eventTypesAllowed.includes(t.type))return c.SpotlightLogger.verbose('ServiceConfig - config "eventTypesAllowed" does not contain "'+t.type+'"'),!1}return!0}}return e.prototype.update=function(e){var t=Object.assign(this._serviceConfig,e);s.default(t.maxBatchSize)||(t.maxBatchSize=l.maxBatchSize),t.maxBatchSize=o.default(t.maxBatchSize,5),s.default(t.flushInterval)||(t.flushInterval=l.flushInterval),t.flushInterval=o.default(t.flushInterval,5,900),s.default(t.helloPingInterval)||(t.helloPingInterval=l.helloPingInterval),t.helloPingInterval=o.default(t.helloPingInterval,this.flushInterval+10,1800),u.default(t.eventTypesAllowed)||a.default(t.eventTypesAllowed)||(t.eventTypesAllowed=l.eventTypesAllowed),u.default(t.categoryAllowed)||a.default(t.categoryAllowed)||(t.categoryAllowed=l.categoryAllowed),u.default(t.throttleLevel)||a.default(t.throttleLevel)||(t.throttleLevel=l.throttleLevel),this._serviceConfig=t},Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._serviceConfig.sessionId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventTypesAllowed",{get:function(){var e;return null!=(e=this._serviceConfig.eventTypesAllowed)?e:l.eventTypesAllowed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryAllowed",{get:function(){var e;return null!=(e=this._serviceConfig.categoryAllowed)?e:l.categoryAllowed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"throttleLevel",{get:function(){var e;return null!=(e=this._serviceConfig.throttleLevel)?e:l.throttleLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxBatchSize",{get:function(){var e;return null!=(e=this._serviceConfig.maxBatchSize)?e:l.maxBatchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flushInterval",{get:function(){var e;return null!=(e=this._serviceConfig.flushInterval)?e:l.flushInterval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"helloPingInterval",{get:function(){var e;return null!=(e=this._serviceConfig.helloPingInterval)?e:l.helloPingInterval},enumerable:!0,configurable:!0}),e}();t.SpotlightServiceConfigManager=d},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(1);t.default=function(e){return"number"==typeof e||Object(i.a)(e)&&"[object Number]"==Object(r.a)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.init=function(){},e.prototype.send=function(e){},e.prototype.dispose=function(){},e}();t.NoOpSpotlightClient=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(52),a=n(33),s=n(109),u=r(n(51)),c=r(n(48));!function(e){e.ASAP="asap",e.LAZY="lazy",e.MANUAL="manual"}(i=t.SpotlightWrapperInitBehavior||(t.SpotlightWrapperInitBehavior={}));var l=i.ASAP,d=function(){function e(e){void 0===e&&(e="undefined"),this._source=e,this._events=[],this.send=this.send.bind(this)}return e.prototype.setup=function(e,t){void 0===e&&(e="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuZXR3b3JrIjoid20iLCJwcm9kdWN0IjoidG9wMi1zcG90bGlnaHQiLCJwbGF0Zm9ybSI6ImFsbCIsImFwcElkIjoid20tdG9wMi1zcG90bGlnaHQtYWxsLWxjazEwaiJ9.lUF1PCwVzp5xELQA-l_GVNtMY9N22y5kicSH4ffbljM"),void 0===t&&(t=l);var n={appId:e,source:this._source,lazyInit:t!==i.MANUAL};this._spotlightClient=s.Spotlight.getClient(n),t===i.ASAP&&this.init(),this._events.length&&this._flush()},e.prototype.init=function(){this._spotlightClient?this._spotlightClient.init():e._logger.warn("init() was called before the SpotlightWrapper was setup()")},e.prototype.send=function(e){e&&(this._spotlightClient?this._spotlightClient.send(e):this._events.push(e))},e.prototype._flush=function(){this._events.splice(0).forEach(this.send)},e.prototype.sendVersion=function(e){var t={version:String(e)},n={type:"init",level:o.SpotlightEventLevel.CRITICAL,category:o.SpotlightEventCategory.METADATA,data:t};this.send(n)},e.prototype.sendError=function(e,t,n){void 0===t&&(t="error"),void 0===n&&(n=o.SpotlightEventLevel.WARN);var r=u.default(e)?{error:e}:c.default(e)?Object.assign({},e):{},i={type:t,level:n,category:o.SpotlightEventCategory.ERROR,data:r};this.send(i)},e.prototype.dispose=function(){this._spotlightClient&&(this._spotlightClient.dispose(),this._spotlightClient=void 0)},e._logger=a.Log.getLogger("SpotlightWrapper"),e}();t.SpotlightWrapper=d},function(e,t,n){"use strict";n.r(t);var r=n(28),i=n(21),o=n(8),a=n(24),s=function(e,t){return e&&Object(o.a)(t,Object(a.a)(t),e)},u=n(25),c=function(e,t){return e&&Object(o.a)(t,Object(u.a)(t),e)},l=n(60),d=n(34),f=n(45),p=function(e,t){return Object(o.a)(e,Object(f.a)(e),t)},h=n(36),g=n(38),y=n(59),v=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Object(h.a)(t,Object(f.a)(e)),e=Object(g.a)(e);return t}:y.a,_=function(e,t){return Object(o.a)(e,v(e),t)},m=n(49),b=n(57),C=function(e){return Object(b.a)(e,u.a,v)},E=n(14),T=Object.prototype.hasOwnProperty,S=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&T.call(e,"index")&&(n.index=e.index,n.input=e.input),n},P=n(40),M=/\w*$/,O=n(6),k=O.a?O.a.prototype:void 0,A=k?k.valueOf:void 0,w=n(61),R=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Object(P.a)(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return function(e,t){var n=t?Object(P.a)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Object(w.a)(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,M.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Set]":return new r;case"[object Symbol]":return function(e){return A?Object(A.call(e)):{}}(e)}},I=n(68),j=n(0),D=n(13),L=n(1),N=n(18),F=n(16),U=F.a&&F.a.isMap,x=U?Object(N.a)(U):function(e){return Object(L.a)(e)&&"[object Map]"==Object(E.a)(e)},B=n(2),V=F.a&&F.a.isSet,q=V?Object(N.a)(V):function(e){return Object(L.a)(e)&&"[object Set]"==Object(E.a)(e)},H={};H["[object Arguments]"]=H["[object Array]"]=H["[object ArrayBuffer]"]=H["[object DataView]"]=H["[object Boolean]"]=H["[object Date]"]=H["[object Float32Array]"]=H["[object Float64Array]"]=H["[object Int8Array]"]=H["[object Int16Array]"]=H["[object Int32Array]"]=H["[object Map]"]=H["[object Number]"]=H["[object Object]"]=H["[object RegExp]"]=H["[object Set]"]=H["[object String]"]=H["[object Symbol]"]=H["[object Uint8Array]"]=H["[object Uint8ClampedArray]"]=H["[object Uint16Array]"]=H["[object Uint32Array]"]=!0,H["[object Error]"]=H["[object Function]"]=H["[object WeakMap]"]=!1,t.default=function(e){return function e(t,n,o,u,f,h){var g,y=1&n,v=2&n,b=4&n;if(o&&(g=f?o(t,u,f,h):o(t)),void 0!==g)return g;if(!Object(B.default)(t))return t;var T=Object(j.default)(t);if(T){if(g=S(t),!y)return Object(d.a)(t,g)}else{var P=Object(E.a)(t),M="[object Function]"==P||"[object GeneratorFunction]"==P;if(Object(D.a)(t))return Object(l.a)(t,y);if("[object Object]"==P||"[object Arguments]"==P||M&&!f){if(g=v||M?{}:Object(I.a)(t),!y)return v?_(t,c(g,t)):p(t,s(g,t))}else{if(!H[P])return f?t:{};g=R(t,P,y)}}h||(h=new r.a);var O=h.get(t);if(O)return O;if(h.set(t,g),q(t))return t.forEach((function(r){g.add(e(r,n,o,r,t,h))})),g;if(x(t))return t.forEach((function(r,i){g.set(i,e(r,n,o,i,t,h))})),g;var k=b?v?C:m.a:v?keysIn:a.a,A=T?void 0:k(t);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(A||t,(function(r,a){A&&(r=t[a=r]),Object(i.a)(g,a,e(r,n,o,a,t,h))})),g}(e,5)}},function(e,t,n){"use strict";n.r(t);var r=n(28),i=n(65),o=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},a=n(56),s=function(e,t,n,r,s,u){var c=1&n,l=e.length,d=t.length;if(l!=d&&!(c&&d>l))return!1;var f=u.get(e);if(f&&u.get(t))return f==t;var p=-1,h=!0,g=2&n?new i.a:void 0;for(u.set(e,t),u.set(t,e);++p<l;){var y=e[p],v=t[p];if(r)var _=c?r(v,y,p,t,e,u):r(y,v,p,e,t,u);if(void 0!==_){if(_)continue;h=!1;break}if(g){if(!o(t,(function(e,t){if(!Object(a.a)(g,t)&&(y===e||s(y,e,n,r,u)))return g.push(t)}))){h=!1;break}}else if(y!==v&&!s(y,v,n,r,u)){h=!1;break}}return u.delete(e),u.delete(t),h},u=n(6),c=n(47),l=n(9),d=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},f=n(35),p=u.a?u.a.prototype:void 0,h=p?p.valueOf:void 0,g=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new c.a(e),new c.a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(l.a)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var u=d;case"[object Set]":var p=1&r;if(u||(u=f.a),e.size!=t.size&&!p)return!1;var g=a.get(e);if(g)return g==t;r|=2,a.set(e,t);var y=s(u(e),u(t),r,i,o,a);return a.delete(e),y;case"[object Symbol]":if(h)return h.call(e)==h.call(t)}return!1},y=n(49),v=Object.prototype.hasOwnProperty,_=function(e,t,n,r,i,o){var a=1&n,s=Object(y.a)(e),u=s.length;if(u!=Object(y.a)(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:v.call(t,l)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<u;){var h=e[l=s[c]],g=t[l];if(r)var _=a?r(g,h,l,t,e,o):r(h,g,l,e,t,o);if(!(void 0===_?h===g||i(h,g,n,r,o):_)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var m=e.constructor,b=t.constructor;m==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f},m=n(14),b=n(0),C=n(13),E=n(44),T="[object Object]",S=Object.prototype.hasOwnProperty,P=function(e,t,n,i,o,a){var u=Object(b.default)(e),c=Object(b.default)(t),l=u?"[object Array]":Object(m.a)(e),d=c?"[object Array]":Object(m.a)(t),f=(l="[object Arguments]"==l?T:l)==T,p=(d="[object Arguments]"==d?T:d)==T,h=l==d;if(h&&Object(C.a)(e)){if(!Object(C.a)(t))return!1;u=!0,f=!1}if(h&&!f)return a||(a=new r.a),u||Object(E.a)(e)?s(e,t,n,i,o,a):g(e,t,l,n,i,o,a);if(!(1&n)){var y=f&&S.call(e,"__wrapped__"),v=p&&S.call(t,"__wrapped__");if(y||v){var P=y?e.value():e,M=v?t.value():t;return a||(a=new r.a),o(P,M,n,i,a)}}return!!h&&(a||(a=new r.a),_(e,t,n,i,o,a))},M=n(1);t.default=function(e,t){return function e(t,n,r,i,o){return t===n||(null==t||null==n||!Object(M.a)(t)&&!Object(M.a)(n)?t!=t&&n!=n:P(t,n,r,i,e,o))}(e,t)}},function(e,t,n){"use strict";n.r(t);var r=n(65),i=n(64),o=function(e,t){return!(null==e||!e.length)&&Object(i.a)(e,t,0)>-1},a=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},s=n(56),u=n(29),c=n(35),l=u.a&&1/Object(c.a)(new u.a([,-0]))[1]==1/0?function(e){return new u.a(e)}:function(){};t.default=function(e){return e&&e.length?function(e,t,n){var i=-1,u=o,d=e.length,f=!0,p=[],h=p;if(n)f=!1,u=a;else if(d>=200){var g=t?null:l(e);if(g)return Object(c.a)(g);f=!1,u=s.a,h=new r.a}else h=t?[]:p;e:for(;++i<d;){var y=e[i],v=t?t(y):y;if(y=n||0!==y?y:0,f&&v==v){for(var _=h.length;_--;)if(h[_]===v)continue e;t&&h.push(v),p.push(y)}else u(h,v,n)||(h!==p&&h.push(v),p.push(y))}return p}(e):[]}},function(e,t,n){"use strict";n.r(t);var r=n(4),i=n(27),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=function(e,t){return e<t?-1:e>t?1:0},s=(o({},i.c,{compare:a}),o({},i.b,{compare:a})),u=(o({},i.a,{compare:a}),function(e){var t=function(t,n){return t===n?0:e(t,n)};return{equals:function(e,n){return 0===t(e,n)},compare:t}});function c(e,t){return u(Object(r.c)(t.compare)(e))}!function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];1===e.length||c(e[0],e[1])}((function(e){return e.valueOf()}),s);var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};l({},{concat:function(e,t){return e&&t}},{empty:!0}),l({},{concat:function(e,t){return e||t}},{empty:!1}),r.a,l({},{concat:function(e,t){return e+t}},{empty:0}),l({},{concat:function(e,t){return e*t}},{empty:1}),l({},{concat:function(e,t){return e+t}},{empty:""}),l({},{concat:function(){}},{empty:void 0});var d=n(31);n.d(t,"URI",(function(){return p})),n.d(t,"None",(function(){return h})),n.d(t,"none",(function(){return g})),n.d(t,"Some",(function(){return y})),n.d(t,"getShow",(function(){return v})),n.d(t,"getSetoid",(function(){return _})),n.d(t,"getEq",(function(){return m})),n.d(t,"getOrd",(function(){return b})),n.d(t,"some",(function(){return C})),n.d(t,"getApplySemigroup",(function(){return E})),n.d(t,"getApplyMonoid",(function(){return T})),n.d(t,"getFirstMonoid",(function(){return S})),n.d(t,"getLastMonoid",(function(){return P})),n.d(t,"getMonoid",(function(){return M})),n.d(t,"fromNullable",(function(){return O})),n.d(t,"fromPredicate",(function(){return k})),n.d(t,"tryCatch",(function(){return A})),n.d(t,"fromEither",(function(){return w})),n.d(t,"isSome",(function(){return R})),n.d(t,"isNone",(function(){return I})),n.d(t,"fromRefinement",(function(){return j})),n.d(t,"getRefinement",(function(){return D})),n.d(t,"option",(function(){return N})),n.d(t,"getLeft",(function(){return F})),n.d(t,"getRight",(function(){return U})),n.d(t,"fold",(function(){return x})),n.d(t,"toNullable",(function(){return B})),n.d(t,"toUndefined",(function(){return V})),n.d(t,"getOrElse",(function(){return q})),n.d(t,"elem",(function(){return H})),n.d(t,"exists",(function(){return K})),n.d(t,"mapNullable",(function(){return W})),n.d(t,"alt",(function(){return G})),n.d(t,"ap",(function(){return Y})),n.d(t,"apFirst",(function(){return J})),n.d(t,"apSecond",(function(){return Q})),n.d(t,"chain",(function(){return X})),n.d(t,"chainFirst",(function(){return $})),n.d(t,"duplicate",(function(){return Z})),n.d(t,"extend",(function(){return ee})),n.d(t,"filter",(function(){return te})),n.d(t,"filterMap",(function(){return ne})),n.d(t,"flatten",(function(){return re})),n.d(t,"foldMap",(function(){return ie})),n.d(t,"map",(function(){return oe})),n.d(t,"partition",(function(){return ae})),n.d(t,"partitionMap",(function(){return se})),n.d(t,"reduce",(function(){return ue})),n.d(t,"reduceRight",(function(){return ce})),n.d(t,"compact",(function(){return le})),n.d(t,"separate",(function(){return de}));var f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p="Option",h=function(){function e(){this._tag="None"}return e.prototype.map=function(e){return g},e.prototype.mapNullable=function(e){return g},e.prototype.ap=function(e){return g},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return g},e.prototype.reduce=function(e,t){return e},e.prototype.alt=function(e){return e},e.prototype.orElse=function(e){return e()},e.prototype.extend=function(e){return g},e.prototype.fold=function(e,t){return e},e.prototype.foldL=function(e,t){return e()},e.prototype.getOrElse=function(e){return e},e.prototype.getOrElseL=function(e){return e()},e.prototype.toNullable=function(){return null},e.prototype.toUndefined=function(){},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"none"},e.prototype.contains=function(e,t){return!1},e.prototype.isNone=function(){return!0},e.prototype.isSome=function(){return!1},e.prototype.exists=function(e){return!1},e.prototype.filter=function(e){return g},e.prototype.refine=function(e){return g},e.value=new e,e}(),g=h.value,y=function(){function e(e){this.value=e,this._tag="Some"}return e.prototype.map=function(t){return new e(t(this.value))},e.prototype.mapNullable=function(e){return O(e(this.value))},e.prototype.ap=function(t){return t.isNone()?g:new e(t.value(this.value))},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return e(this.value)},e.prototype.reduce=function(e,t){return t(e,this.value)},e.prototype.alt=function(e){return this},e.prototype.orElse=function(e){return this},e.prototype.extend=function(t){return new e(t(this))},e.prototype.fold=function(e,t){return t(this.value)},e.prototype.foldL=function(e,t){return t(this.value)},e.prototype.getOrElse=function(e){return this.value},e.prototype.getOrElseL=function(e){return this.value},e.prototype.toNullable=function(){return this.value},e.prototype.toUndefined=function(){return this.value},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"some("+Object(r.d)(this.value)+")"},e.prototype.contains=function(e,t){return e.equals(this.value,t)},e.prototype.isNone=function(){return!1},e.prototype.isSome=function(){return!0},e.prototype.exists=function(e){return e(this.value)},e.prototype.filter=function(e){return this.exists(e)?this:g},e.prototype.refine=function(e){return this.filter(e)},e}(),v=function(e){return{show:function(t){return t.fold("none",(function(t){return"some("+e.show(t)+")"}))}}},_=m;function m(e){return Object(i.d)((function(t,n){return t.isNone()?n.isNone():!n.isNone()&&e.equals(t.value,n.value)}))}var b=function(e){return u((function(t,n){return t.isSome()?n.isSome()?e.compare(t.value,n.value):1:-1}))},C=function(e){return new y(e)},E=function(e){return{concat:function(t,n){return t.isSome()&&n.isSome()?C(e.concat(t.value,n.value)):g}}},T=function(e){return f({},E(e),{empty:C(e.empty)})},S=function(){return{concat:N.alt,empty:g}},P=function(){return e=S(),l({},(t=e,{concat:function(e,n){return t.concat(n,e)}}),{empty:e.empty});var e,t},M=function(e){return{concat:function(t,n){return t.isNone()?n:n.isNone()?t:C(e.concat(t.value,n.value))},empty:g}},O=function(e){return null==e?g:new y(e)};function k(e){return function(t){return e(t)?C(t):g}}var A=function(e){try{return C(e())}catch(e){return g}},w=function(e){return e.isLeft()?g:C(e.value)},R=function(e){return e.isSome()},I=function(e){return e.isNone()},j=function(e){return function(t){return e(t)?C(t):g}},D=function(e){return function(t){return e(t).isSome()}},L={left:g,right:g},N={URI:p,map:function(e,t){return I(e)?g:C(t(e.value))},of:C,ap:function(e,t){return I(e)||I(t)?g:C(e.value(t.value))},chain:function(e,t){return I(e)?g:t(e.value)},reduce:function(e,t,n){return I(e)?t:n(t,e.value)},foldMap:function(e){return function(t,n){return I(t)?e.empty:n(t.value)}},foldr:function(e,t,n){return I(e)?t:n(e.value,t)},traverse:function(e){return function(t,n){return I(t)?e.of(g):e.map(n(t.value),C)}},sequence:function(e){return function(t){return I(t)?e.of(g):e.map(t.value,C)}},zero:function(){return g},alt:function(e,t){return I(e)?t:e},extend:function(e,t){return I(e)?g:C(t(e))},compact:function(e){return N.chain(e,r.b)},separate:function(e){var t=N.map(e,(function(e){return{left:F(e),right:U(e)}}));return I(t)?L:t.value},filter:function(e,t){return I(e)?g:t(e.value)?e:g},filterMap:function(e,t){return I(e)?g:t(e.value)},partition:function(e,t){return{left:N.filter(e,(function(e){return!t(e)})),right:N.filter(e,t)}},partitionMap:function(e,t){return N.separate(N.map(e,t))},wither:function(e){return function(t,n){return I(t)?e.of(g):n(t.value)}},wilt:function(e){return function(t,n){var r=N.map(t,(function(t){return e.map(n(t),(function(e){return{left:F(e),right:U(e)}}))}));return I(r)?e.of({left:g,right:g}):r.value}},throwError:function(){return g},fromEither:w,fromOption:r.b};function F(e){return"Right"===e._tag?g:C(e.value)}function U(e){return"Left"===e._tag?g:C(e.value)}function x(e,t){return function(n){return n.foldL(e,t)}}function B(e){return e.toNullable()}function V(e){return e.toUndefined()}function q(e){return function(t){return t.getOrElseL(e)}}function H(e){return function(t){return function(n){return n.contains(e,t)}}}function K(e){return function(t){return t.exists(e)}}function W(e){return function(t){return t.mapNullable(e)}}var z=Object(d.pipeable)(N),G=z.alt,Y=z.ap,J=z.apFirst,Q=z.apSecond,X=z.chain,$=z.chainFirst,Z=z.duplicate,ee=z.extend,te=z.filter,ne=z.filterMap,re=z.flatten,ie=z.foldMap,oe=z.map,ae=z.partition,se=z.partitionMap,ue=z.reduce,ce=z.reduceRight,le=z.compact,de=z.separate},function(e,t,n){"use strict";n.r(t);var r=n(62),i=n(55),o=n(64),a=function(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1},s=n(18),u=n(34),c=Array.prototype.splice,l=Object(r.a)((function(e,t){return e&&e.length&&t&&t.length?function(e,t,n,r){var l=r?a:o.a,d=-1,f=t.length,p=e;for(e===t&&(t=Object(u.a)(t)),n&&(p=Object(i.a)(e,Object(s.a)(n)));++d<f;)for(var h=0,g=t[d],y=n?n(g):g;(h=l(p,y,h,r))>-1;)p!==e&&c.call(p,h,1),c.call(e,h,1);return e}(e,t):e}));t.default=l},function(e,t,n){"use strict";n.r(t);var r=n(36),i=n(6),o=n(15),a=n(0),s=i.a?i.a.isConcatSpreadable:void 0,u=function(e){return Object(a.default)(e)||Object(o.a)(e)||!!(s&&e&&e[s])};t.default=function(e){return null!=e&&e.length?function e(t,n,i,o,a){var s=-1,c=t.length;for(i||(i=u),a||(a=[]);++s<c;){var l=t[s];n>0&&i(l)?n>1?e(l,n-1,i,o,a):Object(r.a)(a,l):o||(a[a.length]=l)}return a}(e,1):[]}},function(e,t,n){"use strict";n.r(t);var r=Object.prototype.hasOwnProperty,i=function(e,t){return null!=e&&r.call(e,t)},o=n(42),a=n(15),s=n(0),u=n(19),c=n(37),l=n(41);t.default=function(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=Object(o.a)(t,e)).length,d=!1;++r<i;){var f=Object(l.a)(t[r]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++r!=i?d:!!(i=null==e?0:e.length)&&Object(c.a)(i)&&Object(u.a)(f,i)&&(Object(s.default)(e)||Object(a.a)(e))}(e,t,i)}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(22),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l=function(e){if("number"==typeof e)return e;if(Object(i.a)(e))return NaN;if(Object(r.default)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(r.default)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e};t.default=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=l(n))==n?n:0),void 0!==t&&(t=(t=l(t))==t?t:0),function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}(l(e),t,n)}},function(e,t,n){"use strict";n.r(t);var r=n(42),i=n(41),o=function(e,t){for(var n=0,o=(t=Object(r.a)(t,e)).length;null!=e&&n<o;)e=e[Object(i.a)(t[n++])];return n&&n==o?e:void 0};t.default=function(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}},function(e,t,n){"use strict";n.r(t);var r=n(21),i=n(42),o=n(19),a=n(2),s=n(41);t.default=function(e,t,n){return null==e?e:function(e,t,n,u){if(!Object(a.default)(e))return e;for(var c=-1,l=(t=Object(i.a)(t,e)).length,d=l-1,f=e;null!=f&&++c<l;){var p=Object(s.a)(t[c]),h=n;if(c!=d){var g=f[p];void 0===(h=u?u(g,p,f):void 0)&&(h=Object(a.default)(g)?g:Object(o.a)(t[c+1])?[]:{})}Object(r.a)(f,p,h),f=f[p]}return e}(e,t,n)}},function(e,t,n){"use strict";n.r(t);var r=n(4),i=n(27),o=n(31);n.d(t,"URI",(function(){return s})),n.d(t,"Left",(function(){return u})),n.d(t,"Right",(function(){return c})),n.d(t,"getShow",(function(){return l})),n.d(t,"getSetoid",(function(){return d})),n.d(t,"getEq",(function(){return f})),n.d(t,"getSemigroup",(function(){return p})),n.d(t,"getApplySemigroup",(function(){return h})),n.d(t,"getApplyMonoid",(function(){return g})),n.d(t,"left",(function(){return y})),n.d(t,"right",(function(){return v})),n.d(t,"fromRefinement",(function(){return _})),n.d(t,"fromOption",(function(){return m})),n.d(t,"fromNullable",(function(){return b})),n.d(t,"toError",(function(){return C})),n.d(t,"tryCatch",(function(){return E})),n.d(t,"tryCatch2v",(function(){return T})),n.d(t,"fromValidation",(function(){return S})),n.d(t,"isLeft",(function(){return P})),n.d(t,"isRight",(function(){return M})),n.d(t,"getCompactable",(function(){return O})),n.d(t,"getFilterable",(function(){return k})),n.d(t,"getWitherable",(function(){return A})),n.d(t,"parseJSON",(function(){return w})),n.d(t,"stringifyJSON",(function(){return R})),n.d(t,"either",(function(){return D})),n.d(t,"fold",(function(){return L})),n.d(t,"orElse",(function(){return N})),n.d(t,"getOrElse",(function(){return F})),n.d(t,"elem",(function(){return U})),n.d(t,"getValidation",(function(){return x})),n.d(t,"getValidationSemigroup",(function(){return B})),n.d(t,"getValidationMonoid",(function(){return V})),n.d(t,"alt",(function(){return H})),n.d(t,"ap",(function(){return K})),n.d(t,"apFirst",(function(){return W})),n.d(t,"apSecond",(function(){return z})),n.d(t,"bimap",(function(){return G})),n.d(t,"chain",(function(){return Y})),n.d(t,"chainFirst",(function(){return J})),n.d(t,"duplicate",(function(){return Q})),n.d(t,"extend",(function(){return X})),n.d(t,"flatten",(function(){return $})),n.d(t,"foldMap",(function(){return Z})),n.d(t,"map",(function(){return ee})),n.d(t,"mapLeft",(function(){return te})),n.d(t,"reduce",(function(){return ne})),n.d(t,"reduceRight",(function(){return re})),n.d(t,"fromPredicate",(function(){return ie})),n.d(t,"filterOrElse",(function(){return oe})),n.d(t,"fromOptionL",(function(){return ae}));var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s="Either",u=function(){function e(e){this.value=e,this._tag="Left"}return e.prototype.map=function(e){return this},e.prototype.ap=function(e){return e.isLeft()?e:this},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return this},e.prototype.bimap=function(t,n){return new e(t(this.value))},e.prototype.alt=function(e){return e},e.prototype.orElse=function(e){return e(this.value)},e.prototype.extend=function(e){return this},e.prototype.reduce=function(e,t){return e},e.prototype.fold=function(e,t){return e(this.value)},e.prototype.getOrElse=function(e){return e},e.prototype.getOrElseL=function(e){return e(this.value)},e.prototype.mapLeft=function(t){return new e(t(this.value))},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"left("+Object(r.d)(this.value)+")"},e.prototype.isLeft=function(){return!0},e.prototype.isRight=function(){return!1},e.prototype.swap=function(){return new c(this.value)},e.prototype.filterOrElse=function(e,t){return this},e.prototype.filterOrElseL=function(e,t){return this},e.prototype.refineOrElse=function(e,t){return this},e.prototype.refineOrElseL=function(e,t){return this},e}(),c=function(){function e(e){this.value=e,this._tag="Right"}return e.prototype.map=function(t){return new e(t(this.value))},e.prototype.ap=function(e){return e.isRight()?this.map(e.value):y(e.value)},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return e(this.value)},e.prototype.bimap=function(t,n){return new e(n(this.value))},e.prototype.alt=function(e){return this},e.prototype.orElse=function(e){return this},e.prototype.extend=function(t){return new e(t(this))},e.prototype.reduce=function(e,t){return t(e,this.value)},e.prototype.fold=function(e,t){return t(this.value)},e.prototype.getOrElse=function(e){return this.value},e.prototype.getOrElseL=function(e){return this.value},e.prototype.mapLeft=function(t){return new e(this.value)},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"right("+Object(r.d)(this.value)+")"},e.prototype.isLeft=function(){return!1},e.prototype.isRight=function(){return!0},e.prototype.swap=function(){return new u(this.value)},e.prototype.filterOrElse=function(e,t){return e(this.value)?this:y(t)},e.prototype.filterOrElseL=function(e,t){return e(this.value)?this:y(t(this.value))},e.prototype.refineOrElse=function(e,t){return e(this.value)?this:y(t)},e.prototype.refineOrElseL=function(e,t){return e(this.value)?this:y(t(this.value))},e}(),l=function(e,t){return{show:function(n){return n.fold((function(t){return"left("+e.show(t)+")"}),(function(e){return"right("+t.show(e)+")"}))}}},d=f;function f(e,t){return Object(i.d)((function(n,r){return n.isLeft()?r.isLeft()&&e.equals(n.value,r.value):r.isRight()&&t.equals(n.value,r.value)}))}var p=function(e){return{concat:function(t,n){return n.isLeft()?t:t.isLeft()?n:v(e.concat(t.value,n.value))}}},h=function(e){return{concat:function(t,n){return t.isLeft()?t:n.isLeft()?n:v(e.concat(t.value,n.value))}}},g=function(e){return a({},h(e),{empty:v(e.empty)})},y=function(e){return new u(e)},v=function(e){return new c(e)},_=function(e,t){return function(n){return e(n)?v(n):y(t(n))}},m=function(e){return function(t){return t.isNone()?y(e):v(t.value)}},b=function(e){return function(t){return null==t?y(e):v(t)}},C=function(e){return e instanceof Error?e:new Error(String(e))},E=function(e,t){return void 0===t&&(t=C),T(e,t)},T=function(e,t){try{return v(e())}catch(e){return y(t(e))}},S=function(e){return e.isFailure()?y(e.value):v(e.value)},P=function(e){return e.isLeft()},M=function(e){return e.isRight()};function O(e){return{URI:s,_L:void 0,compact:function(t){return t.isLeft()?t:t.value.isNone()?y(e.empty):v(t.value.value)},separate:function(t){return t.isLeft()?{left:t,right:t}:t.value.isLeft()?{left:v(t.value.value),right:y(e.empty)}:{left:y(e.empty),right:v(t.value.value)}}}}function k(e){var t=O(e);return a({},t,{map:D.map,partitionMap:function(t,n){if(t.isLeft())return{left:t,right:t};var r=n(t.value);return r.isLeft()?{left:v(r.value),right:y(e.empty)}:{left:y(e.empty),right:v(r.value)}},filterMap:function(t,n){if(t.isLeft())return t;var r=n(t.value);return r.isSome()?v(r.value):y(e.empty)},partition:function(t,n){return t.isLeft()?{left:t,right:t}:n(t.value)?{left:y(e.empty),right:v(t.value)}:{left:v(t.value),right:y(e.empty)}},filter:function(t,n){return t.filterOrElse(n,e.empty)}})}function A(e){var t=k(e);return a({},t,{traverse:D.traverse,reduce:D.reduce,wither:function(e){var n=D.traverse(e);return function(r,i){return e.map(n(r,i),t.compact)}},wilt:function(e){var n=D.traverse(e);return function(r,i){return e.map(n(r,i),t.separate)}}})}var w=function(e,t){return T((function(){return JSON.parse(e)}),t)},R=function(e,t){return T((function(){return JSON.stringify(e)}),t)},I=y,j=r.b,D={URI:s,map:function(e,t){return e.map(t)},of:v,ap:function(e,t){return t.ap(e)},chain:function(e,t){return e.chain(t)},reduce:function(e,t,n){return e.reduce(t,n)},foldMap:function(e){return function(t,n){return t.isLeft()?e.empty:n(t.value)}},foldr:function(e,t,n){return e.isLeft()?t:n(e.value,t)},traverse:function(e){return function(t,n){return t.isLeft()?e.of(y(t.value)):e.map(n(t.value),v)}},sequence:function(e){return function(t){return t.isLeft()?e.of(y(t.value)):e.map(t.value,v)}},bimap:function(e,t,n){return e.bimap(t,n)},alt:function(e,t){return e.alt(t)},extend:function(e,t){return e.extend(t)},chainRec:function(e,t){return function(e,t){for(var n=e(t);n.isLeft();)n=e(n.value);return n.value}((function(e){if(e.isLeft())return v(y(e.value));var n=e.value;return n.isLeft()?y(t(n.value)):v(v(n.value))}),t(e))},throwError:I,fromEither:j,fromOption:function(e,t){return e.isNone()?I(t):v(e.value)}};function L(e,t){return function(n){return n.fold(e,t)}}function N(e){return function(t){return t.orElse(e)}}function F(e){return function(t){return t.getOrElseL(e)}}function U(e){return function(t){return function(n){return!P(n)&&e.equals(t,n.value)}}}function x(e){return{URI:s,_L:void 0,map:D.map,of:D.of,ap:function(t,n){return P(t)?P(n)?y(e.concat(t.value,n.value)):t:P(n)?n:v(t.value(n.value))},chain:D.chain,alt:function(t,n){return M(t)?t:P(n)?y(e.concat(t.value,n.value)):n}}}function B(e,t){return{concat:function(n,r){return P(n)?P(r)?y(e.concat(n.value,r.value)):n:P(r)?r:v(t.concat(n.value,r.value))}}}function V(e,t){return{concat:B(e,t).concat,empty:v(t.empty)}}var q=Object(o.pipeable)(D),H=q.alt,K=q.ap,W=q.apFirst,z=q.apSecond,G=q.bimap,Y=q.chain,J=q.chainFirst,Q=q.duplicate,X=q.extend,$=q.flatten,Z=q.foldMap,ee=q.map,te=q.mapLeft,ne=q.reduce,re=q.reduceRight,ie=q.fromPredicate,oe=q.filterOrElse,ae=q.fromOption}])},module.exports=e()},function(module,exports,__webpack_require__){var e;window,e=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=69)}([function(e,t,n){"use strict";n.r(t);var r=Array.isArray;t.default=r},function(e,t,n){"use strict";t.a=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";n.r(t),t.default=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";var r=n(54),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();t.a=o},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return a}));var r=function(e){return e},i=function(e){return function(t){return function(n,r){return e(t(n),t(r))}}},o=function(e,t){var n=e.length;if(0===n)return t;var r=t.length;if(0===r)return e;for(var i=Array(n+r),o=0;o<n;o++)i[o]=e[o];for(o=0;o<r;o++)i[o+n]=t[o];return i},a=function(e){if("string"==typeof e)return JSON.stringify(e);if(e instanceof Date)return"new Date('"+e.toISOString()+"')";if(Array.isArray(e))return"["+e.map(a).join(", ")+"]";if("function"==typeof e)return(t=e).displayName||t.name||"<function"+t.length+">";var t;if(null==e)return String(e);if("function"==typeof e.toString&&e.toString!==Object.prototype.toString)return e.toString();try{return JSON.stringify(e,null,2)}catch(t){return String(e)}}},function(e,t,n){"use strict";var r=n(6),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r.a?r.a.toStringTag:void 0,u=Object.prototype.toString,c=r.a?r.a.toStringTag:void 0;t.a=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}(e):function(e){return u.call(e)}(e)}},function(e,t,n){"use strict";var r=n(3).a.Symbol;t.a=r},function(e,t,n){"use strict";var r,i=n(30),o=n(3).a["__core-js_shared__"],a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",s=n(2),u=n(17),c=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,f=l.toString,p=d.hasOwnProperty,h=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=function(e){return!(!Object(s.default)(e)||function(e){return!!a&&a in e}(e))&&(Object(i.default)(e)?h:c).test(Object(u.a)(e))};t.a=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return g(n)?n:void 0}},function(e,t,n){"use strict";var r=n(21),i=n(39);t.a=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?Object(i.a)(n,c,l):Object(r.a)(n,c,l)}return n}},function(e,t,n){"use strict";t.a=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(30),i=n(37);t.a=function(e){return null!=e&&Object(i.a)(e.length)&&!Object(r.default)(e)}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(116)),r(n(119)),r(n(81)),r(n(120)),r(n(73)),r(n(124)),r(n(82)),r(n(125)),r(n(127)),r(n(74)),r(n(128))},function(e,t,n){"use strict";var r,i,o,a,s,u,c;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Enabled="enabled",e.Theme="theme",e.Instances="loggerInstances",e.Targets="targets",e.Sources="sources",e.Categories="categories",e.Levels="levels"}(r||(r={})),t.LogDataProperty=r,function(e){e.Unsourced=""}(i||(i={})),t.LogSourceType=i,function(e){e.Verbose="verbose",e.Debug="debug",e.Info="info",e.Warn="warn",e.Error="error"}(o||(o={})),t.LogLevelType=o,function(e){e.All="all",e.Dev="dev"}(a||(a={})),t.LogLevelCompositeType=a,function(e){e.Light="light",e.Dark="dark"}(s||(s={})),t.LogTheme=s,function(e){e.All="all"}(u||(u={})),t.LogSourceCompositeType=u,function(e){e.All="all"}(c||(c={})),t.LogCategoryCompositeType=c},function(e,t,n){"use strict";(function(e){var r=n(3),i=n(110),o=exports&&!exports.nodeType&&exports,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.a.Buffer:void 0,u=(s?s.isBuffer:void 0)||i.a;t.a=u}).call(this,n(72)(e))},function(e,t,n){"use strict";var r=n(7),i=n(3),o=Object(r.a)(i.a,"DataView"),a=n(26),s=Object(r.a)(i.a,"Promise"),u=n(29),c=Object(r.a)(i.a,"WeakMap"),l=n(5),d=n(17),f=Object(d.a)(o),p=Object(d.a)(a.a),h=Object(d.a)(s),g=Object(d.a)(u.a),y=Object(d.a)(c),v=l.a;(o&&"[object DataView]"!=v(new o(new ArrayBuffer(1)))||a.a&&"[object Map]"!=v(new a.a)||s&&"[object Promise]"!=v(s.resolve())||u.a&&"[object Set]"!=v(new u.a)||c&&"[object WeakMap]"!=v(new c))&&(v=function(e){var t=Object(l.a)(e),n="[object Object]"==t?e.constructor:void 0,r=n?Object(d.a)(n):"";if(r)switch(r){case f:return"[object DataView]";case p:return"[object Map]";case h:return"[object Promise]";case g:return"[object Set]";case y:return"[object WeakMap]"}return t}),t.a=v},function(e,t,n){"use strict";var r=n(5),i=n(1),o=function(e){return Object(i.a)(e)&&"[object Arguments]"==Object(r.a)(e)},a=Object.prototype,s=a.hasOwnProperty,u=a.propertyIsEnumerable,c=o(function(){return arguments}())?o:function(e){return Object(i.a)(e)&&s.call(e,"callee")&&!u.call(e,"callee")};t.a=c},function(e,t,n){"use strict";(function(e){var r=n(54),i=exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.a.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();t.a=s}).call(this,n(72)(e))},function(e,t,n){"use strict";var r=Function.prototype.toString;t.a=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){"use strict";t.a=function(e){return function(t){return e(t)}}},function(e,t,n){"use strict";var r=/^(?:0|[1-9]\d*)$/;t.a=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){"use strict";var r=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){"use strict";var r=n(39),i=n(9),o=Object.prototype.hasOwnProperty;t.a=function(e,t,n){var a=e[t];o.call(e,t)&&Object(i.a)(a,n)&&(void 0!==n||t in e)||Object(r.a)(e,t,n)}},function(e,t,n){"use strict";var r=n(5),i=n(1);t.a=function(e){return"symbol"==typeof e||Object(i.a)(e)&&"[object Symbol]"==Object(r.a)(e)}},function(e,t,n){"use strict";var r=n(9),i=function(e,t){for(var n=e.length;n--;)if(Object(r.a)(e[n][0],t))return n;return-1},o=Array.prototype.splice;function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}a.prototype.clear=function(){this.__data__=[],this.size=0},a.prototype.delete=function(e){var t=this.__data__,n=i(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))},a.prototype.get=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]},a.prototype.has=function(e){return i(this.__data__,e)>-1},a.prototype.set=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},t.a=a},function(e,t,n){"use strict";var r=n(67),i=n(20),o=n(58),a=Object(o.a)(Object.keys,Object),s=Object.prototype.hasOwnProperty,u=n(10);t.a=function(e){return Object(u.a)(e)?Object(r.a)(e):function(e){if(!Object(i.a)(e))return a(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}},function(e,t,n){"use strict";var r=n(67),i=n(2),o=n(20),a=Object.prototype.hasOwnProperty,s=function(e){if(!Object(i.default)(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Object(o.a)(e),n=[];for(var r in e)("constructor"!=r||!t&&a.call(e,r))&&n.push(r);return n},u=n(10);t.a=function(e){return Object(u.a)(e)?Object(r.a)(e,!0):s(e)}},function(e,t,n){"use strict";var r=n(7),i=n(3),o=Object(r.a)(i.a,"Map");t.a=o},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(31);function i(e){return{equals:function(t,n){return t===n||e(t,n)}}}var o={equals:function(e,t){return e===t}},a=o,s=o,u=o,c={URI:"Eq",contramap:function(e,t){return i((function(n,r){return e.equals(t(n),t(r))}))}};Object(r.pipeable)(c).contramap,c.contramap(s,(function(e){return e.valueOf()}))},function(e,t,n){"use strict";var r=n(23),i=n(26),o=n(32);function a(e){var t=this.__data__=new r.a(e);this.size=t.size}a.prototype.clear=function(){this.__data__=new r.a,this.size=0},a.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},a.prototype.get=function(e){return this.__data__.get(e)},a.prototype.has=function(e){return this.__data__.has(e)},a.prototype.set=function(e,t){var n=this.__data__;if(n instanceof r.a){var a=n.__data__;if(!i.a||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o.a(a)}return n.set(e,t),this.size=n.size,this},t.a=a},function(e,t,n){"use strict";var r=n(7),i=n(3),o=Object(r.a)(i.a,"Set");t.a=o},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(2);t.default=function(e){if(!Object(i.default)(e))return!1;var t=Object(r.a)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){"use strict";n.r(t),n.d(t,"pipe",(function(){return i})),n.d(t,"pipeable",(function(){return o}));var r=n(4);function i(e,t,n,r,i,o,a,s,u,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return o(i(r(n(t(e)))));case 7:return a(o(i(r(n(t(e))))));case 8:return s(a(o(i(r(n(t(e)))))));case 9:return u(s(a(o(i(r(n(t(e))))))));case 10:return c(u(s(a(o(i(r(n(t(e)))))))))}}function o(e){var t={};return function(e){return"function"==typeof e.map}(e)&&(t.map=function(t){return function(n){return e.map(n,t)}}),function(e){return"function"==typeof e.contramap}(e)&&(t.contramap=function(t){return function(n){return e.contramap(n,t)}}),function(e){return"function"==typeof e.mapWithIndex}(e)&&(t.mapWithIndex=function(t){return function(n){return e.mapWithIndex(n,t)}}),function(e){return"function"==typeof e.ap}(e)&&(t.ap=function(t){return function(n){return e.ap(n,t)}},t.apFirst=function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}),function(e){return"function"==typeof e.chain}(e)&&(t.chain=function(t){return function(n){return e.chain(n,t)}},t.chainFirst=function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}},t.flatten=function(t){return e.chain(t,r.b)}),function(e){return"function"==typeof e.bimap}(e)&&(t.bimap=function(t,n){return function(r){return e.bimap(r,t,n)}},t.mapLeft=function(t){return function(n){return e.bimap(n,t,r.b)}}),function(e){return"function"==typeof e.extend}(e)&&(t.extend=function(t){return function(n){return e.extend(n,t)}},t.duplicate=function(t){return e.extend(t,r.b)}),function(e){return"function"==typeof e.reduce}(e)&&(t.reduce=function(t,n){return function(r){return e.reduce(r,t,n)}},t.foldMap=function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}},t.reduceRight=function(t,n){return function(r){return e.foldr(r,t,n)}}),function(e){return"function"==typeof e.reduceWithIndex}(e)&&(t.reduceWithIndex=function(t,n){return function(r){return e.reduceWithIndex(r,t,n)}},t.foldMapWithIndex=function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}},t.reduceRightWithIndex=function(t,n){return function(r){return e.foldrWithIndex(r,t,n)}}),function(e){return"function"==typeof e.alt}(e)&&(t.alt=function(t){return function(n){return e.alt(n,t())}}),function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)&&(t.filter=function(t){return function(n){return e.filter(n,t)}},t.filterMap=function(t){return function(n){return e.filterMap(n,t)}},t.partition=function(t){return function(n){return e.partition(n,t)}},t.partitionMap=function(t){return function(n){return e.partitionMap(n,t)}}),function(e){return"function"==typeof e.filterWithIndex}(e)&&(t.filterWithIndex=function(t){return function(n){return e.filterWithIndex(n,t)}},t.filterMapWithIndex=function(t){return function(n){return e.filterMapWithIndex(n,t)}},t.partitionWithIndex=function(t){return function(n){return e.partitionWithIndex(n,t)}},t.partitionMapWithIndex=function(t){return function(n){return e.partitionMapWithIndex(n,t)}}),function(e){return"function"==typeof e.promap}(e)&&(t.promap=function(t,n){return function(r){return e.promap(r,t,n)}}),function(e){return"function"==typeof e.compose}(e)&&(t.compose=function(t){return function(n){return e.compose(n,t)}}),function(e){return"function"==typeof e.throwError}(e)&&(t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.value):e.of(t.value)},t.fromPredicate=function(t,n){return function(r){return t(r)?e.of(r):e.throwError(n(r))}},t.filterOrElse=function(t,n){return function(r){return e.chain(r,(function(r){return t(r)?e.of(r):e.throwError(n(r))}))}}),t}},function(e,t,n){"use strict";var r=n(7),i=Object(r.a)(Object,"create"),o=Object.prototype.hasOwnProperty,a=Object.prototype.hasOwnProperty;function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=function(){this.__data__=i?i(null):{},this.size=0},s.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},s.prototype.get=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0},s.prototype.has=function(e){var t=this.__data__;return i?void 0!==t[e]:a.call(t,e)},s.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this};var u=s,c=n(23),l=n(26),d=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}f.prototype.clear=function(){this.size=0,this.__data__={hash:new u,map:new(l.a||c.a),string:new u}},f.prototype.delete=function(e){var t=d(this,e).delete(e);return this.size-=t?1:0,t},f.prototype.get=function(e){return d(this,e).get(e)},f.prototype.has=function(e){return d(this,e).has(e)},f.prototype.set=function(e,t){var n=d(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},t.a=f},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(114)),r(n(135)),r(n(136)),r(n(97)),r(n(95)),r(n(92)),r(n(93)),r(n(96)),r(n(12))},function(e,t,n){"use strict";t.a=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){"use strict";t.a=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){"use strict";t.a=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){"use strict";t.a=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){"use strict";var r=n(58),i=Object(r.a)(Object.getPrototypeOf,Object);t.a=i},function(e,t,n){"use strict";var r=n(46);t.a=function(e,t,n){"__proto__"==t&&r.a?Object(r.a)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){"use strict";var r=n(47);t.a=function(e){var t=new e.constructor(e.byteLength);return new r.a(t).set(new r.a(e)),t}},function(e,t,n){"use strict";var r=n(22);t.a=function(e){if("string"==typeof e||Object(r.a)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){"use strict";var r=n(0),i=n(22),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,s=n(32);function u(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(u.Cache||s.a),n}u.Cache=s.a;var c=u,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,f=function(e){var t=c((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(l,(function(e,n,r,i){t.push(r?i.replace(d,"$1"):n||e)})),t}),(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}(),p=n(66);t.a=function(e,t){return Object(r.default)(e)?e:function(e,t){if(Object(r.default)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Object(i.a)(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:f(Object(p.a)(e))}},function(e,t,n){"use strict";var r=n(62),i=n(9),o=n(10),a=n(19),s=n(2),u=function(e,t,n){if(!Object(s.default)(n))return!1;var r=typeof t;return!!("number"==r?Object(o.a)(n)&&Object(a.a)(t,n.length):"string"==r&&t in n)&&Object(i.a)(n[t],e)};t.a=function(e){return Object(r.a)((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&u(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}},function(e,t,n){"use strict";var r=n(5),i=n(37),o=n(1),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=n(18),u=n(16),c=u.a&&u.a.isTypedArray,l=c?Object(s.a)(c):function(e){return Object(o.a)(e)&&Object(i.a)(e.length)&&!!a[Object(r.a)(e)]};t.a=l},function(e,t,n){"use strict";var r=n(59),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(o(e),(function(t){return i.call(e,t)})))}:r.a;t.a=a},function(e,t,n){"use strict";var r=n(7),i=function(){try{var e=Object(r.a)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.a=i},function(e,t,n){"use strict";var r=n(3).a.Uint8Array;t.a=r},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(38),o=n(1),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,l=u.call(Object);t.default=function(e){if(!Object(o.a)(e)||"[object Object]"!=Object(r.a)(e))return!1;var t=Object(i.a)(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},function(e,t,n){"use strict";var r=n(57),i=n(45),o=n(24);t.a=function(e){return Object(r.a)(e,o.a,i.a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Adobe="adobe",e.JWS="jws"}(t.AuthTokenType||(t.AuthTokenType={}))},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(0),o=n(1);t.default=function(e){return"string"==typeof e||!Object(i.default)(e)&&Object(o.a)(e)&&"[object String]"==Object(r.a)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.METADATA="metadata",e.ERROR="error",e.QOS="qos"}(t.SpotlightEventCategory||(t.SpotlightEventCategory={})),function(e){e.INFO="info",e.WARN="warn",e.ERROR="error",e.CRITICAL="critical"}(t.SpotlightEventLevel||(t.SpotlightEventLevel={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33);t.SpotlightLogger=r.Log.getLogger("Spotlight").filter("spotlight")},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(71))},function(e,t,n){"use strict";t.a=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){"use strict";t.a=function(e,t){return e.has(t)}},function(e,t,n){"use strict";var r=n(36),i=n(0);t.a=function(e,t,n){var o=t(e);return Object(i.default)(e)?o:Object(r.a)(o,n(e))}},function(e,t,n){"use strict";t.a=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){"use strict";t.a=function(){return[]}},function(e,t,n){"use strict";(function(e){var r=n(3),i=exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(72)(e))},function(e,t,n){"use strict";var r=n(40);t.a=function(e,t){var n=t?Object(r.a)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){"use strict";var r=function(e){return e},i=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},o=Math.max,a=function(e){return function(){return e}},s=n(46),u=s.a?function(e,t){return Object(s.a)(e,"toString",{configurable:!0,enumerable:!1,value:a(t),writable:!0})}:r,c=Date.now,l=function(e){var t=0,n=0;return function(){var r=c(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(u);t.a=function(e,t){return l(function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=o(r.length-t,0),u=Array(s);++a<s;)u[a]=r[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=r[a];return c[t]=n(u),i(e,this,c)}}(e,t,r),e+"")}},function(e,t,n){"use strict";var r=n(28),i=n(39),o=n(9),a=function(e,t,n){(void 0!==n&&!Object(o.a)(e[t],n)||void 0===n&&!(t in e))&&Object(i.a)(e,t,n)},s=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e},u=n(60),c=n(61),l=n(34),d=n(68),f=n(15),p=n(0),h=n(10),g=n(1),y=function(e){return Object(g.a)(e)&&Object(h.a)(e)},v=n(13),_=n(30),m=n(2),b=n(48),C=n(44),E=function(e,t){if("__proto__"!=t)return e[t]},T=n(8),S=n(25),P=function(e){return Object(T.a)(e,Object(S.a)(e))},M=function(e,t,n,r,i,o,s){var h=E(e,n),g=E(t,n),T=s.get(g);if(T)a(e,n,T);else{var S=o?o(h,g,n+"",e,t,s):void 0,M=void 0===S;if(M){var O=Object(p.default)(g),k=!O&&Object(v.a)(g),A=!O&&!k&&Object(C.a)(g);S=g,O||k||A?Object(p.default)(h)?S=h:y(h)?S=Object(l.a)(h):k?(M=!1,S=Object(u.a)(g,!0)):A?(M=!1,S=Object(c.a)(g,!0)):S=[]:Object(b.default)(g)||Object(f.a)(g)?(S=h,Object(f.a)(h)?S=P(h):Object(m.default)(h)&&!Object(_.default)(h)||(S=Object(d.a)(g))):M=!1}M&&(s.set(g,S),i(S,g,r,o,s),s.delete(g)),a(e,n,S)}};t.a=function e(t,n,i,o,u){t!==n&&s(n,(function(s,c){if(Object(m.default)(s))u||(u=new r.a),M(t,n,c,i,e,o,u);else{var l=o?o(E(t,c),s,c+"",t,n,u):void 0;void 0===l&&(l=s),a(t,c,l)}}),S.a)}},function(e,t,n){"use strict";var r=function(e){return e!=e};t.a=function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,r,n)}},function(e,t,n){"use strict";var r=n(32);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r.a;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},i.prototype.has=function(e){return this.__data__.has(e)},t.a=i},function(e,t,n){"use strict";var r=n(6),i=n(55),o=n(0),a=n(22),s=r.a?r.a.prototype:void 0,u=s?s.toString:void 0;t.a=function(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(Object(o.default)(t))return Object(i.a)(t,e)+"";if(Object(a.a)(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}(e)}},function(e,t,n){"use strict";var r=n(15),i=n(0),o=n(13),a=n(19),s=n(44),u=Object.prototype.hasOwnProperty;t.a=function(e,t){var n=Object(i.default)(e),c=!n&&Object(r.a)(e),l=!n&&!c&&Object(o.a)(e),d=!n&&!c&&!l&&Object(s.a)(e),f=n||c||l||d,p=f?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],h=p.length;for(var g in e)!t&&!u.call(e,g)||f&&("length"==g||l&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||Object(a.a)(g,h))||p.push(g);return p}},function(e,t,n){"use strict";var r=n(2),i=Object.create,o=function(){function e(){}return function(t){if(!Object(r.default)(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),a=n(38),s=n(20);t.a=function(e){return"function"!=typeof e.constructor||Object(s.a)(e)?{}:o(Object(a.a)(e))}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(111)),r(n(87)),r(n(146)),r(n(70)),r(n(147)),r(n(150)),r(n(33)),r(n(86)),r(n(102)),r(n(11)),r(n(109))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(80)),r(n(132)),r(n(85))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(121)),a=i(n(122)),s=i(n(123)),u=i(n(168)),c=i(n(170)),l=i(n(171)),d=i(n(48)),f=function(){function e(){}return e.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o.default.apply(void 0,r([e],t))},e.extendDeep=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return a.default.apply(void 0,r([e],t))},e.extendDeepWithArrayAssignment=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return s.default.apply(void 0,r([e],t,[function(e,t,n,r,i,o){if(Array.isArray(t))return t}]))},e.keyValues=function(e){return Object.keys(e).map((function(t){return{key:t,value:e[t]}}))},e.mapValues=function(t,n){return Object.keys(t).forEach((function(r){var i=e.get(t,r);e.set(t,r,n(r,i))})),t},e.keysLike=function(e,t){return Object.keys(e).filter((function(e){return t.test(e)}))},e.getValues=function(e){return Object.keys(e).map((function(t){return e[t]}))},e.isFunc=function(e){return"function"==typeof e},e.isObj=function(e){return!!e&&(e.constructor&&e.constructor===Object||"object"==typeof e)},e.has=function(e,t){return u.default(e,t)},e.set=function(e,t,n){l.default(e,t,n)},e.get=function(e,t,n){return c.default(e,t,n)},e.getOrElse=function(t,n,r){return e.get(t,n,r)},e.isPlainObject=function(e){return d.default(e)},e.updateValues=function(t,n){return Object.keys(t).forEach((function(r){var i=t[r],o=n[r];void 0!==n[r]&&(e.isObj(i)?e.updateValues(i,o):t[r]=o)})),t},e.filter=function(t,n){var r=e.extendDeep({},t),i=function(t){Object.keys(t).forEach((function(r){var o=t[r];e.isObj(o)?(i(o),e.isEmpty(o)&&delete t[r]):o!==n&&delete t[r]}))};return i(r),r},e.compact=function(t){return Object.keys(t).forEach((function(n){var r=t[n];e.isObj(r)&&(e.isEmpty(r)||e.compact(r),e.isEmpty(r)&&delete t[n])})),t},e.isEmpty=function(e){return 0===Object.keys(e).length},e}();t.ObjectUtils=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(75);!function(e){e.Timeout="timeout",e.Interval="interval"}(r||(r={})),t.TimerMode=r;var o=function(e,t,n){var o,a,s=-1;switch(e){case r.Interval:o=function(){s=setInterval(t,n)},a=function(){clearInterval(s),s=-1};break;case r.Timeout:o=function(){s=setTimeout(t,n)},a=function(){clearTimeout(s),s=-1};break;default:throw new i.UnreachableCaseError(e)}return{start:o,stop:a}};t.Timer=o,t.delay=function(e,t){void 0===t&&(t=0);var n=o(r.Timeout,e,t);return n.start(),n}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,"Unreachable case: "+t)||this}return i(t,e),t}(Error);t.UnreachableCaseError=o},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(83)),o=n(11),a=function(){function e(){}return e.getFactory=function(t,n,r){return{events:function(){return t},eventMap:function(){return n},context:function(){return r},mapTo:function(t){var r=[],i={};return Object.keys(n).forEach((function(e){var o=function(e){var n={before:e.before,after:e.after,around:e.around}[t];if(n)return n;throw new Error("Invalid mapEvent type: "+t)}(n[e]);r.push(o),i[e]=o})),e.getFactory(r,i)}}},e.createFromFactory=function(e){return new i.default(e.events(),e.eventMap(),e.context())},e.isListenForMap=function(e){return o.ObjectUtils.isObj(e)},e.isEventCollectionHandler=function(e){return o.ObjectUtils.isFunc(e)},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Verbose="verbose",e.Debug="debug",e.Info="info",e.Warning="warning",e.Error="error",e.Config_Changed="configChanged"}(t.LogEventType||(t.LogEventType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Peripheral="peripheral",e.Default="default"}(t.HookHandlerType||(t.HookHandlerType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),i=n(77);function o(e){return r.createEvent(e)}t.createLogEvent=o,t.createLogEventCollection=function(){return r.createEventCollection({verbose:o(i.LogEventType.Verbose),debug:o(i.LogEventType.Debug),info:o(i.LogEventType.Info),warning:o(i.LogEventType.Warning),error:o(i.LogEventType.Error),configChanged:o(i.LogEventType.Config_Changed)})}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(115)),r(n(84)),r(n(76)),r(n(83))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(163)),o=r(n(30)),a=r(n(117)),s=r(n(162)),u=r(n(118)),c=r(n(51));t.isEqual=function(e,t){return i.default(e,t)},t.isFunction=function(e){return o.default(e)},t.isBoolean=function(e){return a.default(e)},t.isString=function(e){return c.default(e)},t.cloneDeep=function(e){return s.default(e)},t.isNull=function(e){return u.default(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchedRight=function(e){if("string"!=typeof e.input||"number"!=typeof e.index)return"";var t=e.index+e[0].length;return e.input.substr(t,e.input.length-t)},t.split=function(e,t){return e.replace(t,"#__delim__#").split("#__delim__#")},t.escape=function(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=n(84),a=r(n(76)),s=function(){function e(e,t,n){this._context=n,this._events=e,this._eventsMap=t,this._bindings=[],this._length=this._events.length}return e.prototype._doEach=function(e){this._events.forEach((function(t){return e(t)}))},e.prototype._doListen=function(e){var t;if(a.default.isEventCollectionHandler(e))t=this._doListenForAll(e);else{if(!a.default.isListenForMap(e))throw new Error("[doListen] invalid handler data type, got: "+e);t=this._doListenForMap(e)}return this._bindings.push(t),t},e.prototype._doHas=function(e){return e instanceof o.EventBindingCollection&&-1!==this._bindings.indexOf(e)},e.prototype._doUnlisten=function(e){if(e instanceof o.EventBindingCollection){var t=this._bindings.indexOf(e);this._bindings.splice(t,1),e.detach()}},e.prototype._doListenOnce=function(e){var t;if(a.default.isEventCollectionHandler(e))t=this._doListenOnceForAll(e);else{if(!a.default.isListenForMap(e))throw new Error("[doListenOnce] invalid handler data type, got: "+e);t=this._doListenForMapOnce(e)}return this._bindings.push(t),t},e.prototype._doListenOnceForAll=function(e){var t=this,n=new o.EventBindingCollection;return this._doEach((function(r){var i=e,o=t._toEventCollectionHandler(r.type,i),a=r.once(o);a.onDetached((function(){t._removeSingleBinding(n.id,a)})),n.add(a)})),n},e.prototype._doListenForMapOnce=function(e){var t=this,n=new o.EventBindingCollection;return i.ObjectUtils.keyValues(e).forEach((function(e){var r=t._eventsMap[e.key],i=e.value,o=t._toEventCollectionHandler(r.type,i);if(r){var a=r.once(o);a.onDetached((function(){t._removeSingleBinding(n.id,a)})),n.add(a)}})),n},e.prototype._doListenForAll=function(e){var t=this,n=new o.EventBindingCollection;return this._doEach((function(r){var i=e,o=t._toEventCollectionHandler(r.type,i),a=r.listen(o);n.add(a)})),n},e.prototype._doListenForMap=function(e){var t=this,n=new o.EventBindingCollection;return i.ObjectUtils.keyValues(e).forEach((function(e){var r=t._eventsMap[e.key],i=e.value;if(r){var o=r.listen(i);n.add(o)}})),n},e.prototype._toEventCollectionHandler=function(e,t){return t.bind(this._context||null,e)},e.prototype._removeSingleBinding=function(e,t){var n=this._getCollectionBinding(e);null!==n&&(n.remove(t),n.empty()&&this.unlisten(n))},e.prototype._getCollectionBinding=function(e){for(var t=null,n=0,r=this._bindings;n<r.length;n++){var i=r[n];if(i.id===e){t=i;break}}return t},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.each=function(e){return this._doEach(e),this},e.prototype.once=function(e){return this._doListenOnce(e)},e.prototype.listen=function(e){return this._doListen(e)},e.prototype.has=function(e){return this._doHas(e)},e.prototype.unlisten=function(e){return this._doUnlisten(e),this},e.prototype.unlistenAll=function(){return this._bindings.forEach((function(e){e.detach()})),this._bindings=[],this},e.prototype.removeAllListeners=function(){return this.unlistenAll(),this.each((function(e){e.unlistenAll()})),this},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t){this.id="collection_"+e.count++,this._bindings=t||[],this._detachedHandlers=[]}return e.prototype.add=function(e){this._bindings.push(e)},e.prototype.remove=function(e){var t=this._bindings.indexOf(e);return-1!==t&&(this._bindings.splice(t,1),!0)},e.prototype.detach=function(){var e=!0;return this._bindings.forEach((function(t){e=e&&t.detach()})),this._detachedHandlers.forEach((function(e){e()})),this._detachedHandlers=[],e},e.prototype.onDetached=function(e){this._detachedHandlers.push(e)},e.prototype.empty=function(){return 0===this._bindings.length},e.count=1,e}();t.EventBindingCollection=r},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(86),o=function(){function e(e,t){this._type=e,this._context=t,this._signal=new i.Signal(t),this._before=new i.Signal(t),this._around=new i.Signal(t),this._after=new i.Signal(t)}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"before",{get:function(){return this._before},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"around",{get:function(){return this._around},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this._after},enumerable:!0,configurable:!0}),e.prototype.listen=function(e,t){return this._signal.listen(e,t)},e.prototype.once=function(e,t){return this._signal.once(e,t)},e.prototype.dispatch=function(e){var t={type:this.type};e&&(t=r(r({},e),t)),this._before.dispatch(t),this._around.dispatch(t),this._signal.dispatch(t),this._around.dispatch(t),this._after.dispatch(t)},e.prototype.has=function(e){return this._signal.has(e)},e.prototype.count=function(){return this._signal.count()},e.prototype.unlisten=function(e){this._signal.unlisten(e)},e.prototype.unlistenAll=function(){this._signal.unlistenAll()},e}();t.EventSignal=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(133)),r(n(89)),r(n(88))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(134))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(89);t.createBindingForHandler=function(e){var t=e.context,n=e.signal,i=e.once,o=e.onDetached,a=e.handler;t&&(a=a.bind(t));var s=new r.SignalBinding(a);return"function"==typeof o&&s.onDetached(o),s.owner=n,s.once=i,s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=!1),this.owner=null,this.once=t,this._handler=e,this._detachedHandlers=[]}return Object.defineProperty(e.prototype,"handler",{get:function(){return this._handler},enumerable:!0,configurable:!0}),e.prototype.detach=function(){return null!==this.owner&&(this._detachedHandlers.forEach((function(e){e()})),this._detachedHandlers.length=0,!0)},e.prototype.onDetached=function(e){this._detachedHandlers.push(e)},e}();t.SignalBinding=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.cssConsole=function(e){return""!==e.contextDetail?"%c"+e.context+" %c("+e.contextDetail+") "+e.message:"%c"+e.context+" %c"+e.message},e}();t.DefaultFormatters=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Debug="topdebug",e.Enabled="toplogenabled",e.Sources="toplogsources",e.Category="toplogcat",e.Levels="toploglevels",e.Theme="toplogtheme"}(r||(r={})),t.LogQueryParam=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(93),i=n(73),o=new(function(){function e(e){var t;if(this._presets={},this._manager=r.LogManager,e){Object.assign(this._presets,e);var n=e.source,i=e.enabled;null!=n&&null!=i&&this._manager.updateConfig({sources:(t={},t[n]=i,t)})}}return e.prototype.factory=function(t){return new e(t)},Object.defineProperty(e.prototype,"data",{get:function(){return this._manager.data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._manager.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this._manager.events},enumerable:!0,configurable:!0}),e.prototype.getLogger=function(e,t){return this._manager.getLogger(e,i.ObjectUtils.extendDeep({},this._presets,t))},e.prototype.setEnabled=function(e){this.updateConfig({enabled:e})},e.prototype.setTheme=function(e){this._manager.setTheme(e)},e.prototype.updateSources=function(e){this.updateConfig({sources:e})},e.prototype.updateCategories=function(e){this.updateConfig({categories:e})},e.prototype.updateLevels=function(e){this.updateConfig({levels:e})},e.prototype.updateConfig=function(e){this._manager.updateConfig(e)},e.prototype.useDefaults=function(){this._manager.useDefaults()},e}());t.Log=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),a=n(12),s=n(94),u=n(95),c=n(96),l=n(97),d=n(79),f=new(function(){function e(){this._enabled=!1,this.events=d.createLogEventCollection(),this._data=c.LogManagerDefaults.data(),this._activeTargets=[new u.ConsoleTarget({theme:this._data.theme}).init(),new u.LogEventTarget(this.events).init()]}return e.prototype._notifyConfigChanged=function(){this.events.configChanged.dispatch({data:this.data})},Object.defineProperty(e.prototype,"data",{get:function(){return o.ObjectUtils.extendDeep({},this._data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),e.prototype.getLogger=function(e,t){var n,i;void 0===t&&(t={});var u=t.source,c=void 0===u?a.LogSourceType.Unsourced:u,d=c===a.LogSourceCompositeType.All?a.LogSourceType.Unsourced:s.normalizeSource(c),f=this._data,p=f.sources,h=f.categories,g=f.levels,y={manager:this,context:e,contextDetail:"",targets:this._activeTargets,enabled:(i=p[d],null!=i&&i),source:d,sources:r({},p),categories:r({},h),levels:r({},g),filters:[]},v=o.ObjectUtils.extendDeep(y,t,{source:d});d in p||this.updateConfig({sources:(n={},n[d]=v.enabled,n)});var _=(new l.DefaultLogger).init(v);return this.storeLoggerInstance(_),_},e.prototype._setEnabled=function(e){this._enabled=e,this._notifyConfigChanged()},e.prototype._updateTargetsTheme=function(){var e=this._data.theme;this._activeTargets.forEach((function(t){t.updateTheme(e)}))},e.prototype.setTheme=function(e){this._data.theme=e,this._updateTargetsTheme(),this._notifyConfigChanged()},e.prototype._setTargets=function(e){var t=this;e!==this._activeTargets&&(this._activeTargets.length&&this._activeTargets.forEach((function(e){return e.detach()})),this._activeTargets=e,this._updateTargetsTheme(),this._data.loggerInstances.forEach((function(e){e.setTargets(t._activeTargets)})))},e.prototype._updateSources=function(e){var t=r({},this._data.sources),n=r({},t),i=o.ObjectUtils.keyValues(e);i.sort(s.bySource),i.forEach((function(e){var r=e.key,i=e.value;r===a.LogSourceCompositeType.All?Object.keys(t).forEach((function(e){n[e]=i})):n[r]=i})),Object.assign(this._data.sources,n),this._data.loggerInstances.forEach((function(e){e.updateSources(n)}))},e.prototype._updateCategories=function(e){var t=r({},this._data.categories),n=Object.keys(t),u=r({},t),c=function(e,t){e.forEach((function(e){return u[e]=t}))},l=o.ObjectUtils.keyValues(e);l.sort(s.byReversedNamespaceDepth),l.sort(s.byCategory),l.forEach((function(e){var t=e.key,r=e.value;if(t===a.LogCategoryCompositeType.All)c(n,r);else{var o=i([t],s.findChildCategoryKeys(n,t));c(o,r)}})),this._data.categories=u,this._data.loggerInstances.forEach((function(e){e.updateCategories(u)}))},e.prototype._updateLevels=function(e){var t=r({},this._data.levels),n=r({},t),i=o.ObjectUtils.keyValues(e);i.sort(s.byLevel),i.forEach((function(e){var t=e.key,r=e.value;s.LogLevelCompositeTypeValues.includes(t)?s.expandCompositeLevel(t).forEach((function(e){return n[e]=r})):n[t]=r})),this._data.levels=n,this._data.loggerInstances.forEach((function(e){e.updateLevels(n)}))},e.prototype.updateConfig=function(e){var t=e.theme,n=e.targets,r=e.enabled,i=e.sources,a=e.categories,u=e.levels,c=!1;if(null!=t&&(this.setTheme(t),c=!0),Array.isArray(n)&&(this._setTargets(n),c=!0),null!=r&&(this._setEnabled(Boolean(r)),c=!0),null!=i){var l=o.ObjectUtils.keyValues(i).reduce((function(e,t){var n=t.key,r=t.value;return e[s.normalizeSource(n)]=Boolean(r),e}),{});this._updateSources(l),c=!0}null==a||o.ObjectUtils.isEmpty(a)||(this._updateCategories(a),c=!0),null==u||o.ObjectUtils.isEmpty(u)||(this._updateLevels(u),c=!0),c&&this._notifyConfigChanged()},e.prototype.storeLoggerInstance=function(e){this._data.loggerInstances.push(e)},e.prototype.removeLoggerInstance=function(e){o.ArrayUtils.remove(this._data.loggerInstances,e)},e.prototype.registerFilter=function(e){var t=this._data.categories;if(!(e in t)){var n=!o.ObjectUtils.isEmpty(t)&&s.getFilterVisibility(t,e);this._data.categories[e]=n}},e.prototype.useDefaults=function(){var e=c.LogManagerDefaults.data(),t=e.categories,n=e.levels;this._data.categories=t,this._data.levels=n,this._data.loggerInstances.forEach((function(e){e.updateCategories(t),e.updateLevels(n)}))},e}());t.LogManager=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(82);t.LogLevelCompositeTypeValues=Object.values(r.LogLevelCompositeType),t.normalizeSource=function(e){return String(e).toLowerCase()},t.expandCompositeLevel=function(e){switch(e){case r.LogLevelCompositeType.All:return[r.LogLevelType.Verbose,r.LogLevelType.Debug,r.LogLevelType.Info,r.LogLevelType.Warn,r.LogLevelType.Error];case r.LogLevelCompositeType.Dev:return[r.LogLevelType.Debug,r.LogLevelType.Info,r.LogLevelType.Warn,r.LogLevelType.Error];default:return[e]}},t.bySource=function(e,t){var n=e.key,i=t.key;return n===r.LogSourceCompositeType.All?-1:i===r.LogSourceCompositeType.All?1:0},t.byLevel=function(e,n){var i=e.key,o=n.key;return i===r.LogLevelCompositeType.All?-1:o===r.LogLevelCompositeType.All?1:t.LogLevelCompositeTypeValues.includes(i)&&!t.LogLevelCompositeTypeValues.includes(o)?-1:t.LogLevelCompositeTypeValues.includes(o)&&!t.LogLevelCompositeTypeValues.includes(i)?1:0},t.byCategory=function(e,t){var n=e.key,i=t.key;return n===r.LogCategoryCompositeType.All?-1:i===r.LogCategoryCompositeType.All?1:0},t.byReversedNamespaceDepth=function(e,t){var n=e.key,r=t.key,i=n.split(".").length,o=r.split(".").length;return i>o?-1:i<o?1:0},t.findChildCategoryKeys=function(e,t){var n=new RegExp("^"+i.escape(t)+"\\.");return e.filter((function(e){return n.test(e)}))},t.getFilterVisibility=function(e,n){if(n in e)return e[n];var r=n.split(".");if(!(r.length>1))return!1;var i=r.slice(0,-1).join(".");return t.getFilterVisibility(e,i)}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(138)),r(n(139))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=function(){function e(){}return e.data=function(){var e,t;return{enabled:!1,theme:r.LogTheme.Light,loggerInstances:[],sources:(e={},e[r.LogSourceType.Unsourced]=!0,e),categories:{},levels:(t={},t[r.LogLevelType.Verbose]=!1,t[r.LogLevelType.Debug]=!1,t[r.LogLevelType.Info]=!0,t[r.LogLevelType.Warn]=!0,t[r.LogLevelType.Error]=!0,t)}},e}();t.LogManagerDefaults=i},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(140)),r(n(141))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(165);t.fromNullable=r.fromNullable,t.none=r.none,t.fromEither=r.fromEither,t.map=r.map;var i=n(172);t.right=i.right,t.left=i.left;var o=n(31);t.pipe=o.pipe},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(148)),r(n(100))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Before_Event="beforeEvent",e.State_Entered="stateEntered",e.State_Changed="stateChanged",e.After_Event="afterEvent",e.Error="error"}(r||(r={})),t.FsmEventType=r},function(e,t,n){"use strict";var r,i,o,a,s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Wildcard="*"}(r||(r={})),t.FsmDefaultEvents=r,function(e){e.No_State="__no_state__"}(i||(i={})),t.FsmDefaultStates=i,function(e){e.Sync="sync",e.Async="async"}(o||(o={})),t.FsmModes=o,function(e){e.Succeeded="succeeded",e.No_Transition="no_transition",e.Canceled="canceled",e.Pending="pending",e.Error="error"}(a||(a={})),t.FsmTransitionResult=a,function(e){e[e.Invalid_Transition=100]="Invalid_Transition",e[e.Pending_Transition=200]="Pending_Transition"}(s||(s={})),t.FsmError=s},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(103)),r(n(152)),r(n(104)),r(n(106)),r(n(105))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this)||this;return n._taskHandler=t,n}return i(t,e),t.prototype.map=function(e){var n=this;return new t((function(t){n.fold((function(e){return t.reject(e)}),(function(n){try{var r=e(n);t.resolve(r)}catch(e){t.reject(e)}}))})).onExecuted((function(){n.execute()}))},t.prototype.mapAsync=function(e){var n=this;return new t((function(t){n.fold((function(e){return t.reject(e)}),(function(n){try{e(n).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)}))}catch(e){t.reject(e)}}))})).onExecuted((function(){n.execute()}))},t.prototype.mapLeft=function(e){var n=this;return new t((function(t){n.fold((function(n){try{var r=e(n);t.reject(r)}catch(e){t.reject(e)}}),(function(e){return t.resolve(e)}))})).onExecuted((function(){n.execute()}))},t.prototype.pipe=function(e){var n=this;return new t((function(t){n.fold(t.reject,(function(n){e(n).execute().fold((function(e){return t.reject(e)}),(function(e){return t.resolve(e)}))}))})).onExecuted((function(){n.execute()}))},t.prototype.chain=function(e){var n=this;return new t((function(t){n.fold((function(e){t.reject(e)}),(function(n){e.execute().fold((function(e){t.reject(e)}),(function(e){Array.isArray(n)?(n.push(e),t.resolve(n)):t.resolve([n,e])}))}))})).onExecuted((function(){n.execute()}))},t.prototype.execute=function(){return this.running||this.completed||(this._notifyExecuting(),this._taskHandler(this._createResolver())),this},t}(n(104).Task);t.DefaultTask=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(98),i=n(33),o=n(75),a=n(105),s=i.Log.getLogger("Task").filter("lib.tasks"),u=function(){function e(){var t=this;this._handleResolved=function(e){if(t.running=!1,t.resolved=!0,t.canceled)return t._handleCanceled();t._value=r.right(e),t._triggerHandlersFor(a.TaskEventType.Resolved),t._handleCompleted()},this._handleRejected=function(e){if(t.running=!1,t.rejected=!0,t.canceled)return t._handleCanceled();t._value=r.left(e),t._triggerHandlersFor(a.TaskEventType.Rejected),t._handleCompleted()},this._logger=s,this.id=e.createTaskId(),this._handlers=new Map([[a.TaskEventType.Executed,[]],[a.TaskEventType.Resolved,[]],[a.TaskEventType.Rejected,[]],[a.TaskEventType.Canceled,[]],[a.TaskEventType.Completed,[]]]),this.running=!1,this.canceled=!1,this.resolved=!1,this.rejected=!1,this.completed=!1}return e.createTaskId=function(){return"task-"+e._taskId++},e.prototype.onExecuted=function(e){return this._addHandler(a.TaskEventType.Executed,e),this},e.prototype.onResolved=function(e){return this._addHandler(a.TaskEventType.Resolved,e),this},e.prototype.onRejected=function(e){return this._addHandler(a.TaskEventType.Rejected,e),this},e.prototype.onCanceled=function(e){return this._addHandler(a.TaskEventType.Canceled,e),this},e.prototype.onCompleted=function(e){return this._addHandler(a.TaskEventType.Completed,e),this},e.prototype.fold=function(e,t){return this._addHandler(a.TaskEventType.Rejected,e),this._addHandler(a.TaskEventType.Resolved,t),this},e.prototype.cancel=function(){return this.canceled=!0,this},e.prototype.toOptional=function(){return this.resolved?r.fromEither(this._value):r.none},e.prototype._notifyExecuting=function(){this.running=!0,this._triggerHandlersFor(a.TaskEventType.Executed)},e.prototype._createResolver=function(){return{resolve:this._handleResolved,reject:this._handleRejected}},e.prototype._handleCanceled=function(){this._triggerHandlersFor(a.TaskEventType.Canceled),this._handleCompleted()},e.prototype._handleCompleted=function(){this.completed=!0,this._triggerHandlersFor(a.TaskEventType.Completed)},e.prototype._addHandler=function(e,t){var n=!1;switch(e){case a.TaskEventType.Executed:n=this.running;break;case a.TaskEventType.Resolved:n=this.resolved;break;case a.TaskEventType.Rejected:n=this.rejected;break;case a.TaskEventType.Canceled:n=this.canceled;break;case a.TaskEventType.Completed:n=this.resolved||this.rejected||this.canceled;break;default:throw new o.UnreachableCaseError(e)}n?this._triggerHandler(e,t):r.pipe(r.fromNullable(this._handlers.get(e)),r.map((function(e){return e.push(t)})))},e.prototype._triggerHandlersFor=function(e){for(var t,n=null!=(t=this._handlers.get(e))?t:[];n.length>0;){var r=n.shift();r&&this._triggerHandler(e,r)}this._handlers.set(e,[])},e.prototype._triggerHandler=function(e,t){e===a.TaskEventType.Executed||e===a.TaskEventType.Canceled||e===a.TaskEventType.Completed?t():t(this._value.value)},e._taskId=0,e}();t.Task=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Executed="executed",e.Resolved="resolved",e.Rejected="rejected",e.Canceled="canceled",e.Completed="completed"}(t.TaskEventType||(t.TaskEventType={}))},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(74)),a=n(103),s=function(){function e(){}return e.create=function(e){return new a.DefaultTask(e)},e.resolve=function(t){return e.create((function(e){e.resolve(t)}))},e.resolveDelayed=function(t,n){return e.delay(t,(function(e){e.resolve(n)}))},e.reject=function(t){return e.create((function(e){e.reject(t)}))},e.rejectDelayed=function(t,n){return e.delay(t,(function(e){e.reject(n)}))},e.delay=function(t,n){return e.create((function(e){o.delay(n.bind(null,e),t)}))},e.seq=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)return e.resolve([]).execute();if(1===t.length)return t[0].map((function(e){return[e]}));for(var r=t[0],i=1;i<t.length;i++)r=r.chain(t[i]);return r.execute()},e.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)return e.resolve([]).execute();var i=e.create((function(e){var n={tasks:t.length,resolved:0},i=r(new Array(n.tasks)),o=function(t){e.reject(t)};t.forEach((function(t,r){t.onRejected(o),t.onResolved((function(t){return function(t,r){n.resolved++,i[r]=t,n.resolved===n.tasks&&e.resolve(i)}(t,r)})),t.running||t.execute()}))}));return i.execute()},e}();t.TaskFactory=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(108),i=n(69);t.BridgeHookEventProxyHandler=function(e,t,n){void 0===t&&(t="hook:event");var o=i.Log.getLogger("BridgeHookEventProxyHandler|"+t),a={};return function(s){var u,c,l,d,f,p=s.type,h=s.hook;switch(p){case r.BridgeHookEventType.Added:var g=s,y=g.handlerId,v=g.handlerType,_=function(n){var o=i.createDeferred();a[y].executionPromise=o;var s={type:r.BridgeHookEventType.Executing,hook:h,handlerId:y,handlerType:v,data:n};return e.send(t,s),o.promise};a[y]={executionPromise:null,handler:_,handlerType:v},(null===(u=n)||void 0===u?void 0:u.onHandlerAdded)&&n.onHandlerAdded(_,{type:p,hook:h,handlerId:y,handlerType:v});break;case r.BridgeHookEventType.Removed:var m=s,b=m.handlerId,C=m.handlerType;if(b){var E=a[b].handler;(null===(c=n)||void 0===c?void 0:c.onHandlerRemoved)&&n.onHandlerRemoved(E,{hook:h,type:p,handlerId:b,handlerType:C}),delete a[b]}else C?((null===(l=n)||void 0===l?void 0:l.onHandlerRemoved)&&n.onHandlerRemoved(C,{hook:h,type:p,handlerId:b,handlerType:C}),Object.keys(a).forEach((function(e){a[e].handlerType===C&&delete a[e]}))):o.warn("Unable to clear hook handler for "+h);break;case r.BridgeHookEventType.Executing:if(null===(d=n)||void 0===d?void 0:d.onExecuting){var T=s,S=T.handlerId,P=T.handlerType,M=T.data;n.onExecuting({hook:h,type:p,handlerId:S,handlerType:P,data:M})}break;case r.BridgeHookEventType.Executed:var O=s,k=O.handlerId,A=O.handlerType,w=O.error,R=O.result,I=a[k].executionPromise;if(!I){o.warn("Could not resolve or reject hook handler for "+h);break}(null===(f=n)||void 0===f?void 0:f.onExecuted)&&n.onExecuted({hook:h,type:p,handlerId:k,handlerType:A,error:w,result:R}),w?I.rejector(w):I.resolver(R);break;default:throw new i.UnreachableCaseError(p)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Added="added",e.Removed="removed",e.Executing="executing",e.Executed="executed"}(t.BridgeHookEventType||(t.BridgeHookEventType={}))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(52);t.SpotlightEventCategory=i.SpotlightEventCategory,t.SpotlightEventLevel=i.SpotlightEventLevel;var o=n(156),a=n(160),s=n(53),u=n(161);t.SpotlightWrapper=u.SpotlightWrapper,t.SpotlightWrapperInitBehavior=u.SpotlightWrapperInitBehavior;var c=r(n(2)),l={getClient:function(e){try{if(!e||!c.default)throw new TypeError("Requires a SpotlightConfig param");var t=e.appId,n=e.source;if(!t)throw new TypeError('SpotlightConfig requires "appId"');if(!n)throw new TypeError('SpotlightConfig requires "source"');return o.SpotlightBroker.createClient(e)}catch(e){return s.SpotlightLogger.warn("Spotlight.getClient failure: "+e),new a.NoOpSpotlightClient}},dispose:function(){o.SpotlightBroker.disposeAll()}};t.Spotlight=l},function(e,t,n){"use strict";t.a=function(){return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(112))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(113)),r(n(50))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(50),o=n(33),a=n(142),s=r(n(51)),u=r(n(48)),c=n(98),l=o.Log.getLogger("AuthTokenHelper").filter("auth");function d(e){return u.default(e)&&void 0!==e.expiresAt}var f=function(){function e(){}return e.parse=function(e,t){var n,r=function(){switch(t){case i.AuthTokenType.Adobe:return a.AdobeTokenParser;case i.AuthTokenType.JWS:return a.JWSTokenParser}}();if(!r)return l.error("Could not select parser for token type: "+t),c.none;try{n=r.parse(e)}catch(e){return l.error("Unable to parse "+t+" auth token: "+e.toString()),c.none}return c.fromNullable(n)},e.isExpired=function(t,n,r){var i,o,a,u,l=null;if(s.default(t)?l=e.parse(t,n).toNullable():d(t)&&(l=t),!l||!d(l))return c.none;var f=null!=(o=null===(i=r)||void 0===i?void 0:i.currentTime)?o:Date.now(),p=null!=(u=null===(a=r)||void 0===a?void 0:a.expiredThreshold)?u:10;return c.fromNullable(l.expiresAt.getTime()-f<=p)},e}();t.AuthTokenHelper=f},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(79)),r(n(77))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(n(76)),a=function(){function e(e,t){var n=i.ObjectUtils.getValues(e),r=o.default.getFactory(n,e,t);this._default=o.default.createFromFactory(r),this._before=o.default.createFromFactory(r.mapTo("before")),this._after=o.default.createFromFactory(r.mapTo("after")),this._around=o.default.createFromFactory(r.mapTo("around")),this._length=n.length}return Object.defineProperty(e.prototype,"before",{get:function(){return this._before},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"around",{get:function(){return this._around},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this._after},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.each=function(e){return this._default.each(e),this._default},e.prototype.once=function(e){return this._default.once(e)},e.prototype.listen=function(e){return this._default.listen(e)},e.prototype.has=function(e){return this._default.has(e)},e.prototype.unlisten=function(e){return this._default.unlisten(e),this._default},e.prototype.unlistenAll=function(){return this._default.unlistenAll(),this._default},e.prototype.removeAllListeners=function(){return this._default.removeAllListeners(),this._default},e}();t.EventCollection=a},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(166)),a=i(n(164)),s=i(n(167)),u=n(81),c=function(){function e(){}return e.remove=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o.default.apply(void 0,r([e],t))},e.dedupe=function(e){return a.default(e)},e.lastIndex=function(e){return e.length-1},e.take=function(e,t){return e.slice(0,t)},e.deepCopy=function(e){return u.cloneDeep(e)},e.flatten=function(e){return s.default(e)},e.mapToObj=function(e,t){var n={};return e.forEach((function(e){return t(e,n)})),n},e}();t.ArrayUtils=c},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(1);t.default=function(e){return!0===e||!1===e||Object(i.a)(e)&&"[object Boolean]"==Object(r.a)(e)}},function(e,t,n){"use strict";n.r(t),t.default=function(e){return null===e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return Object.keys(e)};t.getEnumKeys=r,t.getEnumValues=function(e){return r(e).map((function(t){return e[t]}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomInt=function(e){return void 0===e&&(e=1),Math.floor(Math.random()*Math.floor(e))}},function(e,t,n){"use strict";n.r(t);var r=n(21),i=n(8),o=n(43),a=n(10),s=n(20),u=n(24),c=Object.prototype.hasOwnProperty,l=Object(o.a)((function(e,t){if(Object(s.a)(t)||Object(a.a)(t))Object(i.a)(t,Object(u.a)(t),e);else for(var n in t)c.call(t,n)&&Object(r.a)(e,n,t[n])}));t.default=l},function(e,t,n){"use strict";n.r(t);var r=n(63),i=n(43),o=Object(i.a)((function(e,t,n){Object(r.a)(e,t,n)}));t.default=o},function(e,t,n){"use strict";n.r(t);var r=n(63),i=n(43),o=Object(i.a)((function(e,t,n,i){Object(r.a)(e,t,n,i)}));t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDeferred=function(){var e={};return e.promise=new Promise((function(t,n){e.resolver=t,e.rejector=n})),e}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(73),o=r(n(126));t.replaceTokens=function(e,t,n){var r=i.ObjectUtils.extendDeep({},{pattern:"{token}"},n||{});return Object.keys(t).forEach((function(n){var i=t[n],o=r.pattern.split("token").join(n);e=e.split(o).join(i)})),e},t.hashCode=function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n},t.getUniqueId=function(e){return o.default(e)},t.stringify=function(e,t,n){return void 0===t&&(t=4),void 0===n&&(n=2),JSON.stringify(e,function(e){var t=[];return function(n,r){if(t.length>0){var i=t.indexOf(this);i>-1?t.splice(i+1):t.push(this),t.indexOf(r)>-1?r="[Circular JSON]":t.length>e&&!function(e){return"boolean"==typeof e||"string"==typeof e||"number"==typeof e||null==e}(r)&&(r="...")}else t.push(r);return r}}(t),n)}},function(e,t,n){"use strict";n.r(t);var r=n(66),i=0;t.default=function(e){var t=++i;return Object(r.a)(e)+t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.greaterThanRange=function(e,t,n){return void 0===n&&(n=!0),e.start==t.start?e.duration>t.duration:n?e.start>=t.end:e.start>t.end},e.lessThanRange=function(e,t,n){return void 0===n&&(n=!0),e.start==t.start?e.duration<t.duration:n?e.end<=t.start:e.end<t.start},e.intersectsRange=function(e,t){var n=e.start<t.start?e:t;return(n===e?t:e).start<n.end},e.outsideRange=function(e,t){return!e.contains(t.start)},e}();t.TimeRangeUtils=r;var i=function(){function e(e,t){this.start=e,this.end=t,this.duration=this.end-this.start}return e.create=function(t,n){return new e(t,t+n)},e.createWithEnd=function(t,n){return new e(t,n)},e.prototype.contains=function(e){return e>=this.start&&e<=this.end},e.prototype.equals=function(e){return this.start===e.start&&this.end===e.end},e.prototype.toString=function(){return"[TimeRange] "+this.start+" -> "+this.end+" : "+this.duration},e.prototype.toJSON=function(){return{start:this.start,end:this.end,duration:this.duration}},e}();t.TimeRange=i},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(129));function a(e){return o.default(e,!0)}t.parse=a,t.extension=function(e){var t=o.default(e);return t.pathname.substring(t.pathname.lastIndexOf(".")+1,t.pathname.length)},t.directory=function(e){var t=o.default(e);return t.pathname.substr(0,t.pathname.lastIndexOf("/")+1)};var s=/^(https?\:)/;function u(e){return o.default(e,!0).query}t.normalizeHTTPProtocol=function(e){return e.replace(s,"")},t.appendQuery=function(e,t){var n=a(e);return n.set("query",r(r({},n.query),t)),n.toString()},t.getQueryAsMap=u,t.containsEnabledTOPDebug=function(e){var t=u(e).topdebug;return!!t&&/^true/.test(t)}},function(e,t,n){"use strict";(function(t){var r=n(130),i=n(131),o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function c(e){var n,r=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new d(unescape(e.pathname),{});else if("string"===o)for(n in i=new d(e,{}),u)delete i[n];else if("object"===o){for(n in e)n in u||(i[n]=e[n]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function l(e){var t=o.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function d(e,t,n){if(!(this instanceof d))return new d(e,t,n);var o,a,u,f,p,h,g=s.slice(),y=typeof t,v=this,_=0;for("object"!==y&&"string"!==y&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),t=c(t),o=!(a=l(e||"")).protocol&&!a.slashes,v.slashes=a.slashes||o&&t.slashes,v.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(g[3]=[/(.*)/,"pathname"]);_<g.length;_++)"function"!=typeof(f=g[_])?(u=f[0],h=f[1],u!=u?v[h]=e:"string"==typeof u?~(p=e.indexOf(u))&&("number"==typeof f[2]?(v[h]=e.slice(0,p),e=e.slice(p+f[2])):(v[h]=e.slice(p),e=e.slice(0,p))):(p=u.exec(e))&&(v[h]=p[1],e=e.slice(0,p.index)),v[h]=v[h]||o&&f[3]&&t[h]||"",f[4]&&(v[h]=v[h].toLowerCase())):e=f(e);n&&(v.query=n(v.query)),o&&t.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==t.pathname)&&(v.pathname=function(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(v.pathname,t.pathname)),r(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(f=v.auth.split(":"),v.username=f[0]||"",v.password=f[1]||""),v.origin=v.protocol&&v.host&&"file:"!==v.protocol?v.protocol+"//"+v.host:"null",v.href=v.toString()}d.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;default:o[e]=t}for(var u=0;u<s.length;u++){var c=s[u];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},d.extractProtocol=l,d.location=c,d.qs=i,e.exports=d}).call(this,n(71))},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,i,a=[];for(i in"string"!=typeof t&&(t="?"),e)if(r.call(e,i)){if((n=e[i])||null!=n&&!isNaN(n)||(n=""),i=o(i),n=o(n),null===i||null===n)continue;a.push(i+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=i(t[1]),a=i(t[2]);null===o||null===a||o in r||(r[o]=a)}return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(80),i=n(85);t.createEvent=function(e,t){return new i.EventSignal(e,t)},t.createEventCollection=function(e,t){var n=new r.EventCollection(e,t);return Object.keys(e).forEach((function(t){return n[t]=e[t]})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(87),i=n(88),o=function(){function e(e){this._context=e,this._bindings=new r.LinkedList}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),e.prototype.listen=function(e,t){var n=this,r=i.createBindingForHandler({signal:this,handler:e,once:!1,onDetached:function(){n._bindings.remove(r)},context:t||this._context});return this._bindings.add(r),r},e.prototype.once=function(e,t){var n=this,r=i.createBindingForHandler({signal:this,handler:e,once:!0,onDetached:function(){n._bindings.remove(r)},context:t||this._context});return this._bindings.add(r),r},e.prototype.dispatch=function(e){this._bindings.iterator().forEach((function(t){t.once&&t.detach();try{t.handler(e)}catch(e){try{console.error("[dispatch] An error occured (dev-mode only): ",e)}catch(e){}}}))},e.prototype.has=function(e){return this._bindings.iterator().filter((function(t){return t===e})).length>0},e.prototype.count=function(){return this._bindings.length},e.prototype.unlisten=function(e){e.detach()},e.prototype.unlistenAll=function(){var e=this;this._bindings.iterator().forEach((function(t){return e.unlisten(t)}))},e}();t.Signal=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._length=0,this._head=null,this._tail=null}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail},enumerable:!0,configurable:!0}),e.prototype.insertBefore=function(e,t){var n=this.findNodeBy((function(t){return t===e}));if(null===n)return!1;var r=i.create(t),o=n.previous;return o&&(n.previous=r,o.next=r,r.previous=o,r.next=n),this._length++,!0},e.prototype.insertAfter=function(e,t){var n=this.findNodeBy((function(t){return t===e}));if(null===n)return!1;var r=i.create(t),o=n.next;return o&&(n.next=r,o.previous=r,r.previous=n,r.next=o),this._length++,!0},e.prototype.findBy=function(e){var t=this.findNodeBy(e);return t?t.value:null},e.prototype.peekBefore=function(e){var t=this.findNodeBy((function(t){return t===e}));if(!t)return null;var n=t.previous;return n?n.value:null},e.prototype.peekAfter=function(e){var t=this.findNodeBy((function(t){return t===e}));if(!t)return null;var n=t.next;return n?n.value:null},e.prototype.isLast=function(e){return e===this.last()},e.prototype.findNodeBy=function(e){for(var t=this._head;null!==t;){if(e(t.value))return t;t=t.next}return null},e.prototype.findPreviousNodeBy=function(e){var t=this.findNodeBy(e);return t?t.previous:null},e.prototype.add=function(e){var t=this._tail,n=i.create(e);t&&(t.next=n,n.previous=t),this._head||(this._head=n),this._tail=n,this._length++},e.prototype.push=function(e){var t=this._head,n=i.create(e);t&&(t.previous=n,n.next=t),this._tail||(this._tail=n),this._head=n,this._length++},e.prototype.first=function(){return this._head?this._head.value:null},e.prototype.last=function(){return this._tail?this._tail.value:null},e.prototype.pop=function(){if(!this._head)return null;var e=this._head.value;return this._head=this._head.next,this._head||(this._tail=null),this._length--,e},e.prototype.isEmpty=function(){return null===this._head},e.prototype.remove=function(e){for(var t=this._head;null!==t;){if(t.value===e)return t.previous?t.next?(t.previous.next=t.next,t.next.previous=t.previous):(this._tail=this._tail.previous,this._tail&&(this._tail.next=null)):(this._head=this._head.next,this._head&&(this._head.previous=null),this._tail===t&&(this._tail=this._head)),this._length--,t.value;t=t.next}return null},e.prototype.clear=function(){this._head=null,this._tail=null,this._length=0},e.prototype.iterator=function(){for(var e=[],t=this._head;null!==t;)e.push(t.value),t=t.next;return e},e}();t.LinkedList=r;var i=function(){function e(e){this.value=e,this.previous=null,this.next=null}return e.create=function(t,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var i=new e(t);return r&&(i.next=r),n&&(i.previous=n),i},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(90))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(137)),r(n(91))},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(91),o=n(11),a=n(92),s=n(12),u=function(e){var t=o.getQueryAsMap(e);return o.ObjectUtils.keyValues(t).map((function(e){var t=e.key,n=e.value;switch(n=n||"",t){case i.LogQueryParam.Debug:return c(n);case i.LogQueryParam.Enabled:return l(n);case i.LogQueryParam.Theme:return d(n);case i.LogQueryParam.Category:return f(n);case i.LogQueryParam.Sources:return p(n);case i.LogQueryParam.Levels:return h(n)}})).reduce((function(e,t){return o.ObjectUtils.extendDeep(e,t),e}),{})},c=function(e){var t;if("true"===e)return{enabled:!0,levels:(t={},t[s.LogLevelCompositeType.Dev]=!0,t)}},l=function(e){var t="true"===e;if(t)return{enabled:t}},d=function(e){switch(e){case s.LogTheme.Dark:return{theme:s.LogTheme.Dark};case s.LogTheme.Light:return{theme:s.LogTheme.Light}}},f=function(e){var t=g(e);if(t.length>0)return{categories:o.ArrayUtils.mapToObj(t,(function(e,t){t[e]=!0}))}},p=function(e){var t,n=g(e);if(n.length>0){var i=o.ArrayUtils.mapToObj(n,(function(e,t){t[e]=!0}));return{sources:r((t={},t[s.LogSourceCompositeType.All]=!1,t),i)}}},h=function(e){var t,n=g(e);if(n.length>0){var i=o.ArrayUtils.mapToObj(n,(function(e,t){t[e]=!0}));return{levels:r((t={},t[s.LogSourceCompositeType.All]=!1,t),i)}}},g=function(e,t){void 0===t&&(t="|");var n=encodeURIComponent(t),r=new RegExp(o.escape(t)+"|"+o.escape(n),"g");return o.split(e,r).map((function(e){return e.trim()}))};t.LogOverrideHelper={applyOverridesFromURL:function(e){var t=u(e);t&&a.Log.updateConfig(t)},getLogConfigFromURL:u}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=n(12),a=n(90),s=function(){function e(e){this._enabled=!0;var t={theme:o.LogTheme.Light};e=e||{};var n=r(r({},t),e);this.updateTheme(n.theme)}return e.prototype.detach=function(){this._enabled=!1},e.prototype.init=function(e){return this._options=i.ObjectUtils.extendDeep({formatter:a.DefaultFormatters.cssConsole},e||{}),this._formatter=this._options.formatter,this},e.prototype.updateTheme=function(e){switch(e){case o.LogTheme.Dark:this._contextStyle="color: #00AAFF;",this._msgStyle="color: #FFFFFF;";break;default:this._contextStyle="color: #00008B;",this._msgStyle="color: #000;"}},e.prototype.sendMessage=function(e){if(this._enabled){var t=this._formatter(e);switch(e.type){case o.LogLevelType.Verbose:console.log(t,this._contextStyle,this._msgStyle);break;case o.LogLevelType.Debug:console.debug(t,this._contextStyle,this._msgStyle);break;case o.LogLevelType.Info:console.info(t,this._contextStyle,this._msgStyle);break;case o.LogLevelType.Warn:console.warn(t,this._contextStyle,this._msgStyle);break;case o.LogLevelType.Error:console.error(t,this._contextStyle,this._msgStyle)}}},e}();t.ConsoleTarget=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(77),o=function(){function e(e){this._events=e}return e.prototype.detach=function(){this._events=void 0},e.prototype.init=function(e){return this._options=e,this},e.prototype.updateTheme=function(e){},e.prototype.sendMessage=function(e){var t;if(this._events){var n=((t={})[r.LogLevelType.Debug]=i.LogEventType.Debug,t[r.LogLevelType.Info]=i.LogEventType.Info,t[r.LogLevelType.Verbose]=i.LogEventType.Verbose,t[r.LogLevelType.Warn]=i.LogEventType.Warning,t[r.LogLevelType.Error]=i.LogEventType.Error,t)[e.type];n?this._events[n].dispatch({entry:e}):console.warn("[sendMessage] No event could be matched for log entry: ",e)}},e}();t.LogEventTarget=o},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=n(12),a=n(94),s=function(){function e(){this._sources={},this._categories={},this._levels={}}return e.prototype._sendMessage=function(e,t){var n={time:Date.now(),context:this._context,contextDetail:this._contextDetail,type:e,message:t};this._targets.forEach((function(e){try{e.sendMessage(n)}catch(e){console.warn("[sendMessage] Unable to send log message to target, error:",e)}}))},e.prototype._applyFiltersAndToggle=function(){var e=this;this._enabled=this._canBeEnabled,this._enabled&&this._filters&&this._filters.forEach((function(t){var n=!0===t||i.isString(t)&&a.getFilterVisibility(e._categories,t);e._enabled=e._enabled&&n}))},e.prototype._createChildLogger=function(t){var n;void 0===t&&(t={});var r=i.ObjectUtils.extendDeep({},this._options,t);r.filters=i.ArrayUtils.dedupe(r.filters);var o=(new e).init(r);return null===(n=this._manager)||void 0===n||n.storeLoggerInstance(o),o},e.prototype._sendMessageWithType=function(e,t){this._manager.enabled&&this._enabled&&this._levels[e]&&this._sendMessage(e,t)},e.prototype.init=function(e){void 0===e&&(e={});var t={context:"",contextDetail:"",targets:[],source:o.LogSourceType.Unsourced,enabled:!0,categories:{},levels:{},filters:[]},n=i.ObjectUtils.extendDeep(t,e),r=n.manager,a=n.context,s=n.contextDetail,u=n.targets,c=n.enabled,l=n.source,d=n.sources,f=n.categories,p=n.levels,h=n.filters;return r&&(this._manager=r),this._context=a,this._contextDetail=s,this._source=l,this._targets=u,this._filters=h,this._options=n,this.setEnabled(c),this.updateSources(d),this.updateCategories(f),this.updateLevels(p),this},e.prototype.verbose=function(e){this._sendMessageWithType(o.LogLevelType.Verbose,e)},e.prototype.debug=function(e){this._sendMessageWithType(o.LogLevelType.Debug,e)},e.prototype.info=function(e){this._sendMessageWithType(o.LogLevelType.Info,e)},e.prototype.warn=function(e){this._sendMessageWithType(o.LogLevelType.Warn,e)},e.prototype.error=function(e){this._sendMessageWithType(o.LogLevelType.Error,e)},e.prototype.filter=function(e){i.isString(e)&&this._manager.registerFilter(e);var t=r(this._filters,[e]);return this._createChildLogger({filters:t})},e.prototype.child=function(e){var t=""===this._contextDetail?e:this._contextDetail+" | "+e;return this._createChildLogger({contextDetail:t})},e.prototype.setEnabled=function(e){this._canBeEnabled=e,this._applyFiltersAndToggle()},e.prototype.setTargets=function(e){this._targets=e},e.prototype.getSource=function(){return this._source},e.prototype.updateSources=function(e){Object.assign(this._sources,e);var t=this.getSource();t in e&&this.setEnabled(e[t]),this._applyFiltersAndToggle()},e.prototype.updateCategories=function(e){Object.assign(this._categories,e),this._applyFiltersAndToggle()},e.prototype.updateLevels=function(e){Object.assign(this._levels,e),this._applyFiltersAndToggle()},e.prototype.destroy=function(){var e;null===(e=this._manager)||void 0===e||e.removeLoggerInstance(this)},e}();t.DefaultLogger=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=function(){function e(e){this._className=e}return e.prototype._call=function(e,t){var n="["+this._className+"] "+t;switch(e){case r.LogLevelType.Debug:console.debug(n);break;case r.LogLevelType.Info:console.info(n);break;case r.LogLevelType.Warn:console.warn(n);break;case r.LogLevelType.Error:console.error(n);break;default:console.log(n)}},e.prototype.init=function(e){return this},e.prototype.debug=function(e){this._call(r.LogLevelType.Debug,e)},e.prototype.info=function(e){this._call(r.LogLevelType.Info,e)},e.prototype.warn=function(e){this._call(r.LogLevelType.Warn,e)},e.prototype.error=function(e){this._call(r.LogLevelType.Error,e)},e.prototype.verbose=function(e){this._call(r.LogLevelType.Verbose,e)},e.prototype.filter=function(e){return this},e.prototype.child=function(e){return this},e.prototype.setEnabled=function(e){},e.prototype.setTargets=function(e){},e.prototype.getSource=function(){return r.LogSourceType.Unsourced},e.prototype.updateSources=function(e){},e.prototype.updateCategories=function(e){},e.prototype.updateLevels=function(e){},e}();t.SimpleLogger=i},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(143)),r(n(144))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=/\<ttl\>(\d+)\<\/ttl\>/,o=/\<issueTime\>(.+)\<\/issueTime\>/,a=/\<requestorID\>(.+)\<\/requestorID\>/,s=/\<resourceID\>(.+)\<\/resourceID\>/;t.AdobeTokenParser={parse:function(e){var t={ttl:i.exec(e),issueTime:o.exec(e),requestorId:a.exec(e),resourceId:s.exec(e)},n="",u="",c="",l=0;t.ttl&&t.issueTime&&(c=t.issueTime[1],l=parseInt(t.ttl[1],10));var d,f,p=function(e){return"Invalid Date"!==e.toString()},h=new Date(c);p(h)||(h=new Date((f=(d=c.split(" "))[2].substr(0,3)+":"+d[2].substr(3,5),d[0]+"T"+d[1]+f)));var g=new Date(h.getTime()+l);if(!p(h))throw new Error("Invalid date string encountered while parsing Adobe auth token: "+c);return t.requestorId&&(n=t.requestorId[1]),t.resourceId&&(u=t.resourceId[1]),{type:r.AuthTokenType.Adobe,requestorId:n,resourceId:u,issuedAt:h,expiresAt:g}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(145);t.JWSTokenParser={parse:function(e){var t=e.split(".")[1],n=JSON.parse(i.Base64.atob(t)),o=n.requestorId,a=n.resourceId,s=n.createdAt,u=n.expiresAt;return{type:r.AuthTokenType.JWS,requestorId:o,resourceId:a,issuedAt:new Date(s),expiresAt:new Date(u)}}}},function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,t,e;t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,e=function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.2",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),t>=2?"=":b64chars.charAt(n>>>6&63),t>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)?e.toString("base64"):btoa(utob(String(e)))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):_encode(e)},encodeURI=function(e){return encode(e,!0)},re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,r=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),i=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum((function(){return decode(this)}))),Object.defineProperty(String.prototype,"toBase64",noEnum((function(e){return encode(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",noEnum((function(){return encode(this,!0)})))}}return global.Meteor&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}},module.exports=e(t)}).call(this,__webpack_require__(71))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(75))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(99)),r(n(149)),r(n(101))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(70),i=n(100);function o(e){return r.createEvent(e)}t.createFsmEvent=o,t.createFsmEventCollection=function(){return r.createEventCollection({beforeEvent:o(i.FsmEventType.Before_Event),stateEntered:o(i.FsmEventType.State_Entered),stateChanged:o(i.FsmEventType.State_Changed),afterEvent:o(i.FsmEventType.After_Event),error:o(i.FsmEventType.Error)})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),o=n(99),a=n(101),s=i.Log.getLogger("Fsm").filter("std");s.setEnabled(!1);var u=function(){function e(){this._events=o.createFsmEventCollection(),this._eventTransitions=new Map,this._stateTransitions=new Map,this._eventList=new Map,this._previousState=null,this._currentState=null,this._finalState=null,this._currentTransition=null,this._currentTransitionCBs=this._getTransitionCBs({})}return e.prototype._doInit=function(e){var t=this;this._config=e,this._initialState=e.initial,this._finalState=e.end?e.end:null,this._addEvent({name:this._initialState.name,from:[null],to:this._initialState.state},!0),e.events.forEach((function(e){return t._addEvent(e)})),this._stateTransitions.forEach((function(e,n){t._eventList.set(n,t._buildEvent(n,e))})),this._currentState=null,this._doFire(this._initialState.name)},e.prototype._doFire=function(e,t){var n=this._eventList.get(e);return n?n(t):a.FsmTransitionResult.Error},e.prototype._doCanFire=function(e){var t,n=this._stateTransitions.get(e),r=null===this._currentTransition&&n&&n.has(this._currentState),i=this._stateTransitions.has(a.FsmDefaultEvents.Wildcard)||(null===(t=n)||void 0===t?void 0:t.has(a.FsmDefaultEvents.Wildcard));return r||i},e.prototype._doCannotFire=function(e){return!this._doCanFire(e)},e.prototype._addEvent=function(e,t){void 0===t&&(t=!1);var n=t?a.FsmDefaultStates.No_State:a.FsmDefaultEvents.Wildcard,i=e.to,o=e.from?e.from:[n];this._stateTransitions.has(e.name)||this._stateTransitions.set(e.name,new Map);for(var s=0;s<o.length;s++){this._eventTransitions.has(o[s])||this._eventTransitions.set(o[s],[]),this._eventTransitions.get(o[s]).push(e.name);var u=this._stateTransitions.get(e.name);u&&u.set(o[s],r({name:e.name,to:i||o[s]},this._getTransitionCBs(e)))}i&&!this._eventTransitions.has(i)&&this._eventTransitions.set(i,[])},e.prototype._buildEvent=function(e,t){var n=this;return function(r){r=r||[];var i,o=n._currentState,s=t.get(o);if(s&&(i=s.to),i||(i=t.get(a.FsmDefaultEvents.Wildcard)&&t.get(a.FsmDefaultEvents.Wildcard).to&&t.get(a.FsmDefaultEvents.Wildcard).to!==a.FsmDefaultEvents.Wildcard?t.get(a.FsmDefaultEvents.Wildcard).to:o),null!==n._currentTransition)return n._handleError(e,o,i,r,a.FsmError.Pending_Transition,"event "+e+" inappropriate because previous transition did not complete"),a.FsmTransitionResult.Error;if(n.cannotFireTransition(e))return n._handleError(e,o,i,r,a.FsmError.Invalid_Transition,"event "+e+" inappropriate in current state "+o),a.FsmTransitionResult.Error;if(n._currentTransitionCBs=n._getTransitionCBs(s),!1===n._handleBeforeEvent(e,o,i,r))return a.FsmTransitionResult.Canceled;if(o===i)return n._handleAfterEvent(e,o,i,r),a.FsmTransitionResult.No_Transition;n._currentTransition=n._createTransition(e,o,i,r);var u=n._handleLeaveState(e,o,i,r);return!1===u?(n._currentTransition=null,a.FsmTransitionResult.Canceled):u===a.FsmModes.Async?a.FsmTransitionResult.Pending:null!==n._currentTransition?n._currentTransition.execute():a.FsmTransitionResult.Error}},e.prototype._createTransition=function(e,t,n,r){var i=this;return{execute:function(){return i._currentTransition=null,i._previousState=i._currentState,i._currentState=n,i._handleStateEntered(e,t,n,r),i._handleStateChanged(e,t,n,r),i._handleAfterEvent(e,t,n,r),a.FsmTransitionResult.Succeeded},cancel:function(){return i._currentTransition=null,i._handleAfterEvent(e,t,n,r),a.FsmTransitionResult.Canceled}}},e.prototype._getTransitionCBs=function(e){var t=function(){},n=function(){return!0};return{onBeforeEvent:(e=e||{}).onBeforeEvent||n,onStateEntered:e.onStateEntered||t,onStateChanged:e.onStateChanged||t,onAfterEvent:e.onAfterEvent||t,onLeave:e.onLeave||n,onError:e.onError||t}},e.prototype._handleError=function(e,t,n,r,i,o){s.debug("[handleError] trigger: "+e+", from: "+this._previousState+", to: "+n+", errorType: "+i+", desc: "+o),this._currentTransitionCBs.onError(e,this._previousState,n,r,i,o),this._notifyError(e,this._previousState,n,r,i,o)},e.prototype._handleBeforeEvent=function(e,t,n,r){return s.debug("[handleBeforeEvent] trigger: "+e+", from: "+this._currentState+", to: "+n),!!this._currentTransitionCBs.onBeforeEvent(e,this._currentState,n,r)&&(this._notifyBeforeEvent(e,this._currentState,n,r),!0)},e.prototype._handleLeaveState=function(e,t,n,r){return this._currentTransitionCBs.onLeave(e,t,n,r)},e.prototype._handleStateEntered=function(e,t,n,r){s.debug("[handleStateEntered] trigger: "+e+", from: "+this._previousState+", to: "+n),this._currentTransitionCBs.onStateEntered(e,this._previousState,n,r),this._notifyStateEntered(e,this._previousState,n,r)},e.prototype._handleStateChanged=function(e,t,n,r){s.debug("[handleStateChanged] trigger: "+e+", from: "+this._previousState+", to: "+n),this._currentTransitionCBs.onStateChanged(e,this._previousState,n,r),this._notifyStateChanged(e,this._previousState,n,r)},e.prototype._handleAfterEvent=function(e,t,n,r){s.debug("[handleAfterEvent] trigger: "+e+", from: "+this._previousState+", to: "+n),this._currentTransitionCBs.onAfterEvent(e,this._previousState,n,r),this._notifyAfterEvent(e,this._previousState,n,r)},e.prototype._notifyBeforeEvent=function(e,t,n,r){this._events.beforeEvent.dispatch({name:e,from:t,to:n,args:r})},e.prototype._notifyStateEntered=function(e,t,n,r){this._events.stateEntered.dispatch({name:e,from:t,to:n,args:r})},e.prototype._notifyStateChanged=function(e,t,n,r){this._events.stateChanged.dispatch({name:e,from:t,to:n,args:r})},e.prototype._notifyAfterEvent=function(e,t,n,r){this._events.afterEvent.dispatch({name:e,from:t,to:n,args:r})},e.prototype._notifyError=function(e,t,n,r,i,o){this._events.error.dispatch({name:e,from:t,to:n,args:r,errorType:i,errorDesc:o})},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.init=function(e){return this._doInit(e),this},e.prototype.currentState=function(){return this._currentState},e.prototype.previousState=function(){return this._previousState},e.prototype.fireTransition=function(e,t){return this._doFire(e,t)},e.prototype.attemptTransition=function(e,t){return this.cannotFireTransition(e)?(s.warn("[_attemptTransition] Unable to fire "+e+" from current state: "+this.currentState()),null):this.fireTransition(e,t)},e.prototype.canFireTransition=function(e){return this._doCanFire(e)},e.prototype.cannotFireTransition=function(e){return this._doCannotFire(e)},e.prototype.completeTransition=function(){return this._currentTransition?this._currentTransition.execute():a.FsmTransitionResult.No_Transition},e.prototype.cancelTransition=function(){return this._currentTransition?this._currentTransition.cancel():a.FsmTransitionResult.No_Transition},e.prototype.isTransitioning=function(){return null!==this._currentTransition},e}();t.Fsm=u},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(151)),r(n(153)),r(n(78)),r(n(154))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(102),i=n(11),o=n(78),a=function(){function e(e){var t,n,r;this._options={executionTimeout:(r=null===(n=e)||void 0===n?void 0:n.executionTimeout,null!=r?r:1e4)},this._baseHandler=function(e){return Promise.resolve(e)},this._handlers=((t={})[o.HookHandlerType.Peripheral]=[],t[o.HookHandlerType.Default]=[],t),this._activeTask=null}return e.prototype._cleanupActiveTask=function(){this._activeTask&&(this._activeTask.cancel(),this._activeTask=null)},e.prototype._handlersToPipeables=function(e){return this._handlers[e].map((function(e){return function(t){return r.TaskFactory.create((function(n){e(t).then((function(e){return n.resolve(e)})).catch((function(e){return n.reject(e)}))}))}}))},Object.defineProperty(e.prototype,"hasRegisteredHandlers",{get:function(){return this._handlers.default.length>0||this._handlers.peripheral.length>0},enumerable:!0,configurable:!0}),e.prototype.hasRegisteredHandlersByType=function(e){return this._handlers[e].length>0},e.prototype.add=function(e,t){return void 0===t&&(t=o.HookHandlerType.Default),this._handlers[t].push(e),this},e.prototype.remove=function(e,t){return void 0===t&&(t=o.HookHandlerType.Default),i.ArrayUtils.remove(this._handlers[t],e),this},e.prototype.execute=function(e){var t=this;this._cleanupActiveTask();var n=r.TaskFactory.create((function(n){t._baseHandler(e).then((function(e){return n.resolve(e)})).catch((function(e){return n.reject(e)}))}));return this._activeTask=r.TaskFactory.create((function(e){var a,s,u=(a=t._options.executionTimeout,s=null,r.TaskFactory.create((function(e){(s=i.Timer(i.TimerMode.Timeout,(function(){e.reject("Hook execution timeout of "+a+"ms reached")}),a)).start()})).onCanceled((function(){s&&(s.stop(),s=null)}))).execute().onRejected((function(t){return e.reject(t)})),c=[{type:o.HookHandlerType.Peripheral,handlers:t._handlersToPipeables(o.HookHandlerType.Peripheral)},{type:o.HookHandlerType.Default,handlers:t._handlersToPipeables(o.HookHandlerType.Default)}],l=n;c.forEach((function(e){e.handlers.forEach((function(e){return l=l.pipe(e)}))})),l.execute().fold((function(t){u.cancel(),e.reject(t)}),(function(t){u.cancel(),e.resolve(t)}))})),this._activeTask.execute()},e.prototype.cancel=function(){return this._cleanupActiveTask(),this},e.prototype.clear=function(e){return void 0===e&&(e=o.HookHandlerType.Default),this._handlers[e].length=0,this},e.prototype.clearAll=function(){var e=this;return Object.keys(this._handlers).forEach((function(t){var n=t;e.clear(n)})),this},e}();t.CoreHook=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(106);t.NetworkTask=function(e,t){return r.TaskFactory.create((function(n){fetch(e,t).then((function(e){if(e.ok)return e;throw e})).then((function(e){var n;return(null===(n=t)||void 0===n?void 0:n.passthrough)?e:e.json()})).then(n.resolve,n.reject)}))},t.isResponse=function(e){return void 0!==e.status}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69),i=n(78),o=function(){function e(e,t){this._hookName=e,this._logger=t,this._handlers=new Map}return e.createFor=function(t){return new e(t,r.Log.getLogger("Hook:"+t))},Object.defineProperty(e.prototype,"handlers",{get:function(){var e={};return this._handlers.forEach((function(t,n){return e[n]=t})),e},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){void 0===t&&(t=i.HookHandlerType.Default);var n=this._handlers.get(t)||[];switch(t){case i.HookHandlerType.Peripheral:this._logger.info("Setting peripheral handler"),n.length>0&&(this._logger.warn("Only one peripheral handler may be set per-hook"),r.ArrayUtils.remove(n,n[0]));break;default:this._logger.info("Adding default hook handler")}n.push(e),this._handlers.set(t,n)},e.prototype.clear=function(e){if("function"==typeof e){var t=e;return this._logger.info("Removing given handler from hook"),void this._handlers.forEach((function(e){return r.ArrayUtils.remove(e,t)}))}var n=e||i.HookHandlerType.Default;this._logger.info("Removing "+n+" handlers for hook"),this._handlers.delete(n)},e.prototype.clearAll=function(){this._handlers.clear()},e}();t.BaseHook=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(155)),r(n(107)),r(n(108))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(107),i=function(){function e(){}return e.createFor=function(e,t,n){return void 0===t&&(t="hook:event"),r.BridgeHookEventProxyHandler(e,t,n)},e}();t.BridgeHookEventHandler=i},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=n(52),u=n(157),c=n(74),l=n(158),d=n(53),f=i(n(2)),p=function(e){try{return JSON.stringify(e)}catch(e){return""}};!function(e){e[e.SLEEPING=0]="SLEEPING",e[e.INITING=1]="INITING",e[e.WORKING=2]="WORKING",e[e.DEAD=3]="DEAD"}(o||(o={})),function(e){e[e.EMPTY_EVENT_QUEUE=0]="EMPTY_EVENT_QUEUE",e[e.NO_CLIENTS=1]="NO_CLIENTS",e[e.SERVICE_FAILURE=2]="SERVICE_FAILURE",e[e.DISPOSE=3]="DISPOSE"}(a||(a={}));var h={serviceUrl:"https://spotlight.ngtv.io",lazyInit:!0,helloRetries:3,batchRetries:5},g=function(){function e(e){this._clients=[],this._inited=!1,this._initTime=0,this._events=[],this._helloAttempts=0,this._batchAttempts=0,this._lastBatchAttemptTime=0,this._serviceConfig=new l.SpotlightServiceConfigManager,this._state=o.SLEEPING,this._config=e;var t=this._config.serviceUrl,n=void 0===t?"https://spotlight.ngtv.io":t;this._helloUrl=n+"/hello",this._batchUrl=n+"/batch"}return e.getBroker=function(t){var n=t.appId,r=t.serviceUrl,i=n+"::"+(void 0===r?"https://spotlight.ngtv.io":r);return e.brokers[i]||(e.brokers[i]=new e(t))},e.createClient=function(t){var n=Object.assign({},h,t);return e.getBroker(n).createClient(n)},e.disposeAll=function(){Object.values(e.brokers).forEach((function(e){return e.dispose()}))},e.prototype.createClient=function(e){var t=new u.SpotlightClient(this,e);return this._clients.push(t),t},e.prototype.init=function(){this._inited||this._isDead()||(d.SpotlightLogger.debug("Broker:init - manually and explicitly init()ed"),this._hello())},e.prototype._isServiceConfigStale=function(){return(Date.now()-this._initTime)/1e3>5*this._serviceConfig.helloPingInterval},e.prototype.queue=function(e){if(!this._isDead()){d.SpotlightLogger.debug("Broker:queue - "+p(e)),this._isSleeping()&&(this._inited?this._isServiceConfigStale()&&(d.SpotlightLogger.debug("Broker:queue - service config has grown stale, re-hello-ing"),this._hello()):this._config.lazyInit?(d.SpotlightLogger.debug("Broker:queue - lazy-initing now that a message is queued"),this._hello()):d.SpotlightLogger.info("Broker:queue - lazy-init disabled; init() must be manually called"));var t=Object.assign({timestamp:Date.now()},e);this._inited&&0===this._events.length&&(d.SpotlightLogger.debug("Broker:queue - re-starting batch timer"),this._restartBatchTimer()),this._events.push(t);var n=this._events.length,r=this._serviceConfig.maxBatchSize;n>=r&&(d.SpotlightLogger.debug("Broker:queue - event queue ("+n+") meets or exceeds maxBatchSize ("+r+"), batching..."),this._batch())}},e.prototype._hello=function(){var e=this;if(!this._isDead())if(this._isIniting())d.SpotlightLogger.debug("Broker:hello - disallowing concurrent hello calls");else{if(this._config.helloRetries&&this._helloAttempts>this._config.helloRetries)return d.SpotlightLogger.info("Broker:hello - too many retries ... dead"),void this._stop(a.SERVICE_FAILURE);this._state=o.INITING,d.SpotlightLogger.debug("Broker:hello request"),this._helloAttempts+=1;var t=this._serviceConfig.sessionId,n=t?this._helloUrl+"/"+t:this._helloUrl;fetch(n,{method:"GET",mode:"cors",headers:{"app-id":this._config.appId,"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(t){if(!f.default(t))throw new Error("Spotlight /hello service returned invalid data");if(e._serviceConfig.update(t),!e._serviceConfig.sessionId)throw new Error("Spotlight client requires sessionId from server");d.SpotlightLogger.debug("Broker:hello response - "+p(e._serviceConfig)),e._state=o.WORKING,e._inited=!0,e._initTime=Date.now(),e._helloAttempts=0,e._batch()}),(function(t){d.SpotlightLogger.info("Broker:hello service error - "+(t.status?t.status+": "+t.statusText:t)),e._state=o.SLEEPING})).catch((function(t){d.SpotlightLogger.info("Broker:hello client error - "+t),e._state=o.SLEEPING}))}},e.prototype._batch=function(){var e=this;if(!this._isDead()){if(this._lastBatchAttemptTime){var t=Math.floor((Date.now()-this._lastBatchAttemptTime)/1e3),n=this._serviceConfig.flushInterval;if(t<n)return void d.SpotlightLogger.debug("Broker:batch - because last batch attempt failed, waiting until flushInterval ("+n+"s) has passed - "+(n-t)+"s remaining")}if(0===this._events.length)return d.SpotlightLogger.debug("Broker:batch - nothing to batch; sleeping"),void this._stop(a.EMPTY_EVENT_QUEUE);if(this._inited){if(this._config.batchRetries&&this._batchAttempts>this._config.batchRetries)return d.SpotlightLogger.info("Broker:batch - too many retries ... dead"),void this._stop(a.SERVICE_FAILURE);var i=this._filterEvents(this._events.splice(0,this._serviceConfig.maxBatchSize));0!==i.length?(this._inited&&this._isSleeping()&&(d.SpotlightLogger.debug("Broker:batch - restarting hello"),this._restartHelloTimer()),this._batchAttempts+=1,this._lastBatchAttemptTime=Date.now(),this._postEvents(i).then((function(){d.SpotlightLogger.debug("Broker:batch response - success!"),e._batchAttempts=0,e._lastBatchAttemptTime=0}),(function(t){var n;d.SpotlightLogger.info("Broker:batch service error - "+(t.status?t.status+": "+t.statusText:t)),t.status>=500&&(n=e._events).splice.apply(n,r([0,0],i)),e._queueServiceError(t.clone())})).catch((function(e){d.SpotlightLogger.info("Broker:batch client error - "+e)})).finally((function(){e._restartBatchTimer()}))):d.SpotlightLogger.debug("Broker:batch filtered out all events, nothing to POST")}else d.SpotlightLogger.debug("Broker:batch - waiting for hello")}},e.prototype._queueServiceError=function(e){var t,n,r={},i={timestamp:Date.now(),type:"spotlight",category:s.SpotlightEventCategory.ERROR,level:s.SpotlightEventLevel.CRITICAL,source:"spotlight",data:r};if(e instanceof Response){var o=[];null===(n=(t=e.headers).forEach)||void 0===n||n.call(t,(function(e,t){return o.push([t,e])}));var a={res_headers:o.map((function(e){return e[0]+"="+e[1]})).join(","),res_ok:e.ok,res_redirected:e.redirected,res_status:e.status,res_statusText:e.statusText,res_type:e.type,res_url:e.url};Object.assign(r,a)}else r.error_message=String(e);this._events.splice(0,0,i)},e.prototype._filterEvents=function(e){return e.filter(this._serviceConfig.filterEvent)},e.prototype._postEvents=function(e){d.SpotlightLogger.debug("Broker:_postEvents - "+p(e));var t={sessionId:this._serviceConfig.sessionId,events:e};return fetch(this._batchUrl,{method:"POST",mode:"cors",headers:{"app-id":this._config.appId,"Content-Type":"application/json",Accept:"application/json"},body:p(t)}).then((function(e){return e.ok?e:Promise.reject(e)}))},e.prototype.detachClient=function(e){var t=this._clients.findIndex((function(t){return t===e}));-1!==t&&this._clients.splice(t,1),0===this._clients.length&&(this._stop(a.NO_CLIENTS),this._flush())},e.prototype._stop=function(e){var t,n;d.SpotlightLogger.debug("Broker:_stop - reason: "+a[e]),null===(t=this._helloTimer)||void 0===t||t.stop(),e!==a.NO_CLIENTS&&(null===(n=this._batchTimer)||void 0===n||n.stop()),this._state=e===a.SERVICE_FAILURE||e===a.DISPOSE?o.DEAD:o.SLEEPING},e.prototype.dispose=function(){this._stop(a.DISPOSE),this._clients.forEach((function(e){return e.dispose()}))},e.prototype._flush=function(){if(this._inited&&this._events.length>0){var e=this._filterEvents(this._events.splice(0,this._serviceConfig.maxBatchSize));e.length>0&&(d.SpotlightLogger.debug("Broker:_flush - "+p(e)),this._postEvents(e))}},e.prototype._restartHelloTimer=function(){var e;if(!this._isDead()){var t=this._serviceConfig.helloPingInterval;d.SpotlightLogger.debug("Broker:_restartHelloTimer - interval hello ping: "+t+" seconds"),null===(e=this._helloTimer)||void 0===e||e.stop();var n=this._hello.bind(this);this._helloTimer=c.Timer(c.TimerMode.Timeout,n,1e3*t),this._helloTimer.start()}},e.prototype._restartBatchTimer=function(){var e;if(!this._isDead()){var t=this._serviceConfig.flushInterval;d.SpotlightLogger.debug("Broker:_restartBatchTimer - interval batching: "+t+" seconds"),null===(e=this._batchTimer)||void 0===e||e.stop();var n=this._batch.bind(this);this._batchTimer=c.Timer(c.TimerMode.Timeout,n,1e3*t),this._batchTimer.start()}},e.prototype._isSleeping=function(){return this._state===o.SLEEPING},e.prototype._isIniting=function(){return this._state===o.INITING},e.prototype._isDead=function(){return this._state===o.DEAD},e.brokers={},e}();t.SpotlightBroker=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=function(){function e(e,t){this._broker=e,this._config=t,this._source=this._config.source,this._source||r.SpotlightLogger.warn('Spotlight requires a "source"')}return e.prototype.init=function(){var e;null===(e=this._broker)||void 0===e||e.init()},e.prototype.send=function(e){var t,n=Object.assign({},e,{source:this._source});null===(t=this._broker)||void 0===t||t.queue(n)},e.prototype.dispose=function(){var e;null===(e=this._broker)||void 0===e||e.detachClient(this),this._broker=void 0},e}();t.SpotlightClient=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(52),o=r(n(169)),a=r(n(0)),s=r(n(159)),u=r(n(51)),c=n(53),l={eventTypesAllowed:"*",categoryAllowed:[i.SpotlightEventCategory.ERROR],throttleLevel:[i.SpotlightEventLevel.CRITICAL],maxBatchSize:200,flushInterval:10,helloPingInterval:600},d=function(){function e(){var e=this;this._serviceConfig=Object.assign({},l),this.filterEvent=function(t){if(!t.level)return c.SpotlightLogger.verbose('ServiceConfig - event has no "level"'),!1;if(!t.category)return c.SpotlightLogger.verbose('ServiceConfig - event has no "category"'),!1;if(!t.type)return c.SpotlightLogger.verbose('ServiceConfig - event has no "type"'),!1;if(u.default(e.throttleLevel)){if("*"!==e.throttleLevel&&e.throttleLevel!==t.level)return c.SpotlightLogger.verbose('ServiceConfig - config "throttleLevel" string value "'+e.throttleLevel+'" does not allow event level "'+t.level+'"'),!1}else{if(!a.default(e.throttleLevel))return c.SpotlightLogger.verbose('ServiceConfig - invalid "throttleLevel" value'),!1;if(0===e.throttleLevel.length)return c.SpotlightLogger.verbose('ServiceConfig - config "throttleLevel" is empty array; no events allowed'),!1;if(!e.throttleLevel.includes(t.level))return c.SpotlightLogger.verbose('ServiceConfig - config "throttleLevel" does not contain "'+t.level+'"'),!1}if(u.default(e.categoryAllowed)){if("*"!==e.categoryAllowed&&e.categoryAllowed!==t.category)return c.SpotlightLogger.verbose('ServiceConfig - config "categoryAllowed" string value "'+e.categoryAllowed+'" does not allow event category "'+t.category+'"'),!1}else{if(!a.default(e.categoryAllowed))return c.SpotlightLogger.verbose('ServiceConfig - invalid "categoryAllowed" value'),!1;if(0===e.categoryAllowed.length)return c.SpotlightLogger.verbose('ServiceConfig - config "categoryAllowed" is empty array; no events allowed'),!1;if(!e.categoryAllowed.includes(t.category))return c.SpotlightLogger.verbose('ServiceConfig - config "categoryAllowed" does not contain "'+t.category+'"'),!1}if(u.default(e.eventTypesAllowed)){if("*"!==e.eventTypesAllowed&&e.eventTypesAllowed!==t.type)return c.SpotlightLogger.verbose('ServiceConfig - config "eventTypesAllowed" string value "'+e.eventTypesAllowed+'" does not allow event type "'+t.type+'"'),!1}else{if(!a.default(e.eventTypesAllowed))return c.SpotlightLogger.verbose('ServiceConfig - invalid "eventTypesAllowed" value'),!1;if(0===e.eventTypesAllowed.length)return c.SpotlightLogger.verbose('ServiceConfig - config "eventTypesAllowed" is empty array; no events allowed'),!1;if(!e.eventTypesAllowed.includes(t.type))return c.SpotlightLogger.verbose('ServiceConfig - config "eventTypesAllowed" does not contain "'+t.type+'"'),!1}return!0}}return e.prototype.update=function(e){var t=Object.assign(this._serviceConfig,e);s.default(t.maxBatchSize)||(t.maxBatchSize=l.maxBatchSize),t.maxBatchSize=o.default(t.maxBatchSize,5),s.default(t.flushInterval)||(t.flushInterval=l.flushInterval),t.flushInterval=o.default(t.flushInterval,5,900),s.default(t.helloPingInterval)||(t.helloPingInterval=l.helloPingInterval),t.helloPingInterval=o.default(t.helloPingInterval,this.flushInterval+10,1800),u.default(t.eventTypesAllowed)||a.default(t.eventTypesAllowed)||(t.eventTypesAllowed=l.eventTypesAllowed),u.default(t.categoryAllowed)||a.default(t.categoryAllowed)||(t.categoryAllowed=l.categoryAllowed),u.default(t.throttleLevel)||a.default(t.throttleLevel)||(t.throttleLevel=l.throttleLevel),this._serviceConfig=t},Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._serviceConfig.sessionId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventTypesAllowed",{get:function(){var e;return null!=(e=this._serviceConfig.eventTypesAllowed)?e:l.eventTypesAllowed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryAllowed",{get:function(){var e;return null!=(e=this._serviceConfig.categoryAllowed)?e:l.categoryAllowed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"throttleLevel",{get:function(){var e;return null!=(e=this._serviceConfig.throttleLevel)?e:l.throttleLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxBatchSize",{get:function(){var e;return null!=(e=this._serviceConfig.maxBatchSize)?e:l.maxBatchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flushInterval",{get:function(){var e;return null!=(e=this._serviceConfig.flushInterval)?e:l.flushInterval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"helloPingInterval",{get:function(){var e;return null!=(e=this._serviceConfig.helloPingInterval)?e:l.helloPingInterval},enumerable:!0,configurable:!0}),e}();t.SpotlightServiceConfigManager=d},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(1);t.default=function(e){return"number"==typeof e||Object(i.a)(e)&&"[object Number]"==Object(r.a)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.init=function(){},e.prototype.send=function(e){},e.prototype.dispose=function(){},e}();t.NoOpSpotlightClient=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(52),a=n(33),s=n(109),u=r(n(51)),c=r(n(48));!function(e){e.ASAP="asap",e.LAZY="lazy",e.MANUAL="manual"}(i=t.SpotlightWrapperInitBehavior||(t.SpotlightWrapperInitBehavior={}));var l=i.ASAP,d=function(){function e(e){void 0===e&&(e="undefined"),this._source=e,this._events=[],this.send=this.send.bind(this)}return e.prototype.setup=function(e,t){void 0===e&&(e="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuZXR3b3JrIjoid20iLCJwcm9kdWN0IjoidG9wMi1zcG90bGlnaHQiLCJwbGF0Zm9ybSI6ImFsbCIsImFwcElkIjoid20tdG9wMi1zcG90bGlnaHQtYWxsLWxjazEwaiJ9.lUF1PCwVzp5xELQA-l_GVNtMY9N22y5kicSH4ffbljM"),void 0===t&&(t=l);var n={appId:e,source:this._source,lazyInit:t!==i.MANUAL};this._spotlightClient=s.Spotlight.getClient(n),t===i.ASAP&&this.init(),this._events.length&&this._flush()},e.prototype.init=function(){this._spotlightClient?this._spotlightClient.init():e._logger.warn("init() was called before the SpotlightWrapper was setup()")},e.prototype.send=function(e){e&&(this._spotlightClient?this._spotlightClient.send(e):this._events.push(e))},e.prototype._flush=function(){this._events.splice(0).forEach(this.send)},e.prototype.sendVersion=function(e){var t={version:String(e)},n={type:"init",level:o.SpotlightEventLevel.CRITICAL,category:o.SpotlightEventCategory.METADATA,data:t};this.send(n)},e.prototype.sendError=function(e,t,n){void 0===t&&(t="error"),void 0===n&&(n=o.SpotlightEventLevel.WARN);var r=u.default(e)?{error:e}:c.default(e)?Object.assign({},e):{},i={type:t,level:n,category:o.SpotlightEventCategory.ERROR,data:r};this.send(i)},e.prototype.dispose=function(){this._spotlightClient&&(this._spotlightClient.dispose(),this._spotlightClient=void 0)},e._logger=a.Log.getLogger("SpotlightWrapper"),e}();t.SpotlightWrapper=d},function(e,t,n){"use strict";n.r(t);var r=n(28),i=n(21),o=n(8),a=n(24),s=function(e,t){return e&&Object(o.a)(t,Object(a.a)(t),e)},u=n(25),c=function(e,t){return e&&Object(o.a)(t,Object(u.a)(t),e)},l=n(60),d=n(34),f=n(45),p=function(e,t){return Object(o.a)(e,Object(f.a)(e),t)},h=n(36),g=n(38),y=n(59),v=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Object(h.a)(t,Object(f.a)(e)),e=Object(g.a)(e);return t}:y.a,_=function(e,t){return Object(o.a)(e,v(e),t)},m=n(49),b=n(57),C=function(e){return Object(b.a)(e,u.a,v)},E=n(14),T=Object.prototype.hasOwnProperty,S=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&T.call(e,"index")&&(n.index=e.index,n.input=e.input),n},P=n(40),M=/\w*$/,O=n(6),k=O.a?O.a.prototype:void 0,A=k?k.valueOf:void 0,w=n(61),R=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Object(P.a)(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return function(e,t){var n=t?Object(P.a)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Object(w.a)(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,M.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Set]":return new r;case"[object Symbol]":return function(e){return A?Object(A.call(e)):{}}(e)}},I=n(68),j=n(0),D=n(13),L=n(1),N=n(18),F=n(16),U=F.a&&F.a.isMap,x=U?Object(N.a)(U):function(e){return Object(L.a)(e)&&"[object Map]"==Object(E.a)(e)},B=n(2),V=F.a&&F.a.isSet,q=V?Object(N.a)(V):function(e){return Object(L.a)(e)&&"[object Set]"==Object(E.a)(e)},H={};H["[object Arguments]"]=H["[object Array]"]=H["[object ArrayBuffer]"]=H["[object DataView]"]=H["[object Boolean]"]=H["[object Date]"]=H["[object Float32Array]"]=H["[object Float64Array]"]=H["[object Int8Array]"]=H["[object Int16Array]"]=H["[object Int32Array]"]=H["[object Map]"]=H["[object Number]"]=H["[object Object]"]=H["[object RegExp]"]=H["[object Set]"]=H["[object String]"]=H["[object Symbol]"]=H["[object Uint8Array]"]=H["[object Uint8ClampedArray]"]=H["[object Uint16Array]"]=H["[object Uint32Array]"]=!0,H["[object Error]"]=H["[object Function]"]=H["[object WeakMap]"]=!1,t.default=function(e){return function e(t,n,o,u,f,h){var g,y=1&n,v=2&n,b=4&n;if(o&&(g=f?o(t,u,f,h):o(t)),void 0!==g)return g;if(!Object(B.default)(t))return t;var T=Object(j.default)(t);if(T){if(g=S(t),!y)return Object(d.a)(t,g)}else{var P=Object(E.a)(t),M="[object Function]"==P||"[object GeneratorFunction]"==P;if(Object(D.a)(t))return Object(l.a)(t,y);if("[object Object]"==P||"[object Arguments]"==P||M&&!f){if(g=v||M?{}:Object(I.a)(t),!y)return v?_(t,c(g,t)):p(t,s(g,t))}else{if(!H[P])return f?t:{};g=R(t,P,y)}}h||(h=new r.a);var O=h.get(t);if(O)return O;if(h.set(t,g),q(t))return t.forEach((function(r){g.add(e(r,n,o,r,t,h))})),g;if(x(t))return t.forEach((function(r,i){g.set(i,e(r,n,o,i,t,h))})),g;var k=b?v?C:m.a:v?keysIn:a.a,A=T?void 0:k(t);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(A||t,(function(r,a){A&&(r=t[a=r]),Object(i.a)(g,a,e(r,n,o,a,t,h))})),g}(e,5)}},function(e,t,n){"use strict";n.r(t);var r=n(28),i=n(65),o=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},a=n(56),s=function(e,t,n,r,s,u){var c=1&n,l=e.length,d=t.length;if(l!=d&&!(c&&d>l))return!1;var f=u.get(e);if(f&&u.get(t))return f==t;var p=-1,h=!0,g=2&n?new i.a:void 0;for(u.set(e,t),u.set(t,e);++p<l;){var y=e[p],v=t[p];if(r)var _=c?r(v,y,p,t,e,u):r(y,v,p,e,t,u);if(void 0!==_){if(_)continue;h=!1;break}if(g){if(!o(t,(function(e,t){if(!Object(a.a)(g,t)&&(y===e||s(y,e,n,r,u)))return g.push(t)}))){h=!1;break}}else if(y!==v&&!s(y,v,n,r,u)){h=!1;break}}return u.delete(e),u.delete(t),h},u=n(6),c=n(47),l=n(9),d=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},f=n(35),p=u.a?u.a.prototype:void 0,h=p?p.valueOf:void 0,g=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new c.a(e),new c.a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(l.a)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var u=d;case"[object Set]":var p=1&r;if(u||(u=f.a),e.size!=t.size&&!p)return!1;var g=a.get(e);if(g)return g==t;r|=2,a.set(e,t);var y=s(u(e),u(t),r,i,o,a);return a.delete(e),y;case"[object Symbol]":if(h)return h.call(e)==h.call(t)}return!1},y=n(49),v=Object.prototype.hasOwnProperty,_=function(e,t,n,r,i,o){var a=1&n,s=Object(y.a)(e),u=s.length;if(u!=Object(y.a)(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:v.call(t,l)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<u;){var h=e[l=s[c]],g=t[l];if(r)var _=a?r(g,h,l,t,e,o):r(h,g,l,e,t,o);if(!(void 0===_?h===g||i(h,g,n,r,o):_)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var m=e.constructor,b=t.constructor;m==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f},m=n(14),b=n(0),C=n(13),E=n(44),T="[object Object]",S=Object.prototype.hasOwnProperty,P=function(e,t,n,i,o,a){var u=Object(b.default)(e),c=Object(b.default)(t),l=u?"[object Array]":Object(m.a)(e),d=c?"[object Array]":Object(m.a)(t),f=(l="[object Arguments]"==l?T:l)==T,p=(d="[object Arguments]"==d?T:d)==T,h=l==d;if(h&&Object(C.a)(e)){if(!Object(C.a)(t))return!1;u=!0,f=!1}if(h&&!f)return a||(a=new r.a),u||Object(E.a)(e)?s(e,t,n,i,o,a):g(e,t,l,n,i,o,a);if(!(1&n)){var y=f&&S.call(e,"__wrapped__"),v=p&&S.call(t,"__wrapped__");if(y||v){var P=y?e.value():e,M=v?t.value():t;return a||(a=new r.a),o(P,M,n,i,a)}}return!!h&&(a||(a=new r.a),_(e,t,n,i,o,a))},M=n(1);t.default=function(e,t){return function e(t,n,r,i,o){return t===n||(null==t||null==n||!Object(M.a)(t)&&!Object(M.a)(n)?t!=t&&n!=n:P(t,n,r,i,e,o))}(e,t)}},function(e,t,n){"use strict";n.r(t);var r=n(65),i=n(64),o=function(e,t){return!(null==e||!e.length)&&Object(i.a)(e,t,0)>-1},a=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},s=n(56),u=n(29),c=n(35),l=u.a&&1/Object(c.a)(new u.a([,-0]))[1]==1/0?function(e){return new u.a(e)}:function(){};t.default=function(e){return e&&e.length?function(e,t,n){var i=-1,u=o,d=e.length,f=!0,p=[],h=p;if(n)f=!1,u=a;else if(d>=200){var g=t?null:l(e);if(g)return Object(c.a)(g);f=!1,u=s.a,h=new r.a}else h=t?[]:p;e:for(;++i<d;){var y=e[i],v=t?t(y):y;if(y=n||0!==y?y:0,f&&v==v){for(var _=h.length;_--;)if(h[_]===v)continue e;t&&h.push(v),p.push(y)}else u(h,v,n)||(h!==p&&h.push(v),p.push(y))}return p}(e):[]}},function(e,t,n){"use strict";n.r(t);var r=n(4),i=n(27),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=function(e,t){return e<t?-1:e>t?1:0},s=(o({},i.c,{compare:a}),o({},i.b,{compare:a})),u=(o({},i.a,{compare:a}),function(e){var t=function(t,n){return t===n?0:e(t,n)};return{equals:function(e,n){return 0===t(e,n)},compare:t}});function c(e,t){return u(Object(r.c)(t.compare)(e))}!function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];1===e.length||c(e[0],e[1])}((function(e){return e.valueOf()}),s);var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};l({},{concat:function(e,t){return e&&t}},{empty:!0}),l({},{concat:function(e,t){return e||t}},{empty:!1}),r.a,l({},{concat:function(e,t){return e+t}},{empty:0}),l({},{concat:function(e,t){return e*t}},{empty:1}),l({},{concat:function(e,t){return e+t}},{empty:""}),l({},{concat:function(){}},{empty:void 0});var d=n(31);n.d(t,"URI",(function(){return p})),n.d(t,"None",(function(){return h})),n.d(t,"none",(function(){return g})),n.d(t,"Some",(function(){return y})),n.d(t,"getShow",(function(){return v})),n.d(t,"getSetoid",(function(){return _})),n.d(t,"getEq",(function(){return m})),n.d(t,"getOrd",(function(){return b})),n.d(t,"some",(function(){return C})),n.d(t,"getApplySemigroup",(function(){return E})),n.d(t,"getApplyMonoid",(function(){return T})),n.d(t,"getFirstMonoid",(function(){return S})),n.d(t,"getLastMonoid",(function(){return P})),n.d(t,"getMonoid",(function(){return M})),n.d(t,"fromNullable",(function(){return O})),n.d(t,"fromPredicate",(function(){return k})),n.d(t,"tryCatch",(function(){return A})),n.d(t,"fromEither",(function(){return w})),n.d(t,"isSome",(function(){return R})),n.d(t,"isNone",(function(){return I})),n.d(t,"fromRefinement",(function(){return j})),n.d(t,"getRefinement",(function(){return D})),n.d(t,"option",(function(){return N})),n.d(t,"getLeft",(function(){return F})),n.d(t,"getRight",(function(){return U})),n.d(t,"fold",(function(){return x})),n.d(t,"toNullable",(function(){return B})),n.d(t,"toUndefined",(function(){return V})),n.d(t,"getOrElse",(function(){return q})),n.d(t,"elem",(function(){return H})),n.d(t,"exists",(function(){return K})),n.d(t,"mapNullable",(function(){return W})),n.d(t,"alt",(function(){return G})),n.d(t,"ap",(function(){return Y})),n.d(t,"apFirst",(function(){return J})),n.d(t,"apSecond",(function(){return Q})),n.d(t,"chain",(function(){return X})),n.d(t,"chainFirst",(function(){return $})),n.d(t,"duplicate",(function(){return Z})),n.d(t,"extend",(function(){return ee})),n.d(t,"filter",(function(){return te})),n.d(t,"filterMap",(function(){return ne})),n.d(t,"flatten",(function(){return re})),n.d(t,"foldMap",(function(){return ie})),n.d(t,"map",(function(){return oe})),n.d(t,"partition",(function(){return ae})),n.d(t,"partitionMap",(function(){return se})),n.d(t,"reduce",(function(){return ue})),n.d(t,"reduceRight",(function(){return ce})),n.d(t,"compact",(function(){return le})),n.d(t,"separate",(function(){return de}));var f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p="Option",h=function(){function e(){this._tag="None"}return e.prototype.map=function(e){return g},e.prototype.mapNullable=function(e){return g},e.prototype.ap=function(e){return g},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return g},e.prototype.reduce=function(e,t){return e},e.prototype.alt=function(e){return e},e.prototype.orElse=function(e){return e()},e.prototype.extend=function(e){return g},e.prototype.fold=function(e,t){return e},e.prototype.foldL=function(e,t){return e()},e.prototype.getOrElse=function(e){return e},e.prototype.getOrElseL=function(e){return e()},e.prototype.toNullable=function(){return null},e.prototype.toUndefined=function(){},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"none"},e.prototype.contains=function(e,t){return!1},e.prototype.isNone=function(){return!0},e.prototype.isSome=function(){return!1},e.prototype.exists=function(e){return!1},e.prototype.filter=function(e){return g},e.prototype.refine=function(e){return g},e.value=new e,e}(),g=h.value,y=function(){function e(e){this.value=e,this._tag="Some"}return e.prototype.map=function(t){return new e(t(this.value))},e.prototype.mapNullable=function(e){return O(e(this.value))},e.prototype.ap=function(t){return t.isNone()?g:new e(t.value(this.value))},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return e(this.value)},e.prototype.reduce=function(e,t){return t(e,this.value)},e.prototype.alt=function(e){return this},e.prototype.orElse=function(e){return this},e.prototype.extend=function(t){return new e(t(this))},e.prototype.fold=function(e,t){return t(this.value)},e.prototype.foldL=function(e,t){return t(this.value)},e.prototype.getOrElse=function(e){return this.value},e.prototype.getOrElseL=function(e){return this.value},e.prototype.toNullable=function(){return this.value},e.prototype.toUndefined=function(){return this.value},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"some("+Object(r.d)(this.value)+")"},e.prototype.contains=function(e,t){return e.equals(this.value,t)},e.prototype.isNone=function(){return!1},e.prototype.isSome=function(){return!0},e.prototype.exists=function(e){return e(this.value)},e.prototype.filter=function(e){return this.exists(e)?this:g},e.prototype.refine=function(e){return this.filter(e)},e}(),v=function(e){return{show:function(t){return t.fold("none",(function(t){return"some("+e.show(t)+")"}))}}},_=m;function m(e){return Object(i.d)((function(t,n){return t.isNone()?n.isNone():!n.isNone()&&e.equals(t.value,n.value)}))}var b=function(e){return u((function(t,n){return t.isSome()?n.isSome()?e.compare(t.value,n.value):1:-1}))},C=function(e){return new y(e)},E=function(e){return{concat:function(t,n){return t.isSome()&&n.isSome()?C(e.concat(t.value,n.value)):g}}},T=function(e){return f({},E(e),{empty:C(e.empty)})},S=function(){return{concat:N.alt,empty:g}},P=function(){return e=S(),l({},(t=e,{concat:function(e,n){return t.concat(n,e)}}),{empty:e.empty});var e,t},M=function(e){return{concat:function(t,n){return t.isNone()?n:n.isNone()?t:C(e.concat(t.value,n.value))},empty:g}},O=function(e){return null==e?g:new y(e)};function k(e){return function(t){return e(t)?C(t):g}}var A=function(e){try{return C(e())}catch(e){return g}},w=function(e){return e.isLeft()?g:C(e.value)},R=function(e){return e.isSome()},I=function(e){return e.isNone()},j=function(e){return function(t){return e(t)?C(t):g}},D=function(e){return function(t){return e(t).isSome()}},L={left:g,right:g},N={URI:p,map:function(e,t){return I(e)?g:C(t(e.value))},of:C,ap:function(e,t){return I(e)||I(t)?g:C(e.value(t.value))},chain:function(e,t){return I(e)?g:t(e.value)},reduce:function(e,t,n){return I(e)?t:n(t,e.value)},foldMap:function(e){return function(t,n){return I(t)?e.empty:n(t.value)}},foldr:function(e,t,n){return I(e)?t:n(e.value,t)},traverse:function(e){return function(t,n){return I(t)?e.of(g):e.map(n(t.value),C)}},sequence:function(e){return function(t){return I(t)?e.of(g):e.map(t.value,C)}},zero:function(){return g},alt:function(e,t){return I(e)?t:e},extend:function(e,t){return I(e)?g:C(t(e))},compact:function(e){return N.chain(e,r.b)},separate:function(e){var t=N.map(e,(function(e){return{left:F(e),right:U(e)}}));return I(t)?L:t.value},filter:function(e,t){return I(e)?g:t(e.value)?e:g},filterMap:function(e,t){return I(e)?g:t(e.value)},partition:function(e,t){return{left:N.filter(e,(function(e){return!t(e)})),right:N.filter(e,t)}},partitionMap:function(e,t){return N.separate(N.map(e,t))},wither:function(e){return function(t,n){return I(t)?e.of(g):n(t.value)}},wilt:function(e){return function(t,n){var r=N.map(t,(function(t){return e.map(n(t),(function(e){return{left:F(e),right:U(e)}}))}));return I(r)?e.of({left:g,right:g}):r.value}},throwError:function(){return g},fromEither:w,fromOption:r.b};function F(e){return"Right"===e._tag?g:C(e.value)}function U(e){return"Left"===e._tag?g:C(e.value)}function x(e,t){return function(n){return n.foldL(e,t)}}function B(e){return e.toNullable()}function V(e){return e.toUndefined()}function q(e){return function(t){return t.getOrElseL(e)}}function H(e){return function(t){return function(n){return n.contains(e,t)}}}function K(e){return function(t){return t.exists(e)}}function W(e){return function(t){return t.mapNullable(e)}}var z=Object(d.pipeable)(N),G=z.alt,Y=z.ap,J=z.apFirst,Q=z.apSecond,X=z.chain,$=z.chainFirst,Z=z.duplicate,ee=z.extend,te=z.filter,ne=z.filterMap,re=z.flatten,ie=z.foldMap,oe=z.map,ae=z.partition,se=z.partitionMap,ue=z.reduce,ce=z.reduceRight,le=z.compact,de=z.separate},function(e,t,n){"use strict";n.r(t);var r=n(62),i=n(55),o=n(64),a=function(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1},s=n(18),u=n(34),c=Array.prototype.splice,l=Object(r.a)((function(e,t){return e&&e.length&&t&&t.length?function(e,t,n,r){var l=r?a:o.a,d=-1,f=t.length,p=e;for(e===t&&(t=Object(u.a)(t)),n&&(p=Object(i.a)(e,Object(s.a)(n)));++d<f;)for(var h=0,g=t[d],y=n?n(g):g;(h=l(p,y,h,r))>-1;)p!==e&&c.call(p,h,1),c.call(e,h,1);return e}(e,t):e}));t.default=l},function(e,t,n){"use strict";n.r(t);var r=n(36),i=n(6),o=n(15),a=n(0),s=i.a?i.a.isConcatSpreadable:void 0,u=function(e){return Object(a.default)(e)||Object(o.a)(e)||!!(s&&e&&e[s])};t.default=function(e){return null!=e&&e.length?function e(t,n,i,o,a){var s=-1,c=t.length;for(i||(i=u),a||(a=[]);++s<c;){var l=t[s];n>0&&i(l)?n>1?e(l,n-1,i,o,a):Object(r.a)(a,l):o||(a[a.length]=l)}return a}(e,1):[]}},function(e,t,n){"use strict";n.r(t);var r=Object.prototype.hasOwnProperty,i=function(e,t){return null!=e&&r.call(e,t)},o=n(42),a=n(15),s=n(0),u=n(19),c=n(37),l=n(41);t.default=function(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=Object(o.a)(t,e)).length,d=!1;++r<i;){var f=Object(l.a)(t[r]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++r!=i?d:!!(i=null==e?0:e.length)&&Object(c.a)(i)&&Object(u.a)(f,i)&&(Object(s.default)(e)||Object(a.a)(e))}(e,t,i)}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(22),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l=function(e){if("number"==typeof e)return e;if(Object(i.a)(e))return NaN;if(Object(r.default)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(r.default)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e};t.default=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=l(n))==n?n:0),void 0!==t&&(t=(t=l(t))==t?t:0),function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}(l(e),t,n)}},function(e,t,n){"use strict";n.r(t);var r=n(42),i=n(41),o=function(e,t){for(var n=0,o=(t=Object(r.a)(t,e)).length;null!=e&&n<o;)e=e[Object(i.a)(t[n++])];return n&&n==o?e:void 0};t.default=function(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}},function(e,t,n){"use strict";n.r(t);var r=n(21),i=n(42),o=n(19),a=n(2),s=n(41);t.default=function(e,t,n){return null==e?e:function(e,t,n,u){if(!Object(a.default)(e))return e;for(var c=-1,l=(t=Object(i.a)(t,e)).length,d=l-1,f=e;null!=f&&++c<l;){var p=Object(s.a)(t[c]),h=n;if(c!=d){var g=f[p];void 0===(h=u?u(g,p,f):void 0)&&(h=Object(a.default)(g)?g:Object(o.a)(t[c+1])?[]:{})}Object(r.a)(f,p,h),f=f[p]}return e}(e,t,n)}},function(e,t,n){"use strict";n.r(t);var r=n(4),i=n(27),o=n(31);n.d(t,"URI",(function(){return s})),n.d(t,"Left",(function(){return u})),n.d(t,"Right",(function(){return c})),n.d(t,"getShow",(function(){return l})),n.d(t,"getSetoid",(function(){return d})),n.d(t,"getEq",(function(){return f})),n.d(t,"getSemigroup",(function(){return p})),n.d(t,"getApplySemigroup",(function(){return h})),n.d(t,"getApplyMonoid",(function(){return g})),n.d(t,"left",(function(){return y})),n.d(t,"right",(function(){return v})),n.d(t,"fromRefinement",(function(){return _})),n.d(t,"fromOption",(function(){return m})),n.d(t,"fromNullable",(function(){return b})),n.d(t,"toError",(function(){return C})),n.d(t,"tryCatch",(function(){return E})),n.d(t,"tryCatch2v",(function(){return T})),n.d(t,"fromValidation",(function(){return S})),n.d(t,"isLeft",(function(){return P})),n.d(t,"isRight",(function(){return M})),n.d(t,"getCompactable",(function(){return O})),n.d(t,"getFilterable",(function(){return k})),n.d(t,"getWitherable",(function(){return A})),n.d(t,"parseJSON",(function(){return w})),n.d(t,"stringifyJSON",(function(){return R})),n.d(t,"either",(function(){return D})),n.d(t,"fold",(function(){return L})),n.d(t,"orElse",(function(){return N})),n.d(t,"getOrElse",(function(){return F})),n.d(t,"elem",(function(){return U})),n.d(t,"getValidation",(function(){return x})),n.d(t,"getValidationSemigroup",(function(){return B})),n.d(t,"getValidationMonoid",(function(){return V})),n.d(t,"alt",(function(){return H})),n.d(t,"ap",(function(){return K})),n.d(t,"apFirst",(function(){return W})),n.d(t,"apSecond",(function(){return z})),n.d(t,"bimap",(function(){return G})),n.d(t,"chain",(function(){return Y})),n.d(t,"chainFirst",(function(){return J})),n.d(t,"duplicate",(function(){return Q})),n.d(t,"extend",(function(){return X})),n.d(t,"flatten",(function(){return $})),n.d(t,"foldMap",(function(){return Z})),n.d(t,"map",(function(){return ee})),n.d(t,"mapLeft",(function(){return te})),n.d(t,"reduce",(function(){return ne})),n.d(t,"reduceRight",(function(){return re})),n.d(t,"fromPredicate",(function(){return ie})),n.d(t,"filterOrElse",(function(){return oe})),n.d(t,"fromOptionL",(function(){return ae}));var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s="Either",u=function(){function e(e){this.value=e,this._tag="Left"}return e.prototype.map=function(e){return this},e.prototype.ap=function(e){return e.isLeft()?e:this},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return this},e.prototype.bimap=function(t,n){return new e(t(this.value))},e.prototype.alt=function(e){return e},e.prototype.orElse=function(e){return e(this.value)},e.prototype.extend=function(e){return this},e.prototype.reduce=function(e,t){return e},e.prototype.fold=function(e,t){return e(this.value)},e.prototype.getOrElse=function(e){return e},e.prototype.getOrElseL=function(e){return e(this.value)},e.prototype.mapLeft=function(t){return new e(t(this.value))},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"left("+Object(r.d)(this.value)+")"},e.prototype.isLeft=function(){return!0},e.prototype.isRight=function(){return!1},e.prototype.swap=function(){return new c(this.value)},e.prototype.filterOrElse=function(e,t){return this},e.prototype.filterOrElseL=function(e,t){return this},e.prototype.refineOrElse=function(e,t){return this},e.prototype.refineOrElseL=function(e,t){return this},e}(),c=function(){function e(e){this.value=e,this._tag="Right"}return e.prototype.map=function(t){return new e(t(this.value))},e.prototype.ap=function(e){return e.isRight()?this.map(e.value):y(e.value)},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return e(this.value)},e.prototype.bimap=function(t,n){return new e(n(this.value))},e.prototype.alt=function(e){return this},e.prototype.orElse=function(e){return this},e.prototype.extend=function(t){return new e(t(this))},e.prototype.reduce=function(e,t){return t(e,this.value)},e.prototype.fold=function(e,t){return t(this.value)},e.prototype.getOrElse=function(e){return this.value},e.prototype.getOrElseL=function(e){return this.value},e.prototype.mapLeft=function(t){return new e(this.value)},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"right("+Object(r.d)(this.value)+")"},e.prototype.isLeft=function(){return!1},e.prototype.isRight=function(){return!0},e.prototype.swap=function(){return new u(this.value)},e.prototype.filterOrElse=function(e,t){return e(this.value)?this:y(t)},e.prototype.filterOrElseL=function(e,t){return e(this.value)?this:y(t(this.value))},e.prototype.refineOrElse=function(e,t){return e(this.value)?this:y(t)},e.prototype.refineOrElseL=function(e,t){return e(this.value)?this:y(t(this.value))},e}(),l=function(e,t){return{show:function(n){return n.fold((function(t){return"left("+e.show(t)+")"}),(function(e){return"right("+t.show(e)+")"}))}}},d=f;function f(e,t){return Object(i.d)((function(n,r){return n.isLeft()?r.isLeft()&&e.equals(n.value,r.value):r.isRight()&&t.equals(n.value,r.value)}))}var p=function(e){return{concat:function(t,n){return n.isLeft()?t:t.isLeft()?n:v(e.concat(t.value,n.value))}}},h=function(e){return{concat:function(t,n){return t.isLeft()?t:n.isLeft()?n:v(e.concat(t.value,n.value))}}},g=function(e){return a({},h(e),{empty:v(e.empty)})},y=function(e){return new u(e)},v=function(e){return new c(e)},_=function(e,t){return function(n){return e(n)?v(n):y(t(n))}},m=function(e){return function(t){return t.isNone()?y(e):v(t.value)}},b=function(e){return function(t){return null==t?y(e):v(t)}},C=function(e){return e instanceof Error?e:new Error(String(e))},E=function(e,t){return void 0===t&&(t=C),T(e,t)},T=function(e,t){try{return v(e())}catch(e){return y(t(e))}},S=function(e){return e.isFailure()?y(e.value):v(e.value)},P=function(e){return e.isLeft()},M=function(e){return e.isRight()};function O(e){return{URI:s,_L:void 0,compact:function(t){return t.isLeft()?t:t.value.isNone()?y(e.empty):v(t.value.value)},separate:function(t){return t.isLeft()?{left:t,right:t}:t.value.isLeft()?{left:v(t.value.value),right:y(e.empty)}:{left:y(e.empty),right:v(t.value.value)}}}}function k(e){var t=O(e);return a({},t,{map:D.map,partitionMap:function(t,n){if(t.isLeft())return{left:t,right:t};var r=n(t.value);return r.isLeft()?{left:v(r.value),right:y(e.empty)}:{left:y(e.empty),right:v(r.value)}},filterMap:function(t,n){if(t.isLeft())return t;var r=n(t.value);return r.isSome()?v(r.value):y(e.empty)},partition:function(t,n){return t.isLeft()?{left:t,right:t}:n(t.value)?{left:y(e.empty),right:v(t.value)}:{left:v(t.value),right:y(e.empty)}},filter:function(t,n){return t.filterOrElse(n,e.empty)}})}function A(e){var t=k(e);return a({},t,{traverse:D.traverse,reduce:D.reduce,wither:function(e){var n=D.traverse(e);return function(r,i){return e.map(n(r,i),t.compact)}},wilt:function(e){var n=D.traverse(e);return function(r,i){return e.map(n(r,i),t.separate)}}})}var w=function(e,t){return T((function(){return JSON.parse(e)}),t)},R=function(e,t){return T((function(){return JSON.stringify(e)}),t)},I=y,j=r.b,D={URI:s,map:function(e,t){return e.map(t)},of:v,ap:function(e,t){return t.ap(e)},chain:function(e,t){return e.chain(t)},reduce:function(e,t,n){return e.reduce(t,n)},foldMap:function(e){return function(t,n){return t.isLeft()?e.empty:n(t.value)}},foldr:function(e,t,n){return e.isLeft()?t:n(e.value,t)},traverse:function(e){return function(t,n){return t.isLeft()?e.of(y(t.value)):e.map(n(t.value),v)}},sequence:function(e){return function(t){return t.isLeft()?e.of(y(t.value)):e.map(t.value,v)}},bimap:function(e,t,n){return e.bimap(t,n)},alt:function(e,t){return e.alt(t)},extend:function(e,t){return e.extend(t)},chainRec:function(e,t){return function(e,t){for(var n=e(t);n.isLeft();)n=e(n.value);return n.value}((function(e){if(e.isLeft())return v(y(e.value));var n=e.value;return n.isLeft()?y(t(n.value)):v(v(n.value))}),t(e))},throwError:I,fromEither:j,fromOption:function(e,t){return e.isNone()?I(t):v(e.value)}};function L(e,t){return function(n){return n.fold(e,t)}}function N(e){return function(t){return t.orElse(e)}}function F(e){return function(t){return t.getOrElseL(e)}}function U(e){return function(t){return function(n){return!P(n)&&e.equals(t,n.value)}}}function x(e){return{URI:s,_L:void 0,map:D.map,of:D.of,ap:function(t,n){return P(t)?P(n)?y(e.concat(t.value,n.value)):t:P(n)?n:v(t.value(n.value))},chain:D.chain,alt:function(t,n){return M(t)?t:P(n)?y(e.concat(t.value,n.value)):n}}}function B(e,t){return{concat:function(n,r){return P(n)?P(r)?y(e.concat(n.value,r.value)):n:P(r)?r:v(t.concat(n.value,r.value))}}}function V(e,t){return{concat:B(e,t).concat,empty:v(t.empty)}}var q=Object(o.pipeable)(D),H=q.alt,K=q.ap,W=q.apFirst,z=q.apSecond,G=q.bimap,Y=q.chain,J=q.chainFirst,Q=q.duplicate,X=q.extend,$=q.flatten,Z=q.foldMap,ee=q.map,te=q.mapLeft,ne=q.reduce,re=q.reduceRight,ie=q.fromPredicate,oe=q.filterOrElse,ae=q.fromOption}])},module.exports=e()},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(8),t)},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(160),a=n(76),s=n(32),u=n(33);t.URI="Option";var c=function(){function e(){this._tag="None"}return e.prototype.map=function(e){return t.none},e.prototype.mapNullable=function(e){return t.none},e.prototype.ap=function(e){return t.none},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return t.none},e.prototype.reduce=function(e,t){return e},e.prototype.alt=function(e){return e},e.prototype.orElse=function(e){return e()},e.prototype.extend=function(e){return t.none},e.prototype.fold=function(e,t){return e},e.prototype.foldL=function(e,t){return e()},e.prototype.getOrElse=function(e){return e},e.prototype.getOrElseL=function(e){return e()},e.prototype.toNullable=function(){return null},e.prototype.toUndefined=function(){},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"none"},e.prototype.contains=function(e,t){return!1},e.prototype.isNone=function(){return!0},e.prototype.isSome=function(){return!1},e.prototype.exists=function(e){return!1},e.prototype.filter=function(e){return t.none},e.prototype.refine=function(e){return t.none},e.value=new e,e}();t.None=c,t.none=c.value;var l=function(){function e(e){this.value=e,this._tag="Some"}return e.prototype.map=function(t){return new e(t(this.value))},e.prototype.mapNullable=function(e){return t.fromNullable(e(this.value))},e.prototype.ap=function(n){return n.isNone()?t.none:new e(n.value(this.value))},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return e(this.value)},e.prototype.reduce=function(e,t){return t(e,this.value)},e.prototype.alt=function(e){return this},e.prototype.orElse=function(e){return this},e.prototype.extend=function(t){return new e(t(this))},e.prototype.fold=function(e,t){return t(this.value)},e.prototype.foldL=function(e,t){return t(this.value)},e.prototype.getOrElse=function(e){return this.value},e.prototype.getOrElseL=function(e){return this.value},e.prototype.toNullable=function(){return this.value},e.prototype.toUndefined=function(){return this.value},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"some("+i.toString(this.value)+")"},e.prototype.contains=function(e,t){return e.equals(this.value,t)},e.prototype.isNone=function(){return!1},e.prototype.isSome=function(){return!0},e.prototype.exists=function(e){return e(this.value)},e.prototype.filter=function(e){return this.exists(e)?this:t.none},e.prototype.refine=function(e){return this.filter(e)},e}();function d(e){return s.fromEquals((function(t,n){return t.isNone()?n.isNone():!n.isNone()&&e.equals(t.value,n.value)}))}t.Some=l,t.getShow=function(e){return{show:function(t){return t.fold("none",(function(t){return"some("+e.show(t)+")"}))}}},t.getSetoid=d,t.getEq=d,t.getOrd=function(e){return a.fromCompare((function(t,n){return t.isSome()?n.isSome()?e.compare(t.value,n.value):1:-1}))},t.some=function(e){return new l(e)},t.getApplySemigroup=function(e){return{concat:function(n,r){return n.isSome()&&r.isSome()?t.some(e.concat(n.value,r.value)):t.none}}},t.getApplyMonoid=function(e){return r({},t.getApplySemigroup(e),{empty:t.some(e.empty)})},t.getFirstMonoid=function(){return{concat:t.option.alt,empty:t.none}},t.getLastMonoid=function(){return o.getDualMonoid(t.getFirstMonoid())},t.getMonoid=function(e){return{concat:function(n,r){return n.isNone()?r:r.isNone()?n:t.some(e.concat(n.value,r.value))},empty:t.none}},t.fromNullable=function(e){return null==e?t.none:new l(e)},t.fromPredicate=function(e){return function(n){return e(n)?t.some(n):t.none}},t.tryCatch=function(e){try{return t.some(e())}catch(e){return t.none}},t.fromEither=function(e){return e.isLeft()?t.none:t.some(e.value)},t.isSome=function(e){return e.isSome()},t.isNone=function(e){return e.isNone()},t.fromRefinement=function(e){return function(n){return e(n)?t.some(n):t.none}},t.getRefinement=function(e){return function(t){return e(t).isSome()}};var f={left:t.none,right:t.none};function p(e){return"Right"===e._tag?t.none:t.some(e.value)}function h(e){return"Left"===e._tag?t.none:t.some(e.value)}t.option={URI:t.URI,map:function(e,n){return t.isNone(e)?t.none:t.some(n(e.value))},of:t.some,ap:function(e,n){return t.isNone(e)||t.isNone(n)?t.none:t.some(e.value(n.value))},chain:function(e,n){return t.isNone(e)?t.none:n(e.value)},reduce:function(e,n,r){return t.isNone(e)?n:r(n,e.value)},foldMap:function(e){return function(n,r){return t.isNone(n)?e.empty:r(n.value)}},foldr:function(e,n,r){return t.isNone(e)?n:r(e.value,n)},traverse:function(e){return function(n,r){return t.isNone(n)?e.of(t.none):e.map(r(n.value),t.some)}},sequence:function(e){return function(n){return t.isNone(n)?e.of(t.none):e.map(n.value,t.some)}},zero:function(){return t.none},alt:function(e,n){return t.isNone(e)?n:e},extend:function(e,n){return t.isNone(e)?t.none:t.some(n(e))},compact:function(e){return t.option.chain(e,i.identity)},separate:function(e){var n=t.option.map(e,(function(e){return{left:p(e),right:h(e)}}));return t.isNone(n)?f:n.value},filter:function(e,n){return t.isNone(e)?t.none:n(e.value)?e:t.none},filterMap:function(e,n){return t.isNone(e)?t.none:n(e.value)},partition:function(e,n){return{left:t.option.filter(e,(function(e){return!n(e)})),right:t.option.filter(e,n)}},partitionMap:function(e,n){return t.option.separate(t.option.map(e,n))},wither:function(e){return function(n,r){return t.isNone(n)?e.of(t.none):r(n.value)}},wilt:function(e){return function(n,r){var i=t.option.map(n,(function(t){return e.map(r(t),(function(e){return{left:p(e),right:h(e)}}))}));return t.isNone(i)?e.of({left:t.none,right:t.none}):i.value}},throwError:function(){return t.none},fromEither:t.fromEither,fromOption:i.identity},t.getLeft=p,t.getRight=h,t.fold=function(e,t){return function(n){return n.foldL(e,t)}},t.toNullable=function(e){return e.toNullable()},t.toUndefined=function(e){return e.toUndefined()},t.getOrElse=function(e){return function(t){return t.getOrElseL(e)}},t.elem=function(e){return function(t){return function(n){return n.contains(e,t)}}},t.exists=function(e){return function(t){return t.exists(e)}},t.mapNullable=function(e){return function(t){return t.mapNullable(e)}};var g=u.pipeable(t.option),y=g.alt,v=g.ap,_=g.apFirst,m=g.apSecond,b=g.chain,C=g.chainFirst,E=g.duplicate,T=g.extend,S=g.filter,P=g.filterMap,M=g.flatten,O=g.foldMap,k=g.map,A=g.partition,w=g.partitionMap,R=g.reduce,I=g.reduceRight,j=g.compact,D=g.separate;t.alt=y,t.ap=v,t.apFirst=_,t.apSecond=m,t.chain=b,t.chainFirst=C,t.duplicate=E,t.extend=T,t.filter=S,t.filterMap=P,t.flatten=M,t.foldMap=O,t.map=k,t.partition=A,t.partitionMap=w,t.reduce=R,t.reduceRight=I,t.compact=j,t.separate=D},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(163),t),i(n(164),t),i(n(77),t),i(n(78),t)},function(e,t,n){"use strict";function r(e,n,i){return function(o){var a=t.concat(i,[o]);return 0===n?e.apply(this,a):r(e,n-1,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.identity=function(e){return e},t.unsafeCoerce=t.identity,t.not=function(e){return function(t){return!e(t)}},t.or=function(e,t){return function(n){return e(n)||t(n)}},t.and=function(e,t){return function(n){return e(n)&&t(n)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t){return function(n){return e(n)(t)}}},t.on=function(e){return function(t){return function(n,r){return e(t(n),t(r))}}},t.compose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length-1;return function(t){for(var r=t,i=n;i>-1;i--)r=e[i].call(this,r);return r}},t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length-1;return function(t){for(var r=t,i=0;i<=n;i++)r=e[i].call(this,r);return r}},t.concat=function(e,t){var n=e.length;if(0===n)return t;var r=t.length;if(0===r)return e;for(var i=Array(n+r),o=0;o<n;o++)i[o]=e[o];for(o=0;o<r;o++)i[o+n]=t[o];return i},t.curried=r,t.curry=function(e){return r(e,e.length-1,[])};t.toString=function(e){if("string"==typeof e)return JSON.stringify(e);if(e instanceof Date)return"new Date('"+e.toISOString()+"')";if(Array.isArray(e))return"["+e.map(t.toString).join(", ")+"]";if("function"==typeof e)return(n=e).displayName||n.name||"<function"+n.length+">";var n;if(null==e)return String(e);if("function"==typeof e.toString&&e.toString!==Object.prototype.toString)return e.toString();try{return JSON.stringify(e,null,2)}catch(t){return String(e)}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.tupleCurried=function(e){return function(t){return[e,t]}},t.apply=function(e){return function(t){return e(t)}},t.applyFlipped=function(e){return function(t){return t(e)}},t.phantom=void 0,t.constIdentity=function(){return t.identity},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=function(e){throw new Error("Called `absurd` function which should be uncallable")},t.flow=function(e,t,n,r,i,o,a,s,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return a(o(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return s(a(o(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return u(s(a(o(i(r(n(t(e.apply(this,arguments)))))))))}}}},function(e,t,n){"use strict";var r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.CCCommand=t.CaptionTrackAction=t.CaptionCueAction=void 0,function(e){e.Parsed="parsed",e.Entered="entered",e.Exited="exited",e.Updated="updated",e.Removed="removed"}(r||(r={})),t.CaptionCueAction=r,function(e){e.Added="added",e.Deselected="deselected",e.Selected="selected",e.Removed="removed"}(i||(i={})),t.CaptionTrackAction=i,function(e){e.Set_Enabled="setEnabled",e.Select_Track="selectTrack",e.Select_Track_By_Lang="selectTrackByLang",e.Update_Settings="updateSettings"}(o||(o={})),t.CCCommand=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerErrorFactory=t.PlayerRecoveryMessaging=t.PlayerError=void 0;var o=n(11),a=n(1),s=n(5),u=n(4),c=n(0),l=function(e){function t(n){var r=e.call(this,n.message||"Unknown Error")||this;return r.name="PlayerError",r._category=n.code.category,r._platform=function(e){switch(e){case s.NexusPlatform.Android:return c.PlatformErrorCode.Android;case s.NexusPlatform.iOS:return c.PlatformErrorCode.iOS;case s.NexusPlatform.Web:return c.PlatformErrorCode.Web;case s.NexusPlatform.React_Native:return c.PlatformErrorCode.React_Native;default:return c.PlatformErrorCode.Unknown}}(u.fromNullable(o.PlatformInfo.nexus.nexusTarget).getOrElse(s.NexusPlatform.Unknown)),r._domain=n.code.domain||c.Domain.Shared,r._code=n.code.code,r._severity=n.severity,r._message=n.message||"Unknown Error",r._metadata=n.metadata,Object.setPrototypeOf(r,t.prototype),r}return i(t,e),t.prototype.setMessage=function(e){return this._message=e,this},t.prototype.setMetadata=function(e){var t;return this._metadata=Object.assign(null!==(t=this._metadata)&&void 0!==t?t:{},e),this},t.prototype.toString=function(){return"Player error occurred.\n      Severity: "+this._severity+"\n      Code: "+this.code+"\n      "+(this._message?"Message: "+this._message:"")+"\n      "+(this._metadata?"Metadata: "+a.stringify(this._metadata):"")+"\n      "},t.prototype.toJSON=function(){return{code:{category:this._category,platform:this._platform,domain:this._domain,code:this._code},severity:this._severity,message:this._message,metadata:this._metadata}},Object.defineProperty(t.prototype,"code",{get:function(){return""+this._category+this._platform+this._domain+this._code},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"categoryCode",{get:function(){return this._code},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"severity",{get:function(){return this._severity},enumerable:!1,configurable:!0}),t}(Error);t.PlayerError=l,t.PlayerRecoveryMessaging={DIRECT_TO_UNDERLYING_ERROR:"The sub-error code and message will contain additional information about the underlying cause for this error.",SUGGEST_NETWORK_REQUEST_INSPECTION:"Look into the network request failure and determine the underlying cause.",BACKEND_SERVICES_ERROR:"The sub error codes may give you more information. As well the documentation may help: http://apidocs.ngtv.io. Finally, reach out and resolve along with the services team.",GENERAL_MEDIA_ERROR:"There was an issue with the media playback engine. The sub-error code will contain additional information about the underlying cause.",CONTENT_MEDIA_ERROR:"There was an issue during media playback with the content that was playing. The sub-error code will contain additional information about the underlying cause.",NETWORK_MEDIA_ERROR:"There was an issue with accessing the network for media playback. The sub-error code will contain what specific resource was unable to be accessed over the network.",DRM_MEDIA_ERROR:"There was an issue with DRM playback. The sub-error code will contain additional information about the underlying cause.",TOKEN_MISMATCH:"A token was used to make a request to an endpoint that does not match the endpoint the token was received from"},t.PlayerErrorFactory={unknownError:function(){return new l({code:{category:c.CategoryType.Unknown,code:c.CategoryCode.Unspecified,domain:c.Domain.Unknown},message:"An unknown error occured",severity:c.ErrorSeverity.Fatal})},adError:function(e,t){return new l({code:{category:c.CategoryType.Comp_Ads,code:c.CategoryCode.AdPlaybackFailure},message:e,severity:t})},adSessionTimeout:function(e,t){return new l({code:{category:c.CategoryType.Comp_Ads,code:c.CategoryCode.AdSessionTimeout},message:e,severity:t})},mediaError:function(e,t){return new l({code:{category:c.CategoryType.Comp_Media,code:c.CategoryCode.MediaPlaybackFailure},message:e,severity:t})},contentError:function(e,t){return new l({code:{category:c.CategoryType.Comp_Media,code:c.CategoryCode.MediaContentFailure},message:e,severity:t})},networkError:function(e,t){return new l({code:{category:c.CategoryType.Comp_Media,code:c.CategoryCode.MediaNetworkFailure},message:e,severity:t})},drmError:function(e,t){return new l({code:{category:c.CategoryType.Comp_Media,code:c.CategoryCode.MediaDRMFailure},message:e,severity:t})},networkConnectionLost:function(e){return new l({code:{category:c.CategoryType.Player,code:c.CategoryCode.NetworkConnectionLost},message:e,severity:c.ErrorSeverity.Fatal})},analyticsDisabled:function(e){return new l({code:{category:c.CategoryType.Comp_Analytics,code:c.CategoryCode.AnalyticsDisabled},message:e,severity:c.ErrorSeverity.Warn})},analyticsConfigFailure:function(e){return new l({code:{category:c.CategoryType.Comp_Analytics,code:c.CategoryCode.AnalyticsConfigFailure},message:e,severity:c.ErrorSeverity.Fatal})},authRequestFailure:function(e){return new l({code:{category:c.CategoryType.Comp_Auth,code:c.CategoryCode.NetworkRequestFailure},severity:c.ErrorSeverity.Fatal,message:e})},authCdnTokenFailure:function(e){return new l({code:{category:c.CategoryType.Comp_Auth,code:c.CategoryCode.CDNTokenFailure},severity:c.ErrorSeverity.Fatal,message:e})},authDrmTokenFailure:function(e){return new l({code:{category:c.CategoryType.Comp_Auth,code:c.CategoryCode.DRMTokenFailure},message:e,severity:c.ErrorSeverity.Fatal})},authDrmAssetMetadataFailure:function(e){return new l({code:{category:c.CategoryType.Comp_Auth,code:c.CategoryCode.DRMAssetMetadataFailure},message:e,severity:c.ErrorSeverity.Fatal})},cmsRequestFailure:function(e){return new l({code:{category:c.CategoryType.Comp_CMS,code:c.CategoryCode.NetworkRequestFailure},severity:c.ErrorSeverity.Fatal,message:e})},cmsResolutionFailure:function(e){return new l({code:{category:c.CategoryType.Comp_CMS,code:c.CategoryCode.ContentResolutionFailure},severity:c.ErrorSeverity.Fatal,message:e})},cmsSelectionFailure:function(e){return new l({code:{category:c.CategoryType.Comp_CMS,code:c.CategoryCode.ContentSelectionFailure},severity:c.ErrorSeverity.Fatal,message:e})},cmsContentSupportFailure:function(e,t){return new l({code:{category:c.CategoryType.Comp_CMS,code:c.CategoryCode.ContentSupportFailure},severity:c.ErrorSeverity.Fatal,message:e,metadata:t})},captionsStorageFailure:function(e){return new l({code:{category:c.CategoryType.Comp_Captions,code:c.CategoryCode.CaptionsStorageFailure},severity:c.ErrorSeverity.Error,message:e})},playerInitFailure:function(e){return new l({code:{category:c.CategoryType.Player,code:c.CategoryCode.PlayerInitFailure},message:e,severity:c.ErrorSeverity.Fatal})},transactionInitFailure:function(e){return new l({code:{category:c.CategoryType.Transaction,code:c.CategoryCode.TransactionInitFailure},message:e,severity:c.ErrorSeverity.Fatal})},transactionStateTransitionFailure:function(e){return new l({code:{category:c.CategoryType.Transaction,code:c.CategoryCode.TransactionStateTransitionFailure},message:e,severity:c.ErrorSeverity.Fatal})},transactionComponentSetupFailure:function(e){return new l({code:{category:c.CategoryType.Transaction,code:c.CategoryCode.TransactionComponentSetupFailure},message:e,severity:c.ErrorSeverity.Error})},viewAttachFailure:function(e){return new l({code:{category:c.CategoryType.UI,code:c.CategoryCode.ViewAttachFailure},message:e,severity:c.ErrorSeverity.Fatal})},viewDetachFailure:function(e){return new l({code:{category:c.CategoryType.UI,code:c.CategoryCode.ViewDetachFailure},message:e,severity:c.ErrorSeverity.Fatal})},tokenMismatch:function(e){return new l({code:{category:c.CategoryType.Comp_Auth,code:c.CategoryCode.TokenMismatch},message:e,severity:c.ErrorSeverity.Fatal})},maxAllowedStreamsExceeded:function(e){return new l({code:{category:c.CategoryType.Comp_Auth,code:c.CategoryCode.MaxAllowedStreamsExceeded},message:e,severity:c.ErrorSeverity.Fatal})},maxAllowedRenewalsExceeded:function(e){return new l({code:{category:c.CategoryType.Comp_Auth,code:c.CategoryCode.MaxAllowedRenewalsExceeded},message:e,severity:c.ErrorSeverity.Fatal})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPruneMonitorEventCollection=t.PruneMonitorEventType=void 0;var r,i=n(1);!function(e){e.Sliding_Window_Changed="slidingWindowChanged"}(r=t.PruneMonitorEventType||(t.PruneMonitorEventType={}));t.createPruneMonitorEventCollection=function(){return i.createEventCollection({slidingWindowChanged:i.createEvent(r.Sliding_Window_Changed)})}},function(e,t,n){"use strict";function r(e,n,i){return function(o){var a=t.concat(i,[o]);return 0===n?e.apply(this,a):r(e,n-1,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.identity=function(e){return e},t.unsafeCoerce=t.identity,t.not=function(e){return function(t){return!e(t)}},t.or=function(e,t){return function(n){return e(n)||t(n)}},t.and=function(e,t){return function(n){return e(n)&&t(n)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t){return function(n){return e(n)(t)}}},t.on=function(e){return function(t){return function(n,r){return e(t(n),t(r))}}},t.compose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length-1;return function(t){for(var r=t,i=n;i>-1;i--)r=e[i].call(this,r);return r}},t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length-1;return function(t){for(var r=t,i=0;i<=n;i++)r=e[i].call(this,r);return r}},t.concat=function(e,t){var n=e.length;if(0===n)return t;var r=t.length;if(0===r)return e;for(var i=Array(n+r),o=0;o<n;o++)i[o]=e[o];for(o=0;o<r;o++)i[o+n]=t[o];return i},t.curried=r,t.curry=function(e){return r(e,e.length-1,[])};t.toString=function(e){if("string"==typeof e)return JSON.stringify(e);if(e instanceof Date)return"new Date('"+e.toISOString()+"')";if(Array.isArray(e))return"["+e.map(t.toString).join(", ")+"]";if("function"==typeof e)return(n=e).displayName||n.name||"<function"+n.length+">";var n;if(null==e)return String(e);if("function"==typeof e.toString&&e.toString!==Object.prototype.toString)return e.toString();try{return JSON.stringify(e,null,2)}catch(t){return String(e)}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.tupleCurried=function(e){return function(t){return[e,t]}},t.apply=function(e){return function(t){return e(t)}},t.applyFlipped=function(e){return function(t){return t(e)}},t.phantom=void 0,t.constIdentity=function(){return t.identity},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=function(e){throw new Error("Called `absurd` function which should be uncallable")},t.flow=function(e,t,n,r,i,o,a,s,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return a(o(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return s(a(o(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return u(s(a(o(i(r(n(t(e.apply(this,arguments)))))))))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.populatePlatformInfo=t.PlatformInfo=void 0;var r=n(1);t.PlatformInfo={device:{displayParameters:{longDimension:-1,shortDimension:-1,token:""}},application:{},nexus:{}},t.populatePlatformInfo=function(e){"number"==typeof e.device.softwareVersion&&(e.device.softwareVersion=e.device.softwareVersion.toString()),r.ObjectUtils.extendDeep(t.PlatformInfo,e)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(81),t),i(n(82),t),i(n(169),t)},function(e,t,n){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerNotificationEventCategory=t.PlayerNotificationSourceType=void 0,function(e){e.Init="init",e.View="view",e.Transaction="transaction",e.Player="player",e.Monitors="monitors"}(r||(r={})),t.PlayerNotificationSourceType=r,function(e){e.State_Changed="stateChanged",e.Prune="prune"}(i||(i={})),t.PlayerNotificationEventCategory=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonitorStateTrigger=t.MonitorState=t.MonitorType=void 0,function(e){e.Content_Stall="contentStall",e.Live_Ad_Session="liveAdSession",e.Ad_Start_Detection="adStartDetection",e.Prune="prune"}(t.MonitorType||(t.MonitorType={})),function(e){e.Inactive="inactive",e.Connected="connected",e.Disconnected="disconnected"}(t.MonitorState||(t.MonitorState={})),function(e){e.Inactive="inactive",e.Connect="connect",e.Disconnect="disconnect"}(t.MonitorStateTrigger||(t.MonitorStateTrigger={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineEventType=t.createTimelineEventCollection=void 0;var r,i=n(1);t.createTimelineEventCollection=function(){return i.createEventCollection({modelUpdateRequest:i.createEvent(r.Model_Update_Request),started:i.createEvent(r.Started),markerAdded:i.createEvent(r.Marker_Added),markerApproaching:i.createEvent(r.Marker_Approaching),markerActivated:i.createEvent(r.Marker_Activated),markerFinishing:i.createEvent(r.Marker_Finishing),markerDeactivated:i.createEvent(r.Marker_Deactivated),markerRemoved:i.createEvent(r.Marker_Removed)})},function(e){e.Model_Update_Request="modelUpdateRequest",e.Started="started",e.Marker_Added="markerAdded",e.Marker_Approaching="markerApproaching",e.Marker_Activated="markerActivated",e.Marker_Finishing="markerFinishing",e.Marker_Deactivated="markerDeactivated",e.Marker_Removed="markerRemoved"}(r=t.TimelineEventType||(t.TimelineEventType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPlayerControllerEventCollection=t.PlayerControllerEventType=void 0;var r,i=n(1);!function(e){e.Player_Error="playerError",e.Player_State_Changed="playerControllerStateChanged",e.View_State_Changed="viewStateChanged",e.Module_Notification="playerModuleNotification",e.Transaction_State_Changed="playerTransactionStateChanged",e.Transaction_Config_Updated="playerTransactionConfigUpdated"}(r=t.PlayerControllerEventType||(t.PlayerControllerEventType={}));t.createPlayerControllerEventCollection=function(){return i.createEventCollection({playerError:i.createEvent(r.Player_Error),playerStateChanged:i.createEvent(r.Player_State_Changed),viewStateChanged:i.createEvent(r.View_State_Changed),moduleNotification:i.createEvent(r.Module_Notification),transactionStateChanged:i.createEvent(r.Transaction_State_Changed),transactionConfigUpdated:i.createEvent(r.Transaction_Config_Updated)})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(66),t),i(n(153),t),i(n(80),t),i(n(20),t),i(n(170),t),i(n(171),t),i(n(7),t),i(n(172),t),i(n(173),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CCEventType=t.createCCEventCollection=void 0;var r,i=n(1);t.createCCEventCollection=function(){return i.createEventCollection({modelUpdateRequest:i.createEvent(r.Model_Update_Request),stateChanged:i.createEvent(r.State_Changed),settingsUpdated:i.createEvent(r.Settings_Updated),trackAdded:i.createEvent(r.Track_Added),trackRemoved:i.createEvent(r.Track_Removed),trackSelected:i.createEvent(r.Track_Selected),trackDeselected:i.createEvent(r.Track_Deselected),cueParsed:i.createEvent(r.Cue_Parsed),cueEntered:i.createEvent(r.Cue_Entered),cueExited:i.createEvent(r.Cue_Exited),cueUpdated:i.createEvent(r.Cue_Updated),cueRemoved:i.createEvent(r.Cue_Removed)})},function(e){e.Model_Update_Request="modelUpdateRequest",e.State_Changed="stateChanged",e.Settings_Updated="settingsUpdated",e.Track_Added="trackAdded",e.Track_Removed="trackRemoved",e.Track_Selected="trackSelected",e.Track_Deselected="trackDeselected",e.Cue_Parsed="cueParsed",e.Cue_Entered="cueEntered",e.Cue_Exited="cueExited",e.Cue_Updated="cueUpdated",e.Cue_Removed="cueRemoved"}(r=t.CCEventType||(t.CCEventType={}))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCCSettings=void 0;var r=n(0);t.DefaultCCSettings=function(){return{backgroundColor:r.Color.Default,backgroundOpacity:r.Opacity.Default,fontColor:r.Color.Default,fontOpacity:r.Opacity.Default,fontType:r.FontType.Default,fontEdge:r.Edge.Default,size:r.Size.Default}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CuesManagerEventType=t.createCuesManagerEventCollection=void 0;var r,i=n(1);t.createCuesManagerEventCollection=function(){return i.createEventCollection({modelUpdateRequest:i.createEvent(r.Model_Update_Request),cueStateChanged:i.createEvent(r.Cue_State_Changed),cueProcessed:i.createEvent(r.Cue_Processed),cueActivated:i.createEvent(r.Cue_Activated)})},function(e){e.Model_Update_Request="modelUpdateRequest",e.Cue_State_Changed="cueStateChanged",e.Cue_Processed="cueProcessed",e.Cue_Activated="cueActivated"}(r=t.CuesManagerEventType||(t.CuesManagerEventType={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(83),t),i(n(177),t),i(n(85),t),i(n(35),t)},function(e,t,n){"use strict";var r,i,o,a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerConfigDefaults=void 0;var s=n(88),u=n(79),c=n(89),l=n(22),d=n(17),f=n(185),p=n(96),h=n(97),g=n(98),y=n(99),v=n(0);t.PlayerConfigDefaults={container:null,config:{ads:{enabled:!1,profile:"",kvps:{},companions:{clearOnAdFinished:!0,containers:[]}},features:{ccpa:c.CCPAFeatureDefaults,gdpr:c.GDPRFeatureDefaults,tve:c.TVEFeatureDefaults},playback:{muted:!1,volume:1,components:(r={},r[v.ComponentCategory.Video_Engine]=u.VideoEngineComponentURI.TUB,r[v.ComponentCategory.Captions]=d.CaptionsComponentURI.Default,r[v.ComponentCategory.Cues]=g.CuesComponentURI.Default,r[v.ComponentCategory.Lifecycle]=l.LifecycleComponentURI.Default,r[v.ComponentCategory.Analytics]=p.AnalyticsComponentURI.Default,r[v.ComponentCategory.UI]=h.UIComponentURI.Default,r[v.ComponentCategory.Mocks]=y.MocksComponentURI.Default,r),autoPlay:!0,autoPlayOptions:{listenForAction:!0,forceMedia:!1,preCheckAutoPlay:!0,preloadBehavior:v.AutoPlayPreloadBehavior.Full},playMode:v.PlayModeOptions.Inline,forceServiceWorker:!1},metadata:a(a({},s.PlayerConfigEnv.prod),{playerVersion:v.PlayerVersion.libVersion,uiVersion:v.uiVersion,cdnHost:"turnip.cdn.turner.com",protocol:"https://",serviceWorkerPath:"./player-service-worker.js",companyId:"",assetId:""}),media:{capBitrateToSize:!0,minBitrate:null,maxBitrate:null,offset:null,startBitrate:null},auth:{enabled:!0,cdn:{enabled:!0,services:[{type:v.AuthCdnTokenType.Spe,serviceUrl:"${metadata.protocol}${metadata.auth.cdn.spe.host}/token/token_spe",prefix:"hdnts",appId:"${metadata.appId}"}]},drm:{enabled:!0,setHeaders:!0,type:v.AuthDrmTokenType.iSP,serviceUrl:"${metadata.protocol}${metadata.auth.drm.isp.host}/token/token_isp",appId:"${metadata.appId}",assetIdSource:{prePlay:[v.DRMDataSource.Metadata,v.DRMDataSource.Manifest],inPlay:[v.DRMDataSource.Metadata,v.DRMDataSource.Manifest]},companyIdSource:{prePlay:[v.DRMDataSource.Metadata,v.DRMDataSource.Manifest],inPlay:[v.DRMDataSource.Metadata,v.DRMDataSource.Manifest]}}},cms:{preferDRM:!0,providers:(i={},i[v.CmsProviderKey.MediaJSON]={host:"${metadata.protocol}${metadata.cms.provider.mediaJson.host}",platform:v.MediaJSONPlatform.Desktop,versionId:"${metadata.cms.provider.mediaJson.versionId}",serviceUrl:"{host}{versionId}/media/{mediaId}/{platform}",appId:"${metadata.appId}",mediaTypes:[v.ContentProtectionType.Widevine,v.ContentProtectionType.Fairplay,v.ContentProtectionType.PlayReady,v.ContentProtectionType.BulkAES,v.ContentProtectionType.Unprotected]},i)},drm:{enabled:!0,setHeaders:!0,fairplay:{enabled:!0,licenseServer:"${metadata.protocol}fairplay.license.istreamplanet.com/api/license/${metadata.companyId}",certificateURL:"${metadata.protocol}fairplay.license.istreamplanet.com/api/AppCert/${metadata.companyId}"},playready:{enabled:!0,licenseServer:"${metadata.protocol}playready.license.istreamplanet.com/api/license"},widevine:{enabled:!0,licenseServer:"${metadata.protocol}widevine.license.istreamplanet.com/widevine/api/license/${metadata.companyId}"}},analytics:{enabled:!0,suppressAdAnalytics:!1,bitmovin:{enabled:!1,key:"a57d4f88-c20f-4544-a88a-bcc41450a7c2"},conviva:{enabled:!1,adInsights:!1,customerKey:"",applicationName:"",viewerId:""},comscore:{enabled:!1,publisherId:"",applicationName:"",applicationVersion:"",isOTT:!1,debug:!1,childDirectedAppMode:!1,mediaType:v.ComScoreMediaType.Other,c3:"",c4:"",c6:""},openMeasurement:{enabled:!1},moat:{customerKey:"turnerssaivideo109198709429"},ias:{enabled:!1,partnerCode:"",adNetworkId:""}},captions:{maxCues:30,nativeRendering:!1},lifecycle:{enabled:!0,persistence:!1,background:v.LifecycleState.Pause,focusLost:v.LifecycleState.Pause},monitors:(o={},o[f.MonitorType.Live_Ad_Session]={enabled:!1,timeout:360},o[f.MonitorType.Content_Stall]={enabled:!0,timeout:45,pollRate:1e3},o[f.MonitorType.Ad_Start_Detection]={enabled:!0,timeout:15},o[f.MonitorType.Prune]={enabled:!0,slidingWindowThreshold:60,slidingWindowBuffer:10},o),ui:{enabled:!0,resourcePaths:{css:"${metadata.protocol}${metadata.cdnHost}/top/player-ui/${metadata.uiVersion}/player-ui.min.css",js:"${metadata.protocol}${metadata.cdnHost}/top/player-ui/${metadata.uiVersion}/player-ui.min.js"},autoAttachToDom:!0,inactivityThreshold:4e3,liveThreshold:15,activeControlSet:"",theme:v.UITheme.Default,style:{paddingBottom:0},posterImage:"",metadata:{},debug:{}},mocks:{timedMetadata:{messages:[]}},debug:{enabled:!1,enableMocks:!1}}}},function(e,t,n){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.InitState=t.InitEvent=void 0,function(e){e.Start="start",e.Initialize="initialize",e.Initialized="initialized",e.Error="error"}(r||(r={})),t.InitEvent=r,function(e){e.Pending="pending",e.Initializing="initializing",e.Initialized="initialized",e.Error="error"}(i||(i={})),t.InitState=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.populateEntryByKeysystems=t.applyTokenToContentEntryFileData=t.contentEntryFileRequiresDrmAuth=t.contentEntryFileRequiresCdnAuth=void 0;var r=n(0),i=n(1);t.contentEntryFileRequiresCdnAuth=function(e){return null!==e.playlistProtection},t.contentEntryFileRequiresDrmAuth=function(e){switch(e.contentProtection){case r.ContentProtectionType.MultiDRM:case r.ContentProtectionType.PlayReady:case r.ContentProtectionType.Widevine:case r.ContentProtectionType.Fairplay:return!0;default:return!1}},t.applyTokenToContentEntryFileData=function(e,t,n){var r,o=i.appendQuery(e.url||"",((r={})[""+n]=t,r));e.url=decodeURIComponent(o)},t.populateEntryByKeysystems=function(e){var t={bulkaes:null,fairplay:null,playready:null,multidrm:null,preview:null,primetime:null,unknown:null,unprotected:null,widevine:null};return e.files.forEach((function(e){t[e.contentProtection]=e})),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MockMessageProcessability=t.MocksExecutionState=void 0,function(e){e.Pre_Play="prePlay",e.In_Play="inPlay"}(t.MocksExecutionState||(t.MocksExecutionState={})),function(e){e.Full="full",e.Partial="partial",e.None="none"}(t.MockMessageProcessability||(t.MockMessageProcessability={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CCProviderEventType=t.createCCProviderEventCollection=void 0;var r,i=n(1);t.createCCProviderEventCollection=function(){return i.createEventCollection({trackChanged:i.createEvent(r.Track_Changed),cueChanged:i.createEvent(r.Cue_Changed)})},function(e){e.Track_Changed="trackChanged",e.Cue_Changed="cueChanged"}(r=t.CCProviderEventType||(t.CCProviderEventType={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(154),t),i(n(155),t),i(n(157),t),i(n(167),t),i(n(79),t),i(n(29),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoEngineCommand=void 0,function(e){e.Play="play",e.Pause="pause",e.Resume="resume",e.Seek="seek",e.Seek_To_Live="seekToLive",e.Resize="resize",e.Select_Caption_Track="selectCaptionTrack",e.Deselect_Caption_Track="deselectCaptionTrack",e.Update_Caption_Settings="updateCaptionSettings",e.Stop="stop",e.Destroy="destroy",e.Ad_Click="ad_click",e.Apply_DRM_Token="applyDRMToken"}(t.VideoEngineCommand||(t.VideoEngineCommand={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(73),t),i(n(69),t),i(n(75),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;var r=n(1),i=n(74),o=n(0),a=r.Log.getLogger("Marker").filter("timeline"),s=function(){function e(e,t,n,o){void 0===t&&(t=""),this.events=i.createMarkerEventCollection(),this.options=r.ObjectUtils.extendDeep({},{startBuffer:.5,approachingThreshold:10,finishingThreshold:10,activationLimit:-1},o||{}),this.type=e,this.enabled=!0,this.range=n,this._calculateRanges(),this._id=this._generateId(t),this._active=!1,this._currentTime=0,this._firedApproaching=!1,this._firedFinishing=!1}return e.create=function(t,n,r,i){return void 0===n&&(n=""),new e(t,n,r,i)},e.createForMedia=function(t,n,r){return void 0===t&&(t=""),t=t||"media-"+Math.floor(n.start)+"s->"+Math.floor(n.end)+"s",e.create(o.MarkerType.Media,t,n,r)},e.createForAd=function(t,n,r){return void 0===t&&(t=""),t=t||"ad-break-"+Math.floor(n.start)+"s->"+Math.floor(n.end)+"s",e.create(o.MarkerType.Ad_Break,t,n,r)},e.prototype._calculateRanges=function(){var e,t,n,i=this;this._effectiveRange=(e=i.options.startBuffer,t=i.range.start-e,n=i.range.duration+e,r.TimeRange.create(t,n)),this._approachingRange=function(){var e=i.options.approachingThreshold,t=i._effectiveRange.start-e,n=e-.1;return r.TimeRange.create(t,n)}(),this._finishingRange=function(){var e=i.options.finishingThreshold,t=i._effectiveRange.end-e,n=e-.1;return r.TimeRange.create(t,n)}()},e.prototype._generateId=function(e){return e||r.getUniqueId("marker")},e.prototype._syncActiveState=function(){var e=this._currentTime;this._active?this._effectiveRange.contains(e)?this._finishingRange.contains(e)&&this._handleApproachingDeactivation():this._handleDeactivation():this._effectiveRange.contains(e)?this._handleActivation():this._approachingRange.contains(e)&&this._handleApproachingActivation()},e.prototype._handleApproachingActivation=function(){var e=this.options.approachingThreshold;e<=0||this._firedApproaching||(a.debug("[handleApproachingActivation] "+this._currentTime+" is within "+e+" of "+this._effectiveRange.start),this._firedApproaching=!0,this.events.approaching.dispatch({marker:this}))},e.prototype._handleActivation=function(){a.debug("[handleActivation] "+this._currentTime+" is within "+this._effectiveRange),this._firedApproaching=!1,this._active=!0,this.events.activated.dispatch({marker:this})},e.prototype._handleApproachingDeactivation=function(){var e=this.options.finishingThreshold;e<=0||this._firedFinishing||(a.debug("[handleApproachingDeactivation] "+this._currentTime+" is within "+e+" of "+this._effectiveRange.end),this._firedFinishing=!0,this.events.finishing.dispatch({marker:this}))},e.prototype._handleDeactivation=function(){a.debug("[handleDeactivation] reset; "+this._currentTime+" is outside "+this._effectiveRange),this._firedFinishing=!1,this._active=!1,this.events.deactivated.dispatch({marker:this})},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.updateTime=function(e){this._currentTime=e,this._syncActiveState()},e.prototype.toString=function(){return"[Marker] "+this.type+" | "+this.range},e.prototype.toJSON=function(){return{id:this.id,type:this.type,options:this.options,enabled:this.enabled,range:this.range}},e}();t.Marker=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33);function i(e){return{equals:function(t,n){return t===n||e(t,n)}}}function o(e,t){return e===t}t.URI="Eq",t.fromEquals=i,t.strictEqual=o;var a={equals:o};t.eqString=a,t.eqNumber=a,t.eqBoolean=a,t.getStructEq=function(e){return i((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},t.getTupleEq=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i((function(t,n){return e.every((function(e,r){return e.equals(t[r],n[r])}))}))},t.eq={URI:t.URI,contramap:function(e,t){return i((function(n,r){return e.equals(t(n),t(r))}))}};var s=r.pipeable(t.eq).contramap;t.contramap=s,t.eqDate=t.eq.contramap(t.eqNumber,(function(e){return e.valueOf()}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6);t.pipe=function(e,t,n,r,i,o,a,s,u,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return o(i(r(n(t(e)))));case 7:return a(o(i(r(n(t(e))))));case 8:return s(a(o(i(r(n(t(e)))))));case 9:return u(s(a(o(i(r(n(t(e))))))));case 10:return c(u(s(a(o(i(r(n(t(e)))))))))}};t.pipeable=function(e){var t={};if(function(e){return"function"==typeof e.map}(e)){t.map=function(t){return function(n){return e.map(n,t)}}}if(function(e){return"function"==typeof e.contramap}(e)){t.contramap=function(t){return function(n){return e.contramap(n,t)}}}if(function(e){return"function"==typeof e.mapWithIndex}(e)){t.mapWithIndex=function(t){return function(n){return e.mapWithIndex(n,t)}}}if(function(e){return"function"==typeof e.ap}(e)){t.ap=function(t){return function(n){return e.ap(n,t)}},t.apFirst=function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}}if(function(e){return"function"==typeof e.chain}(e)){t.chain=function(t){return function(n){return e.chain(n,t)}},t.chainFirst=function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}},t.flatten=function(t){return e.chain(t,r.identity)}}if(function(e){return"function"==typeof e.bimap}(e)){t.bimap=function(t,n){return function(r){return e.bimap(r,t,n)}},t.mapLeft=function(t){return function(n){return e.bimap(n,t,r.identity)}}}if(function(e){return"function"==typeof e.extend}(e)){t.extend=function(t){return function(n){return e.extend(n,t)}},t.duplicate=function(t){return e.extend(t,r.identity)}}if(function(e){return"function"==typeof e.reduce}(e)){t.reduce=function(t,n){return function(r){return e.reduce(r,t,n)}},t.foldMap=function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}},t.reduceRight=function(t,n){return function(r){return e.foldr(r,t,n)}}}if(function(e){return"function"==typeof e.reduceWithIndex}(e)){t.reduceWithIndex=function(t,n){return function(r){return e.reduceWithIndex(r,t,n)}},t.foldMapWithIndex=function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}},t.reduceRightWithIndex=function(t,n){return function(r){return e.foldrWithIndex(r,t,n)}}}if(function(e){return"function"==typeof e.alt}(e)){t.alt=function(t){return function(n){return e.alt(n,t())}}}if(function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)){t.filter=function(t){return function(n){return e.filter(n,t)}},t.filterMap=function(t){return function(n){return e.filterMap(n,t)}},t.partition=function(t){return function(n){return e.partition(n,t)}},t.partitionMap=function(t){return function(n){return e.partitionMap(n,t)}}}if(function(e){return"function"==typeof e.filterWithIndex}(e)){t.filterWithIndex=function(t){return function(n){return e.filterWithIndex(n,t)}},t.filterMapWithIndex=function(t){return function(n){return e.filterMapWithIndex(n,t)}},t.partitionWithIndex=function(t){return function(n){return e.partitionWithIndex(n,t)}},t.partitionMapWithIndex=function(t){return function(n){return e.partitionMapWithIndex(n,t)}}}if(function(e){return"function"==typeof e.promap}(e)){t.promap=function(t,n){return function(r){return e.promap(r,t,n)}}}if(function(e){return"function"==typeof e.compose}(e)){t.compose=function(t){return function(n){return e.compose(n,t)}}}if(function(e){return"function"==typeof e.throwError}(e)){t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.value):e.of(t.value)},t.fromPredicate=function(t,n){return function(r){return t(r)?e.of(r):e.throwError(n(r))}},t.filterOrElse=function(t,n){return function(r){return e.chain(r,(function(r){return t(r)?e.of(r):e.throwError(n(r))}))}}}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.colorValidator=t.mergeSystemAndUserSettings=t.diffSystemAndUserSettings=void 0;var r=n(0);t.diffSystemAndUserSettings=function(e,t){return Object.keys(e).reduce((function(n,r){return e[r]!==t[r]&&t[r]&&(n[r]=t[r]),n}),{})},t.mergeSystemAndUserSettings=function(e,t){return t?{backgroundColor:t.backgroundColor&&t.backgroundColor!==r.Color.Default?t.backgroundColor:e.backgroundColor,backgroundOpacity:t.backgroundOpacity&&t.backgroundOpacity!==r.Opacity.Default?t.backgroundOpacity:e.backgroundOpacity,fontColor:t.fontColor&&t.fontColor!==r.Color.Default?t.fontColor:e.fontColor,fontEdge:t.fontEdge&&t.fontEdge!==r.Edge.Default?t.fontEdge:e.fontEdge,fontOpacity:t.fontOpacity&&t.fontOpacity!==r.Opacity.Default?t.fontOpacity:e.fontOpacity,fontType:t.fontType&&t.fontType!==r.FontType.Default?t.fontType:e.fontType,size:t.size&&t.size!==r.Size.Default?t.size:e.size}:e};var i=/\#[0-9a-fA-F]{6}/;t.colorValidator=function(e){switch(e){case r.Color.Black:case r.Color.Blue:case r.Color.Cyan:case r.Color.Default:case r.Color.Green:case r.Color.Magenta:case r.Color.Red:case r.Color.White:case r.Color.Yellow:return!0;default:return i.test(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LifecycleCommand=void 0,function(e){e.LifecycleChange="lifecycleChange"}(t.LifecycleCommand||(t.LifecycleCommand={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerModel=void 0;var r=n(0),i=n(1),o=n(87),a=n(20),s=n(18),u=n(23),c=n(21),l=n(15),d=i.Log.getLogger("PlayerModel"),f=function(){return[[r.ModelKeys.Root_Container,null],[r.ModelKeys.Sub_Container,null],[r.ModelKeys.Player_State,r.PlayerState.Pending],[r.ModelKeys.Content_State,r.TransactionState.Pending],[r.ModelKeys.View_State,r.ViewState.Pending],[r.ModelKeys.Lifecycle_State,r.LifecycleState.Continue],[r.ModelKeys.Config,u.PlayerConfigDefaults.config],[r.ModelKeys.Playlist_Item,null],[r.ModelKeys.Volume,1],[r.ModelKeys.Muted,!1],[r.ModelKeys.Timeline_Time,-1],[r.ModelKeys.Timeline_Markers,[]],[r.ModelKeys.Current_Ad_Break,null],[r.ModelKeys.Current_Ad_Creative,null],[r.ModelKeys.Ad_Breaks,[]],[r.ModelKeys.Media_State,r.MediaState.Pending],[r.ModelKeys.Media_Time,-1],[r.ModelKeys.Media_Duration,-1],[r.ModelKeys.Content_Seekable_Range,i.TimeRange.create(0,0)],[r.ModelKeys.Content_Is_Live,!1],[r.ModelKeys.Content_Buffered_Range,i.TimeRange.create(0,0)],[r.ModelKeys.Caption_State,r.CCState.Pending],[r.ModelKeys.Caption_Tracks,[]],[r.ModelKeys.Caption_Cues,[]],[r.ModelKeys.Caption_Settings,a.DefaultCCSettings()],[r.ModelKeys.Analytic_Marks,{}],[r.ModelKeys.Analytic_Measures,{}],[r.ModelKeys.Timed_Metadata_Cues,[]]]},p=function(){function e(e){void 0===e&&(e=new Map(f())),this._data=e,this.modelUpdated=new i.EventSignal(r.ModelEvents.Model_Updated)}return e.prototype._processChangeRequests=function(e){var t=this,n=e.reduce((function(e,n){var o=n.property,a=n.mode||r.ModelUpdateMode.Overwrite,s=t._data.get(o),u=n.value;if(i.isEqual(s,u))return e;switch(a){case r.ModelUpdateMode.Overwrite:t._data.set(o,u);break;case r.ModelUpdateMode.Extend:if(!i.ObjectUtils.isPlainObject(s))return d.warn(o+" - Could not extend 'previousValue' with 'currentValue', not an object"),e;var c=i.ObjectUtils.extendDeep({},s,u);if(i.isEqual(s,c))return e;t._data.set(o,c);break;case r.ModelUpdateMode.Array_Append:if(!Array.isArray(s))return e;t._data.set(o,s.concat(u));break;case r.ModelUpdateMode.Array_Remove_By_Position:var l=u;if(!(Array.isArray(s)&&-1<l&&l<s.length))return e;s.splice(l,1),t._data.set(o,s);break;default:throw new i.UnreachableCaseError(a)}return e.push({property:o,previousValue:s,currentValue:u,mode:a}),e}),[]);0!==n.length&&(n.forEach((function(e){e.mode===r.ModelUpdateMode.Overwrite&&delete e.mode})),this.modelUpdated.dispatch({changed:n}))},Object.defineProperty(e.prototype,"rootContainer",{get:function(){return this._data.get(r.ModelKeys.Root_Container)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subContainer",{get:function(){return this._data.get(r.ModelKeys.Sub_Container)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerState",{get:function(){return this._data.get(r.ModelKeys.Player_State)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentState",{get:function(){return this._data.get(r.ModelKeys.Content_State)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewState",{get:function(){return this._data.get(r.ModelKeys.View_State)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lifecycleState",{get:function(){return this._data.get(r.ModelKeys.Lifecycle_State)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return i.ObjectUtils.extendDeep({},this._data.get(r.ModelKeys.Config))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playlistItem",{get:function(){return this._data.get(r.ModelKeys.Playlist_Item)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._data.get(r.ModelKeys.Volume)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._data.get(r.ModelKeys.Muted)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"analytics",{get:function(){var e=this,t=function(){return e._data.get(r.ModelKeys.Analytic_Measures)},n=function(e){var n,r;return null!==(r=null===(n=t()[e])||void 0===n?void 0:n.duration)&&void 0!==r?r:0};return{getAllMarks:function(){return e._data.get(r.ModelKeys.Analytic_Marks)},getAllMeasures:t,get currentPlay(){return{get timeToCMSResolution(){return n(r.AnalyticsMeasureName.CMS_Resolution)},get timeToTransactionSetup(){return n(r.AnalyticsMeasureName.Transaction_Setup)},get timeToTransactionInit(){return n(r.AnalyticsMeasureName.Transaction_Initialized)},get timeWaitingForUser(){return n(r.AnalyticsMeasureName.Time_Waiting_For_User)},get timeToContentResolution(){return n(r.AnalyticsMeasureName.Content_Resolution)},get totalTimeToFirstFrame(){return n(r.AnalyticsMeasureName.Total_Time_To_First_Frame)}}}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"captions",{get:function(){var e=this,t=function(){return e._data.get(r.ModelKeys.Caption_Tracks)},n=function(){return t().filter((function(e){return e.active}))},i=function(){return e._data.get(r.ModelKeys.Caption_Cues)};return{get available(){return t().length>0},get enabled(){return n().length>0},get activeTrack(){var e=n()[0];return e||null},get state(){return e._data.get(r.ModelKeys.Caption_State)},get settings(){return e._data.get(r.ModelKeys.Caption_Settings)},getAllTracks:t,getAllCues:i,getActiveCues:function(){return i().filter((function(t){var n=e._data.get(r.ModelKeys.Timeline_Time);return t.range.contains(n)}))}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeline",{get:function(){var e=this,t=function(t){return e._data.get(r.ModelKeys.Timeline_Markers).filter((function(e){return e.type===t}))},n=function(){return t(r.MarkerType.Ad_Break)};return{currentTime:this._data.get(r.ModelKeys.Timeline_Time),getMarkersForType:t,getMarkersForAdBreaks:n,getMarkersForMedia:function(){return t(r.MarkerType.Media)},adMidrollStartTimes:function(){return n().map((function(e){return e.range.start}))}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cues",{get:function(){var e=this,t=function(){return e._data.get(r.ModelKeys.Timed_Metadata_Cues)},n=function(e){return t().filter((function(t){return t.state===e}))},i=function(e){return t().filter((function(t){return t.type===e}))};return{get all(){return t()},get active(){return n(r.CueState.Activated)},get completed(){return n(r.CueState.Completed)},get cueOut(){return i(r.CueType.Ext_Out)},get cueIn(){return i(r.CueType.Ext_In)},get asset(){return i(r.CueType.Ext_Asset)},get id3(){return i(r.CueType.ID3)},get scte(){return i(r.CueType.SCTE)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentAdBreak",{get:function(){return this._data.get(r.ModelKeys.Current_Ad_Break)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentAdCreative",{get:function(){return this._data.get(r.ModelKeys.Current_Ad_Creative)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adBreaks",{get:function(){return this._data.get(r.ModelKeys.Ad_Breaks)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"captionTracks",{get:function(){return this.captions.getAllTracks()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeCaptionCues",{get:function(){return this.captions.getActiveCues()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"captionsAvailable",{get:function(){return this.captions.available},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"captionsEnabled",{get:function(){return this.captions.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"captionState",{get:function(){return this.captions.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeCaptionTrack",{get:function(){return this.captions.activeTrack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"captionSettings",{get:function(){return this.captions.settings},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaState",{get:function(){return this._data.get(r.ModelKeys.Media_State)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaDuration",{get:function(){return this._data.get(r.ModelKeys.Media_Duration)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentSeekableRange",{get:function(){return this._data.get(r.ModelKeys.Content_Seekable_Range)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaTime",{get:function(){return this._data.get(r.ModelKeys.Media_Time)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentIsLive",{get:function(){return this._data.get(r.ModelKeys.Content_Is_Live)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentBufferedRange",{get:function(){return this._data.get(r.ModelKeys.Content_Buffered_Range)},enumerable:!1,configurable:!0}),e.prototype.handlePlayerStateChange=function(e){var t={property:r.ModelKeys.Player_State,value:e.currentState};this._processChangeRequests([t])},e.prototype.handleTransactionStateChange=function(e){var t=e.currentState,n=e.previousState,i=e.args||[];switch(n){case r.TransactionState.Initializing:var o=i[0].config,a=i[0].playlistItem;if(!o||!a){d.warn("[handleTransactionStateChange] missing config or playlistItem on "+n+" -> "+t);break}this._processChangeRequests([{property:r.ModelKeys.Config,value:o},{property:r.ModelKeys.Playlist_Item,value:a}])}switch(t){case r.TransactionState.Initializing:var s=[r.ModelKeys.Root_Container,r.ModelKeys.Sub_Container,r.ModelKeys.Player_State,r.ModelKeys.View_State,r.ModelKeys.Config,r.ModelKeys.Config,r.ModelKeys.Caption_Settings];this._processChangeRequests(f().filter((function(e){return!(-1!==s.indexOf(e[0]))})).map((function(e){return{property:e[0],value:e[1]}})))}this._processChangeRequests([{property:r.ModelKeys.Content_State,value:t}])},e.prototype.handleTransactionConfigUpdate=function(e){this._processChangeRequests([{property:r.ModelKeys.Config,value:e.config}])},e.prototype.handleViewStateChange=function(e){var t=[{property:r.ModelKeys.View_State,value:e.currentState}];if(e.currentState===r.ViewState.Attached){var n=function(){if(!Array.isArray(e.args)||0===e.args.length)return d.warn("[handleViewStateChange] Could not get result data on view `Attached` transition"),[];var t=e.args[0];return t.root&&t.sub?[{property:r.ModelKeys.Root_Container,value:t.root},{property:r.ModelKeys.Sub_Container,value:t.sub}]:(d.warn("[handleViewStateChange] Missing either root or sub containers on view `Attached` transition"),[])}();t=t.concat(n)}this._processChangeRequests(t)},e.prototype.handleModuleNotification=function(e){switch(e.module){case r.ModuleType.Video_Engine:case r.ModuleType.Timeline:case r.ModuleType.Lifecycle:case r.ModuleType.Captions:case r.ModuleType.Cues:case r.ModuleType.Analytics:var t=e.result;switch(t.type){case r.VideoEngineEventType.Model_Update_Request:case l.TimelineEventType.Model_Update_Request:case s.CCEventType.Model_Update_Request:case o.AnalyticsEventType.Model_Update_Request:case c.CuesManagerEventType.Model_Update_Request:this._processChangeRequests(t.changes)}}},e.prototype.handleChangeRequests=function(e){this._processChangeRequests(e)},e.fromDataObject=function(t){var n=f().map((function(e){var n=e[0],r=e[1];return[n,t[n]||r]}));return new e(new Map(n))},e}();t.PlayerModel=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMonitorImpl=void 0;var r=n(1),i=n(14),o=n(191),a=function(){function e(e,t,n){var i=this;this._onFsmStateChanged=function(e){var t=e.to,n=e.from;i.events.stateChanged.dispatch({currentState:t,previousState:n})},this._events=this._extendEvents(e),this._config=t,this._model=n,this._fsm=new r.Fsm,this._fsm.init(o.MonitorFsmConfig),this._fsm.events.stateChanged.listen(this._onFsmStateChanged)}return e.prototype._extendEvents=function(e){return e.stateChanged=r.createEvent("stateChanged"),e},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"running",{get:function(){return this._fsm.currentState()===i.MonitorState.Connected},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._fsm.currentState()},enumerable:!1,configurable:!0}),e.prototype.start=function(){return this._fsm.attemptTransition(i.MonitorStateTrigger.Connect),this},e.prototype.handleModuleNotification=function(e){return this},e.prototype.stop=function(){return this._fsm.attemptTransition(i.MonitorStateTrigger.Disconnect),this},e.prototype.destroy=function(){return this._fsm.events.unlistenAll(),this},e}();t.BaseMonitorImpl=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultUIController=t.UIComponentURI=void 0;var r=n(1),i=n(0);!function(e){e.Default="com.turner.top.ui.default"}(t.UIComponentURI||(t.UIComponentURI={}));var o=function(){function e(){this.moduleNotification=r.createEvent("moduleNotification")}return e.prototype.dispatchModuleNotification=function(e){this.moduleNotification.dispatch({module:i.ModuleType.UI,category:i.ModuleEventCategory.Component_Event,result:e})},e.prototype.setPlatformHelper=function(e){this._platformHelper=e},e.prototype.setup=function(e){return e.playerConfig.ui.enabled?this._platformHelper.initializeUI(e.playerConfig.ui.resourcePaths.css,e.playerConfig.ui.resourcePaths.js,e.playerConfig.ui.resourcePaths.cssOverride):r.TaskFactory.resolve(void 0)},e.prototype.updateConfig=function(e){},e.prototype.processCommand=function(e){switch(e.type){case i.PlayerCommandType.Send_Message_To_UI:this.dispatchModuleNotification({type:i.PlayerEventType.Message_To_UI,name:e.name,payload:e.payload})}},e.prototype.handleModuleNotification=function(e){},e.prototype.handlePlayerNotification=function(e){},e.prototype.destroy=function(){return Promise.resolve()},e}();t.DefaultUIController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionEvent=void 0,function(e){e.Start="start",e.Idle="idle",e.Initialize="initialize",e.Prepare="prepare",e.Transform="transform",e.Initialized="initialized",e.Wait="wait",e.Validate="validate",e.Validated="validated",e.Ads_Begin="adsBegin",e.Ads_Playback="adsPlayback",e.Ads_Complete="adsComplete",e.Authorize="authorize",e.Authorized="authorized",e.Media_Begin="mediaBegin",e.Media_Playback="mediaPlayback",e.Media_Complete="mediaComplete",e.Stop="stop",e.Interrupted="interrupted",e.Finish="finish",e.Error="error",e.End="end",e.Ended="ended"}(t.TransactionEvent||(t.TransactionEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewEvent=void 0,function(e){e.Start="start",e.Create="create",e.Created="created",e.Attach="attach",e.Attached="attached",e.Windowed="windowed",e.Enter_Fullscreen="enterFullscreen",e.Fullscreen="fullscreen",e.Exit_Fullscreen="exitFullscreen",e.Enter_Remote="enterRemote",e.Remote="remote",e.Exit_Remote="exitRemote",e.Detach="detach",e.Detached="detached",e.Destroy="destroy",e.Destroyed="destroyed",e.Error="error"}(t.ViewEvent||(t.ViewEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerConfigUpdateConstraint=void 0,function(e){e.Immediate="immediate",e.Next_Play="next_play",e.Never="never"}(t.PlayerConfigUpdateConstraint||(t.PlayerConfigUpdateConstraint={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTransactionEventCollection=void 0;var r=n(1),i=n(0);t.createTransactionEventCollection=function(){return r.createEventCollection({moduleNotification:r.createEvent(i.TransactionEventType.Module_Notification),stateChanged:r.createEvent(i.TransactionEventType.State_Changed),configUpdated:r.createEvent(i.TransactionEventType.Config_Updated)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthToken=void 0;var r=n(1),i=function(){function e(e,t){if(!e||!t)throw new Error("AuthTokenHelper requires a token type and value to manage");this._token=e,this._type=t;var n=r.AuthTokenHelper.parse(e,t).toNullable();if(!n)throw new Error("Invalid token and/or type provided");this._result=n}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),e.prototype.isExpired=function(e){if(!this._result)throw new Error("Invalid token and/or type provided; cannot determine expiration");return r.AuthTokenHelper.isExpired(this._result,this._type,e).getOrElse(!0)},e.prototype.toObject=function(){return r.ObjectUtils.extendDeep({},this._result)},e}();t.AuthToken=i},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(207),t),i(n(106),t),i(n(107),t),i(n(23),t),i(n(41),t),i(n(112),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(116),t),i(n(46),t),i(n(47),t),i(n(25),t),i(n(120),t),i(n(121),t),i(n(48),t),i(n(118),t),i(n(117),t)},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultProviderMap=t.RemoteMetadataProvider=t.MediaJSONProvider=t.URLProvider=void 0;var i=n(1),o=n(47),a=n(4),s=n(117),u=n(118),c=n(213),l=n(3),d=n(0),f=i.Log.getLogger("providers").filter("cms");t.URLProvider=function(e,t){f.debug("[urlProvider] data: "+e),t.resolve(d.ContentEntryBuilder.forEntryData().addFile({url:e.playData}).build())};t.MediaJSONProvider=function(e,t){var n=e.playData,o=e.providerConfig;f.debug("[mediaJSONProvider] data: "+i.stringify(n)),f.debug("[mediaJSONProvider] providerConfig: "+i.stringify(o));var p=a.fromNullable(o).getOrElse({"top.cms.provider.mediaJson":{}})[d.CmsProviderKey.MediaJSON],h="";p.versionId===d.MediumVersion.V2&&(h="/"+d.MediumVersion.V2);for(var g=[["host",p.host],["versionId",h],["mediaId",n.mediaId],["platform",p.platform]],y=p.serviceUrl.slice(),v=0,_=g;v<_.length;v++){var m=_[v];y=y.replace("{"+m[0]+"}",m[1])}var b=i.parse(y);n.appId?b.set("query",r(r({},b.query),{appId:n.appId})):p.appId&&"${metadata.appId}"!==p.appId&&b.set("query",r(r({},b.query),{appId:p.appId})),n.kvps&&b.set("query",r(r({},b.query),n.kvps)),f.debug("[mediaJSONProvider] url: "+b.href),i.NetworkTask(b.href).fold((function(e){var n=function(e,t){var n=l.PlayerErrorFactory.cmsRequestFailure("[mediaJSONProvider] request failed");n.setMetadata({recoverySuggestion:l.PlayerRecoveryMessaging.SUGGEST_NETWORK_REQUEST_INSPECTION,subErrorCode:t.status.toString(),subErrorMessage:t.statusText}),e.reject(n)};i.isResponse(e)&&(f.debug("[mediaJSONProvider] request failed: "+i.stringify(e)),e.json().then((function(r){if(s.isMediaJSONError(r)){var i=l.PlayerErrorFactory.cmsResolutionFailure("Error in medium response").setMetadata({recoverySuggestion:l.PlayerRecoveryMessaging.BACKEND_SERVICES_ERROR,subErrorCode:r.error.code.toString(),subErrorMessage:r.error.error});t.reject(i)}else n(t,e)})).catch((function(){n(t,e)})))}),(function(e){if(s.isMediaJSONError(e)){var r=l.PlayerErrorFactory.cmsResolutionFailure("Error in medium response").setMetadata({recoverySuggestion:l.PlayerRecoveryMessaging.BACKEND_SERVICES_ERROR,subErrorCode:e.error.code.toString(),subErrorMessage:e.error.error});return t.reject(r)}switch(p.versionId){case d.MediumVersion.V1:u.MediaJSONParser(n,p,e).fold(t.reject,t.resolve);break;case d.MediumVersion.V2:c.MediaJSONParserV2(n,p,e).fold(t.reject,t.resolve)}})).execute()};t.RemoteMetadataProvider=function(e,t){(f.debug("[metadataProvider] data: "+i.stringify(e.playData.metadata)),o.isRemoteMetadata(e.playData.metadata))?i.NetworkTask(e.playData.metadata).fold((function(e){var n=l.PlayerErrorFactory.cmsResolutionFailure("[remote metadata] request failure");return i.isResponse(e)&&n.setMetadata({recoverySuggestion:l.PlayerRecoveryMessaging.BACKEND_SERVICES_ERROR,subErrorCode:e.status.toString(),subErrorMessage:e.statusText}),t.reject(n)}),(function(n){e.playData.metadata=n,t.resolve(e.playData)})).execute():t.reject(l.PlayerErrorFactory.cmsResolutionFailure("no remote metadata to resolve"))};t.DefaultProviderMap=function(){var e;return(e={})[d.CmsProviderKey.URL]=t.URLProvider,e[d.CmsProviderKey.MediaJSON]=t.MediaJSONProvider,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRemoteMetadata=t.isContentEntryData=t.isSugarEntryData=t.isProviderData=void 0,t.isProviderData=function(e){return void 0!==e.providerType},t.isSugarEntryData=function(e){return void 0!==e.url},t.isContentEntryData=function(e){return void 0!==e.id},t.isRemoteMetadata=function(e){return"string"==typeof e}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CmsComponentURI=void 0,function(e){e.Default="com.turner.top.cms.default"}(r||(r={})),t.CmsComponentURI=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DRMDataSourceRetrievalContext=void 0,function(e){e.Pre_Play="prePlay",e.In_Play="inPlay"}(t.DRMDataSourceRetrievalContext||(t.DRMDataSourceRetrievalContext={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsCommand=void 0,function(e){e.CreateSession="createSession",e.ReportError="reportError",e.ReportEvent="reportEvent",e.CleanupSession="cleanupSession",e.PauseTracking="pauseTracking",e.ResumeTracking="resumeTracking"}(t.AnalyticsCommand||(t.AnalyticsCommand={}))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentRegistry=void 0;var i=n(1),o=n(4),a=n(0),s=((r={})[a.ComponentCategory.Analytics]={},r[a.ComponentCategory.Auth]={},r[a.ComponentCategory.AuthDRM]={},r[a.ComponentCategory.Captions]={},r[a.ComponentCategory.CMS]={},r[a.ComponentCategory.Cues]={},r[a.ComponentCategory.Lifecycle]={},r[a.ComponentCategory.PlatformHelper]={},r[a.ComponentCategory.UI]={},r[a.ComponentCategory.Video_Engine]={},r[a.ComponentCategory.Mocks]={},r[a.ComponentCategory.Custom]={},r),u=function(e){var t,n=e.category,r=e.URI,a=e.instanceId,u=o.fromNullable(s[n][r]).getOrElse({});s[n][r]=i.ObjectUtils.extendDeep(u,((t={})[a]=e,t))},c=function(e,t,n){return s[e][t]&&void 0!==s[e][t][n]},l=function(e,t,n){return o.fromNullable(s[e][t]).getOrElse({})[n]},d=function(e,t){var n=[],r=s[e];return r?Object.keys(r).reduce((function(e,n){var i=r[n];return void 0!==i&&e.push(i[t]),e}),n):n};t.ComponentRegistry={get add(){return u},get exists(){return c},get get(){return l},get getAllByCategory(){return d}}},function(e,t,n){var r,i,o,a;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*! (C) 2020 Conviva, Inc. All rights reserved. Confidential and proprietary. */o=this,void 0!==(i="function"==typeof(r=a=function(){var e={};return function(){"use strict";var t={};!function(){var n=e.Constants={};n.version="4.1.2",n.CUSTOMER_KEY="customerKey",n.GATEWAY_URL="gatewayUrl",n.LOG_LEVEL="logLevel",n.ASSET_NAME="Conviva.assetName",n.PLAYER_NAME="Conviva.applicationName",n.APPLICATION_VERSION="c3.app.version",n.IS_LIVE="Conviva.streamType",n.ENCODED_FRAMERATE="Conviva.encodedFrameRate",n.DEFAULT_RESOURCE="Conviva.defaultResource",n.STREAM_URL="Conviva.streamUrl",n.VIEWER_ID="Conviva.viewerId",n.DURATION="Conviva.duration",n.POD_INDEX="podIndex",n.POD_POSITION="podPosition",n.POD_DURATION="podDuration",n.MODULE_NAME="Conviva.moduleName",n.MODULE_VERSION="Conviva.moduleVersion",n.FRAMEWORK_NAME="Conviva.frameworkName",n.FRAMEWORK_VERSION="Conviva.frameworkVersion",n.i="Constants not yet configured",n.e="Invalid : Did you report playback ended?",n.s="Invalid : Did you report ad playback ended?",n.l="Player cannot be null",n.u="PlaybackAnlytics already built",n.o="PlaybackAnlytics not yet built",n.Playback={BITRATE:"BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT"},n.Network={SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},n.ErrorSeverity={FATAL:1,WARNING:0},n.NO_SESSION_KEY=-2,n.AdPosition={PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},n.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},n.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},n.AdType={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},n.AdSlates={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},n.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},n.DeviceCategory={ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS"},n.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},n.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},n.Events={USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},n.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},n.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},n.CallbackFunctions={CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer"},n.DeviceMetadata={BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},n.AD_PRELOAD_FEATURE="adPreloading",n.AD_TAG_URL="adTagUrl",n.IMASDK_CONTENT_PLAYER="imaMainContentPlayer",n.CONVIVA_AD_MODULE="convivaAdModule",n.CONVIVA_MODULE="convivaModule",n.MEDIA_ELEMENT="mediaElement";var r=e.Client=function(t,n){var s=this;this.a=!1,this.version=r.version,this.c=null,this.d=null,this.v=null,this.p=-1,this.g=null,this.A=null,this.S=null,this.R=null,this.y=-1,this.C=!1,this.m={},this.T=function(e){s.c&&s.c.info(" Client:: uniqueIdentifierCallback(): "+e)},this.I={},this.N=null,this.w=null,this._=null,this.O=function(){this.S.P("Client.makeIPV4IPV6GlobalSessions",(function(){var e;!s.R||null!==(e=s.R.get(Q.D))&&e!==H.M&&s.d&&((e=new o).custom["c3.IPV4IPV6GlobalSession"]="T",e.custom["c3.domain"]=-1<s.g.L.indexOf(i.V)?i.V:i.U,s.F=s.d.B(e,null),(e=new o).custom["c3.IPV4IPV6GlobalSession"]="T",e.custom["c3.domain"]=-1<s.g.H.indexOf(i.K)?i.K:i.G,s.j=s.d.B(e,null))}))},this.W=function(e){s.S.P("Client.updateConnectionType",(function(){if(s.N=e,s.d){var t,n=s.d.q();for(t in n)n[t].Y(e)}}))},this.J=function(e){s.S.P("Client.updateLinkEncryption",(function(){if(s.w=e,s.d){var t,n=s.d.q();for(t in n)n[t].Q(e)}}))},this.X=function(e){s.S.P("Client.updateSignalStrength",(function(){s._=e}))},function(t,n,r,o){if(!(t instanceof i))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(n instanceof a))throw new Error("systemFactory parameter should be an instance of SystemFactory.");t.gatewayUrl!=i.z+i.Z&&t.gatewayUrl!=i.$+i.Z||(this.a=!0),o&&(this.version=o),this.g=t.tt(),this.v=n,this.v.nt("SDK",this.g,this.version),this.S=this.v.it(),this.S.P("Client.init",(function(){if(s.y=re.et(),s.c=s.v.buildLogger(),s.c.setModuleName("Client"),s.a&&s.c.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),s.c.info("init(): url="+s.g.gatewayUrl+" customerKey="+s.g.customerKey),s.R=s.v.lt(),s.R.ut(),s.d=s.v.ot(s,s.g,s.R),r)for(var t in r)switch(t){case e.Constants.Network.CONNECTION_TYPE:s.W(r[t]);break;case e.Constants.Network.LINK_ENCRYPTION:s.J(r[t]);break;case e.Constants.Network.SIGNAL_STRENGTH:s.X(r[t])}s.O(),s.c.info("init(): done.")}),(function(e){throw new Error("Client constructor failed: "+e.message)}))}.apply(this,arguments),this.release=function(){this.C||this.S.P("Client.release",(function(){null!=s.c&&(s.c.info("release()"),s.c=null),s.d.rt(),s.d=null,s.p=-1,s.y=-1,s.S=null,s.g=null,s.A=null,s.v=null,s.C=!0}))},this.createSession=function(e,t){var n=r.NO_SESSION_KEY;return this.C||(null==e||e instanceof o?this.S.P("Client.createSession",(function(){n=s.d.ht(e,z.ft.ct,t)})):s.c.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter")),n},this.createAdSession=function(t,n,i){var a=r.NO_SESSION_KEY;return this.C||(null==n||n instanceof o?this.S.P("Client.createAdSession",(function(){var u,c;null==n&&(n=new o),!ee.dt(t)||t==r.NO_SESSION_KEY||null!=(u=s.d.vt(t))&&(c=n.custom[e.Constants.APPLICATION_VERSION],(null==n.applicationName||null==n.viewerId||void 0===c&&null==c)&&null!=u.Et&&null!=u.Et.pt&&(null==n.viewerId&&null!=u.Et.pt.viewerId&&(n.viewerId=u.Et.pt.viewerId),null==n.applicationName&&null!=u.Et.pt.applicationName&&(n.applicationName=u.Et.pt.applicationName),void 0!==c||null!=c||void 0!==(c=u.Et.pt.custom[e.Constants.APPLICATION_VERSION])&&c&&(n.custom[e.Constants.APPLICATION_VERSION]=c)),n.custom["c3.csid"]=ee.gt(u.y)),a=s.d.ht(n,z.ft.At,i)})):s.c.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter")),a},this.reportError=function(t,n,r){this.C||(ee.St(n)?r===e.Client.ErrorSeverity.FATAL||r===e.Client.ErrorSeverity.WARNING?this.S.P("Client.reportError",(function(){var e=s.d.vt(t);null!=e&&e.Rt(n,r)})):this.c.error("reportError(): invalid error severity: "+r):this.c.error("reportError(): invalid error message string: "+n))},this.updateContentMetadata=function(e,t){this.C||(t instanceof o?this.S.P("Client.updateContentMetadata",(function(){var n,r=s.d.vt(e);null!=r&&(n=t.tt(),r.yt(n))})):s.c.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter"))},this.detachPlayer=function(e){this.C||this.S.P("Client.detachPlayer",(function(){var t=s.d.vt(e);null!=t&&t.Ct()}))},this.mt=function(e){this.C||this.S.P("Client.offFocus",(function(){var t=s.d.vt(e);null!=t&&t.mt()}))},this.attachPlayer=function(e,t){this.C||(t instanceof c?this.S.P("Client.attachPlayer",(function(){var n=s.d.vt(e);null!=n&&n.Tt(t)})):s.c.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter"))},this.It=function(e){this.C||this.S.P("Client.onFocus",(function(){var t=s.d.vt(e);null!=t&&t.It()}))},this.contentPreload=function(e){this.C||this.S.P("Client.contentPreload",(function(){var t=s.d.vt(e);null!=t&&t.Nt()}))},this.contentStart=function(e){this.C||this.S.P("Client.contentStart",(function(){var t=s.d.vt(e);null!=t&&t.wt()}))},this.sendCustomEvent=function(e,t,n){this.C||(ee.St(t)?(ee._t(n)<=0&&s.c.warning("eventAttributes(): should have proper data."),this.S.P("Client.sendCustomEvent",(function(){e==r.NO_SESSION_KEY&&(s.p<0&&(a=new o,s.p=s.d.B(a,null)),e=s.p);var i=ee.Ot(n),a=s.d.Pt(e);null!=a&&a.Dt(t,i)}))):s.c.error("sendCustomEvent(): eventName parameter must be a valid string."))},this.adStart=function(e,t,n,i){this.C||(t===r.AdStream.CONTENT||t===r.AdStream.SEPARATE?n===r.AdPlayer.CONTENT||n===r.AdPlayer.SEPARATE?(i!==r.AdPosition.PREROLL&&i!==r.AdPosition.MIDROLL&&i!==r.AdPosition.POSTROLL&&this.c.info("adStart(): ignored, invalid value for adPosition parameter: "+i),this.S.P("Client.adStart",(function(){var r=s.d.vt(e);null!=r&&r.bt(t,n,i)}))):this.c.error("adStart(): ignored, invalid value for adPlayer parameter: "+n):this.c.error("adStart(): ignored, invalid value for adStream parameter: "+t))},this.adEnd=function(e){this.C||this.S.P("Client.adEnd",(function(){var t=s.d.vt(e);null!=t&&t.Mt()}))},this.cleanupSession=function(e){this.C||(e!==r.NO_SESSION_KEY?this.S.P("Client.cleanupSession",(function(){null!=s.d.vt(e)&&s.d.Lt(e)})):this.c.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"))},this.getAttachedPlayer=function(e){var t=null;return this.C||(e===r.NO_SESSION_KEY?this.c.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"):this.S.P("Client.getAttachedPlayer",(function(){var n=s.d.vt(e);null!=n&&(t=n.Vt())}))),t},this.isPlayerAttached=function(e){return!this.C&&null!==this.getAttachedPlayer(e)},this.getPlayerStateManager=function(){if(this.C)throw new Error("This instance of Conviva.Client has been released.");return new c(this.v)},this.releasePlayerStateManager=function(e){if(this.C)throw new Error("This instance of Conviva.Client has been released.");this.S.P("Client.releasePlayerStateManager",(function(){e instanceof c&&e.release()}))},this.kt=function(){return this.g},this.getId=function(){return this.y},this.getSessionId=function(e){if(!this.C){var t=null;return this.S.P("Client.getSessionId",(function(){var n=s.d.vt(e);null!=n&&(t=n.Ut())})),t}},this.getClientId=function(e){if(!this.C){var t=null;return this.S.P("Client.getClientId",(function(){var n=s.d.vt(e);null!=n&&(t=n.Ft())})),t}},this.Bt=function(e,t,n){this.C||this.S.P("Client.updateCustomMetric",(function(){var r=s.d.vt(e);null!=r&&r.Bt(t,n)}))},this.setUniqueIdentifier=function(e,t){if(this.C)throw new Error("This instance of Conviva.Client has been released.");if(null==e||void 0===e||"{}"==JSON.stringify(e))throw new Error("Identifiers are not set. No action taken !!");for(var n in e)this.m[n]=e[n];t&&(this.T=t)},this.setUserPreferenceForDataCollection=function(e,t){if(this.C)throw new Error("This instance of Conviva.Client has been released.");if(null==e||void 0===e||"{}"==JSON.stringify(e))throw new Error("Identifiers are not set. No action taken !!");for(var n in e)"false"==e[n]?this.I[n]=t?Q.Kt.Ht:Q.Kt.Gt:this.I[n]=Q.Kt.jt},this.setUserPreferenceForDataDeletion=function(e){if(this.C)throw new Error("This instance of Conviva.Client has been released.");if(null==e||void 0===e||"{}"==JSON.stringify(e))throw new Error("Identifiers are not set. No action taken !!");for(var t in e)"true"==e[t]?this.I[t]=Q.Kt.xt:this.I[t]=Q.Kt.jt}};r.version="4.1.2L",r.NO_SESSION_KEY=n.NO_SESSION_KEY,r.AdPosition={PREROLL:n.AdPosition.PREROLL,MIDROLL:n.AdPosition.MIDROLL,POSTROLL:n.AdPosition.POSTROLL},r.AdStream={CONTENT:n.AdPlayer.CONTENT,SEPARATE:n.AdPlayer.SEPARATE},r.AdPlayer={CONTENT:n.AdPlayer.CONTENT,SEPARATE:n.AdPlayer.SEPARATE},r.ErrorSeverity={FATAL:n.ErrorSeverity.FATAL,WARNING:n.ErrorSeverity.WARNING},r.DeviceType={DESKTOP:n.DeviceType.DESKTOP,CONSOLE:n.DeviceType.CONSOLE,SETTOP:n.DeviceType.SETTOP,MOBILE:n.DeviceType.MOBILE,TABLET:n.DeviceType.TABLET,SMARTTV:n.DeviceType.SMARTTV},r.AdTechnology={CLIENT_SIDE:n.AdType.CLIENT_SIDE,SERVER_SIDE:n.AdType.SERVER_SIDE},r.AdType={BLACKOUT_SLATE:n.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:n.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:n.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:n.AdSlates.OTHER_SLATE,VPAID:n.AdSlates.VPAID,REGULAR:n.AdSlates.REGULAR},r.AdServingType={INLINE:n.AdServingType.INLINE,WRAPPER:n.AdServingType.WRAPPER},r.DeviceCategory={ANDROID_DEVICE:n.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:n.DeviceCategory.APPLE_DEVICE,CHROMECAST:n.DeviceCategory.CHROMECAST,DESKTOP_APP:n.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:n.DeviceCategory.DEVICE_SIMULATOR,LG_TV:n.DeviceCategory.LG_TV,NINTENDO:n.DeviceCategory.NINTENDO,PLAYSTATION:n.DeviceCategory.PLAYSTATION,ROKU:n.DeviceCategory.ROKU,SAMSUNG_TV:n.DeviceCategory.SAMSUNG_TV,SMART_TV:n.DeviceCategory.SMART_TV,SET_TOP_BOX:n.DeviceCategory.SET_TOP_BOX,TIVO:n.DeviceCategory.TIVO,WEB:n.DeviceCategory.WEB,WINDOWS_DEVICE:n.DeviceCategory.WINDOWS_DEVICE,XBOX:n.DeviceCategory.XBOX,KAIOS_DEVICE:n.DeviceCategory.KAIOS_DEVICE};var i=e.ClientSettings=function(e){var t=this;this.Wt=null,ee.qt(this,"customerKey",(function(){return this.Wt})),ee.Yt(this,"customerKey",(function(e){ee.St(e)&&(this.Wt=e)})),this.Jt=i.Qt,ee.qt(this,"heartbeatInterval",(function(){return this.Jt})),ee.Yt(this,"heartbeatInterval",(function(e){var t;"number"!=typeof e||(t=ee.Xt(e))===e&&(this.Jt=t)})),this.zt=null,this.L=null,this.H=null,ee.qt(this,"gatewayUrl",(function(){return this.zt})),ee.Yt(this,"gatewayUrl",(function(e){var t;ee.St(e)&&("https"!=(t=e.split("://"))[0]&&"http"!=t[0]||-1!==e.indexOf(".com",e.length-".com".length)&&(this.zt=e))})),function(e){if(!ee.St(e))throw new Error("customerKey must be valid");this.customerKey=e}.apply(this,arguments),this.equals=function(e){return this.customerKey===e.customerKey&&this.gatewayUrl===e.gatewayUrl&&this.heartbeatInterval===e.heartbeatInterval},this.tt=function(){var e=new i(this.customerKey);return e.gatewayUrl=function(e){if(ee.St(e)){var n=e.split("://");if(-1==n[1].indexOf("cws.conviva.com")&&("https"==n[0]||"http"==n[0]))return t.L="https://"+i.U,t.H="https://"+i.G,e}return t.L="https://"+i.V,t.H="https://"+i.K,"https://"+t.customerKey+"."+i.Z}(this.gatewayUrl),e.heartbeatInterval=this.heartbeatInterval,e.L=this.L,e.H=this.H,e}};i.Zt="https://conviva.testonly.conviva.com",i.$t="https://cws.conviva.com",i.Z="cws.conviva.com",i.V="ipv4.cws.conviva.com",i.K="ipv6.cws.conviva.com",i.tn="conviva.testonly.conviva.com",i.U="ipv4.testonly.conviva.com",i.G="ipv6.testonly.conviva.com",i.z="https://",i.$="http://",i.nn=5,i.Qt=20;var o=e.ContentMetadata=function(){this.in=null,ee.qt(this,"assetName",(function(){return this.in})),ee.Yt(this,"assetName",(function(e){"string"==typeof e&&(this.in=e)})),this.en={},ee.qt(this,"custom",(function(){return this.en})),ee.Yt(this,"custom",(function(e){"object"==s(e)&&(this.en=ee.Ot(e))})),this.sn=null,ee.qt(this,"defaultResource",(function(){return this.sn})),ee.Yt(this,"defaultResource",(function(e){"string"==typeof e&&(this.sn=e)})),this.ln=null,ee.qt(this,"viewerId",(function(){return this.ln})),ee.Yt(this,"viewerId",(function(e){"string"==typeof e&&(this.ln=e)})),this.un=null,ee.qt(this,"applicationName",(function(){return this.un})),ee.Yt(this,"applicationName",(function(e){"string"==typeof e&&(this.un=e)})),this.on=null,ee.qt(this,"streamUrl",(function(){return this.on})),ee.Yt(this,"streamUrl",(function(e){"string"==typeof e&&(this.on=e)})),this.rn=o.StreamType.UNKNOWN,ee.qt(this,"streamType",(function(){return this.rn})),ee.Yt(this,"streamType",(function(e){e!==o.StreamType.UNKNOWN&&e!==o.StreamType.VOD&&e!==o.StreamType.LIVE||(this.rn=e)})),this.an=-1,ee.qt(this,"duration",(function(){return this.an})),ee.Yt(this,"duration",(function(e){this.an=ie.hn(e)})),this.cn=-1,ee.qt(this,"encodedFrameRate",(function(){return this.cn})),ee.Yt(this,"encodedFrameRate",(function(e){this.cn=ie.hn(e)})),function(){}.apply(this,arguments),this.tt=function(){var e,t=new o;for(e in t.assetName=this.assetName,t.applicationName=this.applicationName,t.streamUrl=this.streamUrl,t.viewerId=this.viewerId,t.defaultResource=this.defaultResource,t.streamType=this.streamType,t.duration=this.duration,t.encodedFrameRate=this.encodedFrameRate,this.custom)t.custom[e]=this.custom[e];return t}};o.StreamType={UNKNOWN:n.StreamType.UNKNOWN,LIVE:n.StreamType.LIVE,VOD:n.StreamType.VOD},e.ErrorType={ERROR_UNKNOWN:n.ErrorType.ERROR_UNKNOWN,ERROR_IO:n.ErrorType.ERROR_IO,ERROR_TIMEOUT:n.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:n.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:n.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:n.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:n.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:n.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:n.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:n.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:n.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:n.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:n.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},e.Events={AD_REQUESTED:n.Events.AD_REQUESTED,AD_RESPONSE:n.Events.AD_RESPONSE,AD_SLOT_STARTED:n.Events.AD_SLOT_STARTED,AD_ATTEMPTED:n.Events.AD_ATTEMPTED,AD_SLOT_ENDED:n.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:n.Events.AD_IMPRESSION_START,AD_START:n.Events.AD_START,AD_FIRST_QUARTILE:n.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:n.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:n.Events.AD_THIRD_QUARTILE,AD_COMPLETE:n.Events.AD_COMPLETE,AD_END:n.Events.AD_END,AD_IMPRESSION_END:n.Events.AD_IMPRESSION_END,AD_SKIPPED:n.Events.AD_SKIPPED,AD_ERROR:n.Events.AD_ERROR,AD_PROGRESS:n.Events.AD_PROGRESS,AD_CLOSE:n.Events.AD_CLOSE,CONTENT_PAUSED:n.Events.CONTENT_PAUSED,CONTENT_RESUMED:n.Events.CONTENT_RESUMED,POD_START:n.Events.POD_START,POD_END:n.Events.POD_END};var a=e.SystemFactory=function(e,t){var n=this;(function(e,t){if(!(e instanceof h))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.fn=e,this.dn=this.fn.dn,this.vn=this.fn.vn,this.En=this.fn.En,this.pn=this.fn.pn,this.gn=this.fn.gn,this.An=this.fn.An,this.g=t instanceof u?t.tt():new u}).apply(this,arguments),this.nt=function(e,t,n){this.Sn=e,this.Rn=t,this.yn=n},this.release=function(){this.fn.release(),this.fn=null,this.Sn=null,this.g=null,this.Cn=null};var r=function(){return new se(n.An,n.dn,n.kt(),n.Cn,n.Sn)};this.buildLogger=function(){return r()},this.ot=function(e,t,n){return new Y(e,t,n,this)},this.mn=function(){return new ne(this.buildLogger(),this.Tn(),this.Rn,this.yn)},this.In=function(){return new J(this.buildTimer())},this.Nn=function(){var e=new $(this.buildLogger(),null,this.kt());return e=new de(this.buildLogger(),this.vn,e),new J(e)},this.Tn=function(){return new ae(this.buildLogger(),this.En,this.Nn(),this.kt())},this.it=function(){return new $(this.buildLogger(),this.mn(),this.kt())},this.buildTime=function(){return new le(this.dn,this.buildLogger())},this.buildTimer=function(){return new de(this.buildLogger(),this.vn,this.it())},this.wn=function(){return new ue(this.buildLogger(),this.pn,this.In(),this.kt())},this.lt=function(){return new Q(this.buildLogger(),this.wn(),this._n())},this.On=function(){return new ce(this.buildLogger(),this.gn,this.it())},this.Pn=function(){return new H},this.Dn=function(e,t){return new Z(e,this.buildLogger(),this.Tn(),this._n(),t)},this.bn=function(e,t,n,r){var i=this.Dn(t,r.custom["c3.domain"]);return new z(this.Mn(),e,t,this.buildLogger(),this.it(),this.buildTimer(),i,this.Pn(),this.buildTime(),this.Ln(),n,r)},this.Vn=function(e,t,n,r,i,o){var a=this.it(),s=this.buildLogger();return t=t.tt(),o=this.bn(e,t,n,o),new G(r,i,n,this.On(),o,a,s)},this.Mn=function(){return new X},this._n=function(){return new K},this.Ln=function(){return this.Cn},this.kt=function(){return this.g},this.Cn=new te},u=e.SystemSettings=function(){this.kn=u.Un,ee.qt(this,"logLevel",(function(){return this.kn})),ee.Yt(this,"logLevel",(function(e){var t;"number"!=typeof e||(t=ee.Xt(e))===e&&t>=u.LogLevel.DEBUG&&t<=u.LogLevel.ERROR&&(this.kn=t)})),this.Fn=u.Bn,ee.qt(this,"allowUncaughtExceptions",(function(){return this.Fn})),ee.Yt(this,"allowUncaughtExceptions",(function(e){ee.Hn(e)&&(this.Fn=e)})),this.Kn=u.Gn,ee.qt(this,"storageTimeout",(function(){return this.Kn})),ee.Yt(this,"storageTimeout",(function(e){var t;"number"!=typeof e||(t=ee.Xt(e))===e&&(this.Kn=t)})),this.jn=u.xn,ee.qt(this,"httpTimeout",(function(){return this.jn})),ee.Yt(this,"httpTimeout",(function(e){var t;"number"!=typeof e||(t=ee.Xt(e))===e&&(this.jn=t)})),function(){}.apply(this,arguments),this.equals=function(e){return this.logLevel===e.logLevel&&this.allowUncaughtExceptions===e.allowUncaughtExceptions&&this.storageTimeout===e.storageTimeout&&this.httpTimeout===e.httpTimeout},this.tt=function(){var e=new u;return e.logLevel=this.logLevel,e.allowUncaughtExceptions=this.allowUncaughtExceptions,e.storageTimeout=this.storageTimeout,e.httpTimeout=this.httpTimeout,e}};u.LogLevel={DEBUG:n.LogLevel.DEBUG,INFO:n.LogLevel.INFO,WARNING:n.LogLevel.WARNING,ERROR:n.LogLevel.ERROR,NONE:n.LogLevel.NONE},u.Wn=u.LogLevel.DEBUG,u.Un=u.LogLevel.NONE,u.qn=!0,u.Bn=!1,u.Gn=10,u.xn=10;var c=e.PlayerStateManager=function(n){var r=this;r.Yn=null,r.Jn=-2,r.Qn=c.PlayerState.UNKNOWN,r.Xn={},r.zn=-2,r.cn=-2,r.an=-2,r.Zn=null,r.$n=null,r.on=null,r.ti=null,r.ni=null,r.ii=-1,r.ei=-1,r.N=null,r.w=null,r.si=null,r.li=[],r.C=!1,this.release=function(){r.C||r.S.P("PlayerStateManager.release",(function(){null!=r.Yn&&r.Yn.ui(),r.oi(),r.v=null,r.c=null,r.S=null,r.C=!0}))},this.setPlayheadTime=function(e){},this.setBufferLength=function(e){},this.setRenderedFrameRate=function(e){},this.getEncodedFrameRate=function(){return r.cn},this.setEncodedFrameRate=function(e){r.C||r.S.P("PlayerStateManager.setEncodedFrameRate",(function(){var t=ie.hn(e);-1<=t&&(r.cn=t,null!=r.Yn&&r.Yn.ri(r.cn))}))},this.getDuration=function(){return r.an},this.setClientMeasureInterface=function(t){ee.ai(t,new e.ClientMeasureInterface,"ClientMeasureInterface"),this.hi=t},this.getPHT=function(){return this.hi&&"function"==typeof this.hi.getPHT?this.hi.getPHT():c.DEFAULT_PHT},this.getBufferLength=function(){return this.hi&&"function"==typeof this.hi.getBufferLength?this.hi.getBufferLength():c.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.hi&&"function"==typeof this.hi.getSignalStrength?this.hi.getSignalStrength():c.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.hi&&"function"==typeof this.hi.getRenderedFrameRate?this.hi.getRenderedFrameRate():c.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(e){r.C||r.S.P("PlayerStateManager.setDuration",(function(){var t=ie.hn(e);-1<=t&&(r.an=t,null!=r.Yn&&r.Yn.ci(r.an))}))},this.getStreamUrl=function(){return r.on},this.setStreamUrl=function(e){r.C||r.S.P("PlayerStateManager.setStreamUrl",(function(){null!=e&&(r.on=e,null!=r.Yn&&r.Yn.fi(r.on))}))},this.di=function(){return r.ti},this.vi=function(){return r.ni},this.setModuleNameAndVersion=function(e,t){r.ti=e,r.ni=t},this.Ei=function(){return r.$n},this.setPlayerType=function(e){r.C||r.S.P("PlayerStateManager.setPlayerType",(function(){r.$n=e,null!=r.Yn&&r.Yn.pi(r.$n)}))},this.gi=function(){return r.Zn},this.setPlayerVersion=function(e){r.C||r.S.P("PlayerStateManager.setPlayerVersion",(function(){r.Zn=e,null!=r.Yn&&r.Yn.Ai(r.Zn)}))},this.setMonitoringNotifier=function(e,t){if(!r.C)return null==r.Yn&&(r.Yn=e,r.c&&r.c.Si(t),!0)},this.oi=function(){r.C||(r.Yn=null,r.c&&r.c.Si(null))},this.Ri=function(){r.setPlayerState(r.getPlayerState()),r.setBitrateKbps(r.yi()),r.setDuration(r.getDuration()),r.setEncodedFrameRate(r.getEncodedFrameRate()),r.setStreamUrl(r.getStreamUrl()),r.setPlayerType(r.Ei()),r.setPlayerVersion(r.gi());for(var e=0;e<r.li.length;e++){var t=r.li[e];r.Ci(t)}r.li=[]},this.getPlayerState=function(){return r.Qn},this.setPlayerState=function(e){r.C||r.S.P("PlayerStateManager.setPlayerState",(function(){c.mi(e)?(r.Qn=e,null!=r.Yn&&r.Yn.Ti(r.Qn)):r.c.error("PlayerStateManager.SetPlayerState(): invalid state: "+e)}))},this.yi=function(){return r.Jn},this.setBitrateKbps=function(e){r.C||r.S.P("PlayerStateManager.setBitrateKbps",(function(){var t=ie.hn(e);-1<=t&&(r.Jn=t,null!=r.Yn&&r.Yn.Ii(r.Jn))}))},this.setPlayerSeekStart=function(e){r.C||r.S.P("PlayerStateManager.setPlayerSeekStart()",(function(){null!=r.Yn&&r.Yn.Ni(c.SEEK_ACTIONS_TYPE.SEEK_START,e)}))},this.setPlayerSeekEnd=function(){r.C||r.S.P("PlayerStateManager.setPlayerSeekEnd()",(function(){null!=r.Yn&&r.Yn.Ni(c.SEEK_ACTIONS_TYPE.SEEK_END,-1)}))},this.setUserSeekButtonUp=function(){r.C||r.S.P("PlayerStateManager.setUserSeekButtonUp()",(function(){null!=r.Yn&&r.Yn.Ni(c.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)}))},this.setUserSeekButtonDown=function(){r.C||r.S.P("PlayerStateManager.setUserSeekButtonDown()",(function(){null!=r.Yn&&r.Yn.Ni(c.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)}))},this.setVideoResolutionWidth=function(e){r.C||r.S.P("PlayerStateManager.setVideoResolutionWidth()",(function(){var t=ie.hn(e);0<t&&(r.ii=t),null!=r.Yn&&r.Yn.wi(r.ii)}))},this.setVideoResolutionHeight=function(e){r.C||r.S.P("PlayerStateManager.setVideoResolutionHeight()",(function(){var t=ie.hn(e);0<t&&(r.ei=t),null!=r.Yn&&r.Yn._i(r.ei)}))},this.setConnectionType=function(e){r.C||r.S.P("PlayerStateManager.setConnectionType()",(function(){r.N=e,null!=r.Yn&&r.Yn.Y(r.N)}))},this.setLinkEncryption=function(e){r.C||r.S.P("PlayerStateManager.setLinkEncryption()",(function(){r.w=e,null!=r.Yn&&r.Yn.Q(r.w)}))},this.setSignalStrength=function(e){},this.Ci=function(e){var t,n;r.si=e,null!=r.Yn?(t=e.errorCode,n=e.severity,r.Yn.Oi(t,n)):r.li.push(e)},this.sendError=function(e,n){r.C||r.S.P("PlayerStateManager.sendError",(function(){var i=new t.StreamerError(e,n);r.Ci(i)}))},this.reset=function(){r.C||r.S.P("PlayerStateManager.reset",(function(){r.Jn=-2,r.Qn=c.PlayerState.UNKNOWN,r.Xn={},r.zn=-1,r.cn=-1,r.an=-1,r.Zn=null,r.$n=null,r.on=null,r.si=null,r.li=[]}))},this.setCDNServerIP=function(e){r.C||r.S.P("PlayerStateManager.setCDNServerIP",(function(){null!=r.Yn&&r.Yn.Pi(e)}))},this.Di=function(){return r.bi},this.setDroppedFramesTotal=function(e){r.C||r.S.P("PlayerStateManager.setDroppedFramesTotal",(function(){null!=r.Yn&&r.Yn.Mi(e)}))},this.setDroppedFramesCount=function(e){r.C||r.S.P("PlayerStateManager.setDroppedFramesCount",(function(){null!=r.Yn&&r.Yn.Li(e)}))},this.Vi=function(){return r.si},function(e){r.v=e,r.c=r.v.buildLogger(),r.c.setModuleName("PlayerStateManager"),r.S=r.v.it()}.apply(r,arguments)};c.PlayerState={STOPPED:n.PlayerState.STOPPED,PLAYING:n.PlayerState.PLAYING,BUFFERING:n.PlayerState.BUFFERING,PAUSED:n.PlayerState.PAUSED,UNKNOWN:n.PlayerState.UNKNOWN,NOT_MONITORED:n.PlayerState.NOT_MONITORED},c.mi=function(e){return e===c.PlayerState.STOPPED||e===c.PlayerState.PLAYING||e===c.PlayerState.BUFFERING||e===c.PlayerState.PAUSED||e===c.PlayerState.UNKNOWN||e===c.PlayerState.NOT_MONITORED},c.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},c.DEFAULT_SIGNAL_STRENGTH=1e3,c.DEFAULT_RENDERED_FRAME_RATE=-1,c.DEFAULT_BUFFER_LENGTH=-1,c.DEFAULT_PHT=-1,e.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}};var l=e.HttpInterface=function(){this.makeRequest=function(e,t,n,r,i,o){},this.release=function(){}},d=e.LoggingInterface=function(){this.consoleLog=function(e,t){},this.release=function(){}},f=e.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},p=e.StorageInterface=function(){this.saveData=function(e,t,n,r){},this.loadData=function(e,t,n){},this.release=function(){}},h=e.SystemInterface=function(e,t,n,r,i,o){(function(e,t,n,r,i,o){ee.ai(e,new g,"TimeInterface"),ee.ai(t,new y,"TimerInterface"),ee.ai(n,new l,"HttpInterface"),ee.ai(r,new p,"StorageInterface"),ee.ai(i,new f,"MetadataInterface"),ee.ai(o,new d,"LoggingInterface"),this.dn=e,this.vn=t,this.En=n,this.pn=r,this.gn=i,this.An=o}).apply(this,arguments),this.release=function(){null!=this.dn&&(this.dn.release(),this.dn=null),null!=this.vn&&(this.vn.release(),this.vn=null),null!=this.En&&(this.En.release(),this.En=null),null!=this.pn&&(this.pn.release(),this.pn=null),null!=this.gn&&(this.gn.release(),this.gn=null),null!=this.An&&(this.An.release(),this.An=null)}},g=e.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},y=e.TimerInterface=function(){this.createTimer=function(e,t,n){},this.release=function(){}},v=t.AdAnalytics=function(){var t=this;function i(e){e=e,null==t.ki?null!=t.c&&t.c.error("AdAnalytics.onAdInitiated() : contentPlayer - "+n.e):(0<ee._t(e)&&t.setAdInfo(e),t.ki.Ui()||(t.ki.Fi(t.Bi),t.ki.Hi(!0)))}t.Ki=null,t.c=null,t.v=null,t.Gi=null,t.Bi=null,t.ki=null,t.ji=null,t.xi=null,t.Wi=null,function(e,n,r){t.Ki=e,t.Wi=r,t.v=n,null!=r&&(t.Bi=r.qi()),t.Gi=n.buildTimer(),t.c=n.buildLogger(),t.c.setModuleName("AdAnalytics"),t.ki=new _(t.Ki,t.Gi),b.call(this)}.apply(this,arguments),this.setAdInfo=function(e){ee._t(e)<=0?null!=t.c&&t.c.error("AdAnalytics.setAdInfo() : AD Info is not set"):(null!=t.c&&t.c.debug("AdAnalytics.setAdInfo()"),null!=t.ki&&t.ki.Yi(e))},this.setAdPlayerInfo=function(e){ee._t(e)<=0?null!=t.c&&t.c.error("AdAnalytics.setAdPlayerInfo() : Ad Player Info is not set"):(null!=t.c&&t.c.debug("AdAnalytics.setAdPlayerInfo()"),null!=t.ki&&t.ki.Yi(e))},this.reportAdMetric=function(){0!=arguments.length?1==arguments.length?t.Ji(arguments[0]):2==arguments.length?t.Ji(arguments[0],arguments[1]):3==arguments.length?t.Ji(arguments[0],arguments[1],arguments[2]):4==arguments.length&&t.Ji(arguments[0],arguments[1],arguments[2],arguments[3]):null!=t.c&&t.c.error("AdAnalytics.reportAdMetric() : Need to report metric mandatory")},this.setCallback=function(e){null!=t.ki&&t.ki.Qi(e)},this.reportAdFailed=function(e,i){null!=t.ki?(0<ee._t(i)&&t.setAdInfo(i),t.ki.Ui()||(t.ki.Fi(t.Bi),t.ki.Hi(!0)),null!=t.c&&t.c.debug("AdAnalytics.reportAdFailed() : "+e),t.reportAdError(e,r.ErrorSeverity.FATAL),t.reportAdEnded()):null!=t.c&&t.c.error("AdAnalytics.reportAdFailed() : "+n.e)},this.reportAdLoaded=function(e){null!=t.c&&t.c.debug("AdAnalytics.reportAdLoaded()"),i(e)},this.reportAdStarted=function(e){null!=t.c&&t.c.debug("AdAnalytics.reportAdStarted()"),i(e)},this.reportAdEnded=function(){null!=t.ki?(null!=t.c&&t.c.debug("AdAnalytics.reportAdEnded()"),t.ki.Ui()&&(t.ki.Fi(null),t.ki.Hi(!1))):null!=t.c&&t.c.error("AdAnalytics.reportAdEnded() : "+n.s)},this.reportAdError=function(e,r){null!=t.ki?(null!=t.c&&t.c.debug("AdAnalytics.reportAdError() : "+e),r=new oe(e,r),t.ki.Ci(r)):null!=t.c&&t.c.error("AdAnalytics.reportAdError() : "+n.e)},this.reportAdPlayerEvent=function(r,i){if(ee.St(r))if(null!=t.c&&t.c.debug("AdAnalytics.reportAdPlayerEvent()"),null!=t.ki)switch(r){case e.Constants.Events.USER_WAIT_STARTED:case e.Constants.Events.BUMPER_VIDEO_STARTED:t.ki.Ct();break;case e.Constants.Events.USER_WAIT_ENDED:case e.Constants.Events.BUMPER_VIDEO_ENDED:t.ki.Tt();break;default:t.ki.Xi(r,i)}else null!=t.c&&t.c.error("AdAnalytics.reportAdPlayerEvent() : "+n.e);else null!=t.c&&t.c.error("AdAnalytics.reportAdPlayerEvent(): eventType parameter must be a valid string.")},this.reportAdSkipped=function(){null!=t.ki?(null!=t.c&&t.c.debug("AdAnalytics.reportAdSkipped()"),t.reportAdPlayerEvent(n.Events.AD_SKIPPED),t.reportAdEnded()):null!=t.c&&t.c.error("AdAnalytics.reportAdSkipped() : "+n.e)},this.release=function(){null!=t.c&&t.c.debug("AdAnalytics.release()"),null!=t.ki&&(t.ki.Ui()&&(t.ki.Fi(null),t.ki.Hi(!1)),t.ki.Qi(null),t.ki.zi(),t.ki=null),void 0!==e.AdProxyMonitor&&null!=t.xi&&(e.AdProxyMonitor.release(t.xi),t.xi=null)},this.setAdListener=function(n,r){null!=n?(void 0!==r&&void 0!==r.convivaModule?e.AdProxyMonitor=convivaModule.AdProxyMonitor:"undefined"!=typeof ConvivaModule&&(e.AdProxyMonitor=ConvivaModule.AdProxyMonitor),void 0!==e.AdProxyMonitor?null==n&&null!=t.xi?(e.AdProxyMonitor.release(t.xi),t.xi=null):null!=n&&null!=t.xi?(e.AdProxyMonitor.release(t.xi),null!=t.c&&t.c.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),t.xi=e.AdProxyMonitor.initConvivaDropIn(n,r,this,e)):null!=n&&null==t.xi&&(null!=t.c&&t.c.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),t.xi=e.AdProxyMonitor.initConvivaDropIn(n,r,this,e)):t.c.error("AdAnalytics.setAdListener() : Include the missing Ads SDK Module")):t.c.error("AdAnalytics.setAdListener() : Need to configure the adListener instance")},this.reportAdBreakStarted=function(e,r,i){null!=t.Bi?(null!=t.c&&t.c.debug("AdAnalytics.reportAdBreakStarted()"),t.Zi=e,t.ji=r,t.Bi.$i(e,r,i)):t.c.error("AdAnalytics.reportAdBreakStarted() : "+n.e)},this.reportAdBreakEnded=function(){null!=t.Bi?(null!=t.c&&t.c.debug("AdAnalytics.reportAdBreakEnded()"),t.Zi=null,t.ji=null,t.Bi.te()):t.c.error("AdAnalytics.reportAdBreakEnded() : "+n.e)},this.getSessionId=function(){if(null!=t.Bi)return null!=t.c&&t.c.debug("VideoAnalytics.getSessionId()"),t.ki.Ut();t.c.error("VideoAnalytics.getSessionId() : "+n.e)},this.getClientId=function(){if(null!=t.Bi)return null!=t.c&&t.c.debug("VideoAnalytics.getClientId()"),t.ki.Ft();t.c.error("VideoAnalytics.getClientId() : "+n.e)},this.getAdType=function(){return null!=t.Bi?t.Bi.Zi:null},this.ne=function(){return null!=t.Bi?t.Bi.ji:null},v.prototype=Object.create(b.prototype),v.prototype.constructor=v},_=t.AdPlayerMonitorImpl=function(){var e=this;e.ie=null,e.ee=null,function(e,t){E.call(this,e,t)}.apply(this,arguments),this.Fi=function(t){this.se()!=t&&(this.le(),e.ee=null==t?null:t)},this.se=function(){return e.ee},this.ue=function(){var t,n=this.se();null!=e.ie&&(e.oe=e.ie.getPlayerStateManager(),e.re(),e.oe.setClientMeasureInterface(this),(t=null)!=n&&(t=n.ae()),e.he=e.ie.createAdSession(t,e.pt,e.oe))},_.prototype=Object.create(E.prototype),_.prototype.constructor=_},m=e.Analytics={init:function(t,o,c){if(null==this.Ki||null==this.Ki){if(arguments.length<=0)throw new Error("customerKey must be valid");var l=null,d=null,f=null;if("string"==typeof t&&(l=t,!ee.St(l)))throw new Error("customerKey must be valid");2<=arguments.length&&"object"==s(o)&&(d=o),3<=arguments.length&&"object"==s(c)&&(f=c);var p=new i(l),h=new u;0<ee._t(f)&&(null!=f[n.GATEWAY_URL]&&(p.gatewayUrl=f[n.GATEWAY_URL]),null!=f[n.LOG_LEVEL]&&(h.logLevel=f[n.LOG_LEVEL])),t=new e.Impl.Html5Logging,o=new e.Impl.Html5Storage,c=new e.Impl.Html5Http,l=new e.Impl.Html5Timer,f=new e.Impl.Html5Time,null!=this.gn&&null!=this.gn||(this.gn=new e.Impl.Html5Metadata),null!=d&&null!=d&&(null!=d[e.Constants.CallbackFunctions.CONSOLE_LOG]&&(t.consoleLog=d[e.Constants.CallbackFunctions.CONSOLE_LOG]),null!=d[e.Constants.CallbackFunctions.MAKE_REQUEST]&&(c.makeRequest=d[e.Constants.CallbackFunctions.MAKE_REQUEST]),null!=d[e.Constants.CallbackFunctions.SAVE_DATA]&&(o.saveData=d[e.Constants.CallbackFunctions.SAVE_DATA]),null!=d[e.Constants.CallbackFunctions.LOAD_DATA]&&(o.loadData=d[e.Constants.CallbackFunctions.LOAD_DATA]),null!=d[e.Constants.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(f.getEpochTimeMs=d[e.Constants.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),null!=d[e.Constants.CallbackFunctions.CREATE_TIMER]&&(l.createTimer=d[e.Constants.CallbackFunctions.CREATE_TIMER])),this.fn=new e.SystemInterface(f,l,c,o,this.gn,t),this.v=new a(this.fn,h),this.v.nt("Analytics",p),this.Ki=new r(p,this.v,this.ce,m.version),this.c=this.v.buildLogger(),this.c.setModuleName("Analytics")}else this.c.error("Client is already configured")},release:function(){var e=0;if(null!=this.fe&&null!=this.fe){for(e=0;e<this.fe.length;e++){var t=this.fe[e];null!=t&&(t.release(),t.c=null,t.Gi=null,this.fe.splice(e,1),e--)}this.fe=null}if(null!=this.de&&null!=this.de){for(e=0;e<this.de.length;e++){var n=this.de[e];null!=n&&(n.release(),n.c=null,n.Gi=null,this.de.splice(e,1),e--)}this.de=null}null!=this.v&&null!=this.v&&(this.v.release(),this.v=null),null!=this.Ki&&null!=this.Ki&&(this.Ki.release(),this.Ki=null),this.Ki=null,this.c=null,this.fn=null,this.gn=null,this.ce=null},setUniqueIdentifier:function(e,t){if(null==this.Ki||null==this.Ki)throw new Error(n.i);this.Ki.setUniqueIdentifier(e,t)},setUserPreferenceForDataCollection:function(e,t){if(null==this.Ki||null==this.Ki)throw new Error(n.i);this.Ki.setUserPreferenceForDataCollection(e,t)},setUserPreferenceForDataDeletion:function(e){if(null==this.Ki||null==this.Ki)throw new Error(n.i);this.Ki.setUserPreferenceForDataDeletion(e)},reportAppEvent:function(e,t){if(null==this.Ki||null==this.Ki)throw new Error(n.i);this.Ki.sendCustomEvent(r.NO_SESSION_KEY,e,t)},reportAppBackgrounded:function(){if(null==this.Ki||null==this.Ki)throw new Error(n.i);this.Ki.sendCustomEvent(r.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(null==this.Ki||null==this.Ki)throw new Error(n.i);this.Ki.sendCustomEvent(r.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(e){if(!(e instanceof r))throw new Error(n.i);this.Ki=e,this.v=this.Ki.v,this.c=this.v.buildLogger(),this.c.setModuleName("Analytics")},buildVideoAnalytics:function(){if(null==this.Ki||null==this.Ki)throw new Error(n.i);var e=new T(this.Ki,this.v);return null!=this.de&&null!=this.de||(this.de=[]),this.de.push(e),e},buildAdAnalytics:function(e){if(null==this.Ki||null==this.Ki)throw new Error(n.i);return e=new v(this.Ki,this.v,null!=e&&null!=e?e:null),null!=this.fe&&null!=this.fe||(this.fe=[]),this.fe.push(e),e},setDeviceMetadata:function(t){var n,r,i;arguments.length<=0||0==ee._t(t)?this.c.error("Device Metadata must be valid"):(null!=this.gn&&null!=this.gn||(this.gn=new e.Impl.Html5Metadata),null!=t[e.Constants.DeviceMetadata.BRAND]&&(this.gn.getDeviceBrand=function(){return t[e.Constants.DeviceMetadata.BRAND]}),null!=t[e.Constants.DeviceMetadata.MANUFACTURER]&&(this.gn.getDeviceManufacturer=function(){return t[e.Constants.DeviceMetadata.MANUFACTURER]}),null!=t[e.Constants.DeviceMetadata.MODEL]&&(this.gn.getDeviceModel=function(){return t[e.Constants.DeviceMetadata.MODEL]}),null!=t[e.Constants.DeviceMetadata.TYPE]&&(this.gn.getDeviceType=function(){return t[e.Constants.DeviceMetadata.TYPE]}),null!=t[e.Constants.DeviceMetadata.VERSION]&&(this.gn.getDeviceVersion=function(){return t[e.Constants.DeviceMetadata.VERSION]}),null!=t[e.Constants.DeviceMetadata.OS_NAME]&&(this.gn.getOperatingSystemName=function(){return t[e.Constants.DeviceMetadata.OS_NAME]}),null!=t[e.Constants.DeviceMetadata.OS_VERSION]&&(this.gn.getOperatingSystemVersion=function(){return t[e.Constants.DeviceMetadata.OS_VERSION]}),null!=t[e.Constants.DeviceMetadata.CATEGORY]&&(this.gn.getDeviceCategory=function(){return t[e.Constants.DeviceMetadata.CATEGORY]}),null==(n=t[e.Constants.DeviceMetadata.SCREEN_RESOLUTION_WIDTH])||isNaN(n)||(this.gn.getScreenWidth=function(){return n.toString()}),null==(r=t[e.Constants.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT])||isNaN(r)||(this.gn.getScreenHeight=function(){return r.toString()}),null==(i=t[e.Constants.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR])||isNaN(i)||(this.gn.getScaleFactor=function(){return i.toString()}))},reportDeviceMetric:function(t,n){switch(null!=this.ce&&null!=this.ce||(this.ce={}),t){case e.Constants.Network.CONNECTION_TYPE:if(!ee.St(n))return void this.c.error("reportDeviceMetric() : Connection Type is not a valid string");this.ce[t]=n,this.Ki&&this.Ki.W(this.ce[e.Constants.Network.CONNECTION_TYPE]);break;case e.Constants.Network.LINK_ENCRYPTION:if(!ee.St(n))return void this.c.error("reportDeviceMetric() : Link Encryption is not a valid string");this.ce[t]=n,this.Ki&&this.Ki.J(this.ce[e.Constants.Network.LINK_ENCRYPTION]);break;case e.Constants.Network.SIGNAL_STRENGTH:var r=parseInt(n,10);if(isNaN(r))return void this.c.error("reportDeviceMetric() : Signal Strength is not a number");if(c.DEFAULT_SIGNAL_STRENGTH===r)return void this.c.error("reportDeviceMetric() : DEFAULT_SIGNAL_STRENGTH shouldn't be reported");this.ce[t]=r,this.Ki&&this.Ki.X(r);break;default:this.c.error("reportDeviceMetric() : unknown device metric = "+t)}}};m.version="4.1.2";var b=t.AnalyticsImpl=function(){var t=this;function r(){var e=null!=t.ki,r=t.getAdType(),i=t.ne();return r==n.AdType.SERVER_SIDE&&i==n.AdPlayer.CONTENT?b.Ee.ve:r!=n.AdType.SERVER_SIDE||i!=n.AdPlayer.SEPARATE?r==n.AdType.CLIENT_SIDE&&i==n.AdPlayer.CONTENT?b.Ee.pe:r==n.AdType.CLIENT_SIDE&&i==n.AdPlayer.SEPARATE?null!=e&&e?b.Ee.pe:b.Ee.ge:e?b.Ee.pe:b.Ee.ge:void 0}function i(e,n,r){e=parseInt(e,10),n=parseInt(n,10),isNaN(e)&&isNaN(n)?t.c.error("reportPlaybackResolution() : width and height are not numbers"):(isNaN(e)&&t.c.warning("reportPlaybackResolution() : width is not a number"),isNaN(n)&&t.c.warning("reportPlaybackResolution() : height is not a number"),null==t.ki||r!=b.Ee.pe&&r!=b.Ee.ve||t.ki.Ae(e,n),null==t.Bi||r!=b.Ee.ge&&r!=b.Ee.ve||t.Bi.Ae(e,n))}function o(e,n){c.mi(e)?(null==t.ki||n!=b.Ee.pe&&n!=b.Ee.ve||t.ki.Se(e),(null!=t.Bi&&n==b.Ee.ge||n==b.Ee.ve)&&t.Bi.Se(e)):t.c.error("reportPlayerState() : Player State is not valid")}function a(e,n){e=parseInt(e,10),isNaN(e)?t.c.error("reportPlayerPlayHeadTime() : playheadtime is not a number"):(null==t.ki||n!=b.Ee.pe&&n!=b.Ee.ve||t.ki.Re(e),null==t.Bi||n!=b.Ee.ge&&n!=b.Ee.ve||t.Bi.Re(e))}function s(e,n){e=parseInt(e,10),isNaN(e)?t.c.error("reportPlayerBufferLength() : buffer length is not a number"):(null==t.ki||n!=b.Ee.pe&&n!=b.Ee.ve||t.ki.ye(e),null==t.Bi||n!=b.Ee.ge&&n!=b.Ee.ve||t.Bi.ye(e))}function u(e,n){e=parseInt(e,10),null==t.ki||n!=b.Ee.pe&&n!=b.Ee.ve||t.ki.Ce(!0,e),null==t.Bi||n!=b.Ee.ge&&n!=b.Ee.ve||t.Bi.Ce(!0,e)}function l(e){null==t.ki||e!=b.Ee.pe&&e!=b.Ee.ve||t.ki.Ce(!1,-1),null==t.Bi||e!=b.Ee.ge&&e!=b.Ee.ve||t.Bi.Ce(!1,-1)}function d(e,n){e=parseInt(e,10),isNaN(e)?t.c.error("reportPlayerBitrate() : bitrate is not a number"):(null==t.ki||n!=b.Ee.pe&&n!=b.Ee.ve||t.ki.me(e),null==t.Bi||n!=b.Ee.ge&&n!=b.Ee.ve||t.Bi.me(e))}function f(e,n){e=parseInt(e,10),isNaN(e)?t.c.error("reportPlayerRenderedFrameRate() : rendered framerate is not a number"):(null==t.ki||n!=b.Ee.pe&&n!=b.Ee.ve||t.ki.Te(e),null==t.Bi||n!=b.Ee.ge&&n!=b.Ee.ve||t.Bi.Te(e))}(function(){}).apply(this,arguments),this.Ji=function(c,p,h,g){switch(null!=t.c&&c!==e.Constants.Playback.PLAY_HEAD_TIME&&c!==e.Constants.Playback.BUFFER_LENGTH&&t.c.debug("reportMetric() "+c+" "+(void 0!==p&&"CONVIVA"!==p?p:"")+" "+(void 0!==h&&"CONVIVA"!==h&&h!==b.Ee.pe?h:"")+" "+(void 0!==g&&"CONVIVA"!==g&&g!==b.Ee.pe?g:"")),c){case n.Playback.BITRATE:"CONVIVA"===h?t.c.info("Bitrate change requested from the Conviva Library:"):t.c.info("Bitrate change requested from the application:"),g==b.Ee.pe?d(p,b.Ee.pe):d(p,r());break;case n.Playback.PLAY_HEAD_TIME:g==b.Ee.pe?a(p,b.Ee.pe):a(p,r());break;case n.Playback.RESOLUTION:g==b.Ee.pe?i(p,h,b.Ee.pe):i(p,h,r());break;case n.Playback.BUFFER_LENGTH:g==b.Ee.pe?s(p,b.Ee.pe):s(p,r());break;case n.Playback.PLAYER_STATE:g==b.Ee.pe?o(p,b.Ee.pe):o(p,r());break;case n.Playback.RENDERED_FRAMERATE:g==b.Ee.pe?f(p,b.Ee.pe):f(p,r());break;case n.Playback.SEEK_STARTED:2<=arguments.length&&"CONVIVA"!=p?u(p,r()):h==b.Ee.pe?u(-1,b.Ee.pe):u(-1,r());break;case n.Playback.SEEK_ENDED:h==b.Ee.pe?l(b.Ee.pe):l(r());break;case n.Playback.CDN_IP:"CONVIVA"==h?t.c.info("CDN Server IP change requested from the Conviva Library:"):t.c.info("CDN Server IP change requested from the application:"),m=p,C=r(),ee.St(m)?(null==t.ki||C!=b.Ee.pe&&C!=b.Ee.ve||t.ki.Ie(m),null==t.Bi||C!=b.Ee.ge&&C!=b.Ee.ve||t.Bi.Ie(m)):t.c.error("reportCDNServerIp() : CDNServerIP is not a valid string");break;case n.Playback.DROPPED_FRAMES_TOTAL:"CONVIVA"==h?t.c.info("Dropped frames total change requested from the Conviva Library:"):t.c.info("Dropped frames total change requested from the application:"),_=p,m=r(),_=parseInt(_,10),isNaN(_)?t.c.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(null==t.ki||m!=b.Ee.pe&&m!=b.Ee.ve||t.ki.Ne(_),null==t.Bi||m!=b.Ee.ge&&m!=b.Ee.ve||t.Bi.Ne(_));break;case n.Playback.DROPPED_FRAMES_COUNT:"CONVIVA"==h?t.c.info("Dropped frames count change requested from the Conviva Library:"):t.c.info("Dropped frames count change requested from the application:"),y=p,v=r(),y=parseInt(y,10),isNaN(y)?t.c.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(null==t.ki||v!=b.Ee.pe&&v!=b.Ee.ve||t.ki.we(y),null==t.Bi||v!=b.Ee.ge&&v!=b.Ee.ve||t.Bi.we(y));break;default:_=c,v=p,y=r(),ee.St(_)&&null!=v&&null!=v?(null==t.ki||y!=b.Ee.pe&&y!=b.Ee.ve||t.ki.Bt(_,v),null==t.Bi||y!=b.Ee.ge&&y!=b.Ee.ve||t.Bi.Bt(_,v)):t.c.error("reportMetric() : Metric key/value should be a proper value")}var y,v,_,m,C}};b.Ee={pe:1,ge:2,ve:3};var C=t.PlayerMonitor=function(){var t=this;this._e=null,this.Oe=null,this.pt=null,this.Pe=null,this.Qn=e.PlayerStateManager.PlayerState.UNKNOWN,this.De=-1,this.be=-1,this.si=null,this.Me=null,this.Le=null,this.Ve=-2,this.zn=-1,this._=e.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH,this.ke=null,this.bi=null,this.w=null,this.N=null,this.Gi=null,this.Ue=null,this.Fe=null,this.Be=null,this.He=null,this.Zi=null,this.ji=null,function(e){t.Gi=e}.apply(this,arguments),this.Ke=function(){return t.Qn},this.Se=function(e){t.Qn!=e&&(t.le(),t.Qn=e,t.Ge())},this.je=function(){return t.xe},this.We=function(){return t.qe},this.Ce=function(e,n){t.le(),t.xe=e,t.qe=n,t.Ye()},this.Je=function(){return t.De},this.Re=function(e){t.De=e},this.Qe=function(){return t.be},this.ye=function(e){t.be=e},this.Xe=function(){return t.Ve},this.me=function(e){t.Ve!=e&&(t.Ve=e,t.Ge())},this.ze=function(){return t.zn},this.Te=function(e){t.zn=e},this.Ze=function(){return t.ke},this.Ie=function(e){t.ke=e,t.Ge()},this.Di=function(){return t.bi},this.Ne=function(e){t.bi=e,t.Ge()},this.we=function(e){t.$e(e)},this.ts=function(){return t._},this.ns=function(){return t.es},this.ss=function(){return t.ls},this.Ae=function(e,n){e<0&&(e=0),n<0&&(n=0),t.es==e&&t.ls==n||(t.es=e,t.ls=n,t.Ge())},this.us=function(){return t.Oe},this.os=function(){null!=t.us()&&(t.pt=new e.ContentMetadata,t.Pe={},t.Fe={},t.rs())},this.as=function(e){null==t.Oe&&null==e||(this.le(),null!=t.Oe&&(t.Oe=null,t.os()),null!=e&&(t.Oe=ee.hs(t.Oe,e),t.os()))},this.Yi=function(e){if(null!=e)if(null!=t.pt){var n,r=!1;for(n in e)if(t.pt[n]!=e[n]){r=!0;break}r&&(t.le(),t.Oe=ee.hs(e),t.rs())}else t.as(e)},this.Qi=function(e){null==e?(t.Be=null,t.cs()):t.Be!=e&&(t.Be=e,t.fs())},this.le=function(){t.ds||null!=t.Be&&(t.ds=!0,t.Be(),t.ds=!1)},this.Ui=function(){return t._e},this.Hi=function(e){t._e!=e&&(t.le(),t._e&&(t.vs(),t.cs(),t.zi()),t._e=e,t._e&&t.ue())},this.Es=function(){return t.Me},this.ps=function(){return null!=t.Le?t.Le:null},this.gs=function(){return t.si},this.Ci=function(e){this.le(),t.si=e,t.Oi()},this.Xi=function(e,n){t.le(),t.Me=e,t.Le=n,t.As()},this.Ss=function(){t.le()},this.fs=function(){t.cs(),t.Ue=t.Gi.create(t.Ss,1e3,"PlayerMonitor.update")},this.cs=function(){null!=t.Ue&&(t.Ue(),t.Ue=null)},this.$i=function(e,r,i){t.He=i,t.Rs(),t.Zi=e,t.ji=r,null!=t.Zi&&null!=t.Zi&&n.AdType.CLIENT_SIDE===t.Zi&&(t.Qn=n.PlayerState.UNKNOWN,t.ys(t.Zi,r,null==i||null==i?null:i[n.POD_POSITION]))},this.te=function(){null!=t.Zi&&n.AdType.CLIENT_SIDE===t.Zi&&(t.Cs(),t.Qn=n.PlayerState.UNKNOWN),t.ms(),t.Zi=null,t.ji=null},this.Ts=function(){return t.He},this.zi=function(){this._e=null,this.Oe=null,this.pt=null,this.Pe=null,this.Qn=e.PlayerStateManager.PlayerState.UNKNOWN,this.De=-1,this.be=-1,this.si=null,this.Me=null,this.Le=null,this.Ve=-2,this.zn=-1,this._=e.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH,this.ke=null,this.w=null,this.N=null,this.Gi=null,this.Ue=null,this.Fe=null,this.Be=null,this.He=null,this.Zi=null,this.ji=null,t.oe=null,t.he=e.Client.NO_SESSION_KEY}},E=t.PlayerMonitorImpl=function(){var t=this;t.ie=null,t.oe=null,t.he=e.Client.NO_SESSION_KEY,function(e,n){C.call(this,n),t.ie=e}.apply(this,arguments),this.getPHT=function(){return t.Je()},this.getBufferLength=function(){return t.Qe()},this.getRenderedFrameRate=function(){return t.ze()},this.getSignalStrength=function(){return t.ts()},this.Ye=function(){null!=t.oe&&t.Is!=r.NO_SESSION_KEY&&(t.je()?t.oe.setPlayerSeekStart(t.We()):t.oe.setPlayerSeekEnd())},this.Ge=function(){null!=t.oe&&(t.oe.setPlayerState(t.Ke()),0<t.Xe()&&t.oe.setBitrateKbps(t.Xe()),0<t.ns()&&t.oe.setVideoResolutionWidth(t.ns()),0<t.ss()&&t.oe.setVideoResolutionHeight(t.ss()),null!=t.Ze()&&t.oe.setCDNServerIP(t.Ze()),null!=t.Di()&&t.oe.setDroppedFramesTotal(t.Di()))},this.yt=function(){t.he!=r.NO_SESSION_KEY&&null!=t.ie&&t.ie.updateContentMetadata(t.he,t.pt)},this.re=function(){var e,r,i;null!=t.oe&&null!=t.Fe&&0!=ee._t(t.Fe)&&(null!=t.Fe[n.MODULE_NAME]&&null!=t.Fe[n.MODULE_VERSION]&&(e=t.Fe[n.MODULE_NAME],r=t.Fe[n.MODULE_VERSION],ee.St(e)&&ee.St(r)&&t.oe.setModuleNameAndVersion(e,r)),null!=t.Fe[n.FRAMEWORK_NAME]&&(i=t.Fe[n.FRAMEWORK_NAME],ee.St(i)&&t.oe.setPlayerType(i)),null!=t.Fe[n.FRAMEWORK_VERSION]&&(i=t.Fe[n.FRAMEWORK_VERSION],ee.St(i)&&t.oe.setPlayerVersion(i)))},this.Cs=function(){null!=t.oe&&t.he!=r.NO_SESSION_KEY&&(t.Ge(),this.Ns())},this.Tt=function(){null!=t.oe&&t.he!=r.NO_SESSION_KEY&&(t.Ge(),t.ie.It(t.he))},this.Ns=function(){null!=t.ie&&t.he!=n.NO_SESSION_KEY&&t.ie.adEnd(t.he)},this.ys=function(e,i,o){var a;null!=t.oe&&t.he!=n.NO_SESSION_KEY&&(a=null,n.AdType.CLIENT_SIDE===e?a=r.AdStream.SEPARATE:n.AdType.SERVER_SIDE===e&&(a=r.AdStream.CONTENT),t.ws(a,i,o))},this.Ct=function(){null!=t.oe&&t.he!=n.NO_SESSION_KEY&&t.ie.mt(t.he)},this.ws=function(e,r,i){null!=t.ie&&t.he!=n.NO_SESSION_KEY&&t.ie.adStart(t.he,e,r,i)},this.ue=function(){null!=t.ie&&(t.oe=t.ie.getPlayerStateManager(),t.re(),t.oe.setClientMeasureInterface(this),t.he=t.ie.createSession(t.pt,t.oe))},this.vs=function(){null!=t.ie&&(null!=t.oe&&(t.oe.setPlayerState(n.PlayerState.STOPPED),t.oe=null),t.he!=n.NO_SESSION_KEY&&(t.ie.cleanupSession(t.he),t.he=n.NO_SESSION_KEY))},this.Oi=function(){var e;null!=t.ie&&t.he!=r.NO_SESSION_KEY&&(e=t.gs(),t.ie.reportError(t.he,e._s(),e.Os()))},this.As=function(){t.he!=r.NO_SESSION_KEY&&null!=t.ie&&t.ie.sendCustomEvent(t.he,t.Es(),t.ps())},this.rs=function(){var e,r=t.us(),i=!1,o=!1;for(e in r){var a=r[e];if(ee.St(e)&&null!=a)switch(e){case n.STREAM_URL:o=!0,t.pt.streamUrl=a;break;case n.ASSET_NAME:o=!0,t.pt.assetName=a;break;case n.DEFAULT_RESOURCE:o=!0,t.pt.defaultResource=a;break;case n.VIEWER_ID:o=!0,t.pt.viewerId=a;break;case n.PLAYER_NAME:o=!0,t.pt.applicationName=a;break;case n.DURATION:o=!0,t.pt.duration=a;break;case n.IS_LIVE:o=!0,t.pt.streamType=a;break;case n.ENCODED_FRAMERATE:o=!0,t.pt.encodedFrameRate=a;break;case n.MODULE_NAME:case n.MODULE_VERSION:case n.FRAMEWORK_NAME:case n.FRAMEWORK_VERSION:i=!0,t.Fe[e]=a;break;case n.APPLICATION_VERSION:default:o=!0,t.pt.custom[e]=a}}i&&this.re(),o&&this.yt()},this.Rs=function(){this.Ps(n.Events.POD_START)},this.ms=function(){this.Ps(n.Events.POD_END)},this.Ps=function(e){var r,i,o;null!=t.ie&&t.he!=n.NO_SESSION_KEY&&((r=null)!=(o=this.Ts())&&(r={},null!=(i=o[n.POD_POSITION])&&(r[n.POD_POSITION]=i),null!=(i=o[n.POD_INDEX])&&(r[n.POD_INDEX]=i+""),e!==n.Events.POD_START||null!=(o=o[n.POD_DURATION])&&(r[n.POD_DURATION]=o+"")),t.ie.sendCustomEvent(t.he,e,r))},this.$e=function(e){t.oe.setDroppedFramesCount(e)},this.Ds=function(e){this.he==n.NO_SESSION_KEY&&e!=n.NO_SESSION_KEY&&(this.he=e)},this.ae=function(){return this.he},this.Ut=function(){return t.ie.getSessionId(this.he)},this.Ft=function(e){return t.ie.getClientId(this.he)},this.Bt=function(e,n){t.ie.Bt(this.he,e,n)},E.prototype=Object.create(C.prototype),E.prototype.constructor=E},T=t.VideoAnalytics=function(){var t=this;t.Ki=null,t.c=null,t.v=null,t.Gi=null,t.Bi=null,t.xi=null,t.Zi=null,t.ji=null,this.release=function(){null!=t.c&&t.c.debug("VideoAnalytics.release()"),null!=t.Bi&&t.Bi.Ui()&&(t.Bi.Hi(!1),void 0!==e.ProxyMonitor&&null!=t.xi&&(e.ProxyMonitor.release(t.xi),t.xi=null)),null!=t.Bi&&(t.Bi.Qi(null),t.Bi.zi(),t.Bi=null),t.Gi=null,t.Zi=null,t.ji=null},function(e,n){t.Ki=e,t.v=n,t.Gi=n.buildTimer(),t.c=n.buildLogger(),t.c.setModuleName("VideoAnalytics"),t.Bi=new E(t.Ki,t.Gi),b.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(e){null!=t.c&&t.c.debug("VideoAnalytics.reportPlaybackRequested()"),null!=t.Bi?(0<ee._t(e)&&t.setContentInfo(e),t.Bi.Ui()||t.Bi.Hi(!0)):t.c.error("VideoAnalytics.reportPlaybackRequested() : "+n.o)},this.reportPlaybackEnded=function(){null!=t.c&&t.c.debug("VideoAnalytics.reportPlaybackEnded()"),null!=t.Bi?t.Bi.Ui()&&(t.Bi.Hi(!1),void 0!==e.ProxyMonitor&&null!=t.xi&&(e.ProxyMonitor.release(t.xi),t.xi=null),t.Bi.Qi(null)):t.c.error("VideoAnalytics.reportPlaybackEnded() : "+n.o)},this.reportPlaybackFailed=function(e,i){null!=t.Bi?(0<ee._t(i)&&t.setContentInfo(i),t.Bi.Ui()||t.Bi.Hi(!0),null!=t.c&&t.c.debug("VideoAnalytics.reportPlaybackFailed()"),t.reportPlaybackError(e,r.ErrorSeverity.FATAL),t.reportPlaybackEnded()):t.c.error("VideoAnalytics.reportPlaybackFailed() : "+n.e)},this.setContentInfo=function(e){ee._t(e)<=0?t.c.error("VideoAnalytics.setContentInfo() : Content Info is not set"):null!=t.Bi?(null!=t.c&&t.c.debug("VideoAnalytics.setContentInfo()"),t.Bi.Yi(e)):t.c.error("VideoAnalytics.setContentInfo() : "+n.e)},this.setPlayerInfo=function(e){ee._t(e)<=0?t.c.error("VideoAnalytics.setPlayerInfo() : Player Info is not set"):null!=t.Bi?(null!=t.c&&t.c.debug("VideoAnalytics.setPlayerInfo()"),t.Bi.Yi(e)):t.c.error("VideoAnalytics.setPlayerInfo() : "+n.e)},this.reportPlaybackMetric=function(){0!=arguments.length?1==arguments.length?t.Ji(arguments[0]):2==arguments.length?t.Ji(arguments[0],arguments[1]):3==arguments.length?t.Ji(arguments[0],arguments[1],arguments[2]):4==arguments.length&&t.Ji(arguments[0],arguments[1],arguments[2],arguments[3]):t.c.error("VideoAnalytics.reportPlaybackMetric() : Need to report metric mandatory")},this.reportPlaybackError=function(e,r){null!=t.Bi?ee.St(e)?(null!=t.c&&t.c.debug("VideoAnalytics.reportPlaybackError()"),r=new oe(e,r),t.Bi.Ci(r)):t.c.error("VideoAnalytics.reportPlaybackError() : errorMessage need to be valid string"):t.c.error("VideoAnalytics.reportPlaybackError() : "+n.e)},this.reportPlaybackEvent=function(r,i){if(ee.St(r))if(null!=t.Bi){if(null!=t.c&&t.c.debug("VideoAnalytics.reportPlaybackEvent()"),null!=t.Bi)switch(r){case e.Constants.Events.USER_WAIT_STARTED:case e.Constants.Events.BUMPER_VIDEO_STARTED:t.Bi.Ct();break;case e.Constants.Events.USER_WAIT_ENDED:case e.Constants.Events.BUMPER_VIDEO_ENDED:t.Bi.Tt();break;default:t.Bi.Xi(r,i)}}else t.c.error("VideoAnalytics.reportPlaybackEvent() : "+n.e);else t.c.error("VideoAnalytics.reportPlaybackEvent(): eventType parameter must be a valid string.")},this.setCallback=function(e){null!=t.c&&t.c.debug("setCallback()"),null!=t.Bi&&t.Bi.Qi(e)},this.reportAdBreakStarted=function(e,r,i){null!=t.Bi?(null!=t.c&&t.c.debug("VideoAnalytics.reportAdBreakStarted()"),t.Zi=e,t.ji=r,t.Bi.$i(e,r,i)):t.c.error("VideoAnalytics.reportAdBreakStarted() : "+n.e)},this.reportAdBreakEnded=function(){null!=t.Bi?(t.Zi=null,(t.ji=null)!=t.c&&t.c.debug("VideoAnalytics.VideoAnalytics.reportAdBreakEnded()"),t.Bi.te()):t.c.error("VideoAnalytics.reportAdBreakEnded() : "+n.e)},this.setPlayer=function(n,r){var i,o;void 0!==n?(r&&(i=r[e.Constants.CONVIVA_MODULE],o=r[e.Constants.MEDIA_ELEMENT]),void 0!==i?e.ProxyMonitor=i.ProxyMonitor:"undefined"!=typeof ConvivaModule&&(e.ProxyMonitor=ConvivaModule.ProxyMonitor),void 0!==e.ProxyMonitor?(null!=t.c&&t.c.debug("VideoAnalytics.setPlayer()"),null==n&&null!=t.xi?(e.ProxyMonitor.release(t.xi),t.xi=null):null!=n?(null!=t.xi&&e.ProxyMonitor.release(t.xi),null!=t.c&&t.c.debug("VideoAnalytics.setPlayer() : Initializing drop-in module"),t.xi=void 0!==o?e.ProxyMonitor.initConvivaDropIn(n,o,t.v,this,e):e.ProxyMonitor.initConvivaDropIn(n,t.v,this,e)):null==n&&void 0!==o&&(t.xi=e.ProxyMonitor.initConvivaDropIn(n,o,t.v,this,e))):t.c.error("VideoAnalytics.setPlayer() : Include the missing Player Module")):t.c.error("VideoAnalytics.setPlayer() : Need to configure the Player")},this.configureExistingSession=function(e){e!=n.NO_SESSION_KEY?null!=t.Bi?(null!=t.c&&t.c.debug("VideoAnalytics.configureExistingSession()"),t.Bi.Ds(e)):t.c.error("VideoAnalytics.configureExistingSession() : "+n.e):t.c.error("VideoAnalytics.configureExistingSession() : Invalid Session Key")},this.getSessionId=function(){if(null!=t.Bi)return null!=t.c&&t.c.debug("VideoAnalytics.getSessionId()"),t.Bi.Ut();t.c.error("VideoAnalytics.getSessionId() : "+n.e)},this.getClientId=function(){if(null!=t.Bi)return null!=t.c&&t.c.debug("VideoAnalytics.getClientId()"),t.Bi.Ft();t.c.error("VideoAnalytics.getClientId() : "+n.e)},this.qi=function(){return null!=t.c&&t.c.debug("VideoAnalytics.getPlayerMonitor()"),this.Bi},this.getAdType=function(){return null!=t.Bi?t.Bi.Zi:null},this.ne=function(){return null!=t.Bi?t.Bi.ji:null},T.prototype=Object.create(b.prototype),T.prototype.constructor=T};e.Impl=e.Impl||{},e.Impl.Html5Http=function(){(function(){}).apply(this,arguments),this.makeRequest=function(e,t,n,r,i,o){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(e,t,n,r,i,o){var a=new XMLHttpRequest;return a.open(e,t,!0),r&&a.overrideMimeType&&(a.overrideMimeType=r),r&&a.setRequestHeader&&a.setRequestHeader("Content-Type",r),0<i&&(a.timeout=i,a.ontimeout=function(){a.ontimeout=a.onreadystatechange=null,o&&o(!1,"timeout after "+i+" ms")}),a.onreadystatechange=function(){4===a.readyState&&(a.ontimeout=a.onreadystatechange=null,200==a.status?o&&o(!0,a.responseText):o&&o(!1,"http status "+a.status))},a.send(n),null},this.release=function(){}},e.Impl=e.Impl||{},e.Impl.Html5Logging=function(){(function(){}).apply(this,arguments),this.consoleLog=function(t,n){"undefined"!=typeof console&&(console.log&&n===e.SystemSettings.LogLevel.DEBUG||n===e.SystemSettings.LogLevel.INFO?console.log(t):console.warn&&n===e.SystemSettings.LogLevel.WARNING?console.warn(t):console.error&&n===e.SystemSettings.LogLevel.ERROR&&console.error(t))},this.release=function(){}},e.Impl=e.Impl||{},e.Impl.Html5Metadata=function(){(function(){}).apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!=typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!=typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!=typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},e.Impl=e.Impl||{},e.Impl.Html5Storage=function(){(function(){}).apply(this,arguments),this.saveData=function(e,t,n,r){var i=e+"."+t;try{localStorage.setItem(i,n),r(!0,null)}catch(e){r(!1,e.toString())}},this.loadData=function(e,t,n){var r=e+"."+t;try{n(!0,localStorage.getItem(r))}catch(e){n(!1,e.toString())}},this.release=function(){}},e.Impl=e.Impl||{},e.Impl.Html5Time=function(){(function(){}).apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},e.Impl=e.Impl||{},e.Impl.Html5Timer=function(){(function(){}).apply(this,arguments),this.createTimer=function(e,t,n){var r=setInterval(e,t);return function(){-1!==r&&(clearInterval(r),r=-1)}},this.release=function(){}};var S,P,M,O,k,A=t.JSON2={};function w(e){return e<10?"0"+e:e}function R(e){return S.lastIndex=0,S.test(e)?'"'+e.replace(S,(function(e){var t=O[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+w(this.getUTCMonth()+1)+"-"+w(this.getUTCDate())+"T"+w(this.getUTCHours())+":"+w(this.getUTCMinutes())+":"+w(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof A.stringify&&(S=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,O={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},A.stringify=function(e,t,n){var r;if(M=P="","number"==typeof n)for(r=0;r<n;r+=1)M+=" ";else"string"==typeof n&&(M=n);if((k=t)&&"function"!=typeof t&&("object"!=s(t)||"number"!=typeof t.length))throw new Error("JSON2.stringify");return function e(t,n){var r,i,o,a,u,c=P,l=n[t];switch(l&&"object"==s(l)&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof k&&(l=k.call(n,t,l)),s(l)){case"string":return R(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(P+=M,u=[],Object.prototype.toString.apply(l)===Object.prototype.toString.apply([])){for(a=l.length,r=0;r<a;r+=1)u[r]=e(r,l)||"null";return o=0===u.length?"[]":P?"[\n"+P+u.join(",\n"+P)+"\n"+c+"]":"["+u.join(",")+"]",P=c,o}if(k&&"object"==s(k))for(a=k.length,r=0;r<a;r+=1)"string"==typeof k[r]&&(o=e(i=k[r],l))&&u.push(R(i)+(P?": ":":")+o);else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=e(i,l))&&u.push(R(i)+(P?": ":":")+o);return o=0===u.length?"{}":P?"{\n"+P+u.join(",\n"+P)+"\n"+c+"}":"{"+u.join(",")+"}",P=c,o}}("",{"":e})});var I,j,D,L,N,F=t.JsonParse=(L={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},N=function(){switch(q(),j){case"{":return function(){var e,t={};if("{"===j){if(x("{"),q(),"}"===j)return x("}"),t;for(;j;){if(e=V(),q(),x(":"),Object.hasOwnProperty.call(t,e)&&U('Duplicate key "'+e+'"'),t[e]=N(),q(),"}"===j)return x("}"),t;x(","),q()}}U("Bad object")}();case"[":return function(){var e=[];if("["===j){if(x("["),q(),"]"===j)return x("]"),e;for(;j;){if(e.push(N()),q(),"]"===j)return x("]"),e;x(","),q()}}U("Bad array")}();case'"':return V();case"-":return B();default:return("0"<=j&&j<="9"?B:function(){switch(j){case"t":return x("t"),x("r"),x("u"),x("e"),!0;case"f":return x("f"),x("a"),x("l"),x("s"),x("e"),!1;case"n":return x("n"),x("u"),x("l"),x("l"),null}U("Unexpected '"+j+"'")})()}},function(e,t){return D=e,I=0,j=" ",e=N(),q(),j&&U("Syntax error"),"function"==typeof t?function e(n,r){var i,o,a=n[r];if(a&&"object"==s(a))for(i in a)Object.hasOwnProperty.call(a,i)&&(void 0!==(o=e(a,i))?a[i]=o:delete a[i]);return t.call(n,r,a)}({"":e},""):e});function U(e){throw{name:"SyntaxError",message:e,at:I,text:D}}function x(e){return e&&e!==j&&U("Expected '"+e+"' instead of '"+j+"'"),j=D.charAt(I),I+=1,j}function B(){var e,t="";for("-"===j&&x(t="-");"0"<=j&&j<="9";)t+=j,x();if("."===j)for(t+=".";x()&&"0"<=j&&j<="9";)t+=j;if("e"===j||"E"===j)for(t+=j,x(),"-"!==j&&"+"!==j||(t+=j,x());"0"<=j&&j<="9";)t+=j,x();if(e=+t,!isNaN(e))return e;U("Bad number")}function V(){var e,t,n,r="";if('"'===j)for(;x();){if('"'===j)return x(),r;if("\\"===j)if(x(),"u"===j){for(t=n=0;t<4&&(e=parseInt(x(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof L[j])break;r+=L[j]}else r+=j}U("Bad string")}function q(){for(;j&&j<=" ";)x()}var H=t.CwsProtocol=function(){this.bs=function(e,t,n,r){return r.seq=e,r.st=t,r.t=n,r},this.Ms=function(e,t){var n=H.Ls;return this.bs(e,t,n,{})}};H.version="2.6",H.Vs="/0/wsg",H.M="0",H.ks=!1,H.Us=2,H.Fs=-1,H.Bs=-1,H.Hs=1e3,H.Ks="sdk.js.1",H.Gs="CwsStateChangeEvent",H.js="CwsErrorEvent",H.Ls="CwsSessionEndEvent",H.xs="CwsCustomEvent",H.Ws="CwsSeekEvent",H.qs="CwsDataSamplesEvent",H.Ys="ok",H.Js="err",H.Qs="clid",H.Xs="cfg",H.zs="evs",H.Zs="maxhbinfos",H.$s="slg",H.tl="hbi",H.nl="gw",H.il="fp",H.el="csi_en",H.sl="CwsSessionHb",H.ll="t",H.ul="st",H.ol="sst",H.rl="lv",H.al="seq",H.hl="cid",H.cl="clid",H.fl="clv",H.dl="pver",H.vl="iid",H.El="sid",H.pl="vid",H.gl="an",H.Al="pn",H.Sl="tags",H.Rl="sf",H.yl="evs",H.Cl="lg",H.ml="hbinfos",H.Tl="sdk",H.Il="pj",H.Nl="ps",H.wl="br",H._l="cl",H.Ol="efps",H.Pl="afps",H.Dl="rfpstot",H.bl="rfpscnt",H.Ml="rs",H.Ll="pht",H.Vl="bl",H.kl="url",H.Ul="caps",H.Fl="pm",H.Bl="w",H.Hl="h",H.Kl="ct",H.Gl="le",H.jl="dftot",H.xl="dfcnt",H.Wl="ss",H.ql="csi_n",H.Yl="csi_t",H.Jl="csi_l",H.Ql="csi_v",H.Xl="csi_c",H.zl="sch",H.Zl="br",H.$l="brv",H.tu="dvb",H.nu="dvma",H.iu="dvm",H.eu="dvt",H.su="dvv",H.lu="sw",H.uu="sh",H.ou="scf",H.ru="fw",H.au="fwv",H.hu="cc",H.cu="mn",H.fu="mv",H.du="os",H.vu="osv",H.Eu="cat",H.pu="caps",H.gu="t",H.Au="seq",H.Su="st",H.Ru="act",H.yu="skto",H.Cu="err",H.mu="ft",H.Tu="new",H.Iu="old",H.Nu="name",H.wu="attr",H._u="seq",H.Ou="err",H.Pu="rtt",H.Du="ad",H.bu="csi",H.Mu=function(e){switch(e){case c.PlayerState.STOPPED:return H.Lu;case c.PlayerState.PLAYING:return H.Vu;case c.PlayerState.BUFFERING:return H.ku;case c.PlayerState.PAUSED:return H.Uu;case c.PlayerState.NOT_MONITORED:return H.Fu;default:return H.Bu}},H.Lu=1,H.Vu=3,H.ku=6,H.Uu=12,H.Fu=98,H.Bu=100,H.Hu={Ku:0,ct:1,Gu:2,ju:4},H.xu={Wu:0},t.JSONInterface=function(){this.qu=function(e){},this.Yu=function(e){}};var K=t.LibJSONInterface=function(){this.qu=function(e){var t=null;try{t=A.stringify(e)}catch(e){}return t},this.Yu=function(e){var t=null;try{t=F(e)}catch(e){}return ee.Ju(t)||(t=null),t}},W=t.CwsHeartbeat=function(){this.Qu={},function(){}.apply(this,arguments),this.get=function(){return this.Qu},this.Xu=function(e,t){this.Qu[e]=t},this.zu=function(e,t,n){this.Qu[e]||(this.Qu[e]={}),this.Qu[e][t]=n},this.Zu=function(e){this.Xu(H.ll,e)},this.$u=function(e){this.Xu(H.ul,e)},this.no=function(e){this.Xu(H.ol,e)},this.io=function(e){this.Xu(H.rl,e)},this.eo=function(e){this.Xu(H.al,e)},this.so=function(e){this.Xu(H.hl,e)},this.lo=function(e){this.Xu(H.cl,e)},this.uo=function(e){this.Xu(H.fl,e)},this.oo=function(e){this.Xu(H.dl,e)},this.ro=function(e){this.Xu(H.pu,e)},this.Si=function(e){this.Xu(H.El,e)},this.ao=function(e){this.Xu(H.vl,e)},this.ho=function(e){this.Xu(H.pl,e)},this.co=function(e){this.Xu(H.gl,e)},this.fo=function(e){this.Xu(H.Al,e)},this.do=function(e){this.Xu(H.Sl,e)},this.vo=function(e){this.Xu(H.Rl,e)},this.Eo=function(e){this.Xu(H.Ul,e)},this.po=function(e){this.Xu(H.yl,e)},this.go=function(e){this.Xu(H.Tl,e)},this.Ao=function(e){this.Xu(H.Cl,e)},this.So=function(e){this.Xu(H.ml,e)},this.Se=function(e){this.Xu(H.Nl,e)},this.Ro=function(e){this.Xu(H.Il,e)},this.yo=function(e){this.Xu(H._l,e)},this.Co=function(e){this.Xu(H.wl,e)},this.mo=function(e){this.Xu(H.Ml,e)},this.To=function(e){this.Xu(H.Ol,e)},this.Io=function(e){this.Xu(H.Pl,e)},this.No=function(e){this.Xu(H.bl,e)},this.wo=function(e){this.Xu(H.Dl,e)},this._o=function(e){this.zu(H.Fl,H.zl,e)},this.Oo=function(e){this.zu(H.Fl,H.Zl,e)},this.Po=function(e){this.zu(H.Fl,H.$l,e)},this.Do=function(e){this.zu(H.Fl,H.tu,e)},this.bo=function(e){this.zu(H.Fl,H.nu,e)},this.Mo=function(e){this.zu(H.Fl,H.iu,e)},this.Lo=function(e){this.zu(H.Fl,H.eu,e)},this.Vo=function(e){this.zu(H.Fl,H.su,e)},this.ko=function(e){this.zu(H.Fl,H.ru,e),this.Xu(H.ru,e)},this.Uo=function(e){this.zu(H.Fl,H.au,e),this.Xu(H.au,e)},this.Fo=function(e){this.zu(H.Fl,H.du,e.toUpperCase())},this.Bo=function(e){this.zu(H.Fl,H.vu,e)},this.Ho=function(e){this.zu(H.Fl,H.Eu,e)},this.Ko=function(e){this.zu(H.Fl,H.lu,e)},this.Go=function(e){this.zu(H.Fl,H.uu,e)},this.jo=function(e){this.zu(H.Fl,H.ou,e)},this.xo=function(e){this.Xu(H.jl,e)},this.$e=function(e){this.Xu(H.xl,e)},this.Wo=function(e){this.Xu(H.Ll,e)},this.qo=function(e){this.Xu(H.Vl,e)},this.Yo=function(e){this.Xu(H.kl,e)},this.Jo=function(e){this.Xu(H.Bl,e)},this.Qo=function(e){this.Xu(H.Hl,e)},this.Xo=function(e){this.Xu(H.Kl,e)},this.zo=function(e){this.Xu(H.Gl,e)},this.Zo=function(){this.Xu(H.Du,!0)},this.$o=function(e){this.Xu(H.Wl,e)},this.setModuleName=function(e){this.zu(H.hu,H.cu,e)},this.tr=function(e){this.zu(H.hu,H.fu,e)},this.nr=function(e){this.Xu(H.bu,e)},this.ir=function(e){null!=e&&this.Xu(H.ql,e)},this.er=function(e){null!=e&&this.Xu(H.Yl,e)},this.sr=function(e){null!=e&&this.Xu(H.Jl,e)},this.lr=function(e){null!=e&&this.Xu(H.Ql,e)},this.ur=function(e){null!=e&&this.Xu(H.Xl,e)}},z=t.CwsSession=function(t,n,r,i,a,u,l,d,f,p,h,g){var y=this;y.or=null,y.pt=null,y.rr=0,y.ar=0,y.hr=H.Hu.Ku,y.cr=H.xu.Wu,y.fr=[],y.dr=-1,y.Jn=-2,y.bi=-1,y.vr=-1,y.Er=null,y.Qn=c.PlayerState.UNKNOWN,y.cn=-1,y.pr=-1,y.on=null,y.ii=-1,y.ei=-1,y.oe=null,y.in=null,y.ln=null,y.gr=null,y.Ar=null,y.Sr={},y.Rr=null,y.yr=null,y.Cr=null,y.mr=null,y.Tr=null,y.Ir=null,y.Nr=null,y.wr=null,y._r=null,y.Or=null,y.Pr=null,y.Dr=null,y.br=null,y.Mr=null,y.Lr=null,y.ti=null,y.ni=null,y.N=null,y.w=null,y.ke=null,y.Vr=null,y.kr=!1,y.Ur=!1,y.Fr=!1,y.Br=!1,y.Hr=null,y.Kr=1e3,y.Gr=0,y.jr=0,y.xr={},y.m={},y.Wr=!1,y.qr=null,y.Yr=null,y.Jr=null,y.Qr=null,y.Xr=null,y.zr=null,y.Zr=12e4,y.$r=H.ks,y.ta=!1,y.na=null,function(e,t,n,r,i,o,a,s,u,c,l,d){this.ia=e,this.Ki=t,this.Rn=n,this.c=r,this.c.setModuleName("CwsSession"),this.S=i,this.Gi=o,this.ea=a,this.sa=s,this.la=u,this.Cn=c,this.ua=l,this.pt=d,null!=this.pt&&(y.cn=this.pt.encodedFrameRate,y.on=this.pt.streamUrl,y.pr=this.pt.duration),null!=this.ua&&(y.na=y.ua.get(Q.D))}.apply(this,arguments),this.rt=function(){this.ua=null,this.Cn=null,this.A=null,this.la=null,this.sa=null,this.ea=null,this.Gi=null,this.S=null,this.c=null,this.Rn=null,this.Ki=null,this.ia.oa(),this.ia=null,this.Vr=null,this.Fr=!0},this.ra=function(e){this.aa=e,this.ha=this.aa.ha,this.c.Si(this.aa.y),this.rr=this.la.current(),this.ca()||this.fa()?(this.hr+=z.da,y.c.info("start(): assetName="+y.pt.assetName)):y.c.info("start()"+y.va())},this.Ea=function(){this.Br=!0},this.pa=function(){this.c.debug("initialize()"),(this.ca()||this.fa()||this.ga())&&(y.Aa(),y.Sa(),y.Ra(),(this.ca()||this.fa())&&y.ya())},this.Ca=function(){this.c.debug("end(): schedule the last hb before session cleanup"+y.va()),this.ma(),this.Ta(),this.Ia(),this.Na()},this.wa=function(){this.Br||(this.Na(),this._a())},this.Oo=function(e){var t=y.Rr;t!==e&&null!=e&&(y.c.debug("Change browserName from "+t+" to "+e),y.Rr=e)},this.Po=function(e){var t=y.yr;t!==e&&null!=e&&(y.c.debug("Change browserVersion from "+t+" to "+e),y.yr=e)},this.Do=function(e){var t=y.Cr;t!==e&&null!=e&&(y.c.debug("Change deviceBrand from "+t+" to "+e),y.Cr=e)},this.bo=function(e){var t=y.mr;t!==e&&null!=e&&(y.c.debug("Change deviceManufacturer from "+t+" to "+e),y.mr=e)},this.Mo=function(e){var t=y.Tr;t!==e&&null!=e&&(y.c.debug("Change deviceModel from "+t+" to "+e),y.Tr=e)},this.Lo=function(e){var t=y.Ir;t!==e&&null!=e&&(y.c.debug("Change deviceType from "+t+" to "+e),y.Ir=e)},this.Vo=function(e){var t=y.Nr;t!==e&&null!=e&&(y.c.debug("Change deviceVersion from "+t+" to "+e),y.Nr=e)},this.Fo=function(e){var t=y.Or;t!==e&&null!=e&&(y.c.debug("Change operatingSystemName from "+t+" to "+e),y.Or=e)},this.Bo=function(e){var t=y.Pr;t!==e&&null!=e&&(y.c.debug("Change operatingSystemVersion from "+t+" to "+e),y.Pr=e)},this.Ho=function(e){var t=y.Dr;t!==e&&null!=e&&(y.c.debug("Change deviceCategory from "+t+" to "+e),y.Dr=e)},this.Ko=function(e){var t=y.br;t!==e&&null!=e&&(y.c.debug("Change screenWidth from "+t+" to "+e),y.br=e)},this.Go=function(e){var t=y.Mr;t!==e&&null!=e&&(y.c.debug("Change screenHeight from "+t+" to "+e),y.Mr=e)},this.jo=function(e){var t=y.Dr;t!==e&&null!=e&&(y.c.debug("Change scaleFactor from "+t+" to "+e),y.Lr=e)},this.Oa=function(){return y.wr},this.ko=function(e){var t=y.wr;t!==e&&null!=e&&(y.c.debug("Change frameworkName from "+t+" to "+e),y.wr=e)},this.Pa=function(){return y._r},this.Uo=function(e){var t=y._r;t!==e&&null!=e&&(y.c.debug("Change frameworkVersion from "+t+" to "+e),y._r=e)},this.Yo=function(e){var t;null!=y.pt.streamUrl||(t=y.on)!==e&&null!=e&&(y.c.debug("Change stream url from "+t+" to "+e),y.on=e)},this.Da=function(){y.Ta(),y.ta||(y.ba(),y.zr=y.Gi.create(y.ba,y.Zr,"CwsSession.startCdnTimer"),y.c.debug("fetching cdn ip timer started"))},this.Ta=function(){null!=y.zr&&(y.zr(),y.Ma(null,null,null,null,null),y.zr=null)},this.ba=function(){y.c.debug("detectCDNServerIp(): For "+y.on),y.$r?y.La():y.Ta()},this.La=function(){try{var e;"function"==typeof XMLHttpRequest?((e=new XMLHttpRequest).open("HEAD",y.on,!0),e.setRequestHeader("Pragma","akamai-x-cache-on"),e.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(0<=this.getAllResponseHeaders().indexOf("x-cache")||0<=this.getAllResponseHeaders().indexOf("X-Cache"))?y.Ma("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):y.Ma("null","header","null","null",""+this.status))},e.send()):y.c.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(e){y.c.info("Exception caught in makeAkamaiHeadRequest")}},this.Ma=function(e,t,n,r,i){var o={},a={};y.qr!=e&&(null!==y.qr&&(a[H.ql]=y.qr),y.qr=e,null===y.qr?o[H.ql]="null":o[H.ql]=y.qr),y.Yr!=t&&(null!==y.Yr&&(a[H.Yl]=y.Yr),y.Yr=t,null===y.Yr?o[H.Yl]="null":o[H.Yl]=y.Yr),y.Jr!=n&&(null!==y.Jr&&(a[H.Jl]=y.Jr),y.Jr=n,null===y.Jr?o[H.Jl]="null":o[H.Jl]=y.Jr),y.Qr!=r&&(null!==y.Qr&&(a[H.Ql]=y.Qr),y.Qr=r,null===y.Qr?o[H.Ql]="null":o[H.Ql]=y.Qr),y.Xr!=i&&(null!==y.Xr&&(a[H.Xl]=y.Xr),y.Xr=i,null===y.Xr?o[H.Xl]="null":o[H.Xl]=y.Xr),"{}"!=ee.Va(o)&&y.ka(o,a)},this.Ua=function(e){var t=y.Jn;t!==e&&0<e&&(y.c.info("Change bitrate from "+t+" to "+e),y.Fa(t,e),y.Jn=e)},this.xo=function(e){var t=y.bi;t!==e&&0<=e&&(y.c.info("Change dropped frames total from "+t+" to "+e),y.Ba(t,e),y.bi=e)},this.$e=function(e){var t=y.vr,n=e+(-1===y.vr?0:y.vr);t!==e&&0<=n&&(y.c.info("Change dropped frames count from "+t+" to "+n),y.Ha(t,n),y.vr=n)},this.mo=function(e){var t=y.Er;t!==e&&null!=e&&(y.c.info("Change resource from "+t+" to "+e),y.Er=e)},this.co=function(e){y.in!==e&&null!=e&&(y.c.info("Change assetName from "+y.in+" to "+e),y.in=e)},this.io=function(e){var t=y.Ar;t!==e&&null!=e&&(y.c.info("Change isLive from "+t+" to "+e),y.Ar=e)},this.ho=function(e){var t=y.ln;t!==e&&null!=e&&(y.c.info("Change viewerId from "+t+" to "+e),y.ln=e)},this.fo=function(e){var t=y.gr;t!==e&&null!=e&&(y.c.info("Change playerName from "+t+" to "+e),y.gr=e)},this.do=function(e){var t=y.Sr;ee.Ka(t,e)||null==e||(y.c.info("Change tags from "+ee.Va(t)+" to "+ee.Va(e)),y.Sr=e)},this.To=function(e){0<y.pt.encodedFrameRate||(y.c.debug("setEncodedFrameRate(): "+e),y.cn=e)},this.yo=function(e){0<y.pt.duration||(y.c.debug("setContentLength(): "+e),y.pr=e)},this.Se=function(e){var t;y.Ur||e!=c.PlayerState.PLAYING||(y.Ga(!1),y.Ur=!0,ee.St(y.pt.viewerId)||y.c.error("Missing viewerId. viewerId should be updated before first frame is rendered."),ee.St(y.pt.streamType)&&o.StreamType.UNKNOWN!==y.pt.streamType||y.c.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),ee.St(y.pt.applicationName)||y.c.error("Missing applicationName. applicationName should be updated before first frame is rendered.")),y.Qn!==e&&(t=y.Qn,y.c.info("setPlayerState(): changing player state from "+t+" to "+e),y.ja(t,e),y.Qn=e)},this.xa=function(e){var t=y.ii;t!==e&&0<e&&(y.c.debug("Change stream resolution width from "+t+" to "+e),y.Wa(t,e),y.ii=e)},this.qa=function(e){var t=y.ei;t!==e&&0<e&&(y.c.debug("Change stream resolution height from "+t+" to "+e),y.Ya(t,e),y.ei=e)},this.Xo=function(e){var t=y.N;t!==e&&null!=e&&(y.c.debug("Change network connection type from "+t+" to "+e),y.Ja(t,e),y.N=e)},this.zo=function(e){var t=y.w;t!==e&&null!=e&&(y.c.debug("Change network link encryption from "+t+" to "+e),y.Qa(t,e),y.w=e)},this.nr=function(e){y.ta=!0,y.Ta();var t=y.ke;t!==e&&ee.St(e)&&(y.c.debug("Change CDN Server IP from "+t+" to "+e),y.Xa(t,e),y.ke=e)},this.Ga=function(e){var t;y.c.debug("togglePauseJoin()"),y.kr!==e?(t=y.kr,e=!y.kr,y.za(t,e),y.kr=!y.kr):y.c.debug("togglePauseJoin(): same value, ignoring")},this.Za=function(e,t){y.$a(e,t)},this.th=function(e,t){var n;t[H.gu]=e,t[H.Su]=this.nh(),t[H.Au]=this.ia.ih(),this.oe&&(n=ie.eh(this.oe.getPHT(),0,null,-1),e=ie.eh(this.oe.getBufferLength(),0,null,-1),0<=n&&(t[H.Ll]=n),0<e&&(t[H.Vl]=e)),this.ia.sh(t)},this.lh=function(e){y.oe=e,null!=y.oe?y.uh():y.oh()},this.ma=function(){var e=this.nh(),t=this.rh();e=this.sa.Ms(t,e),this.ia.sh(e)},this.$a=function(e,t){var n={};n[H.Cu]=e,n[H.mu]=t,this.th(H.js,n)},this.Fa=function(e,t){var n={},r={};0<e&&(r[H.wl]=e),n[H.wl]=t,this.ka(n,r)},this.ah=function(e,t){var n={};n[H.Ru]=e,0<=t&&(n[H.yu]=t),this.th(H.Ws,n)},this.Wa=function(e,t){var n={},r={};-1!==e&&(r[H.Bl]=e),n[H.Bl]=t,this.ka(n,r)},this.Ya=function(e,t){var n={},r={};-1!==e&&(r[H.Hl]=e),n[H.Hl]=t,this.ka(n,r)},this.Ja=function(e,t){var n={},r={};null!==e&&(r[H.Kl]=e),n[H.Kl]=t,this.ka(n,r)},this.Qa=function(e,t){var n={},r={};null!==e&&(r[H.Gl]=e),n[H.Gl]=t,this.ka(n,r)},this.Xa=function(e,t){var n={},r={};ee.St(e)&&(r[H.bu]=e),n[H.bu]=t,this.ka(n,r)},this.Ba=function(e,t){var n={},r={};0<=e&&(r[H.jl]=e),n[H.jl]=t,this.ka(n,r)},this.Ha=function(e,t){var n={},r={};0<=e&&(r[H.xl]=e),n[H.xl]=t,this.ka(n,r)},this.za=function(e,t){var n={},r={};r[H.Il]=e,n[H.Il]=t,this.ka(n,r)},this.ja=function(e,t){var n={},r={};n[H.Nl]=H.Mu(t),r[H.Nl]=H.Mu(e),this.ka(n,r)},this.ka=function(e,t){var n={};n[H.Tu]=e,null!=t&&0<ee._t(t)&&(n[H.Iu]=t),this.th(H.Gs,n)},this.hh=function(e,t){var n={};n[H.Nu]=e,0<ee._t(t)&&(n[H.wu]=t),this.th(H.xs,n)},this.Ia=function(){null!=y.or&&(y.or(),y.or=null)},this._a=function(){y.Ia();var e=1e3*y.Rn.heartbeatInterval;y.or=y.Gi.create(y.Na,e,"Session.sendHeartbeat:"+this.ha)},this.oh=function(){null!=y.Hr&&(y.Hr(),y.Hr=null)},this.uh=function(){y.oh(),y.Hr=y.Gi.create(y.ch,y.Kr,"Session.startRfpsTimer")},this.fh=function(){var e={err:"pending"};e.seq=y.ar-1,e.sentAt=y.nh(),e.rtt=-1,y.fr.push(e);for(var t=0;t<y.fr.length;t++)"ok"===(e=y.fr[t]).err&&(y.fr.splice(t,1),t--)},this.dh=function(e,t){for(var n=0;n<y.fr.length;n++){var r=y.fr[n];r.seq===e&&(r.rtt=y.nh()-r.sentAt,r.err=t)}},this.vh=function(e){for(var t=0;t<y.fr.length;t++){var n=y.fr[t];n.seq===e&&(n.rtt=y.nh()-n.sentAt,n.err="ok")}},this.Eh=function(){for(var e,t,n=y.ua.get(Q.ph),r=[],i=-1,o=0;o<y.fr.length;o++)if("ok"==(t=y.fr[o]).err){i=t.seq;break}for(var a=0;a<y.fr.length;a++)((e=(t=y.fr[a]).seq)<y.ar-n||e<i)&&r.push(a);for(var s=[],u=0;u<y.fr.length;u++)e=(t=y.fr[u]).seq,r.indexOf(u)<0&&s.push(y.fr[u]);y.fr=s},this.gh=function(){y.Eh();for(var e=[],t=0;t<y.fr.length;t++){var n=y.fr[t],r={};r[H._u]=n.seq,r[H.Pu]=n.rtt,r[H.Ou]=n.err,e.push(r)}return e},this.Ah=function(){var e=y.ia.oa();if(y.ga()&&0===e.length)return null;var t=new W;if(t.Zu(H.sl),t.so(y.Rn.customerKey),t.lo(y.ua.get(Q.D)),t.Si(y.aa.y),t.eo(y.ar),t.oo(H.version),t.uo(y.Ki.version),t.ao(y.Ki.y),t.ro(0),null!=y.Ki.N?t.Xo(y.Ki.N):null!=y.N&&t.Xo(y.N),null!=y.Ki.w?t.zo(y.Ki.w):null!=y.w&&t.zo(y.w),ee.St(y.ke)&&t.nr(y.ke),t._o(H.Ks),null!=y.Rr&&t.Oo(y.Rr),null!=y.yr&&t.Po(y.yr),null!=y.Cr&&t.Do(y.Cr),null!=y.mr&&t.bo(y.mr),null!=y.Tr&&t.Mo(y.Tr),null!=y.Ir&&t.Lo(y.Ir),null!=y.Nr&&t.Vo(y.Nr),null!=y.Or&&t.Fo(y.Or),null!=y.Pr&&t.Bo(y.Pr),null!=y.Dr&&t.Ho(y.Dr),null!=y.wr&&t.ko(y.wr),null!=y._r&&t.Uo(y._r),null==y.br||isNaN(y.br)||t.Ko(parseInt(y.br,10)),null==y.Mr||isNaN(y.Mr)||t.Go(parseInt(y.Mr,10)),null==y.Lr||isNaN(y.Lr)?(null!=y.br&&!isNaN(y.br)||null!=y.Mr&&!isNaN(y.Mr))&&t.jo(1):t.jo(parseFloat(y.Lr)),null!=y.oe&&(y.ti=y.oe.di(),null!=y.ti&&t.setModuleName(y.ti),y.ni=y.oe.vi(),null!=y.ni&&t.tr(y.ni),null!=y.oe.Ei()&&(y.wr=y.oe.Ei(),t.ko(y.wr)),null!=y.oe.gi()&&(y._r=y.oe.gi(),t.Uo(y._r))),null!=y.ln&&t.ho(y.ln),0<ee._t(y.Sr)&&t.do(y.Sr),y.ca()||y.fa()){y.fa()&&t.Zo(),null!=y.in&&t.co(y.in),t.vo(y.hr);var n=H.Mu(y.Qn);t.Se(n),t.Ro(y.kr),null!=y.gr&&t.fo(y.gr),null!=y.Ar&&t.io(y.Ar),0<y.pr&&t.yo(y.pr),0<y.Jn&&t.Co(y.Jn),null!==y.Er&&t.mo(y.Er),0<y.cn&&t.To(y.cn);var r,i=-1;if(n=-1,null!=y.oe&&(i=ie.eh(y.oe.getPHT(),0,null,-1),n=ie.eh(y.oe.getBufferLength(),0,null,-1)),null!=y.Ki._?r=y.Ki._:null!=y.oe&&(r=y.oe.getSignalStrength()),0<=i&&t.Wo(i),0<n&&t.qo(n),0<(n=y.Sh())&&t.Io(n),0<y.jr&&t.wo(ie.eh(y.jr,0,null,-1)),0<y.Gr&&t.No(ie.eh(y.Gr,0,null,-1)),r!==c.DEFAULT_SIGNAL_STRENGTH&&t.$o(r),null!=y.on&&t.Yo(y.on),0<y.ii&&t.Jo(y.ii),0<y.ei&&t.Qo(y.ei),-1<y.bi&&t.xo(y.bi),-1<y.vr&&(t.$e(y.vr),0<y.vr&&(y.Ha(y.vr,0),y.vr=0)),null!=y.Vr)for(var o in y.Vr)t.Xu(o,y.Vr[o])}else t.vo(H.Hu.Ku);return 0<e.length&&t.po(e),t.Eo(y.cr),t.go(!0),y.ua.get(Q.Rh)&&t.Ao(y.Cn.oa()),0<y.ua.get(Q.ph)&&0<(e=y.gh()).length&&t.So(e),0==y.ar&&(t=y.yh(t)),0!=y.ar&&(t=y.Ch(t)),t.no(y.rr),t.$u(y.nh()),y.$r&&(t.ir(y.qr),t.er(y.Yr),t.sr(y.Jr),t.lr(y.Qr),t.ur(y.Xr)),y.ar++,t.get()},this.Ch=function(e){var t,n=y.m,r={};for(t in e.Qu.tags)n.hasOwnProperty(t)||(r[t]=e.Qu.tags[t]);e.Qu.tags=r,y.m={};for(var i=0;i<y.xr.length;i++)y.Ki.m.hasOwnProperty(y.xr[i])?y.Ki.I.hasOwnProperty(y.xr[i])?y.Ki.I[y.xr[i]]==Q.Kt.Gt?(y.m[Q.mh+""+y.xr[i]]=Q.Kt.Gt,y.Ki.T("End-user chose to opt-out of personal data collection")):y.Ki.I[y.xr[i]]==Q.Kt.xt?(y.m[Q.mh+""+y.xr[i]]=Q.Kt.xt,y.Ki.T("End-user chose to opt-out of personal data collection")):y.Ki.I[y.xr[i]]==Q.Kt.Ht?(y.m[Q.mh+""+y.xr[i]]=Q.Kt.Ht,y.Ki.T("End-user used privacy settings and chose to opt-out of personal data collection")):(y.m[Q.mh+""+y.xr[i]]=y.Ki.m[y.xr[i]],y.Ki.T("Data collection successful")):(y.m[Q.mh+""+y.xr[i]]=y.Ki.m[y.xr[i]],y.Ki.T("Data collection successful")):y.m[Q.mh+""+y.xr[i]]=Q.Kt.Th;var o,a={};for(o in n){var s=o.split(".");"{}"!=JSON.stringify(y.xr)&&-1!=y.xr.indexOf(""+s[2])||n[Q.mh+""+s[2]]==Q.Kt.Ih||(y.Ki.T("Data collection restricted from Conviva back-end"),y.m[Q.mh+""+s[2]]=Q.Kt.Ih,a[Q.mh+""+s[2]]=Q.Kt.Ih)}if("{}"!==JSON.stringify(y.m)){var u,c=ee.Nh(y.m);for(u in e.Qu.tags)c[u]=e.Qu.tags[u];if(e.Qu.tags=c,!ee.Ka(n,y.m)){var l={};if("{}"!==JSON.stringify(a)&&(l[H.Sl]=a),"{}"!==JSON.stringify(n)){for(var d in n)void 0!==y.m[d]&&n[d]!==y.m[d]&&(null==l[H.Sl]&&(l[H.Sl]={}),l[H.Sl][d]=y.m[d]);for(d in y.m)n.hasOwnProperty(d)&&n[d]===y.m[d]||(null==l[H.Sl]&&(l[H.Sl]={}),l[H.Sl][d]=y.m[d])}"{}"==JSON.stringify(n)&&(l[H.Sl]=y.m);var f,p,h={};h[H.Tu]=l,h[H.gu]=H.Gs,h[H.Su]=y.nh(),h[H.Au]=y.ia.ih(),y.oe&&(f=ie.eh(y.oe.getPHT(),0,null,-1),p=ie.eh(y.oe.getBufferLength(),0,null,-1),0<=f&&(h[H.Ll]=f),0<p&&(h[H.Vl]=p)),null==e.Qu.evs&&(e.Qu.evs=[]),e.Qu.evs.push(h)}}return e},this.yh=function(e){var t=y.wh();if("{}"===JSON.stringify(t))return e;var n,r=ee.Nh(t);for(n in e.Qu.tags)r[n]=e.Qu.tags[n];e.Qu.tags=r;var i={};i[H.Sl]=t;var o={};return o[H.Tu]=i,o[H.gu]=H.Gs,o[H.Su]=y.nh(),o[H.Au]=y.ia.ih(),y.oe&&(t=ie.eh(y.oe.getPHT(),0,null,-1),i=ie.eh(y.oe.getBufferLength(),0,null,-1),0<=t&&(o[H.Ll]=t),0<i&&(o[H.Vl]=i)),null==e.Qu.evs&&(e.Qu.evs=[]),e.Qu.evs.push(o),e},this.wh=function(){var e={};if("undefined"!=typeof navigator&&null!=navigator){if(e["c3.fp.cookie"]=null!=navigator.cookieEnabled&&null!=navigator.cookieEnabled?""+navigator.cookieEnabled:"",e["c3.fp.memory"]=null!=navigator.deviceMemory&&null!=navigator.deviceMemory?""+navigator.deviceMemory:"",e["c3.fp.hwConc"]=null!=navigator.hardwareConcurrency&&null!=navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",e["c3.fp.java"]=""+("function"!=typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),e["c3.fp.lang"]=null!=navigator.language&&null!=navigator.language?""+navigator.language:"",e["c3.fp.langs"]=null!=navigator.languages&&null!=navigator.languages&&0<navigator.languages.length?""+navigator.languages.toString():"",e["c3.fp.maxTp"]=null!=navigator.maxTouchPoints&&null!=navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",e["c3.fp.plugins"]="",null!=navigator.plugins&&0<navigator.plugins.length)for(var t=0;t<navigator.plugins.length;t++)e["c3.fp.plugins"]+=navigator.plugins[t].name+",";if(e["c3.fp.mime"]="",null!=navigator.mimeTypes&&0<navigator.mimeTypes.length)for(var n=0;n<navigator.mimeTypes.length;n++)e["c3.fp.mime"]+=navigator.mimeTypes[n].type+",";e["c3.fp.sysLang"]=null!=navigator.systemLanguage&&null!=navigator.systemLanguage?""+navigator.systemLanguage:"",e["c3.fp.platform"]=null!=navigator.platform&&null!=navigator.platform?""+navigator.platform:"",e["c3.fp.product"]=null!=navigator.product&&null!=navigator.product?""+navigator.product:"",e["c3.fp.productSub"]=null!=navigator.productSub&&null!=navigator.productSub?""+navigator.productSub:"",e["c3.fp.vendor"]=null!=navigator.vendor&&null!=navigator.vendor?""+navigator.vendor:"",e["c3.fp.vendorSub"]=null!=navigator.vendorSub&&null!=navigator.vendorSub?""+navigator.vendorSub:"";var r=y._h();""!=r&&(e["c3.fp.canvFp"]=r)}return"undefined"!=typeof window&&null!=window&&(null!=window.screen&&(e["c3.fp.availHeight"]=null!=window.screen.availHeight&&null!=window.screen.availHeight?""+window.screen.availHeight:"",e["c3.fp.availWidth"]=null!=window.screen.availWidth&&null!=window.screen.availWidth?""+window.screen.availWidth:"",e["c3.fp.height"]=null!=window.screen.height&&null!=window.screen.height?""+window.screen.height:"",e["c3.fp.width"]=null!=window.screen.width&&null!=window.screen.width?""+window.screen.width:"",e["c3.fp.colorDepth"]=null!=window.screen.colorDepth&&null!=window.screen.colorDepth?""+window.screen.colorDepth:"",e["c3.fp.deviceXDPI"]=null!=window.screen.deviceXDPI&&null!=window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",e["c3.fp.deviceYDPI"]=null!=window.screen.deviceYDPI&&null!=window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),e["c3.fp.dpi"]=null!=window.devicePixelRatio&&null!=window.devicePixelRatio?""+window.devicePixelRatio:"",e["c3.fp.secure"]=null!=window.isSecureContext&&null!=window.isSecureContext?""+window.isSecureContext:""),e},this._h=function(){if("undefined"==typeof document||null==document)return"";var e=document.createElement("CANVAS"),t=e.getContext("2d"),n="conviva";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f40",t.fillRect(null!=navigator.plugins&&null!=navigator.plugins?navigator.plugins.length:0,null!=navigator.mimeTypes&&null!=navigator.mimeTypes?navigator.mimeTypes.length:0,null!=navigator.product&&null!=navigator.product?navigator.product.length:0,null!=navigator.vendor&&null!=navigator.vendor?navigator.vendor.length:0),t.fillStyle="#069",t.fillText(n,null!=navigator.maxTouchPoints&&null!=navigator.maxTouchPoints?navigator.maxTouchPoints:0,null!=navigator.product&&null!=navigator.product?navigator.product.length:0),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,null!=navigator.deviceMemory&&null!=navigator.deviceMemory?navigator.deviceMemory:0,null!=navigator.hardwareConcurrency&&null!=navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),ee.Oh(e.toDataURL())},this.Na=function(){var e;y.Fr||null!=(e=y.Ah())&&y.Ph(e)},this.ch=function(){var e;y.Qn!==c.PlayerState.PLAYING||null==y.oe||0<(e=y.oe.getRenderedFrameRate())&&(y.jr+=e,y.Gr++)},this.Sh=function(){return 0<y.jr&&0<y.Gr?ee.Dh.Cast(+y.jr/y.Gr):(this.ch(),0<y.jr&&0<y.Gr?ee.Dh.Cast(+y.jr/y.Gr):c.DEFAULT_RENDERED_FRAME_RATE)},this.Ph=function(e){y.fh();var t=y.ar-1;y.c.info("postHeartbeat(): Send HB["+t+"]"+y.va()),y.ea.bh(e,(function(e,n){y.Mh(e,n,t)}))},this.Mh=function(e,t,n){y.Fr||y.S.P("onHeartbeatResponse",(function(){var r,i,o,a;e?null!=(i=t)?(y.c.debug("onHeartbeatResponse(): received valid response for HB["+n+"]"),y.vh(n),null==(a=i[H.Qs])||a!=(r=y.ua.get(Q.D))&&(y.c.debug("onHeartbeatResponse(): setting the client id to "+a+" (from gateway)"),y.ua.set(Q.D,a),y.ua.Lh(),r===H.M&&a!==H.M&&y.Ki.O()),null!=(a=i[H.Js])&&a!=H.Ys&&y.c.error("onHeartbeatResponse(): error from gateway: "+a),"object"==s(a=i[H.Xs])&&(null!=(i=a[H.Zs])&&y.ua.get(Q.ph)!==i&&(y.c.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+i+" (from gateway)"),y.ua.set(Q.ph,i)),(i=null!=(i=a[H.$s])&&ee.Vh(i))!==y.ua.get(Q.Rh)&&(y.c.debug("onHeartbeatResponse(): turning "+(i?"on":"off")+" sending of logs"),y.ua.set(Q.Rh,i)),null==(i=a[H.tl])||(o=ee.Dh.Cast(i))!=y.Rn.heartbeatInterval&&(y.c.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+o),y.Rn.heartbeatInterval=o,null!=y.or&&y._a()),null!=(o=a[H.nl])&&o!=y.Rn.gatewayUrl&&(y.c.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+o),y.Rn.gatewayUrl=o),y.kh()||(y.xr={},null!=(o=a[H.il])&&(y.Wr||(y.Wr=!0),y.c.debug("onHeartbeatResponse(): received fp from gateway: "+o),y.xr=o.split(",")),y.$r=a[H.el],1==y.$r?(y.c.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),null!=y.zr&&null!=y.zr||y.Da()):(y.c.debug("onHeartbeatResponse(): disabling the CDN Server IP collection (from gateway)"),y.Ta())))):y.c.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(a=t,ee.St(a)?ee.Uh(a,"HTTP timeout")?y.c.warning("onHeartbeatResponse(): "+a):y.c.error("onHeartbeatResponse(): failed to send heartbeat: "+a):(a=G.Fh,y.c.error("onHeartbeatResponse(): "+a)),y.dh(n,a))}))},this.nh=function(){return ee.Dh.Cast(y.la.current()-y.rr)},this.rh=function(){return this.ia.ih()},this.va=function(){return this.ga()?" (global session)":""},this.ga=function(){return this.ha==z.ft.Ku},this.kh=function(){return this.ha==z.ft.Ku&&"T"===this.Sr["c3.IPV4IPV6GlobalSession"]},this.ca=function(){return this.ha==z.ft.ct},this.fa=function(){return this.ha==z.ft.At},this.yt=function(e){y.Bh(e),y.Aa()},this.Bh=function(t){var n={},r={};if(ee.St(t.assetName)&&(y.pt.assetName!=t.assetName?(null!=y.pt.assetName&&(n[H.gl]=y.pt.assetName),r[H.gl]=t.assetName,y.pt.assetName=t.assetName):y.c.warning("mergeContentMetadata(): assetName was not changed.")),ee.St(t.applicationName)&&(y.pt.applicationName!=t.applicationName?(null!=y.pt.applicationName&&(n[H.Al]=y.pt.applicationName),r[H.Al]=t.applicationName,y.pt.applicationName=t.applicationName):y.c.warning("mergeContentMetadata(): applicationName was not changed.")),ee.St(t.streamUrl)&&(y.pt.streamUrl!=t.streamUrl?(null!=y.pt.streamUrl&&(n[H.kl]=y.pt.streamUrl),r[H.kl]=t.streamUrl,y.pt.streamUrl=t.streamUrl,y.on=y.pt.streamUrl):y.c.warning("mergeContentMetadata(): streamUrl was not changed.")),ee.St(t.viewerId)&&(y.pt.viewerId!=t.viewerId?(null!=y.pt.viewerId&&(n[H.pl]=y.pt.viewerId),r[H.pl]=t.viewerId,y.pt.viewerId=t.viewerId):y.c.warning("mergeContentMetadata(): viewerId was not changed.")),ee.St(t.defaultResource)&&(y.pt.defaultResource!=t.defaultResource?(null!=y.pt.defaultResource&&(n[H.Ml]=y.pt.defaultResource),r[H.Ml]=t.defaultResource,y.pt.defaultResource=t.defaultResource):y.c.warning("mergeContentMetadata(): defaultResource was not changed.")),ee.dt(t.duration)&&0<t.duration&&(y.pt.duration!=t.duration?(0<y.pr&&(n[H._l]=y.pr),r[H._l]=t.duration,y.pt.duration=t.duration,y.pr=y.pt.duration):y.c.warning("mergeContentMetadata(): duration was not changed.")),ee.dt(t.encodedFrameRate)&&0<t.encodedFrameRate&&(y.pt.encodedFrameRate!=t.encodedFrameRate?(-1<y.pt.encodedFrameRate&&(n[H.Ol]=y.pt.encodedFrameRate),r[H.Ol]=t.encodedFrameRate,y.pt.encodedFrameRate=t.encodedFrameRate,y.cn=y.pt.encodedFrameRate):y.c.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!=o.StreamType.UNKNOWN&&(y.pt.streamType!=t.streamType?(y.pt.streamType!=o.StreamType.UNKNOWN&&(y.pt.streamType==e.ContentMetadata.StreamType.LIVE?n[H.rl]=!0:n[H.rl]=!1),t.streamType==e.ContentMetadata.StreamType.LIVE?r[H.rl]=!0:r[H.rl]=!1,y.pt.streamType=t.streamType):y.c.warning("mergeContentMetadata(): streamType was not changed.")),0<ee._t(t.custom)){var i,a={},s={};for(i in t.custom)y.pt.custom[i]!=t.custom[i]?(a[i]=t.custom[i],y.pt.custom[i]&&(s[i]=y.pt.custom[i]),y.pt.custom[i]=t.custom[i]):y.c.info("mergeContentMetadata(): custom."+i+" was not changed.");0<ee._t(a)?(0<ee._t(s)&&(n[H.Sl]=s),r[H.Sl]=a):y.c.warning("mergeContentMetadata(): custom was not changed.")}0<ee._t(r)&&this.ka(r,n)},this.Aa=function(){var e;y.c.debug("setStatesFromContentMetadata()"),null!=y.pt.defaultResource&&this.mo(y.pt.defaultResource),null!=y.pt.streamUrl&&this.Yo(y.pt.streamUrl),0<y.pt.duration&&this.yo(y.pt.duration),0<y.pt.encodedFrameRate&&this.To(y.pt.encodedFrameRate),y.pt.streamType!==o.StreamType.UNKNOWN&&(e=y.pt.streamType===o.StreamType.LIVE,this.io(e)),null!=y.pt.assetName&&this.co(y.pt.assetName),null!=y.pt.viewerId&&this.ho(y.pt.viewerId),null==y.pt.applicationName&&null==y.pt.playerName||this.fo(y.pt.applicationName||y.pt.playerName),0<ee._t(y.pt.custom)&&this.do(y.pt.custom)},this.Sa=function(){var t={};if(this.ga()||(null!=y.pt.assetName?t[H.gl]=y.pt.assetName:y.c.warning("enqueueEventForContentMetadata(): assetName was not set."),null!=y.pt.applicationName?t[H.Al]=y.pt.applicationName:y.c.warning("enqueueEventForContentMetadata(): applicationName was not set."),null!=y.pt.streamUrl?t[H.kl]=y.pt.streamUrl:y.c.warning("enqueueEventForContentMetadata(): streamUrl was not set."),null!=y.pt.viewerId?t[H.pl]=y.pt.viewerId:y.c.warning("enqueueEventForContentMetadata(): viewerId was not set."),null!=y.pt.defaultResource?t[H.Ml]=y.pt.defaultResource:y.c.warning("enqueueEventForContentMetadata(): defaultResource was not set."),-1<y.pt.duration?t[H._l]=y.pt.duration:y.c.warning("enqueueEventForContentMetadata(): duration was not set."),-1<y.pt.encodedFrameRate?t[H.Ol]=y.pt.encodedFrameRate:y.c.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),y.pt.streamType!=o.StreamType.UNKNOWN?y.pt.streamType==e.ContentMetadata.StreamType.LIVE?t[H.rl]=!0:t[H.rl]=!1:y.c.warning("enqueueEventForContentMetadata(): streamType was not set.")),0<ee._t(y.pt.custom))for(var n in t[H.Sl]={},y.pt.custom)t[H.Sl][n]=y.pt.custom[n];else this.ga()||y.c.warning("enqueueEventForContentMetadata(): custom tags were not set.");0<ee._t(t)&&this.ka(t,null)},this.ya=function(){null!=y.pt&&ee.St(y.pt.assetName)||y.c.warning("Missing assetName during session creation"),null!=y.pt&&ee.St(y.pt.defaultResource)||y.c.warning("Missing resource during session creation"),null!=y.pt&&ee.St(y.pt.streamUrl)||y.c.warning("Missing streamUrl during session creation"),(null==y.pt||y.pt.encodedFrameRate<=0)&&y.c.warning("Missing encodedFrameRate during session creation"),null!=y.pt&&ee.St(y.pt.viewerId)||y.c.warning("Missing viewerId during session creation"),null!=y.pt&&null!=y.pt.streamType&&o.StreamType.UNKNOWN!==y.pt.streamType||y.c.warning("Missing streamType during session creation"),null!=y.pt&&ee.St(y.pt.applicationName)||y.c.warning("Missing applicationName during session creation"),(null==y.pt||y.pt.duration<=0)&&y.c.warning("Missing duration during session creation")},this.Bt=function(e,t){null==y.Vr&&(y.Vr={}),y.Vr[e]=t},this.Ra=function(){var e={};null!=y.Ki.N&&(e[H.Kl]=y.Ki.N,y.N=y.Ki.N),null!=y.Ki.w&&(e[H.Gl]=y.Ki.w,y.w=y.Ki.w),0<ee._t(e)&&this.ka(e,null)}};z.da=H.Hu.ct+H.Hu.Gu+H.Hu.ju,z.ft={ct:"Video",Ku:"Global",At:"Ad"},t.IMonitor=function(){this.Ti=function(e){},this.Ii=function(e){},this.Ni=function(e,t){},this.ri=function(e){},this.Hh=function(e){},this.ci=function(e){},this.Kh=function(e){},this.fi=function(e){},this.Gh=function(e){},this.pi=function(e){},this.Ai=function(e){},this.wi=function(e){},this._i=function(e){},this.Y=function(e){},this.Q=function(e){},this.jh=function(e){},this.Oi=function(e,t){},this.ui=function(){},this.Pi=function(e){}};var G=t.Session=function(){var t=this;t.oe=null,t.y=0,t.ha=z.ft.ct,t.xh=!1,t.Fr=!1,t.Wh=!1,t.qh=null,t.ji=null,t.Yh=null,t.Jh=!1,t.Qh=c.PlayerState.NOT_MONITORED,t.Xh=!1,t.zh=!1,t.Zh=!1,t.$h=!1,t.tc=!1,function(e,t,n,r,i,o,a){this.y=e,this.ha=t,this.ua=n,this.nc=r,this.Et=i,this.S=o,this.c=a,this.c.setModuleName("Session"),this.c.Si(ee.gt(this.y))}.apply(t,arguments),this.ra=function(e){t.Et.ra(this),null!=e&&null!=e&&t.Tt(e),t.ua.ic()?t.ec():t.ua.sc((function(){t.ec()}))},this.cleanup=function(){t.c.info("cleanup()"+t.va()),t.xh=!0,t.Et.Ea(),t.ua.ic()?t.lc():t.ua.sc((function(){t.lc()}))},this.uc=function(){t.c.debug("cleanupAll()"+t.va()),(t.ca()||t.fa())&&null!=t.oe&&t.oc(),t.c.Si(null),t.c=null,t.S=null,t.Ki=null,t.ua=null,t.nc=null,t.Et.rt(),t.Et=null,t.Fr=!0},this.lc=function(){t.Et.Ca(),t.uc()},this.ec=function(){t.Et.pa(),t.rc(),t.Et.wa()},this.rc=function(){t.c.debug("setStatesFromSystemMetadata()");var e=t.nc.get(),n=e[ce.BROWSER_NAME];null!=n&&t.Et.Oo(n),null!=(n=e[ce.BROWSER_VERSION])&&t.Et.Po(n),null!=(n=e[ce.DEVICE_BRAND])&&t.Et.Do(n),null!=(n=e[ce.DEVICE_MANUFACTURER])&&t.Et.bo(n),null!=(n=e[ce.DEVICE_MODEL])&&t.Et.Mo(n),null!=(n=e[ce.DEVICE_TYPE])&&t.Et.Lo(n),null!=(n=e[ce.DEVICE_VERSION])&&t.Et.Vo(n),null!=(n=e[ce.FRAMEWORK_NAME])&&t.Et.ko(n),null!=(n=e[ce.FRAMEWORK_VERSION])&&t.Et.Uo(n),null!=(n=e[ce.OPERATING_SYSTEM_NAME])&&t.Et.Fo(n),null!=(n=e[ce.OPERATING_SYSTEM_VERSION])&&t.Et.Bo(n),null!=(n=e[ce.DEVICE_CATEGORY])&&t.Et.Ho(n),null!=(n=e[ce.SCREEN_WIDTH])&&t.Et.Ko(n),null!=(n=e[ce.SCREEN_HEIGHT])&&t.Et.Go(n),null!=(e=e[ce.SCALE_FACTOR])&&t.Et.jo(e)},this.Ti=function(e){t.c.debug("onPlayerStateChange(): "+e),t.Et.Qn!=e&&(t.Et.Qn==c.PlayerState.NOT_MONITORED&&e!=c.PlayerState.NOT_MONITORED&&(t.Qh=e),t.Jh?t.c.debug("onPlayerStateChange(): "+e+" (pooled, "+(t.Wh?"ad playing":"preloading")+")"):t.Et.Se(e))},this.Ii=function(e){t.c.debug("onBitrateChange(): "+e),t.Xh?t.c.info("onBitrateChange(): ignored"):t.Et.Ua(e)},this.Mi=function(e){t.c.debug("onDroppedFramesTotalChange(): "+e),t.zh?t.c.info("onDroppedFramesTotalChange(): ignored"):t.Et.xo(e)},this.Li=function(e){t.c.debug("onDroppedFramesCountChange(): "+e),t.zh?t.c.info("onDroppedFramesCountChange(): ignored"):t.Et.$e(e)},this.Ni=function(e,n){ee.dt(n)||(t.c.warning("onSeekEvent(): Ignored non-integer seekToPosition data: "+n),n=-1),t.Et.ah(e,n)},this.ri=function(e){t.c.debug("onEncodedFrameRateChange(): "+e),0<e?t.$h?t.c.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+e+" (ads)"):(t.Et.To(e),t.c.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+e)):t.c.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+e)},this.ci=function(e){t.c.debug("onContentLengthChange(): "+e),0<e?t.$h?t.c.info("setContentLength(): Ignored content length data: "+e+" (ads)"):(t.Et.yo(e),t.c.info("setContentLength(): Received content length data: "+e)):t.c.warning("setContentLength(): Ignored invalid content length data: "+e)},this.fi=function(e){t.c.debug("onStreamUrlChange(): "+e),t.Et.Yo(e)},this.wi=function(e){t.c.debug("onStreamResolutionWidthChange(): "+e),t.Et.xa(e)},this._i=function(e){t.c.debug("onStreamResolutionHeightChange(): "+e),t.Et.qa(e)},this.Y=function(e){t.c.debug("onConnectionTypeChange(): "+e),t.Et.Xo(e)},this.Q=function(e){t.c.debug("onLinkEncryptionChange(): "+e),t.Et.zo(e)},this.pi=function(e){t.c.debug("onPlayerTypeChange(): "+e),null==t.Et.Oa()&&t.Et.ko(e)},this.Ai=function(e){t.c.debug("onPlayerVersionChange(): "+e),null==t.Et.Pa()&&t.Et.Uo(e)},this.Pi=function(e){t.c.debug("onCDNServerIPChange(): "+e),t.Et.nr(e)},this.Oi=function(e,n){t.c.debug("onError(): "+e+" ("+n+")"),t.Rt(e,n)},this.ui=function(){t.c.debug("onRelease()"),t.oc()},this.bt=function(n,r,i){t.c.debug("adStart(): adStream="+n+" adPlayer="+r+" adPosition="+i),t.Wh?t.c.warning("adStart(): multiple _adStart calls, ignoring"):(t.Wh=!0,t.qh=n,t.ji=r,t.Yh=i,t.Et.Ur||t.Et.Ga(!0),t.qh==e.Client.AdStream.CONTENT||t.ji==e.Client.AdPlayer.SEPARATE?(t.Et.Qn!==c.PlayerState.NOT_MONITORED&&(t.Qh=t.Et.Qn),t.Et.Se(c.PlayerState.NOT_MONITORED),t.Jh=!0):t.qh==e.Client.AdStream.SEPARATE&&t.ji==e.Client.AdPlayer.CONTENT&&(t.Et.Qn!==c.PlayerState.NOT_MONITORED&&(t.Qh=t.Et.Qn),t.Et.Se(c.PlayerState.NOT_MONITORED),t.Jh=!0,t.Xh=!0,t.zh=!0,t.$h=!0,t.Zh=!0,t.tc=!0))},this.Mt=function(){t.c.debug("adEnd()"),t.Wh?(t.Et.Ur||t.Et.Ga(!1),t.qh==e.Client.AdStream.CONTENT||t.ji==e.Client.AdPlayer.SEPARATE?t.ac||(t.Jh=!1,t.Et.Se(t.Qh)):t.qh==e.Client.AdStream.SEPARATE&&t.ji==e.Client.AdPlayer.CONTENT&&(t.Xh=!1,t.zh=!1,t.$h=!1,t.Zh=!1,t.tc=!1,t.ac||(t.Jh=!1,t.Et.Se(t.Qh))),t.Wh=!1,t.qh=t.ji=t.Yh=null):t.c.warning("adEnd(): called before _adStart, ignoring")},this.Ct=function(){t.c.debug("detachPlayer()"),null!=t.oe?null!==t.oe&&(t.S.P("Session.detachPlayer",(function(){t.oe.oi()})),t.oe=null,t.Et.lh(null),t.Et.Se(c.PlayerState.NOT_MONITORED)):t.c.error("detachPlayer(): called before attachPlayer, ignoring")},this.oc=function(){null!==t.oe&&(t.S.P("Session.releasePlayerStateManager",(function(){t.oe.oi()})),t.oe=null,t.Et.lh(null),t.Et.Se(c.PlayerState.NOT_MONITORED))},this.mt=function(){t.c.debug("offFocus()"),t.Et.Ur||t.Et.Ga(!0),t.Et.Qn!==c.PlayerState.NOT_MONITORED&&(t.Qh=t.Et.Qn),t.Et.Se(c.PlayerState.NOT_MONITORED),t.Jh=!0},this.Tt=function(e){t.c.debug("attachPlayer()"),null==t.oe?e instanceof c?t.S.P("Session.attachPlayer()",(function(){e.setMonitoringNotifier(t,t.y)?(e.Ri(),t.oe=e,t.Et.lh(t.oe)):t.c.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")})):t.c.error("attachPlayer(): Incorrect PlayerStateManager instance"):t.c.error("attachPlayer(): detach current PlayerStateManager first")},this.It=function(){t.c.debug("onFocus()"),t.Et.Ur||t.Et.Ga(!1),t.Xh=!1,t.zh=!1,t.$h=!1,t.Zh=!1,t.tc=!1,t.ac||(t.Jh=!1,t.Qh!==c.PlayerState.NOT_MONITORED&&t.Et.Se(t.Qh))},this.Vt=function(){return t.c.debug("getPlayerStateManager()"),t.oe},this.Nt=function(){t.c.debug("contentPreload()"),t.ac?t.c.debug("contentPreload(): called twice, ignoring"):(t.ac=!0,t.Jh=!0)},this.wt=function(){t.c.debug("contentStart()"),t.ac?(t.ac=!1,t.Wh||(t.Jh=!1,t.Qh!==c.PlayerState.NOT_MONITORED&&t.Et.Se(t.Qh))):t.c.warning("contentStart(): called without _contentPreload, ignoring")},this.Rt=function(n,r){var i;t.c.info("reportError(): "+n),ee.St(n)?r===e.Client.ErrorSeverity.FATAL||r===e.Client.ErrorSeverity.WARNING?t.tc?t.c.debug("reportError(): ignored"):(i=r===e.Client.ErrorSeverity.FATAL,t.Et.Za(n,i)):t.c.error("reportError(): invalid error severity: "+r):t.c.error("reportError(): invalid error message string: "+n)},this.yt=function(e){t.S.P("Session.updateContentMetadata",(function(){t.Et.yt(e)}))},this.Dt=function(e,n){t.c.info("sendEvent(): eventName="+e+t.va()),t.Et.hh(e,n)},this.ga=function(){return t.ha==z.ft.Ku},this.ca=function(){return t.ha==z.ft.ct},this.fa=function(){return t.ha==z.ft.At},this.va=function(){return t.ga()?" (global session)":""},this.Ut=function(){return this.y},this.Ft=function(){var e=null;return t.ua.ic()&&(e=t.ua.get(Q.D)),e},this.Bt=function(e,n){t.Et.Bt(e,n)}};G.Fh="received no response (or a bad response) to heartbeat POST request";var Y=t.SessionFactory=function(){var e=this;e.c=null,e.Cn=null,e.hc=0,e.cc=null,function(t,n,r,i){e.Ki=t,e.Rn=n,e.ua=r,e.v=i,e.c=e.v.buildLogger(),e.c.setModuleName("SessionFactory"),e.hc=0,e.cc={}}.apply(e,arguments),this.rt=function(){for(var t in e.c=null,e.Cn=null,e.cc)e.cc[t].cleanup();e.cc=null,e.hc=0},this.fc=function(){var t=e.hc;return e.hc++,t},this.ht=function(t,n,r){return null==t&&(t=new o),e.dc(t,n,r)},this.B=function(t){return e.dc(t,z.ft.Ku)},this.vc=function(){return re.Ec()},this.dc=function(t,n,r){var i=t.tt();return t=e.vc(),n=e.v.Vn(e.Ki,e.Rn,e.ua,t,n,i),i=e.fc(),e.pc(i,n),n.ra(r),i},this.Pt=function(t){return null==(t=e.cc[t])&&e.c.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t},this.vt=function(t){return null!=(t=this.Pt(t))&&(t.ca()||t.fa()||(e.c.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t=null)),t},this.pc=function(t,n){e.cc[t]=n},this.gc=function(t){delete e.cc[t]},this.Lt=function(t){var n=e.Pt(t);e.gc(t),n.cleanup()},this.q=function(){return e.cc}},J=t.Ac=function(e){this.Gi=e,this.Sc=function(e,t,n){var r=!1;return this.Gi.createOnce((function(){r||e(!(r=!0),n+" ("+t+" ms)")}),t,"CallbackWithTimeout.wrap"),function(t,n){r||(r=!0,e(t,n))}}},Q=t.Config=function(e,t,n){var r=this;this.c=e,this.c.setModuleName("Config"),this.Rc=t,this.yc=n,this.Cc={clientId:H.M,sendLogs:!1,maxHbInfos:H.Us},this.R=ee.Nh(this.Cc),this.mc=!1,this.Tc=!1,this.Ic=[],this.ic=function(){return this.mc},this.ut=function(){this.Rc.ut(Q.Nc,(function(e,t){e?(r.wc(t),r.c.debug("load): configuration successfully loaded from local storage"+(r.Tc?" (was empty)":"")+".")):r.c.error("load): error loading configuration from local storage: "+t),r.mc=!0,r._c()}))},this.wc=function(e){null!=(e=this.yc.Yu(e))?null!=(e=e[Q.Oc])&&e!=H.M&&""!=e&&"null"!=e&&(this.R[Q.D]=e,this.c.debug("parse(): loaded clientId="+e+" (from local storage)")):this.Tc=!0},this.Pc=function(){var e={};return e[Q.Oc]=this.R.clientId,this.c.debug("marshall(): saving clientId="+this.R.clientId+" (to local storage)"),this.yc.qu(e)},this.Lh=function(){this.Rc.Lh(Q.Nc,this.Pc(),(function(e,t){e?r.c.debug("save(): configuration successfully saved to local storage."):r.c.error("save(): error saving configuration to local storage: "+t)}))},this.sc=function(e){this.ic()?e():this.Ic.push(e)},this.get=function(e){return this.mc?this.R[e]:null},this.set=function(e,t){this.mc&&(this.R[e]=t)},this._c=function(){for(var e;null!=(e=this.Ic.shift());)e()}};Q.Nc="sdkConfig",Q.Oc="clId",Q.D="clientId",Q.Rh="sendLogs",Q.ph="maxHbInfos",Q.mh="c3.fp.",Q.Kt={Th:"0",Dc:"1",Gt:"2",Ht:"3",Ih:"4",xt:"5",jt:"6"};var X=t.EventQueue=function(){this.bc=[],this.Mc=0,this.sh=function(e){this.bc.push(e)},this.ih=function(){var e=this.Mc;return this.Mc++,e},this.oa=function(){var e=this.bc;return this.bc=[],e}},$=t.ExceptionCatcher=function(e,t,n){this.c=e,this.c.setModuleName("ExceptionCatcher"),this.Lc=t,this.A=n,this.P=function(e,t,n){try{t()}catch(t){if(null!=n)n(t);else{if(this.A.allowUncaughtExceptions)throw t;this.Vc(e,t)}}},this.Vc=function(e,t){var n="Uncaught exception: "+e+": "+t.toString();if(null!=this.Lc)try{this.Lc.bh(n)}catch(e){this.c.error("Caught exception while sending ping: "+e.toString())}this.c.error(n)}},Z=t.GatewayControl=function(e,t,n,r,i){var o=this;this.Rn=e,this.c=t,this.c.setModuleName("GatewayControl"),this.kc=n,this.yc=r,this.Uc=i,this.bh=function(e,t){var n=this.yc.qu(e);e=(null!=this.Uc?-1<this.Uc.indexOf("ipv4")?this.Rn.L:this.Rn.H:this.Rn.gatewayUrl)+H.Vs,this.kc.Fc("POST",e,n,"application/json",(function(e,n){var r;e?(r=o.yc.Yu(n),t(e,r)):t(e,n)}))}},ee=t.Lang={};ee.Bc=function(e){return ee.St(e)&&null!=e&&"undefined"!=e&&"null"!=e},ee.Ot=function(e){var t,n,r={};for(t in e)ee.Bc(t)&&(n=e[t],ee.Bc(n)&&(r[t]=n));return r},ee.ai=function(e,t,n){if(null==e)throw new Error("Expected "+n+" implementation is null.");for(var r in t)if("function"!=typeof e[r])throw new Error("Expected method "+r+" in "+n+" implementation.")},ee._t=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},ee.gt=function(e){return""+e},ee.Hc=function(e){return Math.floor(e)},ee.Xt=function(e){return Math.abs(ee.Hc(e))},ee.Vh=function(e){return Boolean(e)},ee.St=function(e){return"string"==typeof e&&""!==e},ee.Uh=function(e,t){return"string"==typeof e&&"string"==typeof t&&"function"==typeof e.indexOf&&0===e.indexOf(t)},ee.Hn=function(e){return"boolean"==typeof e},ee.Kc=function(e){return escape(e)},ee.Ju=function(e){return"object"==s(e)},ee.Va=function(e){var t,n="";for(t in e)n+=t+"="+e[t];return"Object{"+n+"}"},ee.Gc=function(e){var t,n=ee.Nh(e);for(t in n)null==n[t]&&delete n[t];return n},ee.Nh=function(e){var t,n={};for(t in e)n[t]=e[t];return n},ee.Ka=function(e,t){if(s(e)!=s(t))return!1;if(e instanceof Object&&t instanceof Object){if(ee._t(e)!==ee._t(t))return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}return e===t},ee.hs=function(){for(var e={},t=0;t<arguments.length;t++)for(var n in arguments[t])null!=arguments[t][n]&&null!=arguments[t][n]&&(e[n]=arguments[t][n]);return e},ee.dt=function(e){return"number"==typeof e&&Math.round(e)===e},ee.jc=function(e){return"[object Array]"===Object.prototype.toString.call(e)},ee.xc=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(ee.jc(e[n])&&ee.jc(t[n])){if(!ee.xc(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0},ee.Wc=function(){return void 0!==Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()},ee.qt=function(e,t,n){if(ee.Wc())Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:n});else{if(void 0===e.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");e.__defineGetter__(t,n)}},ee.Yt=function(e,t,n){if(ee.Wc())Object.defineProperty(e,t,{configurable:!0,set:n});else{if(void 0===e.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");e.__defineSetter__(t,n)}},ee.Oh=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var r,i,o=Math.pow,a=o(2,32),s="length",u="",c=[],l=8*t[s],d=e.h=e.h||[],f=e.k=e.k||[],p=f[s],h={},g=2;p<64;g++)if(!h[g]){for(r=0;r<313;r+=g)h[r]=g;d[p]=o(g,.5)*a|0,f[p++]=o(g,1/3)*a|0}for(t+="\0";t[s]%64-56;)t+="\0";for(r=0;r<t[s];r++){if((i=t.charCodeAt(r))>>8)return;c[r>>2]|=i<<(3-r)%4*8}for(c[c[s]]=l/a|0,c[c[s]]=l,i=0;i<c[s];){var y=c.slice(i,i+=16),v=d;for(d=d.slice(0,8),r=0;r<64;r++){var _=y[r-15],m=y[r-2],b=d[0],C=d[4];(d=[(m=d[7]+(n(C,6)^n(C,11)^n(C,25))+(C&d[5]^~C&d[6])+f[r]+(y[r]=r<16?y[r]:y[r-16]+(n(_,7)^n(_,18)^_>>>3)+y[r-7]+(n(m,17)^n(m,19)^m>>>10)|0))+((n(b,2)^n(b,13)^n(b,22))+(b&d[1]^b&d[2]^d[1]&d[2]))|0].concat(d))[4]=d[4]+m|0}for(r=0;r<8;r++)d[r]=d[r]+v[r]|0}for(r=0;r<8;r++)for(i=3;i+1;i--){var E=d[r]>>8*i&255;u+=(E<16?0:"")+E.toString(16)}return u},function(){var e={two32:4294967296};e.qc=e.two32-1,e.Yc=0,ee.Jc=e,ee.Jc.Cast=function(t){return(t=parseInt(t,10))>e.qc?t%=e.two32:t<e.Yc&&(t=-t%e.two32,t=e.two32-t),t},ee.Jc.Qc=function(t){return(t=parseInt(t,10))<=e.qc&&t>=e.Yc};var t={qc:2147483647,Yc:-2147483648};ee.Dh=t,ee.Dh.Cast=function(e){return(e=parseInt(e,10))>t.qc?e%=t.qc:e<t.Yc&&(e=t.qc-(e=-e%t.qc)),e},ee.Dh.Qc=function(e){return(e=parseInt(e,10))<=t.qc&&e>=t.Yc}}();var te=t.LogBuffer=function(){this.Xc=[],this.zc=function(e){32<=this.Xc.length&&this.Xc.shift(),this.Xc.push(e)},this.oa=function(){var e=this.Xc;return this.Xc=[],e}},ne=t.Ping=function(t,n,r,i){this.Zc=!1,this.$c=null,this.c=t,this.c.setModuleName("Ping"),this.kc=n,this.Rn=r,this.yn=i,this.bh=function(e){this.Zc||(this.Zc=!0,e=this.tf()+"&d="+ee.Kc(e.toString()),this.c.error("send(): "+e),this.kc.Fc("GET",e,null,null,null),this.Zc=!1)},this.tf=function(){if(!this.$c){var t=ne.nf+"?comp="+ne.if+"&clv="+(this.yn||e.Client.version);if(this.Rn&&(t+="&cid="+this.Rn.customerKey),t+="&sch="+H.Ks,!this.Rn)return t;this.$c=t}return this.$c}};ne.if="sdkjs",ne.nf="https://pings.conviva.com/ping.ping";var re=t.ef={};re.sf=4294967295,re.lf=2147483647,re.uf=-2147483648,re.Ec=function(){return Math.floor(Math.random()*re.sf)+re.uf},re.et=function(){return Math.floor(Math.random()*re.sf)};var ie=t.rf={};ie.eh=function(e,t,n,r){return isNaN(e)||"number"!=typeof e||e==r?r:(e=ee.Hc(e),ie.af(e,t,n))},ie.af=function(e,t,n){return null!=n&&n<e?e=n:null!=t&&e<t&&(e=t),e},ie.hn=function(e){return-1==e||-2==e?e:e=ie.eh(e,0,null,-1)};var oe=t.StreamerError=function(){var e=this;e.errorCode=null,e.severity=r.ErrorSeverity.FATAL,function(t,n){e.errorCode=t,e.severity=n}.apply(e,arguments),this._s=function(){return e.errorCode},this.Os=function(){return e.severity}},ae=t.HttpClient=function(e,t,n,r){this.c=e,this.c.setModuleName("HttpClient"),this.En=t,this.hf=n,this.A=r,this.Fc=function(e,t,n,r,i){var o=1e3*this.A.httpTimeout,a=null;null!=i&&(a=this.hf.Sc(i,o,"HTTP timeout")),this.c.debug("request(): calling HttpInterface.makeRequest"),this.En.makeRequest(e,t,n,r,o,a)}},se=t.Logger=function(e,t,n,r,i){this.An=e,this.dn=t,this.g=n,this.Cn=r,this.Sn=i,this.debug=function(e){this.log(e,u.LogLevel.DEBUG)},this.info=function(e){this.log(e,u.LogLevel.INFO)},this.warning=function(e){this.log(e,u.LogLevel.WARNING)},this.error=function(e){this.log(e,u.LogLevel.ERROR)},this.log=function(e,t){e=this.cf(e,t),this.Cn.zc(e),this.g.logLevel<=t&&this.An.consoleLog(e,t)},this.ff=function(e){return"["+this.ti+"] "+e},this.df=function(e){return"["+this.Sn+"] "+e},this.vf=function(e){return"[Conviva] "+e},this.Ef=function(e){return"["+(this.dn.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+e},this.pf=function(e,t){return"["+se.gf(t)+"] "+e},this.Af=function(e){return null!=this.Sf&&(e="sid="+this.Sf+" "+e),e},this.Si=function(e){this.Sf=e},this.setModuleName=function(e){this.ti=e},this.cf=function(e,t){return this.vf(this.Ef(this.pf(this.df(this.ff(this.Af(e))),t)))}};se.gf=function(e){var t;switch(e){case u.LogLevel.ERROR:t="ERROR";break;case u.LogLevel.WARNING:t="WARNING";break;case u.LogLevel.INFO:t="INFO";break;case u.LogLevel.DEBUG:t="DEBUG"}return t};var ue=t.Storage=function(e,t,n,r){this.c=e,this.c.setModuleName("Storage"),this.pn=t,this.hf=n,this.A=r,this.ut=function(e,t){t=this.hf.Sc(t,1e3*this.A.storageTimeout,"storage load timeout"),this.c.debug("load): calling StorageInterface.loadData"),this.pn.loadData(ue.Rf,e,t)},this.Lh=function(e,t,n){n=this.hf.Sc(n,1e3*this.A.storageTimeout,"storage save timeout"),this.c.debug("save(): calling StorageInterface.saveData"),this.pn.saveData(ue.Rf,e,t,n)}};ue.Rf="Conviva";var ce=t.SystemMetadata=function(t,n,r){this.c=t,this.c.setModuleName("SystemMetadata"),this.gn=n,this.S=r,this.yf=null,this.get=function(){return this.yf||this.retrieve(),this.yf},this.retrieve=function(){var t={};t[ce.BROWSER_NAME]=this.gn.getBrowserName,t[ce.BROWSER_VERSION]=this.gn.getBrowserVersion,t[ce.DEVICE_BRAND]=this.gn.getDeviceBrand,t[ce.DEVICE_MANUFACTURER]=this.gn.getDeviceManufacturer,t[ce.DEVICE_MODEL]=this.gn.getDeviceModel,t[ce.DEVICE_TYPE]=this.gn.getDeviceType,t[ce.DEVICE_VERSION]=this.gn.getDeviceVersion,t[ce.FRAMEWORK_NAME]=this.gn.getFrameworkName,t[ce.FRAMEWORK_VERSION]=this.gn.getFrameworkVersion,t[ce.OPERATING_SYSTEM_NAME]=this.gn.getOperatingSystemName,t[ce.OPERATING_SYSTEM_VERSION]=this.gn.getOperatingSystemVersion,t[ce.DEVICE_CATEGORY]=this.gn.getDeviceCategory,t[ce.SCREEN_WIDTH]=this.gn.getScreenWidth,t[ce.SCREEN_HEIGHT]=this.gn.getScreenHeight,t[ce.SCALE_FACTOR]=this.gn.getScaleFactor;var n,r=this;for(n in this.c.debug("retrieve(): calling MetadataInterface methods"),t)!function(e,t){r.S.P("Session.getSystemMetadataSchema(): "+e,(function(){var n=t[e];t[e]=n.call(r.gn)}))}(n,t),ee.St(t[n])||delete t[n];var i=!1;if(void 0!==t[ce.DEVICE_TYPE]){for(var o in e.Client.DeviceType)if(t[ce.DEVICE_TYPE]===e.Client.DeviceType[o]){i=!0;break}i||delete t[ce.DEVICE_TYPE]}if(i=!1,void 0!==t[ce.DEVICE_CATEGORY]){for(var a in e.Client.DeviceCategory)if(t[ce.DEVICE_CATEGORY]===e.Client.DeviceCategory[a]){i=!0;break}i||delete t[ce.DEVICE_CATEGORY]}this.yf=ee.Gc(t)}};ce.BROWSER_NAME="browserName",ce.BROWSER_VERSION="browserVersion",ce.DEVICE_BRAND="deviceBrand",ce.DEVICE_MANUFACTURER="deviceManufacturer",ce.DEVICE_MODEL="deviceModel",ce.DEVICE_TYPE="deviceType",ce.DEVICE_VERSION="deviceVersion",ce.FRAMEWORK_NAME="frameworkName",ce.FRAMEWORK_VERSION="frameworkVersion",ce.OPERATING_SYSTEM_NAME="operatingSystemName",ce.OPERATING_SYSTEM_VERSION="operatingSystemVersion",ce.DEVICE_CATEGORY="deviceCategory",ce.SCREEN_WIDTH="screenWidth",ce.SCREEN_HEIGHT="screenHeight",ce.SCALE_FACTOR="scaleFactor";var le=t.Time=function(e,t){this.dn=e,this.c=t,this.c.setModuleName("Time"),this.current=function(){var e=this.dn.getEpochTimeMs();return ee.dt(e)||this.c.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+e+")"),e}},de=t.Timer=function(e,t,n){var r=this;this.c=e,this.c.setModuleName("Timer"),this.vn=t,this.S=n,this.create=function(e,t,n){return this.createTimer((function(){r.S.P(n,(function(){e()}))}),t,n)},this.createOnce=function(e,t,n){var i={cancel:null};return t=this.createTimer((function(){r.S.P(n,(function(){i&&"function"==typeof i.cancel&&(i.cancel(),i.cancel=null,i=null),e()}))}),t,n),i.cancel=t},this.createTimer=function(e,t,n){return this.c.debug("createTimer(): calling TimerInterface.create"),this.vn.createTimer(e,t,n)}}}()}(),e})?r.call(t,n,t,e):r)&&(e.exports=i),void 0!==o&&void 0===o.Conviva&&(o.ConvivaLoading||(o.ConvivaLoading=!0,o.Conviva=a(),delete o.ConvivaLoading))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkerConverter=void 0;var r=n(1),i=n(31),o=function(){function e(){}return e.fromContentSegment=function(e){return i.Marker.createForMedia(void 0,r.TimeRange.create(e.start,e.duration),{finishingThreshold:5})},e}();t.MarkerConverter=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AuthComponentURI=void 0,function(e){e.Default="com.turner.top.auth.default"}(r||(r={})),t.AuthComponentURI=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AuthDRMComponentURI=void 0,function(e){e.Default="com.turner.top.authdrm.default"}(r||(r={})),t.AuthDRMComponentURI=r},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(51),t),i(n(235),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCue=void 0;var r=n(1),i=n(58),o=n(137),a=n(242),s=n(138),u=n(140),c=n(0),l=r.Log.getLogger("DefaultCue").filter("cues"),d=function(){function e(e,t,n,a){var s=this;this._onFsmEvent=function(e,t){switch(e){case r.FsmEventType.State_Changed:var n=t.to,o=t.from;switch(s._notifyStateChanged(o,n),n){case c.CueState.Pending:s._fsm.fireTransition(i.CueStateTrigger.Process);break;case c.CueState.Processing:s._applyTransforms(),s._fsm.fireTransition(i.CueStateTrigger.Processed);break;case c.CueState.Processed:s._notifyProcessed(),s._fsm.fireTransition(i.CueStateTrigger.Listen);break;case c.CueState.Listening:s._addTriggerListeners(),s._triggers.init(),l.debug(s._id+" Listening");break;case c.CueState.Activated:switch(s._notifyActivated(),s._triggers.options.frequency){case u.TriggerFrequency.Once:s._fsm.fireTransition(i.CueStateTrigger.Completed);break;default:if(s._triggers.size>0){s._addRetriggerListeners(),s._retriggers.init();break}s._fsm.attemptTransition(i.CueStateTrigger.Listen)}break;case c.CueState.Completed:l.debug(s._id+" Completed")}}},this._onTriggerFired=function(e){l.debug(s.id+" Triggers fired"),s._removeTriggerListeners(),s._fsm.attemptTransition(i.CueStateTrigger.Triggered)},this._onRetriggerFired=function(e){l.debug(s.id+" Retriggered, transitioning -> Listening"),s._removeRetriggerListeners(),s._addTriggerListeners(),s._triggers.init(),s._fsm.attemptTransition(i.CueStateTrigger.Listen)},this._events=o.createCueEventCollection(),this._id=e,this._type=t,this._source=n,this._data=a,this._triggerBinding=null,this._retriggerBinding=null,this._fsm=new r.Fsm}return e.prototype._applyTransforms=function(){if(0!==this._transforms.length){var e=this._data;this._transforms.forEach((function(t){e=t(e)})),this.updateData(e)}},e.prototype._notifyStateChanged=function(e,t){this._events.stateChanged.dispatch({id:this._id,previousState:e,currentState:t})},e.prototype._notifyProcessed=function(){this._events.processed.dispatch({cue:this.toCue()})},e.prototype._notifyActivated=function(){this._events.activated.dispatch({cue:this.toCue()})},e.prototype._addTriggerListeners=function(){this._triggerBinding||(this._triggerBinding=this._triggers.events.fired.listen(this._onTriggerFired))},e.prototype._removeTriggerListeners=function(){var e;null===(e=this._triggerBinding)||void 0===e||e.detach(),this._triggerBinding=null},e.prototype._addRetriggerListeners=function(){this._retriggerBinding||(this._retriggerBinding=this._retriggers.events.fired.listen(this._onRetriggerFired))},e.prototype._removeRetriggerListeners=function(){var e;null===(e=this._retriggerBinding)||void 0===e||e.detach(),this._retriggerBinding=null},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){var e;return null!==(e=this._fsm.currentState())&&void 0!==e?e:c.CueState.Pending},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"triggers",{get:function(){return this._triggers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retriggers",{get:function(){return this._retriggers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transforms",{get:function(){return this._transforms},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return r.ObjectUtils.extendDeep({},this._data)},enumerable:!1,configurable:!0}),e.prototype.init=function(e,t,n){this._triggers=new s.TriggerCollection(e),this._retriggers=new s.TriggerCollection(t),this._transforms=n,this._fsm.events.listen(this._onFsmEvent),this._fsm.init(a.CueFsmConfig)},e.prototype.updateData=function(e){r.ObjectUtils.extendDeep(this._data,e)},e.prototype.toCue=function(){return{id:this.id,type:this.type,source:this.source,state:this.state,data:this.data}},e.prototype.destroy=function(){this._fsm.events.unlistenAll(),this._removeTriggerListeners(),this._removeRetriggerListeners(),this._triggers.disable(),this._retriggers.disable()},e}();t.DefaultCue=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CueStateTrigger=void 0,function(e){e.Start="start",e.Process="process",e.Processed="processed",e.Listen="listen",e.Triggered="triggered",e.Completed="completed"}(t.CueStateTrigger||(t.CueStateTrigger={}))},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=n(147),a=n(63),s=n(64),u=n(65);t.URI="Option";var c=function(){function e(){this._tag="None"}return e.prototype.map=function(e){return t.none},e.prototype.mapNullable=function(e){return t.none},e.prototype.ap=function(e){return t.none},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return t.none},e.prototype.reduce=function(e,t){return e},e.prototype.alt=function(e){return e},e.prototype.orElse=function(e){return e()},e.prototype.extend=function(e){return t.none},e.prototype.fold=function(e,t){return e},e.prototype.foldL=function(e,t){return e()},e.prototype.getOrElse=function(e){return e},e.prototype.getOrElseL=function(e){return e()},e.prototype.toNullable=function(){return null},e.prototype.toUndefined=function(){},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"none"},e.prototype.contains=function(e,t){return!1},e.prototype.isNone=function(){return!0},e.prototype.isSome=function(){return!1},e.prototype.exists=function(e){return!1},e.prototype.filter=function(e){return t.none},e.prototype.refine=function(e){return t.none},e.value=new e,e}();t.None=c,t.none=c.value;var l=function(){function e(e){this.value=e,this._tag="Some"}return e.prototype.map=function(t){return new e(t(this.value))},e.prototype.mapNullable=function(e){return t.fromNullable(e(this.value))},e.prototype.ap=function(n){return n.isNone()?t.none:new e(n.value(this.value))},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return e(this.value)},e.prototype.reduce=function(e,t){return t(e,this.value)},e.prototype.alt=function(e){return this},e.prototype.orElse=function(e){return this},e.prototype.extend=function(t){return new e(t(this))},e.prototype.fold=function(e,t){return t(this.value)},e.prototype.foldL=function(e,t){return t(this.value)},e.prototype.getOrElse=function(e){return this.value},e.prototype.getOrElseL=function(e){return this.value},e.prototype.toNullable=function(){return this.value},e.prototype.toUndefined=function(){return this.value},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"some("+i.toString(this.value)+")"},e.prototype.contains=function(e,t){return e.equals(this.value,t)},e.prototype.isNone=function(){return!1},e.prototype.isSome=function(){return!0},e.prototype.exists=function(e){return e(this.value)},e.prototype.filter=function(e){return this.exists(e)?this:t.none},e.prototype.refine=function(e){return this.filter(e)},e}();function d(e){return s.fromEquals((function(t,n){return t.isNone()?n.isNone():!n.isNone()&&e.equals(t.value,n.value)}))}t.Some=l,t.getShow=function(e){return{show:function(t){return t.fold("none",(function(t){return"some("+e.show(t)+")"}))}}},t.getSetoid=d,t.getEq=d,t.getOrd=function(e){return a.fromCompare((function(t,n){return t.isSome()?n.isSome()?e.compare(t.value,n.value):1:-1}))},t.some=function(e){return new l(e)},t.getApplySemigroup=function(e){return{concat:function(n,r){return n.isSome()&&r.isSome()?t.some(e.concat(n.value,r.value)):t.none}}},t.getApplyMonoid=function(e){return r({},t.getApplySemigroup(e),{empty:t.some(e.empty)})},t.getFirstMonoid=function(){return{concat:t.option.alt,empty:t.none}},t.getLastMonoid=function(){return o.getDualMonoid(t.getFirstMonoid())},t.getMonoid=function(e){return{concat:function(n,r){return n.isNone()?r:r.isNone()?n:t.some(e.concat(n.value,r.value))},empty:t.none}},t.fromNullable=function(e){return null==e?t.none:new l(e)},t.fromPredicate=function(e){return function(n){return e(n)?t.some(n):t.none}},t.tryCatch=function(e){try{return t.some(e())}catch(e){return t.none}},t.fromEither=function(e){return e.isLeft()?t.none:t.some(e.value)},t.isSome=function(e){return e.isSome()},t.isNone=function(e){return e.isNone()},t.fromRefinement=function(e){return function(n){return e(n)?t.some(n):t.none}},t.getRefinement=function(e){return function(t){return e(t).isSome()}};var f={left:t.none,right:t.none};function p(e){return"Right"===e._tag?t.none:t.some(e.value)}function h(e){return"Left"===e._tag?t.none:t.some(e.value)}t.option={URI:t.URI,map:function(e,n){return t.isNone(e)?t.none:t.some(n(e.value))},of:t.some,ap:function(e,n){return t.isNone(e)||t.isNone(n)?t.none:t.some(e.value(n.value))},chain:function(e,n){return t.isNone(e)?t.none:n(e.value)},reduce:function(e,n,r){return t.isNone(e)?n:r(n,e.value)},foldMap:function(e){return function(n,r){return t.isNone(n)?e.empty:r(n.value)}},foldr:function(e,n,r){return t.isNone(e)?n:r(e.value,n)},traverse:function(e){return function(n,r){return t.isNone(n)?e.of(t.none):e.map(r(n.value),t.some)}},sequence:function(e){return function(n){return t.isNone(n)?e.of(t.none):e.map(n.value,t.some)}},zero:function(){return t.none},alt:function(e,n){return t.isNone(e)?n:e},extend:function(e,n){return t.isNone(e)?t.none:t.some(n(e))},compact:function(e){return t.option.chain(e,i.identity)},separate:function(e){var n=t.option.map(e,(function(e){return{left:p(e),right:h(e)}}));return t.isNone(n)?f:n.value},filter:function(e,n){return t.isNone(e)?t.none:n(e.value)?e:t.none},filterMap:function(e,n){return t.isNone(e)?t.none:n(e.value)},partition:function(e,n){return{left:t.option.filter(e,(function(e){return!n(e)})),right:t.option.filter(e,n)}},partitionMap:function(e,n){return t.option.separate(t.option.map(e,n))},wither:function(e){return function(n,r){return t.isNone(n)?e.of(t.none):r(n.value)}},wilt:function(e){return function(n,r){var i=t.option.map(n,(function(t){return e.map(r(t),(function(e){return{left:p(e),right:h(e)}}))}));return t.isNone(i)?e.of({left:t.none,right:t.none}):i.value}},throwError:function(){return t.none},fromEither:t.fromEither,fromOption:i.identity},t.getLeft=p,t.getRight=h,t.fold=function(e,t){return function(n){return n.foldL(e,t)}},t.toNullable=function(e){return e.toNullable()},t.toUndefined=function(e){return e.toUndefined()},t.getOrElse=function(e){return function(t){return t.getOrElseL(e)}},t.elem=function(e){return function(t){return function(n){return n.contains(e,t)}}},t.exists=function(e){return function(t){return t.exists(e)}},t.mapNullable=function(e){return function(t){return t.mapNullable(e)}};var g=u.pipeable(t.option),y=g.alt,v=g.ap,_=g.apFirst,m=g.apSecond,b=g.chain,C=g.chainFirst,E=g.duplicate,T=g.extend,S=g.filter,P=g.filterMap,M=g.flatten,O=g.foldMap,k=g.map,A=g.partition,w=g.partitionMap,R=g.reduce,I=g.reduceRight,j=g.compact,D=g.separate;t.alt=y,t.ap=v,t.apFirst=_,t.apSecond=m,t.chain=b,t.chainFirst=C,t.duplicate=E,t.extend=T,t.filter=S,t.filterMap=P,t.flatten=M,t.foldMap=O,t.map=k,t.partition=A,t.partitionMap=w,t.reduce=R,t.reduceRight=I,t.compact=j,t.separate=D},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(61),t),i(n(30),t),i(n(255),t),i(n(135),t),i(n(17),t),i(n(45),t),i(n(259),t),i(n(56),t),i(n(44),t),i(n(3),t),i(n(89),t),i(n(22),t),i(n(72),t),i(n(144),t),i(n(264),t),i(n(5),t),i(n(104),t),i(n(128),t),i(n(97),t),i(n(28),t),i(n(267),t),i(n(269),t),i(n(1),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(62),t),i(n(150),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPlayerEventCollection=void 0;var r=n(1),i=n(0);t.createPlayerEventCollection=function(e){return r.createEventCollection(function(e){var t=function(t){return r.createEvent(t,e)};return{modelUpdated:t(i.PlayerEventType.Model_Updated),playerError:t(i.PlayerEventType.Player_Error),playerStateChanged:t(i.PlayerEventType.Player_State_Changed),playerInitialized:t(i.PlayerEventType.Player_Initialized),playerReady:t(i.PlayerEventType.Player_Ready),playerListening:t(i.PlayerEventType.Player_Listening),contentStateChanged:t(i.PlayerEventType.Content_State_Changed),contentBeginning:t(i.PlayerEventType.Content_Beginning),contentSetup:t(i.PlayerEventType.Content_Setup),contentWaiting:t(i.PlayerEventType.Content_Waiting),volumeChanged:t(i.PlayerEventType.Volume_Changed),muteChanged:t(i.PlayerEventType.Mute_Changed),mediaCommandReceived:t(i.PlayerEventType.Media_Command_Received),mediaCommandRejected:t(i.PlayerEventType.Media_Command_Rejected),mediaStateChanged:t(i.PlayerEventType.Media_State_Changed),mediaReady:t(i.PlayerEventType.Media_Ready),mediaStarting:t(i.PlayerEventType.Media_Starting),mediaBlocked:t(i.PlayerEventType.Media_Blocked),mediaLoaded:t(i.PlayerEventType.Media_Loaded),mediaStarted:t(i.PlayerEventType.Media_Started),mediaBufferingStarted:t(i.PlayerEventType.Media_Buffering_Started),mediaBufferingFinished:t(i.PlayerEventType.Media_Buffering_Finished),mediaSeekingStarted:t(i.PlayerEventType.Media_Seeking_Started),mediaSeekingFinished:t(i.PlayerEventType.Media_Seeking_Finished),mediaRequestProfileChanged:t(i.PlayerEventType.Media_Request_Profile_Changed),mediaProfileChanged:t(i.PlayerEventType.Media_Profile_Changed),mediaTimeChanged:t(i.PlayerEventType.Media_Time_Changed),mediaPaused:t(i.PlayerEventType.Media_Paused),mediaResumed:t(i.PlayerEventType.Media_Resumed),mediaRecoveryStarted:t(i.PlayerEventType.Media_Recovery_Started),mediaRecoveryFinished:t(i.PlayerEventType.Media_Recovery_Finished),mediaResized:t(i.PlayerEventType.Media_Resized),mediaStopped:t(i.PlayerEventType.Media_Stopped),mediaTimedMetadataParsed:t(i.PlayerEventType.Media_Timed_Metadata_Parsed),mediaTimedMetadataReceived:t(i.PlayerEventType.Media_Timed_Metadata_Received),mediaFinished:t(i.PlayerEventType.Media_Finished),mediaError:t(i.PlayerEventType.Media_Error),mediaStalled:t(i.PlayerEventType.Media_Stalled),mediaAudioTrackAvailabilityChanged:t(i.PlayerEventType.Media_Audio_Track_Availability_Changed),mediaAudioTrackSelected:t(i.PlayerEventType.Media_Audio_Track_Selected),adStateChanged:t(i.PlayerEventType.Ad_State_Changed),adStarting:t(i.PlayerEventType.Ad_Starting),adStarted:t(i.PlayerEventType.Ad_Started),adBlocked:t(i.PlayerEventType.Ad_Blocked),adLoaded:t(i.PlayerEventType.Ad_Loaded),adCreativeStarted:t(i.PlayerEventType.Ad_Creative_Started),adTimeChanged:t(i.PlayerEventType.Ad_Time_Changed),adPaused:t(i.PlayerEventType.Ad_Paused),adResumed:t(i.PlayerEventType.Ad_Resumed),adStopped:t(i.PlayerEventType.Ad_Stopped),adCreativeEnded:t(i.PlayerEventType.Ad_Creative_Ended),adFinished:t(i.PlayerEventType.Ad_Finished),adError:t(i.PlayerEventType.Ad_Error),timelineMarkerAdded:t(i.PlayerEventType.Timeline_Marker_Added),timelineMarkerApproaching:t(i.PlayerEventType.Timeline_Marker_Approaching),timelineMarkerActivated:t(i.PlayerEventType.Timeline_Marker_Activated),timelineMarkerFinishing:t(i.PlayerEventType.Timeline_Marker_Finishing),timelineMarkerDeactivated:t(i.PlayerEventType.Timeline_Marker_Deactivated),timelineMarkerRemoved:t(i.PlayerEventType.Timeline_Marker_Removed),lifecycleStateChanged:t(i.PlayerEventType.Lifecycle_State_Changed),captionsStateChanged:t(i.PlayerEventType.Captions_State_Changed),captionSettingsUpdated:t(i.PlayerEventType.Caption_Settings_Updated),captionTrackAdded:t(i.PlayerEventType.Caption_Track_Added),captionTrackRemoved:t(i.PlayerEventType.Caption_Track_Removed),captionTrackSelected:t(i.PlayerEventType.Caption_Track_Selected),captionTrackDeselected:t(i.PlayerEventType.Caption_Track_Deselected),captionCueParsed:t(i.PlayerEventType.Caption_Cue_Parsed),captionCueEntered:t(i.PlayerEventType.Caption_Cue_Entered),captionCueExited:t(i.PlayerEventType.Caption_Cue_Exited),captionCueUpdated:t(i.PlayerEventType.Caption_Cue_Updated),cueStateChanged:t(i.PlayerEventType.Cue_State_Changed),cueProcessed:t(i.PlayerEventType.Cue_Processed),cueActivated:t(i.PlayerEventType.Cue_Activated),contentInterrupted:t(i.PlayerEventType.Content_Interrupted),contentCompleted:t(i.PlayerEventType.Content_Completed),contentError:t(i.PlayerEventType.Content_Error),contentEnded:t(i.PlayerEventType.Content_Ended),viewStateChanged:t(i.PlayerEventType.View_State_Changed),viewModeChanged:t(i.PlayerEventType.View_Mode_Changed),messageToUI:t(i.PlayerEventType.Message_To_UI),messageFromUI:t(i.PlayerEventType.Message_From_UI),tokenResponseReceived:t(i.PlayerEventType.Token_Response_Received),mockMessageTriggered:t(i.PlayerEventType.Mock_Message_Triggered)}}(e),e)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(64),o=n(10),a=n(149);function s(e,n){return t.fromCompare(o.on(n.compare)(e))}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length?function(t){return s(e[0],t)}:s(e[0],e[1])}t.URI="Ord",t.unsafeCompare=function(e,t){return e<t?-1:e>t?1:0},t.ordString=r({},i.eqString,{compare:t.unsafeCompare}),t.ordNumber=r({},i.eqNumber,{compare:t.unsafeCompare}),t.ordBoolean=r({},i.eqBoolean,{compare:t.unsafeCompare}),t.lt=function(e){return function(t,n){return-1===e.compare(t,n)}},t.lessThan=t.lt,t.gt=function(e){return function(t,n){return 1===e.compare(t,n)}},t.greaterThan=t.gt,t.leq=function(e){return function(t,n){return 1!==e.compare(t,n)}},t.lessThanOrEq=t.leq,t.geq=function(e){return function(t,n){return-1!==e.compare(t,n)}},t.greaterThanOrEq=t.geq,t.min=function(e){return function(t,n){return 1===e.compare(t,n)?n:t}},t.max=function(e){return function(t,n){return-1===e.compare(t,n)?n:t}},t.clamp=function(e){var n=t.min(e),r=t.max(e);return function(e,t){return function(i){return r(n(i,t),e)}}},t.between=function(e){var n=t.lt(e),r=t.gt(e);return function(e,t){return function(i){return!n(i,e)&&!r(i,t)}}},t.fromCompare=function(e){var t=function(t,n){return t===n?0:e(t,n)};return{equals:function(e,n){return 0===t(e,n)},compare:t}},t.contramap=u,t.getSemigroup=function(){return{concat:function(e,n){return t.fromCompare((function(t,r){return a.semigroupOrdering.concat(e.compare(t,r),n.compare(t,r))}))}}},t.getTupleOrd=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length;return t.fromCompare((function(t,n){for(var i=0;i<r-1;i++){var o=e[i].compare(t[i],n[i]);if(0!==o)return o}return e[i].compare(t[i],n[i])}))},t.getProductOrd=function(e,n){return t.getTupleOrd(e,n)},t.getDualOrd=function(e){return t.fromCompare((function(t,n){return e.compare(n,t)}))},t.ord={URI:t.URI,contramap:function(e,t){return u(t,e)}},t.ordDate=t.ord.contramap(t.ordNumber,(function(e){return e.valueOf()}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(65);function i(e){return{equals:function(t,n){return t===n||e(t,n)}}}function o(e,t){return e===t}t.URI="Eq",t.fromEquals=i,t.strictEqual=o;var a={equals:o};t.eqString=a,t.eqNumber=a,t.eqBoolean=a,t.getStructEq=function(e){return i((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},t.getTupleEq=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i((function(t,n){return e.every((function(e,r){return e.equals(t[r],n[r])}))}))},t.eq={URI:t.URI,contramap:function(e,t){return i((function(n,r){return e.equals(t(n),t(r))}))}};var s=r.pipeable(t.eq).contramap;t.contramap=s,t.eqDate=t.eq.contramap(t.eqNumber,(function(e){return e.valueOf()}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10);t.pipe=function(e,t,n,r,i,o,a,s,u,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return o(i(r(n(t(e)))));case 7:return a(o(i(r(n(t(e))))));case 8:return s(a(o(i(r(n(t(e)))))));case 9:return u(s(a(o(i(r(n(t(e))))))));case 10:return c(u(s(a(o(i(r(n(t(e)))))))))}};t.pipeable=function(e){var t={};if(function(e){return"function"==typeof e.map}(e)){t.map=function(t){return function(n){return e.map(n,t)}}}if(function(e){return"function"==typeof e.contramap}(e)){t.contramap=function(t){return function(n){return e.contramap(n,t)}}}if(function(e){return"function"==typeof e.mapWithIndex}(e)){t.mapWithIndex=function(t){return function(n){return e.mapWithIndex(n,t)}}}if(function(e){return"function"==typeof e.ap}(e)){t.ap=function(t){return function(n){return e.ap(n,t)}},t.apFirst=function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}}if(function(e){return"function"==typeof e.chain}(e)){t.chain=function(t){return function(n){return e.chain(n,t)}},t.chainFirst=function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}},t.flatten=function(t){return e.chain(t,r.identity)}}if(function(e){return"function"==typeof e.bimap}(e)){t.bimap=function(t,n){return function(r){return e.bimap(r,t,n)}},t.mapLeft=function(t){return function(n){return e.bimap(n,t,r.identity)}}}if(function(e){return"function"==typeof e.extend}(e)){t.extend=function(t){return function(n){return e.extend(n,t)}},t.duplicate=function(t){return e.extend(t,r.identity)}}if(function(e){return"function"==typeof e.reduce}(e)){t.reduce=function(t,n){return function(r){return e.reduce(r,t,n)}},t.foldMap=function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}},t.reduceRight=function(t,n){return function(r){return e.foldr(r,t,n)}}}if(function(e){return"function"==typeof e.reduceWithIndex}(e)){t.reduceWithIndex=function(t,n){return function(r){return e.reduceWithIndex(r,t,n)}},t.foldMapWithIndex=function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}},t.reduceRightWithIndex=function(t,n){return function(r){return e.foldrWithIndex(r,t,n)}}}if(function(e){return"function"==typeof e.alt}(e)){t.alt=function(t){return function(n){return e.alt(n,t())}}}if(function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)){t.filter=function(t){return function(n){return e.filter(n,t)}},t.filterMap=function(t){return function(n){return e.filterMap(n,t)}},t.partition=function(t){return function(n){return e.partition(n,t)}},t.partitionMap=function(t){return function(n){return e.partitionMap(n,t)}}}if(function(e){return"function"==typeof e.filterWithIndex}(e)){t.filterWithIndex=function(t){return function(n){return e.filterWithIndex(n,t)}},t.filterMapWithIndex=function(t){return function(n){return e.filterMapWithIndex(n,t)}},t.partitionWithIndex=function(t){return function(n){return e.partitionWithIndex(n,t)}},t.partitionMapWithIndex=function(t){return function(n){return e.partitionMapWithIndex(n,t)}}}if(function(e){return"function"==typeof e.promap}(e)){t.promap=function(t,n){return function(r){return e.promap(r,t,n)}}}if(function(e){return"function"==typeof e.compose}(e)){t.compose=function(t){return function(n){return e.compose(n,t)}}}if(function(e){return"function"==typeof e.throwError}(e)){t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.value):e.of(t.value)},t.fromPredicate=function(t,n){return function(r){return t(r)?e.of(r):e.throwError(n(r))}},t.filterOrElse=function(t,n){return function(r){return e.chain(r,(function(r){return t(r)?e.of(r):e.throwError(n(r))}))}}}return t}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(18),t),i(n(27),t)},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCCProvider=void 0;var i=n(1),o=n(28),a=n(7),s=n(27),u=n(0),c=i.Log.getLogger("DefaultCCProvider").filter("captions.provider"),l=function(){function e(){var e=this;this._onVideoEngineModuleNotification=function(t){var n=t.result;switch(n.type){case u.VideoEngineEventType.Caption_Track_Added:e._notifyTrackChanged(a.CaptionTrackAction.Added,n.track);break;case u.VideoEngineEventType.Caption_Track_Selected:e._notifyTrackChanged(a.CaptionTrackAction.Selected,n.track);break;case u.VideoEngineEventType.Caption_Track_Deselected:e._notifyTrackChanged(a.CaptionTrackAction.Deselected,n.track);break;case u.VideoEngineEventType.Caption_Track_Removed:e._notifyTrackChanged(a.CaptionTrackAction.Removed,n.track);break;case u.VideoEngineEventType.Caption_Cue_Parsed:e._notifyCueChanged(a.CaptionCueAction.Parsed,n.cue);break;case u.VideoEngineEventType.Caption_Cue_Entered:e._notifyCueChanged(a.CaptionCueAction.Entered,n.cue);break;case u.VideoEngineEventType.Caption_Cue_Exited:e._notifyCueChanged(a.CaptionCueAction.Exited,n.cue);break;case u.VideoEngineEventType.Caption_Cue_Updated:e._notifyCueChanged(a.CaptionCueAction.Updated,n.cue);break;case u.VideoEngineEventType.Media_Loaded:e._handleMediaLoaded();break;case u.VideoEngineEventType.Media_Seeking_Started:e._selectedTrack&&(e._activeCuesOnSeek=e._activeCues.slice(0));break;case u.VideoEngineEventType.Media_Seeking_Finished:if(e._selectedTrack&&e._activeCuesOnSeek&&e._activeCuesOnSeek.length>0){var r=e._activeCuesOnSeek.filter((function(t){return e._activeCues.indexOf(t)>-1}));c.debug('Forcing exit for unexpectedly active cues: "'+r.map((function(e){return e.id})).join(", ")+'"'),e._exitCues(r),e._activeCuesOnSeek.length=0,e._activeCuesOnSeek=null}}},this.events=s.createCCProviderEventCollection(),this._activeCues=[],this._source=null,this._moduleNotificationBinding=null,this._mediaHasLoaded=!1,this._requestedTrackIdForSelection=null,this._selectedTrack=null,this._nextCueId=0,this._tracks={},this._cueIdentityMap={},this._activeCuesOnSeek=null}return e.prototype._notifyTrackChanged=function(e,t){switch(e){case a.CaptionTrackAction.Added:if(this._tracks[t.id])return void c.warn('Ignoring unexpected "added" event for "'+t.id+'" - track already added');this._tracks[t.id]=t;break;case a.CaptionTrackAction.Selected:if(this._selectedTrack=t,!this._mediaHasLoaded&&null===this._requestedTrackIdForSelection)return;break;case a.CaptionTrackAction.Deselected:this._selectedTrack&&this._selectedTrack.id===t.id&&(this._selectedTrack=null,this._cueIdentityMap={});break;case a.CaptionTrackAction.Removed:this._selectedTrack&&this._selectedTrack.id===t.id&&(this._selectedTrack=null,this._cueIdentityMap={}),delete this._tracks[t.id]}this.events.trackChanged.dispatch({action:e,track:t})},e.prototype._notifyCueChanged=function(e,t){switch(e){case a.CaptionCueAction.Parsed:this._handleCueParsed(t);break;case a.CaptionCueAction.Updated:this._handleCueUpdated(t);break;case a.CaptionCueAction.Entered:case a.CaptionCueAction.Exited:this._handleCueEnteredOrExited(e,t);break;case a.CaptionCueAction.Removed:break;default:throw new i.UnreachableCaseError(e)}},e.prototype._handleCueParsed=function(e){if(!this._resolveTrackedCueData(e.range,e.content)){var t=this._getNewCueId(),n=this._assignCueId(e,t);this._trackCue(n),this.events.cueChanged.dispatch({action:a.CaptionCueAction.Parsed,cue:n})}},e.prototype._handleCueUpdated=function(e){var t=this._resolveTrackedCueData(e.range,e.content);if(t){var n=this._assignCueId(e,t.id);i.ObjectUtils.updateValues(t,n),this.events.cueChanged.dispatch({action:a.CaptionCueAction.Updated,cue:n})}else this._handleCueParsed(e)},e.prototype._handleCueEnteredOrExited=function(e,t){var n=t.range,r=t.content,i=this._resolveTrackedCueData(n,r);if(i||(c.warn('Cue action: "'+e+'", unable to resolve tracked cue data - treating as a new cue'),this._handleCueParsed(t),i=this._resolveTrackedCueData(n,r))){var o=this._assignCueId(t,i.id);switch(e){case a.CaptionCueAction.Entered:if(!this._trackActiveCue(o))return void c.debug("Could not track active cue - ID "+o.id+" found to already be active");break;case a.CaptionCueAction.Exited:if(!this._removeActiveCue(o))return void c.debug("Could not remove tracked active cue - ID "+o.id+" not found to be active")}this.events.cueChanged.dispatch({action:e,cue:o})}else c.error('Could not properly handle cue "'+e+'", unable to resolve on-the-fly tracked cue')},e.prototype._handleMediaLoaded=function(){this._mediaHasLoaded=!0,this._selectedTrack&&null===this._requestedTrackIdForSelection&&this._notifyTrackChanged(a.CaptionTrackAction.Selected,this._selectedTrack)},e.prototype._getNewCueId=function(){return this._nextCueId++,"cue-"+this._nextCueId},e.prototype._assignCueId=function(e,t){var n=e;return n.id=t,n},e.prototype._trackCue=function(e){this._cueIdentityMap[e.content]||(this._cueIdentityMap[e.content]=[]),this._cueIdentityMap[e.content].push({id:e.id,range:e.range,metadata:e.metadata})},e.prototype._resolveTrackedCueData=function(e,t){var n=this._cueIdentityMap[t];if(!n)return null;var r=n.find((function(t){return t.range.start===e.start}));return r||null},e.prototype._trackActiveCue=function(e){return-1===this._activeCues.findIndex((function(t){return t.id===e.id}))&&(this._activeCues.push(e),!0)},e.prototype._removeActiveCue=function(e){var t=this._activeCues.findIndex((function(t){return t.id===e.id}));return-1!==t&&(this._activeCues.splice(t,1),!0)},e.prototype._exitCues=function(e){var t=this;this._selectedTrack&&e.forEach((function(e){t._handleCueEnteredOrExited(a.CaptionCueAction.Exited,e)}))},e.prototype._removeCue=function(e){if(e.content in this._cueIdentityMap){var t=this._cueIdentityMap[e.content],n=t.findIndex((function(t){return t.range.start==e.range.start&&t.range.end==e.range.end}));n>-1&&(t.splice(n,1),this.events.cueChanged.dispatch({action:a.CaptionCueAction.Removed,cue:r({},e)}))}},e.prototype._pruneCuesWithinRange=function(e){var t=this,n=[],o=[];for(var s in this._cueIdentityMap)for(var u=this._cueIdentityMap[s],c=u.length-1;c>=0;--c){var l=u[c];i.TimeRangeUtils.intersectsRange(l.range,e)&&(n.push({id:l.id,range:l.range,metadata:l.metadata,content:s}),u.splice(c,1),0===u.length&&o.push(s))}o.forEach((function(e){delete t._cueIdentityMap[e]})),n.forEach((function(e){t.events.cueChanged.dispatch({action:a.CaptionCueAction.Removed,cue:r({trackId:t._selectedTrack?t._selectedTrack.id:"Unknown Track ID"},e)})}))},e.prototype.setSourceContext=function(e){this._source||(this._source=e,this._moduleNotificationBinding=this._source.moduleNotification.listen(this._onVideoEngineModuleNotification))},e.prototype.selectTrack=function(e){this._source?this._requestedTrackIdForSelection!==e?(this._requestedTrackIdForSelection=e,this._source.processCommand({type:o.VideoEngineCommand.Select_Caption_Track,data:{trackId:e}})):c.debug("[selectTrack] ignoring, track already requested for selection"):c.debug("[selectTrack] ignoring, source not set")},e.prototype.deselectTrack=function(e){this._source?(this._requestedTrackIdForSelection===e&&(this._requestedTrackIdForSelection=null),this._source.processCommand({type:o.VideoEngineCommand.Deselect_Caption_Track,data:{trackId:e}})):c.debug("[deselectTrack] ignoring, source not set")},e.prototype.updateSettings=function(e){this._source?this._source.processCommand({type:o.VideoEngineCommand.Update_Caption_Settings,data:{settings:e}}):c.debug("[updateSettings] ignoring, source not set")},e.prototype.removeCue=function(e){this._removeCue(e)},e.prototype.prune=function(e){this._pruneCuesWithinRange(e)},e.prototype.destroy=function(){this._moduleNotificationBinding&&(this._moduleNotificationBinding.detach(),this._moduleNotificationBinding=null),this._activeCues.length=0,this._mediaHasLoaded=!1,this._tracks={},this._requestedTrackIdForSelection=null,this._selectedTrack=null,this._nextCueId=0,this._cueIdentityMap={},this._source=null,this._activeCuesOnSeek&&(this._activeCuesOnSeek.length=0),this._activeCuesOnSeek=null},e}();t.DefaultCCProvider=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoEngineController=void 0;var r=n(1),i=n(29),o=n(0),a=r.Log.getLogger("VideoEngineController").filter("playback"),s=function(){function e(e){var t=this;this._onEngineEvent=function(e,n){t.moduleNotification.dispatch({module:o.ModuleType.Video_Engine,category:o.ModuleEventCategory.Component_Event,result:n})},this._engine=e,this._bindings=[this._engine.events.listen(this._onEngineEvent)],this._config=new o.ConfigInstance({}),this.moduleNotification=r.createEvent("moduleNotification")}return e.prototype.setup=function(e){var t=this;return r.TaskFactory.create((function(n){t._config.extend(e.playerConfig),t._engine.setup(e.playerConfig,e.playlistItem).then((function(){n.resolve(e.playerConfig)})).catch(n.reject)})).execute()},e.prototype.updateConfig=function(e){this._config.extend(e),this._engine.updateConfig(e)},e.prototype.processCommand=function(e){var t=e.data||{};switch(e.type){case i.VideoEngineCommand.Play:var n=t.fileData,o=t.playlistItem,s=t.config;this._engine.play(n,o,s);break;case i.VideoEngineCommand.Stop:this._engine.stop();break;case i.VideoEngineCommand.Pause:this._engine.pause();break;case i.VideoEngineCommand.Resume:this._engine.resume();break;case i.VideoEngineCommand.Seek:this._engine.seek(t.time);break;case i.VideoEngineCommand.Seek_To_Live:this._engine.seekToLive();break;case i.VideoEngineCommand.Resize:this._engine.resize(t.width,t.height);break;case i.VideoEngineCommand.Select_Caption_Track:var u=r.ObjectUtils.getOrElse(t,"trackId",null);u?this._engine.selectCaptionTrack(u):a.warn("[processCommand] missing caption track ID from command "+e.type);break;case i.VideoEngineCommand.Deselect_Caption_Track:var c=r.ObjectUtils.getOrElse(t,"trackId",null);c?this._engine.deselectCaptionTrack(c):a.warn("[processCommand] missing caption track ID from command "+e.type);break;case i.VideoEngineCommand.Update_Caption_Settings:this._engine.updateCaptionSettings(t.settings);break;case i.VideoEngineCommand.Destroy:a.warn("[processCommand] must use destroy() API");break;case i.VideoEngineCommand.Ad_Click:this._engine.adClicked();break;case i.VideoEngineCommand.Apply_DRM_Token:var l=e.data||{},d=l.id,f=l.token;this._engine.applyDRMToken(d,f);break;default:throw new r.UnreachableCaseError(e.type)}},e.prototype.handleModuleNotification=function(e){},e.prototype.handlePlayerNotification=function(e){},e.prototype.destroy=function(){return this._bindings.forEach((function(e){return e.detach()})),this._bindings=[],this._engine.destroy()},e}();t.VideoEngineController=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdStateTriggers=void 0,function(e){e.Start="start",e.Idle="idle",e.Load="load",e.Loaded="loaded",e.Buffer_Stall_Started="bufferStallStart",e.Buffer_Stall_Finished="bufferStallFinish",e.Play="playing",e.Pause="paused",e.Stop="stopped",e.Finish="finish"}(t.AdStateTriggers||(t.AdStateTriggers={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaStateTriggers=void 0,function(e){e.Start="start",e.Idle="idle",e.Load="load",e.Loaded="loaded",e.Buffer_Stall_Started="bufferStallStart",e.Buffer_Stall_Finished="bufferStallFinish",e.Play="playing",e.Pause="pause",e.Seek="seek",e.Stop="stop",e.Finish="finish",e.Error="error"}(t.MediaStateTriggers||(t.MediaStateTriggers={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateChangeHandlerAdFsmConfig=t.StateChangeHandlerMediaFsmConfig=void 0;var r=n(72),i=n(30),o=n(0),a={initial:{name:r.MediaStateTriggers.Start,state:o.MediaState.Pending},events:[{name:r.MediaStateTriggers.Idle,to:o.MediaState.Pending},{name:r.MediaStateTriggers.Load,from:[o.MediaState.Pending],to:o.MediaState.Starting},{name:r.MediaStateTriggers.Loaded,from:[o.MediaState.Starting],to:o.MediaState.Loaded},{name:r.MediaStateTriggers.Play,from:[o.MediaState.Pending,o.MediaState.Loaded,o.MediaState.Paused,o.MediaState.Seeking,o.MediaState.Buffering],to:o.MediaState.Playing},{name:r.MediaStateTriggers.Buffer_Stall_Started,from:[o.MediaState.Playing],to:o.MediaState.Buffering},{name:r.MediaStateTriggers.Buffer_Stall_Finished,from:[o.MediaState.Buffering],to:o.MediaState.Playing},{name:r.MediaStateTriggers.Pause,from:[o.MediaState.Playing,o.MediaState.Seeking],to:o.MediaState.Paused},{name:r.MediaStateTriggers.Seek,from:[o.MediaState.Playing,o.MediaState.Paused],to:o.MediaState.Seeking},{name:r.MediaStateTriggers.Stop,to:o.MediaState.Stopped},{name:r.MediaStateTriggers.Finish,from:[o.MediaState.Playing,o.MediaState.Stopped],to:o.MediaState.Finished},{name:r.MediaStateTriggers.Error,to:o.MediaState.Error}]};t.StateChangeHandlerMediaFsmConfig=a;var s={initial:{name:i.AdStateTriggers.Start,state:o.AdState.Pending},events:[{name:i.AdStateTriggers.Idle,to:o.AdState.Pending},{name:i.AdStateTriggers.Load,from:[o.AdState.Pending],to:o.AdState.Starting},{name:i.AdStateTriggers.Loaded,from:[o.AdState.Starting],to:o.AdState.Loaded},{name:i.AdStateTriggers.Play,from:[o.AdState.Loaded,o.AdState.Paused,o.AdState.Buffering],to:o.AdState.Playing},{name:i.AdStateTriggers.Buffer_Stall_Started,from:[o.AdState.Playing],to:o.AdState.Buffering},{name:i.AdStateTriggers.Buffer_Stall_Finished,from:[o.AdState.Buffering],to:o.AdState.Playing},{name:i.AdStateTriggers.Pause,from:[o.AdState.Playing],to:o.AdState.Paused},{name:i.AdStateTriggers.Stop,to:o.AdState.Stopped},{name:i.AdStateTriggers.Finish,from:[o.AdState.Playing],to:o.AdState.Finished}]};t.StateChangeHandlerAdFsmConfig=s},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(70),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdsConverter=void 0;var r=n(1),i=n(31),o=n(0),a=function(){function e(){}return e.toAdBreak=function(t,n,i){var a,s,u=r.ObjectUtils.getOrElse(t,"scheduleTime",-1),c=r.ObjectUtils.getOrElse(t,"duration",-1),l=function(){var e=r.ObjectUtils.getOrElse(t,"id","");if(e&&"unknown"!==e)return e;var n={start:-1,end:-1};return n.start=Math.floor(u),n.end=n.start+Math.floor(c),"ad-break-"+n.start+"s->"+n.end+"s"}(),d=(s=null!==(a=t.position)&&void 0!==a?a:o.AdBreakPosition.Unknown)!==o.AdBreakPosition.Unknown?t.position:i?s:u<=0?o.AdBreakPosition.Preroll:u<n?o.AdBreakPosition.Midroll:u>=n?o.AdBreakPosition.Postroll:o.AdBreakPosition.Unknown,f={id:l,position:d,type:d,state:t.state?t.state:o.AdState.Pending,scheduleTime:u,duration:c,ads:[]};return Array.isArray(t.ads)&&(f.ads=t.ads.map(e.toAdCreative)),f},e.toAdBreakMetadata=function(e){var t=e.id,n=e.position;return{id:t,position:n,type:n,scheduleTime:e.scheduleTime,duration:e.duration}},e.toAdCreative=function(e){var t,n,i,o,a,s,u,c,l,d,f=null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"unknown-ad-creative-id",p="object"==typeof e.uiConfig?!r.ObjectUtils.getOrElse(e,"uiConfig.requestsUi",!0):r.ObjectUtils.getOrElse(e,"requiresUi",!1),h="number"==typeof e.sequence?e.sequence:0;return{id:f,clickThroughUrl:null!==(n=e.clickThroughUrl)&&void 0!==n?n:"",clickThroughUrlOpened:null!==(i=e.clickThroughUrlOpened)&&void 0!==i?i:null,duration:null!==(o=e.duration)&&void 0!==o?o:-1,currentTime:-1,requiresUi:p,sequence:h,isFiller:null!==(a=e.isFiller)&&void 0!==a&&a,creativeId:null!==(s=e.creativeId)&&void 0!==s?s:"",adTitle:null!==(u=e.adTitle)&&void 0!==u?u:"",advertiser:null!==(c=e.advertiser)&&void 0!==c?c:"",adSystem:null!==(l=e.adSystem)&&void 0!==l?l:"",firstAdId:"NA",firstAdSystem:"NA",firstCreativeId:"NA",mediaFileUrl:null!==(d=e.mediaFileUrl)&&void 0!==d?d:void 0}},e.toTimelineMarker=function(e,t){return i.Marker.createForAd(e.id,r.TimeRange.create(e.scheduleTime,1),t)},e}();t.AdsConverter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMarkerEventCollection=void 0;var r=n(0),i=n(1);t.createMarkerEventCollection=function(){return i.createEventCollection({approaching:i.createEvent(r.MarkerEventType.Approaching),activated:i.createEvent(r.MarkerEventType.Activated),finishing:i.createEvent(r.MarkerEventType.Finishing),deactivated:i.createEvent(r.MarkerEventType.Deactivated)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeTransformedSsaiKvps=t.isIncomingAdParamValueInReplaceableFormat=t.transformSsaiKvp=t.transformTemplatedAdsKvps=void 0;var r=n(4),i=n(5);function o(e){var t=e.adParamKey,n=e.adParamValue,o=e.configMetadataKvpsMap,s=e.playlistEntry,u=e.PlatformInfo;if(!a(n))return{adParamKey:t,adParamValue:n};var c=r.fromNullable(o["ssai."+t]).getOrElse(""),l="";switch(t){case"caid":var d=r.fromNullable(s.metadata).getOrElse({});l="string"!=typeof d?r.fromNullable(d.mediaId).getOrElse(c):c;break;case"vdur":l=void 0!==s.trt?""+s.trt:c;break;case"_fw_vcid2":if(""==c){var f=u.nexus.nexusTarget;f!==i.NexusPlatform.iOS&&f!==i.NexusPlatform.Android&&f!==i.NexusPlatform.React_Native||(l=r.fromNullable(u.application.applicationIdentifier).getOrElse(c))}else l=c;break;case"_ifa_type":l=""==c?"sessionid":c;break;case"_fw_did":l=""==c?"sessionid:"+r.fromNullable(u.application.applicationIdentifier).getOrElse(c):c;break;default:l=c}return{adParamKey:t,adParamValue:l}}function a(e){return/^\[.*?\]/gi.test(e)}function s(e,t){var n=t.adParamKey,r=t.adParamValue;return e[n]=r,e}t.transformTemplatedAdsKvps=function(e){var t=e.contentUrlKvpsMap,n=e.configMetadataKvpsMap,i=e.playlistEntry,a=e.PlatformInfo;return Object.keys(t).map((function(e){return o({adParamKey:e,adParamValue:r.fromNullable(t[e]).getOrElse(""),configMetadataKvpsMap:n,playlistEntry:i,PlatformInfo:a})})).reduce(s,{})},t.transformSsaiKvp=o,t.isIncomingAdParamValueInReplaceableFormat=a,t.mergeTransformedSsaiKvps=s},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(32),o=n(6),a=n(162);function s(e,n){return t.fromCompare(o.on(n.compare)(e))}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length?function(t){return s(e[0],t)}:s(e[0],e[1])}t.URI="Ord",t.unsafeCompare=function(e,t){return e<t?-1:e>t?1:0},t.ordString=r({},i.eqString,{compare:t.unsafeCompare}),t.ordNumber=r({},i.eqNumber,{compare:t.unsafeCompare}),t.ordBoolean=r({},i.eqBoolean,{compare:t.unsafeCompare}),t.lt=function(e){return function(t,n){return-1===e.compare(t,n)}},t.lessThan=t.lt,t.gt=function(e){return function(t,n){return 1===e.compare(t,n)}},t.greaterThan=t.gt,t.leq=function(e){return function(t,n){return 1!==e.compare(t,n)}},t.lessThanOrEq=t.leq,t.geq=function(e){return function(t,n){return-1!==e.compare(t,n)}},t.greaterThanOrEq=t.geq,t.min=function(e){return function(t,n){return 1===e.compare(t,n)?n:t}},t.max=function(e){return function(t,n){return-1===e.compare(t,n)?n:t}},t.clamp=function(e){var n=t.min(e),r=t.max(e);return function(e,t){return function(i){return r(n(i,t),e)}}},t.between=function(e){var n=t.lt(e),r=t.gt(e);return function(e,t){return function(i){return!n(i,e)&&!r(i,t)}}},t.fromCompare=function(e){var t=function(t,n){return t===n?0:e(t,n)};return{equals:function(e,n){return 0===t(e,n)},compare:t}},t.contramap=u,t.getSemigroup=function(){return{concat:function(e,n){return t.fromCompare((function(t,r){return a.semigroupOrdering.concat(e.compare(t,r),n.compare(t,r))}))}}},t.getTupleOrd=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length;return t.fromCompare((function(t,n){for(var i=0;i<r-1;i++){var o=e[i].compare(t[i],n[i]);if(0!==o)return o}return e[i].compare(t[i],n[i])}))},t.getProductOrd=function(e,n){return t.getTupleOrd(e,n)},t.getDualOrd=function(e){return t.fromCompare((function(t,n){return e.compare(n,t)}))},t.ord={URI:t.URI,contramap:function(e,t){return u(t,e)}},t.ordDate=t.ord.contramap(t.ordNumber,(function(e){return e.valueOf()}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformHelperComponentURI=void 0,function(e){e.Default="com.turner.top.platformhelper.default"}(t.PlatformHelperComponentURI||(t.PlatformHelperComponentURI={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NexusPlatform=void 0,function(e){e.Unknown="unknown",e.Android="android",e.iOS="ios",e.Web="web",e.React_Native="react-native"}(t.NexusPlatform||(t.NexusPlatform={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoEngineComponentURI=void 0,function(e){e.TUB="com.turner.top.videoEngine.tub"}(t.VideoEngineComponentURI||(t.VideoEngineComponentURI={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CCController=void 0;var r=n(1),i=n(66),o=n(7),a=n(3),s=n(12),u=n(13),c=n(34),l=n(20),d=n(0),f=n(9),p=r.Log.getLogger("CCController").filter("captions"),h=function(){function e(e,t,n){var o=this;this._onCCManagerEvent=function(e,t){switch(e){case i.CCEventType.Track_Added:if(o._queuedAutoTrackSelectionByLang){var n=t.id,r=o._ccManager.tracks.find((function(e){return e.id===n}));if((null==r?void 0:r.lang)===o._queuedAutoTrackSelectionByLang)o._ccManager.selectTrackByLang(o._queuedAutoTrackSelectionByLang)&&(p.debug('Auto-selected track w/ lang "'+o._queuedAutoTrackSelectionByLang+'" as a result of an earlier failed attempt on mediaStarted'),o._queuedAutoTrackSelectionByLang=null)}}o._notifyModuleNotification({module:d.ModuleType.Captions,category:d.ModuleEventCategory.Component_Event,result:t})},this.moduleNotification=r.createEvent("moduleNotification"),this._ccManager=e,this._bindings=[this._ccManager.events.listen(this._onCCManagerEvent)],this._savePreferencesTask=null,this._systemDefaults=r.ObjectUtils.assign({},l.DefaultCCSettings(),t),this._userSettings=n,this._preferences={enabled:null,lang:null,settings:c.mergeSystemAndUserSettings(this._systemDefaults,n)},this._queuedAutoTrackSelectionByLang=null}return e.prototype._notifyModuleNotification=function(e){this.moduleNotification.dispatch(e)},e.prototype._savePreferences=function(){var e=this;return r.TaskFactory.create((function(t){var n=e._preferences,r=n.enabled,i=n.lang;Promise.all([s.saveCCEnabled(r),s.saveCCLang(i),s.saveCCSettings(e._userSettings)]).then((function(){return t.resolve()})).catch((function(e){return t.reject(e)}))})).execute()},e.prototype._retrievePreferences=function(){var e=this;return r.TaskFactory.create((function(t){Promise.all([s.getSavedCCEnabled(),s.getSavedCCLang(),s.getSavedCCSettings()]).then((function(n){var i=n[0],o=n[1],a=n[2];r.ObjectUtils.assign(a,e._userSettings);var s=c.mergeSystemAndUserSettings(e._systemDefaults,a);t.resolve({enabled:i,lang:o,settings:s})})).catch((function(e){t.reject("[_retrievePreferences] Could not retrieve from storage: "+e)}))})).execute()},e.prototype._onVideoEngineEvent=function(e,t){switch(e){case d.VideoEngineEventType.Media_Loaded:this._preferences.settings&&this._ccManager.updateSettings(this._preferences.settings);break;case d.VideoEngineEventType.Media_Started:var n=this._preferences,r=n.lang,i=n.enabled;if(null!==r&&!1!==i)this._ccManager.selectTrackByLang(r)||(this._queuedAutoTrackSelectionByLang=r);null!==i&&this._ccManager.setEnabled(i)}},e.prototype._handlePruneMonitorEvent=function(e){switch(e.type){case f.PruneMonitorEventType.Sliding_Window_Changed:this._ccManager.prune(r.TimeRange.createWithEnd(0,e.minTime))}},e.prototype.setup=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return r.TaskFactory.create((function(n){var i=e.playerModel;t._ccManager.init({model:i}),t._model=i,t._retrievePreferences().fold((function(e){return n.reject(a.PlayerErrorFactory.captionsStorageFailure(e))}),(function(e){r.ObjectUtils.assign(t._preferences,e),n.resolve()}))})).execute()},e.prototype.updateConfig=function(e){},e.prototype.processCommand=function(e){var t=this;switch(e.type){case o.CCCommand.Set_Enabled:case o.CCCommand.Select_Track:case o.CCCommand.Select_Track_By_Lang:case o.CCCommand.Update_Settings:switch(e.type){case o.CCCommand.Set_Enabled:var n=r.ObjectUtils.getOrElse(e.data,"enabled",null);"boolean"==typeof n?(this._preferences.enabled=n,this._ccManager.setEnabled(n)):p.warn("[processCommand] missing enabled property on "+e.type+" command data");break;case o.CCCommand.Select_Track:var i=r.ObjectUtils.getOrElse(e.data,"track",null);if(i)this._preferences.lang=i.lang,this._ccManager.selectTrack(i.id)&&(this._queuedAutoTrackSelectionByLang=null);else p.warn("[processCommand] could not find track on "+e.type+" command data");break;case o.CCCommand.Select_Track_By_Lang:var s=r.ObjectUtils.getOrElse(e.data,"lang",null);s?(this._preferences.lang=s,this._ccManager.selectTrackByLang(s)):p.warn("[processCommand] could not find language identifier on "+e.type+" command data");break;case o.CCCommand.Update_Settings:var u=r.ObjectUtils.getOrElse(e.data,"settings",null);if(!u){p.warn("[processCommand] could not find settings on "+e.type+" command data");break}var l=r.ObjectUtils.getOrElse(e.data,"source",d.CCSettingsSource.User);switch(l){case d.CCSettingsSource.User:this._preferences.settings=c.mergeSystemAndUserSettings(this._systemDefaults,u),this._userSettings=c.diffSystemAndUserSettings(this._systemDefaults,u);break;case d.CCSettingsSource.System:this._systemDefaults=u,this._preferences.settings=c.mergeSystemAndUserSettings(this._systemDefaults,this._userSettings);break;default:throw new r.UnreachableCaseError(l)}this._ccManager.updateSettings(this._preferences.settings)}this._savePreferencesTask=this._savePreferences().onRejected((function(e){p.error(a.PlayerErrorFactory.captionsStorageFailure(e).toString())})).onCompleted((function(){t._savePreferencesTask=null}));break;default:throw new r.UnreachableCaseError(e.type)}},e.prototype.handleModuleNotification=function(e){switch(e.module){case d.ModuleType.Video_Engine:var t=e.result,n=t.type,r=t.result;this._onVideoEngineEvent(n,r)}},e.prototype.handlePlayerNotification=function(e){switch(e.sourceType){case u.PlayerNotificationSourceType.Monitors:switch(e.eventCategory){case u.PlayerNotificationEventCategory.Prune:this._handlePruneMonitorEvent(e.eventResult)}}},e.prototype.destroy=function(){var e=this;return new Promise((function(t,n){e._savePreferencesTask&&e._savePreferencesTask.cancel(),e._bindings.forEach((function(e){return e.detach()})),e._bindings=[],e._ccManager.destroy(),t()}))},e}();t.CCController=h},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;var r=n(1),i=n(5),o=function(){function t(e){this._config=e,this._storage=this._getPlatformStorage()}return t.create=function(e){var n={platform:i.NexusPlatform.Unknown,prefix:"top-player::"};return new t(r.ObjectUtils.extendDeep({},n,e||{}))},t.prototype._getPlatformStorage=function(){var t=this,n=(e.NexusPlatform||{}).localStorage;switch(this._config.platform){case i.NexusPlatform.Web:return{get:function(e){return n.get(e)},set:function(e,t){return n.set(e,t)}};case i.NexusPlatform.Android:return{get:function(e){return n.get(e).then((function(e){return"string"==typeof e?t._transformDoubleEncodedData(e):e}))},set:function(e,t){return n.set(e,t)}};case i.NexusPlatform.iOS:return{get:function(e){return n.get(e)},set:function(e,t){return n.set(e,t)}};default:return{get:function(){return Promise.resolve("")},set:function(){return Promise.resolve()}}}},t.prototype._transformDoubleEncodedData=function(e){var t='"true"'===e||'"false"'===e,n='"null"'===e,r=-1!==e.indexOf("{\\"),i=!t&&!n&&!r&&'"'===e[0]&&'"'===e[e.length-1];if(t||n||i)return e.substr(1,e.length-2);if(r)try{return JSON.parse(e)}catch(t){return e}return e},t.prototype.updateConfig=function(e){r.ObjectUtils.extendDeep(this._config,e),e.platform&&(this._storage=this._getPlatformStorage())},t.prototype.get=function(e){return this._storage.get(""+this._config.prefix+e)},t.prototype.set=function(e,t){return this._storage.set(""+this._config.prefix+e,t)},t}();t.Storage=o.create()}).call(this,n(19))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getLifecycleState=t.getAndRemoveLifecycleState=t.LifecycleStorageKeys=void 0;var o,a=n(1),s=n(12),u=a.Log.getLogger("LifecycleStorage").filter("lifecycle");function c(){return r(this,void 0,void 0,(function(){var e,t,n,r;return i(this,(function(i){switch(i.label){case 0:return[4,Promise.all([s.Storage.get(o.config).then((function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return u.error("Error retrieving config from storage: "+e),null}})),s.Storage.get(o.playlistItem).then((function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return u.error("Error retrieving playlistItem from storage: "+e),null}})),s.Storage.get(o.currentTime).then((function(e){if(!e)return null;try{return parseFloat(e)}catch(t){return u.error("Error parsing "+e+" as Number: "+t),null}}))])];case 1:return e=i.sent(),t=e[0],n=e[1],r=e[2],[2,{config:t,playlistItem:n,currentTime:r}]}}))}))}!function(e){e.config="lifecycle-config",e.playlistItem="lifecycle-playlist-item",e.currentTime="lifecycle-current-time"}(o=t.LifecycleStorageKeys||(t.LifecycleStorageKeys={})),t.getAndRemoveLifecycleState=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){return(e=c()).then((function(){s.Storage.set(o.config,"null"),s.Storage.set(o.currentTime,"null"),s.Storage.set(o.playlistItem,"null")})),[2,e]}))}))},t.getLifecycleState=c},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(176),t),i(n(84),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LifecycleEventType=void 0,function(e){e.Model_Update_Request="modelUpdateRequest",e.State_Changed="stateChanged"}(t.LifecycleEventType||(t.LifecycleEventType={}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.LifecycleController=void 0;var o=n(1),a=n(35),s=n(12),u=n(83),c=n(0),l=o.Log.getLogger("LifecycleController").filter("lifecycle"),d=function(){function e(){this._lastLifecycleState=c.LifecycleState.Continue,this.moduleNotification=o.createEvent("moduleNotification")}return e.prototype._saveState=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,o;return i(this,(function(i){return this._config.persistence?(e=function(e,t){if("hooks"!==e){if("__ref"!==e)return t;l.error("__ref key in state, these will not store properly.")}},t=JSON.stringify(this._model.config,e),n=JSON.stringify(this._model.playlistItem,e),r=[s.Storage.set(s.LifecycleStorageKeys.config,t),s.Storage.set(s.LifecycleStorageKeys.playlistItem,n)],this._model.contentIsLive||(o=JSON.stringify(this._model.mediaTime),r.push(s.Storage.set(s.LifecycleStorageKeys.currentTime,o))),[2,Promise.all(r)]):(l.info("[_saveState] Ignoring, persistence has been disabled"),[2,Promise.resolve([])])}))}))},e.prototype._removeState=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){return e=[s.Storage.set(s.LifecycleStorageKeys.config,"null"),s.Storage.set(s.LifecycleStorageKeys.playlistItem,"null"),s.Storage.set(s.LifecycleStorageKeys.currentTime,"null")],[2,Promise.all(e)]}))}))},e.prototype._convertLifecycleEventToMode=function(e){switch(e){case c.LifecycleEvent.Playback:return c.LifecycleState.Continue;case c.LifecycleEvent.Background:return this._config.background;case c.LifecycleEvent.FocusLost:return this._config.focusLost;case c.LifecycleEvent.Unload:return c.LifecycleState.Unload}},e.prototype.setup=function(e){var t=this;return o.TaskFactory.create((function(n){t._model=e.playerModel,t._config=e.playerConfig.lifecycle,n.resolve()})).execute()},e.prototype.handleModuleNotification=function(e){},e.prototype.handlePlayerNotification=function(e){},e.prototype.processCommand=function(e){var t=this;if(l.verbose("[processCommand] "+e.type+" / "+e.data),e.data)switch(e.type){case a.LifecycleCommand.LifecycleChange:var n=Promise.resolve();switch(e.data.event){case c.LifecycleEvent.Background:n=this._saveState();break;case c.LifecycleEvent.Unload:n=this._removeState()}var r=this._convertLifecycleEventToMode(e.data.event);n.then((function(){var e={type:u.LifecycleEventType.Model_Update_Request,changes:[{property:c.ModelKeys.Lifecycle_State,value:r}]},n={type:u.LifecycleEventType.State_Changed,previousState:t._lastLifecycleState,currentState:r};t.moduleNotification.dispatch({module:c.ModuleType.Lifecycle,category:c.ModuleEventCategory.Component_Event,result:e}),t.moduleNotification.dispatch({module:c.ModuleType.Lifecycle,category:c.ModuleEventCategory.Component_Event,result:n}),t._lastLifecycleState=r}))}else l.debug("expecting data on LifecycleCommands")},e.prototype.updateConfig=function(){},e.prototype.destroy=function(){return Promise.resolve()},e}();t.LifecycleController=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MocksEventType=t.createMocksEventCollection=void 0;var r,i=n(1);t.createMocksEventCollection=function(){return i.createEventCollection({messageTriggered:i.createEvent(r.Message_Triggered)})},function(e){e.Message_Triggered="messageTriggered"}(r=t.MocksEventType||(t.MocksEventType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnalyticsEventCollection=t.AnalyticsEventMapFactory=t.AnalyticsEventType=void 0;var r,i=n(1);!function(e){e.Model_Update_Request="modelUpdateRequest",e.Mark_Created="markCreated",e.Measure_Created="measureCreated"}(r=t.AnalyticsEventType||(t.AnalyticsEventType={}));t.AnalyticsEventMapFactory=function(){return{modelUpdateRequest:i.createEvent(r.Model_Update_Request),markCreated:i.createEvent(r.Mark_Created),measureCreated:i.createEvent(r.Measure_Created)}},t.createAnalyticsEventCollection=function(){return i.createEventCollection(t.AnalyticsEventMapFactory())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerConfigEnv=void 0;var r=n(0);t.PlayerConfigEnv={dev:{"cms.provider.mediaJson.host":"dev.medium.ngtv.io","cms.provider.mediaJson.versionId":r.MediumVersion.V2,"auth.cdn.spe.host":"dev.token.ngtv.io","auth.drm.isp.host":"dev.token.ngtv.io"},ref:{"cms.provider.mediaJson.host":"ref.medium.ngtv.io","cms.provider.mediaJson.versionId":r.MediumVersion.V2,"auth.cdn.spe.host":"ref.token.ngtv.io","auth.drm.isp.host":"ref.token.ngtv.io"},ite:{"cms.provider.mediaJson.host":"ite.medium.ngtv.io","cms.provider.mediaJson.versionId":r.MediumVersion.V2,"auth.cdn.spe.host":"ite.token.ngtv.io","auth.drm.isp.host":"ite.token.ngtv.io"},prod:{"cms.provider.mediaJson.host":"medium.ngtv.io","cms.provider.mediaJson.versionId":r.MediumVersion.V2,"auth.cdn.spe.host":"token.ngtv.io","auth.drm.isp.host":"token.ngtv.io"}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(178),t),i(n(180),t),i(n(182),t),i(n(184),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GDPRConsentQueryKeys=void 0,function(e){e.GDPR_Consent="_fw_gdpr_consent",e.GDPR_Subject_To="_fw_gdpr"}(t.GDPRConsentQueryKeys||(t.GDPRConsentQueryKeys={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentStallMonitorEventType=t.createContentStallMonitorEventCollection=void 0;var r,i=n(1);t.createContentStallMonitorEventCollection=function(){return i.createEventCollection({contentStalled:i.createEvent(r.Content_Stalled),contentLost:i.createEvent(r.Content_Lost)})},function(e){e.Content_Stalled="contentStalled",e.Content_Lost="contentLost"}(r=t.ContentStallMonitorEventType||(t.ContentStallMonitorEventType={}))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ContentStallMonitor=void 0;var o=n(1),a=n(37),s=n(91),u=n(0),c=o.Log.getLogger("ContentStallMonitor").filter("monitors"),l=function(e){function t(t,n){var r=e.call(this,s.createContentStallMonitorEventCollection(),n,t)||this;return r._onContentStallTimeout=function(){r.stop(),r._notifyContentLost()},r._onTick=function(){if(r._model){var e=r._model.mediaState;e===u.MediaState.Playing||e===u.MediaState.Buffering?r._checkMediaPlaying():r._contentLossTimer&&r._clearContentLossTimeout()}else c.warn("[_onTick] Monitor source does not exist")},r._monitorIntervalTimer=null,r._contentLossTimer=null,r._currentMediaTime=-1,r._timeoutScheduledAt=-1,r}return i(t,e),t.prototype._handleVideoEngineEvent=function(e){switch(e.type){case u.VideoEngineEventType.Media_State_Changed:this._handleMediaStateChanged(e.currentState)}},t.prototype._handleMediaStateChanged=function(e){switch(e){case u.MediaState.Pending:case u.MediaState.Starting:case u.MediaState.Loaded:case u.MediaState.Seeking:case u.MediaState.Stopped:case u.MediaState.Finished:this._clearTickInterval(),this._clearContentLossTimeout();break;case u.MediaState.Error:this._contentLossTimer&&this.stop();break;default:this._startTickInterval()}},t.prototype._startTickInterval=function(){this._monitorIntervalTimer||(this._monitorIntervalTimer=o.Timer(o.TimerMode.Interval,this._onTick,this._config.pollRate),this._monitorIntervalTimer.start())},t.prototype._clearTickInterval=function(){this._monitorIntervalTimer&&(this._monitorIntervalTimer.stop(),this._monitorIntervalTimer=null)},t.prototype._checkMediaPlaying=function(){if(this._model){var e=this._model.mediaTime,t=this._currentMediaTime!==e;this._currentMediaTime=e,t?(this._clearContentLossTimeout(),c.verbose("Playback is not stalled, ensuring no timeout is scheduled")):(this._scheduleInterruptTimeout(1e3*this._config.timeout),c.warn("Potential dead connection detected, waiting "+this._timeUntilTimeout+"s before interrupting"))}},t.prototype._scheduleInterruptTimeout=function(e){this._contentLossTimer||(this._contentLossTimer=o.Timer(o.TimerMode.Timeout,this._onContentStallTimeout,e),this._contentLossTimer.start(),this._timeoutScheduledAt=this._currentUnixTimestamp+e/1e3,this._notifyContentStalled())},t.prototype._clearContentLossTimeout=function(){this._contentLossTimer&&(this._contentLossTimer.stop(),this._contentLossTimer=null,this._timeoutScheduledAt=-1)},t.prototype._notifyContentStalled=function(){this.events.contentStalled.dispatch({timeoutScheduledAt:this._timeoutScheduledAt,currentMediaTime:this._currentMediaTime})},t.prototype._notifyContentLost=function(){this.events.contentLost.dispatch()},Object.defineProperty(t.prototype,"_currentUnixTimestamp",{get:function(){return Date.now()/1e3},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_timeUntilTimeout",{get:function(){return this._timeoutScheduledAt-this._currentUnixTimestamp},enumerable:!1,configurable:!0}),t.prototype.handleModuleNotification=function(t){if(!this.running)return this;switch(t.module){case u.ModuleType.Video_Engine:switch(t.category){case u.ModuleEventCategory.Component_Event:this._handleVideoEngineEvent(t.result)}}return e.prototype.handleModuleNotification.call(this,t),this},t.prototype.stop=function(){return this._clearTickInterval(),this._clearContentLossTimeout(),e.prototype.stop.call(this),this},t}(a.BaseMonitorImpl);t.ContentStallMonitor=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveAdSessionMonitorEventType=t.createLiveAdSessionMonitorEventCollection=void 0;var r,i=n(1);t.createLiveAdSessionMonitorEventCollection=function(){return i.createEventCollection({timedOut:i.createEvent(r.Timed_Out)})},function(e){e.Timed_Out="timedOut"}(r=t.LiveAdSessionMonitorEventType||(t.LiveAdSessionMonitorEventType={}))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LiveAdSessionMonitor=void 0;var o=n(1),a=n(37),s=n(93),u=n(0),c=o.Log.getLogger("LiveAdSessionMonitor").filter("monitors"),l=function(e){function t(t,n){var r=e.call(this,s.createLiveAdSessionMonitorEventCollection(),n,t)||this;return r._handleVideoEngineEvent=function(e){switch(e.type){case u.VideoEngineEventType.Ad_Paused:case u.VideoEngineEventType.Media_Paused:r._startSample();break;case u.VideoEngineEventType.Ad_Resumed:case u.VideoEngineEventType.Media_Resumed:r._endSample()}},r._timeoutSample=null,r}return i(t,e),t.prototype._startSample=function(){c.debug("[startSample] Triggering monitor sample start"),this._timeoutSample=Date.now()},t.prototype._endSample=function(){if(this._timeoutSample){var e=1e3*this._config.timeout,t=Date.now(),n=t-this._timeoutSample;c.debug("[endSample] Triggering monitor sample, sample deltas: ["+t+"] - ["+this._timeoutSample+"] = ["+n+"]"),c.debug("[endSample] Max delta is: ["+e+"]"),n>e&&this.events.timedOut.dispatch(),this._timeoutSample=null}},t.prototype.handleModuleNotification=function(t){if(!this.running)return this;switch(t.module){case u.ModuleType.Video_Engine:switch(t.category){case u.ModuleEventCategory.Component_Event:this._handleVideoEngineEvent(t.result)}}return e.prototype.handleModuleNotification.call(this,t),this},t}(a.BaseMonitorImpl);t.LiveAdSessionMonitor=l},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PruneMonitor=void 0;var o=n(1),a=n(37),s=n(9),u=n(0),c=o.Log.getLogger("PruneMonitor").filter("monitors"),l=function(e){function t(t,n){var r=e.call(this,s.createPruneMonitorEventCollection(),n,t)||this;return r._currentTime=-1,r._slidingWindowStart=-1,r._minTime=-1,r._pruneTriggerTime=-1,r._onModelUpdated=function(e){r._model.mediaState===u.MediaState.Playing&&e.changed.forEach((function(e){switch(e.property){case u.ModelKeys.Content_Seekable_Range:var t=e.currentValue.start;t!==r._slidingWindowStart&&(r._slidingWindowStart=t)}}))},r._bindings=[r._model.modelUpdated.listen(r._onModelUpdated)],r}return i(t,e),t.prototype._handleVideoEngineEvent=function(e){switch(e.type){case u.VideoEngineEventType.Media_Time_Changed:this._handleMediaTimeChanged(e)}},t.prototype._handleMediaTimeChanged=function(e){this._currentTime=e.time,-1===this._pruneTriggerTime&&this._handleFirstTimeChanged(),this._currentTime>this._pruneTriggerTime&&this._handlePruneTrigger()},t.prototype._handleFirstTimeChanged=function(){this._pruneTriggerTime=this._currentTime+this._config.slidingWindowThreshold,c.debug("[handleFirstTimeChanged] First Prune will trigger at: "+this._pruneTriggerTime)},t.prototype._handlePruneTrigger=function(){-1!==this._slidingWindowStart?(c.debug("[handlePruneTrigger] Prune triggered with time of: "+this._pruneTriggerTime),this._pruneTriggerTime+=this._config.slidingWindowThreshold,this._minTime=this._slidingWindowStart-this._config.slidingWindowBuffer,this._minTime<=0||this._notifySlidingWindowChanged()):c.warn("[handlePruneTrigger] The sliding window has no start.")},t.prototype._notifySlidingWindowChanged=function(){c.debug("Pruning is available for the current sliding window with min time of: "+this._minTime+"."),this.events.slidingWindowChanged.dispatch({minTime:this._minTime})},t.prototype.handleModuleNotification=function(t){if(!this.running)return this;switch(t.module){case u.ModuleType.Video_Engine:switch(t.category){case u.ModuleEventCategory.Component_Event:this._handleVideoEngineEvent(t.result)}}return e.prototype.handleModuleNotification.call(this,t),this},t.prototype.destroy=function(){return this._bindings.forEach((function(e){return e.detach()})),this._bindings.length=0,e.prototype.destroy.call(this),this},t}(a.BaseMonitorImpl);t.PruneMonitor=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsComponentURI=void 0,function(e){e.Default="com.turner.top.analytics.default"}(t.AnalyticsComponentURI||(t.AnalyticsComponentURI={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(38),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CuesComponentURI=void 0,function(e){e.Default="com.turner.top.cues.default"}(t.CuesComponentURI||(t.CuesComponentURI={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MocksComponentURI=void 0,function(e){e.Default="com.turner.top.mocks.default"}(t.MocksComponentURI||(t.MocksComponentURI={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(197),t),i(n(101),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnforcePeripheralHookHandlers=t.clearPlayerHooksCollection=t.populatePlayerHooksCollection=t.populatePlayerHook=t.createPlayerHooksCollection=t.createPlayerHook=void 0;var r=n(1),i=n(0);function o(){return new r.CoreHook}function a(e,t){Object.keys(t).forEach((function(n){var r=n,i=t[r];i&&i.forEach((function(t){return e.add(t,r)}))}))}t.createPlayerHook=o,t.createPlayerHooksCollection=function(){var e;return(e={})[i.PlayerHookName.Check_Auto_Play]=o(),e[i.PlayerHookName.Check_GDPR_Consent]=o(),e[i.PlayerHookName.Add_Platform_Metadata]=o(),e[i.PlayerHookName.Auth_Refresh]=o(),e[i.PlayerHookName.Validate_Content_Resolution]=o(),e[i.PlayerHookName.Validate_DRM_Token_Request]=o(),e[i.PlayerHookName.Validate_DRM_Token_Response]=o(),e},t.populatePlayerHook=a,t.populatePlayerHooksCollection=function(e,t){return Object.keys(t).forEach((function(n){var r=n,i=e[r],o=t[r];o&&a(i,o)})),e},t.clearPlayerHooksCollection=function(e){Object.keys(e).forEach((function(t){e[t].clearAll()}))},t.EnforcePeripheralHookHandlers=function(e){return{set:function(t){return e.set(t,r.HookHandlerType.Peripheral)},clear:function(){return e.clear(r.HookHandlerType.Peripheral)}}}},function(e,t,n){"use strict";(function(e){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerController=void 0;var o=n(1),a=i(n(198)),s=i(n(200)),u=i(n(201)),c=n(13),l=n(233),d=n(11),f=n(51),p=n(16),h=n(131),g=n(132),y=n(81),v=n(101),_=n(36),m=n(105),b=i(n(234)),C=i(n(134)),E=n(8),T=n(78),S=n(82),P=n(24),M=n(77),O=n(0),k=function(){function t(e){var t=this;this._onPlatformInfoResolved=function(e){var t,n;d.populatePlatformInfo(e);var r=null!==(t=e.nexus.nexusTarget)&&void 0!==t?t:T.NexusPlatform.Unknown;r==T.NexusPlatform.React_Native&&(r=null!==(n=e.nexus.nexusVariant)&&void 0!==n?n:T.NexusPlatform.Unknown),y.Storage.updateConfig({platform:r})},this._onPlatformInfoRejected=function(){t._fsm.attemptTransition(m.PlayerStateTriggers.Error,[E.PlayerErrorFactory.playerInitFailure("Error when resolving Nexus platform info")])},this._onFsmEvent=function(e,n){var r=n.from,i=n.to;switch(e){case o.FsmEventType.State_Entered:switch(i){case O.PlayerState.Initialized:if(!t._initController)return t._logger.error("[_onFsmEvent] missing init controller"),void t._fsm.fireTransition(m.PlayerStateTriggers.Error,[{error:E.PlayerErrorFactory.playerInitFailure("Initialization Controller was expected, but not available.")}]);t._initController.destroy(),t._initController=null;break;case O.PlayerState.Listening:if(t._transactionManager&&!t._transactionManager.isRunning()){var a=t._setupConfigData.toData().config.lifecycle;a.enabled&&a.persistence&&S.getAndRemoveLifecycleState().then(t._handleLifecycleStoredContent)}}break;case o.FsmEventType.State_Changed:switch(t.model.handlePlayerStateChange({previousState:r,currentState:i}),t._notifyStateChanged(r,i),i){case O.PlayerState.Initialized:t._handlePlayerInitializedState();break;case O.PlayerState.Attached:t._fsm.fireTransition(m.PlayerStateTriggers.Listen);break;case O.PlayerState.Listening:t._handlePlayerListeningState();break;case O.PlayerState.Destroying:switch(t._logger.debug("[_onFsmEvent] destroying..."),t.model.contentState){case O.TransactionState.Interrupting:case O.TransactionState.Interrupted:case O.TransactionState.Ending:break;case O.TransactionState.Ended:case O.TransactionState.Pending:t._viewController&&(t._viewController.destroy(),t._viewController=null);break;default:t._transactionManager&&t._transactionManager.processCommand({type:O.PlayerCommandType.Stop})}break;case O.PlayerState.Destroyed:t._logger.debug("[_onFsmEvent] destroyed"),t._bindings.forEach((function(e){return e.detach()})),t._bindings=[],t._transactionManager&&(t._transactionManager.destroy(),t._transactionManager=null),t._viewController&&(t._viewController.destroy(),t._viewController=null),t._destroyDeferred&&t._destroyDeferred.resolver();break;case O.PlayerState.Error:var s=(n.args||[])[0],u=void 0;u=(null==s?void 0:s.error)?s.error:new E.PlayerError({code:{category:O.CategoryType.Unknown,code:O.CategoryCode.Unspecified},message:"An unknown issue occured in the player.",severity:O.ErrorSeverity.Fatal}),t._queuePlayerError(u),t._logger.warn("Player errored with: "+u.toString())}break;case o.FsmEventType.Error:t._notifyStateChanged(t._fsm.currentState(),O.PlayerState.Error)}},this._processCommandOp=function(e,n){var r,i;switch(n.type){case O.PlayerCommandType.Attach:if(!t._viewController)return void e.reject();t._viewController.attach(n.container),e.resolve();break;case O.PlayerCommandType.Enter_Fullscreen:if(!t._viewController)return void e.reject();t._viewController.enterFullscreen();break;case O.PlayerCommandType.Exit_Fullscreen:if(!t._viewController)return void e.reject();t._viewController.exitFullscreen();break;case O.PlayerCommandType.Play:if(null===(r=t._transactionManager)||void 0===r?void 0:r.isRunning())return t._logger.info("[_processCommandOp] Play request - Interrupting current transaction"),void t._interruptAndQueueCommand(e,n);t._hookHandlers=null!==(i=n.hooks)&&void 0!==i?i:{},v.populatePlayerHooksCollection(t.hooks,t._hookHandlers);break;case O.PlayerCommandType.Replay:var a=t.model.playlistItem;if(!a)return t._logger.warn("[_processCommandOp] Cannot replay, previous playlist item not found"),void e.reject();t.processCommand({type:O.PlayerCommandType.Play,contentData:O.ContentEntryBuilder.forEntryData().withContentEntryData(a.entry).build(),options:a.options,hooks:t._hookHandlers}),e.resolve();break;case O.PlayerCommandType.Update_Config:return void(t._transactionManager?(t._transactionManager.updateConfig(n.config),e.resolve()):e.reject());case O.PlayerCommandType.Detach:if(!t._viewController||!t._viewController.isAttached())return t._logger.warn("[_processCommandOp] Invalid state to detach"),void e.reject();t._viewController.detach({exitFullscreenOnDetach:n.exitFullscreenOnDetach}),e.resolve();break;case O.PlayerCommandType.Message_From_UI:t.events.moduleNotification.dispatch({module:O.ModuleType.UI,category:O.ModuleEventCategory.Component_Event,result:{type:n.type,name:n.name,payload:n.payload}});break;case O.PlayerCommandType.Destroy:if(!(null!==t._fsm.currentState()))return e.resolve(),t._logger.warn("Destroying a player that setup was not called on."),t._fsm.init(s.default),void t._fsm.fireTransition(m.PlayerStateTriggers.Destroy);switch(t._fsm.attemptTransition(m.PlayerStateTriggers.Destroy)){case o.FsmTransitionResult.Canceled:case o.FsmTransitionResult.Error:e.reject(),t._destroyDeferred&&t._destroyDeferred.rejector("Cannot destroy from current player state");break;case o.FsmTransitionResult.Succeeded:e.resolve()}return}t._transactionManager&&t._transactionManager.processCommand(n),e.resolve()},this._processNotificationOp=function(e,n){t.model.handleModuleNotification(n),t._transactionManager&&t._transactionManager.propagateNotification(n),t._viewController&&t._viewController.handleModuleNotification(n),t._notifyModuleNotification(n),t._transactionManager&&t._transactionManager.completeNotification(n),e.resolve()},this._processPlayerError=function(e,n){e.resolve(),t._notifyPlayerError(n)},this._onTransactionEvent=function(e,n){switch(e){case O.TransactionEventType.Module_Notification:t._onModuleNotification(n);break;case O.TransactionEventType.State_Changed:t._onTransactionStateChanged(n);break;case O.TransactionEventType.Config_Updated:t._onTransactionConfigUpdated(n);break;default:throw new o.UnreachableCaseError(e)}},this._handleLifecycleStoredContent=function(e){var n=e.config,i=e.playlistItem,o=e.currentTime;null!==n&&null!==i&&("string"!=typeof n?"string"!=typeof i?(o&&(n.media.offset=o),t._logger.debug("calling play with lifecycle restore"),t.processCommand({type:O.PlayerCommandType.Play,contentData:i.entry,options:r(r({},i.options),{config:n})})):"null"===i?t._logger.debug("[getAndRemoveLifecycleState] Stored playlist item is currently null"):t._logger.warn("[getAndRemoveLifecycleState] Playlist item is a string and may not have been serialized properly"):"null"===n?t._logger.debug("[getAndRemoveLifecycleState] Stored play config is currently null"):t._logger.warn("[getAndRemoveLifecycleState] Play config is a string and may not have been serialized properly"))},this._onInitEvent=function(e,n){switch(e){case h.InitEventType.State_Changed:t._onInitStateChanged(n);break;default:throw new o.UnreachableCaseError(e)}},this._onViewEvent=function(e,n){switch(e){case g.ViewEventType.State_Changed:t._onViewStateChanged(n)}},this._playerId=e,this._logger=o.Log.getLogger("PlayerController"+this._playerId),this.hooks=v.createPlayerHooksCollection(),this.events=p.createPlayerControllerEventCollection(),this._queuedExtCommands=[],this._initController=null,this._viewController=null,this._transactionManager=null,this._destroyDeferred=null,this._hookHandlers={},this._setupConfigData=new O.ConfigInstance({}),this._opsManager=new a.default,this._fsm=new o.Fsm,this._bindings=[],this.model=new _.PlayerModel,this._platformInfoTask=this._resolvePlatformInfo().fold(this._onPlatformInfoRejected,this._onPlatformInfoResolved)}return t.prototype._resolvePlatformInfo=function(){return o.TaskFactory.create((function(t){e.NexusPlatform.getPlatformInfo().then(t.resolve).catch(t.reject)})).execute()},t.prototype._queuePlayerError=function(e){this._opsManager.queuePlayerError(this._processPlayerError,e)},t.prototype._notifyPlayerError=function(e){this.events.playerError.dispatch({error:e})},t.prototype._notifyStateChanged=function(e,t){this.events.playerStateChanged.dispatch({previousState:e,currentState:t})},t.prototype._notifyViewStateChanged=function(e,t,n){this.events.viewStateChanged.dispatch({previousState:e,currentState:t,args:n})},t.prototype._notifyModuleNotification=function(e){this.events.moduleNotification.dispatch(e)},t.prototype._interruptAndQueueCommand=function(e,t){e.reject(),this.processCommand({type:O.PlayerCommandType.Stop}),this._queuedCommandForInterruption=t},t.prototype._handlePlayerInitializedState=function(){this._platformHelper&&(this._viewController=new C.default(this._playerId,this._platformHelper),this._bindings.push(this._viewController.events.listen(this._onViewEvent)),this._viewController.init({container:this._setupConfigData.getOrElse("container",null),config:this.model.config}))},t.prototype._handlePlayerListeningState=function(){var e=this;if(0!==this._queuedExtCommands.length){var t=this._queuedExtCommands.filter((function(e){return l.PlayerCommandHelper.isPriority(e)}));t.length>0&&(this._queuedExtCommands.length=0,this._logger.verbose("[_onFsmEvent:Listening] clearing external API command queue, found priority command: "+t[0].type),this.processCommand(t.shift())),this._queuedExtCommands.forEach((function(t){e._logger.verbose("[_onFsmEvent:Listening] processing external API command: "+t.type),e.processCommand(t)})),this._queuedExtCommands.length=0}},t.prototype._onModuleNotification=function(e){this._opsManager.queueNotificationOp(this._processNotificationOp,e)},t.prototype._onTransactionStateChanged=function(e){switch(e.currentState){case O.TransactionState.Ended:v.clearPlayerHooksCollection(this.hooks)}switch(this.model.handleTransactionStateChange(e),this._transactionManager&&this._transactionManager.handlePlayerNotification({sourceType:c.PlayerNotificationSourceType.Transaction,eventCategory:c.PlayerNotificationEventCategory.State_Changed,eventType:p.PlayerControllerEventType.Transaction_State_Changed,eventResult:e}),e.currentState){case O.TransactionState.Error:var t=(e.args||[])[0];t?this._queuePlayerError(t.error):this._logger.warn("got a transaction error that wasn't a player error");break;case O.TransactionState.Ended:this._queuedCommandForInterruption&&this._fsm.currentState()!==O.PlayerState.Destroying?(this.processCommand(this._queuedCommandForInterruption),this._queuedCommandForInterruption=null):this._fsm.currentState()===O.PlayerState.Destroying&&this._viewController&&(this._viewController.destroy(),this._viewController=null)}this.events.transactionStateChanged.dispatch({currentState:e.currentState,previousState:e.previousState,args:e.args})},t.prototype._onTransactionConfigUpdated=function(e){this.model.handleTransactionConfigUpdate(e),this.events.transactionConfigUpdated.dispatch({type:p.PlayerControllerEventType.Transaction_Config_Updated,config:e.config})},t.prototype._onInitStateChanged=function(e){var t=this;switch(e.currentState){case P.InitState.Initializing:this._fsm.fireTransition(m.PlayerStateTriggers.Initialize);break;case P.InitState.Initialized:if(!this._initController)return;this._setupConfigData.extend(this._initController.config),this._transactionManager=new u.default(this._playerId),this._bindings.push(this._transactionManager.events.listen(this._onTransactionEvent));var n=f.ComponentRegistry.get(O.ComponentCategory.PlatformHelper,M.PlatformHelperComponentURI.Default,this._playerId);this._platformHelper=n.factory(),this._transactionManager.init({container:this._setupConfigData.getOrElse("container",null),config:this._setupConfigData.getOrElse("config",{}),model:this.model,hooks:this.hooks},this._platformHelper).fold((function(e){t._fsm.fireTransition(m.PlayerStateTriggers.Error,[{error:e}])}),(function(){t._fsm.fireTransition(m.PlayerStateTriggers.Initialized)}));break;case P.InitState.Error:this._fsm.fireTransition(m.PlayerStateTriggers.Error,e.args)}},t.prototype._onViewStateChanged=function(e){var t=this;switch(this.model.handleViewStateChange(e),this._notifyViewStateChanged(e.previousState,e.currentState,e.args),e.currentState){case O.ViewState.Created:var n=this._queuedExtCommands.filter((function(e){return e.type===O.PlayerCommandType.Attach}));this._queuedExtCommands=this._queuedExtCommands.filter((function(e){return e.type!==O.PlayerCommandType.Attach})),n.forEach((function(e){t._logger.verbose("[_onFsmEvent:Initialized] processing external API Command: "+e.type),t.processCommand(e)}));break;case O.ViewState.Attaching:this._fsm.fireTransition(m.PlayerStateTriggers.Attach);break;case O.ViewState.Attached:this.model.rootContainer&&this.model.subContainer?this._fsm.fireTransition(m.PlayerStateTriggers.Attached):this._fsm.fireTransition(m.PlayerStateTriggers.Error,[{description:"Missing root or sub container references"}]);break;case O.ViewState.Detaching:this._fsm.attemptTransition(m.PlayerStateTriggers.Detach);break;case O.ViewState.Detached:this._fsm.attemptTransition(m.PlayerStateTriggers.Detached);break;case O.ViewState.Destroyed:this._fsm.fireTransition(m.PlayerStateTriggers.Destroyed);break;case O.ViewState.Error:this._fsm.fireTransition(m.PlayerStateTriggers.Error,e.args)}},t.prototype._configureDebugMode=function(e){var t;d.PlatformInfo.nexus.nexusTarget!==T.NexusPlatform.Web&&(("boolean"==typeof e.debug?o.ObjectUtils.getOrElse(e,"debug",!1):o.ObjectUtils.getOrElse(e,"debug.enabled",!1))?(o.Log.setEnabled(!0),o.Log.updateConfig({levels:(t={},t[o.LogLevelCompositeType.Dev]=!0,t)})):o.Log.updateConfig({enabled:!1}))},t.prototype.init=function(e){var t=this;this._platformInfoTask.onResolved((function(){t._fsm.init(s.default),t._bindings.push(t._fsm.events.listen(t._onFsmEvent)),t._initController=new b.default(t._playerId),t._initController.events.listen(t._onInitEvent),t._initController.init(e)}))},t.prototype.processCommandWithResult=function(e){var t=this.model,n=t.playerState,r=t.contentState;return l.PlayerCommandHelper.canProcess(e,n,r)&&this._transactionManager?(this._logger.verbose("[processCommand] processing: "+e.type+" | player/content - "+n+"/"+r),this._transactionManager.processCommandWithResult(e)):(this._logger.verbose("[processCommand] rejecting: "+e.type+" | player/content - "+n+"/"+r),Promise.reject('Command "'+e.type+'" rejected due to invalid state.'))},t.prototype.processCommand=function(e){var t=this.model,n=t.playerState,r=t.contentState;l.PlayerCommandHelper.canProcess(e,n,r)?(this._logger.verbose("[processCommand] processing: "+e.type+" | player/content - "+n+"/"+r),this._opsManager.queueCommandOp(this._processCommandOp,e)):l.PlayerCommandHelper.canFutureQueue(n)?(this._logger.verbose("[processCommand] holding: "+e.type+" | player/content - "+n+"/"+r),this._queuedExtCommands.push(e)):this._logger.verbose("[processCommand] rejecting: "+e.type+" | player/content - "+n+"/"+r)},t.prototype.destroy=function(){return this._platformInfoTask.running&&this._platformInfoTask.cancel(),this.processCommand({type:O.PlayerCommandType.Destroy}),this._destroyDeferred=o.createDeferred(),this._destroyDeferred.promise},t}();t.PlayerController=k}).call(this,n(19))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerOperationType=void 0,function(e){e.Command="command",e.Notification="notification",e.Player_Error="playerError"}(r||(r={})),t.PlayerOperationType=r},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(24),t),i(n(105),t),i(n(39),t),i(n(40),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerStateTriggers=void 0,function(e){e.Start="start",e.Initialize="initialize",e.Initialized="initialized",e.Attach="attach",e.Attached="attached",e.Listen="listen",e.Detach="detach",e.Detached="detached",e.Destroy="destroy",e.Destroyed="destroyed",e.Error="error"}(t.PlayerStateTriggers||(t.PlayerStateTriggers={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigManager=void 0;var r=n(4),i=n(1),o=n(41),a=n(107),s=n(23),u=n(0),c=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._processStrategySection=function(e,t,n,o){var a=i.ObjectUtils.get(n,t),s=i.ObjectUtils.get(o,t),u=i.ObjectUtils.get(e,t);if(i.ObjectUtils.isPlainObject(u))Object.keys(u).forEach((function(e){r._processStrategySection(u,e,a,s)}));else if(i.isFunction(u)){var c=u;i.ObjectUtils.set(o,t,c(a,s))}},this._config=new u.ConfigInstance(e),this._mergingHandler=t,this._validator=n}return e.prototype._merge=function(e,t){var n,r,o=this;return t=i.ObjectUtils.extendDeep({},t),e=i.ObjectUtils.extendDeep({},e),function(t){var n=o._mergingHandler.getForPostProcessing(t);return i.ObjectUtils.isEmpty(n)||Object.keys(n).forEach((function(r){o._processStrategySection(n,r,e,t)})),t}(function(t){var n=o._mergingHandler.getForStandardProcessing(t);return i.ObjectUtils.isEmpty(n)||Object.keys(n).forEach((function(r){o._processStrategySection(n,r,e,t)})),t}((n=t,r=o._mergingHandler.getForPreProcessing(n),i.ObjectUtils.isEmpty(r)||Object.keys(r).forEach((function(t){o._processStrategySection(r,t,e,n)})),n)))},e.prototype.merge=function(e){var t=this._config.toData();return this._merge(t,e)},e.prototype.extend=function(e){return this._config.extend(e),this._config.toData()},e.prototype.validate=function(e){var t=r.none;this._validator&&(t=this._validator(e));var n={valid:!1,message:""};return n.message=t.foldL((function(){return n.valid=!0,"Config passed validation"}),(function(e){return n.valid=!1,"\n          Invalid configuration has been provided:\n          "+e.map((function(e){return"    - "+e}))+"\n\n          Refer to API documentation."})),n},e.prototype.apply=function(e){var t=this.merge(e);return this.extend(t)},e.prototype.getUpdateSupportFor=function(e){e=i.ObjectUtils.extendDeep({},e);var t=i.ObjectUtils.extendDeep({},a.PlayerConfigUpdateConstraints.config),n=function(e,t){Object.keys(e).forEach((function(r){var o=function(e,t,n){for(var r in t)i.ObjectUtils.isPlainObject(t[r])?(e[r]={},o(e[r],t[r],n)):e[r]=n;return e},a=i.ObjectUtils.isObj(t[r]),s=i.ObjectUtils.isObj(e[r]);a&&s?n(e[r],t[r]):a&&!s&&(e[r]=o({},t[r],e[r]))}))};n(t,s.PlayerConfigDefaults.config);var r=function(e){Object.keys(e).forEach((function(t){var n=e[t];i.ObjectUtils.isPlainObject(n)?r(n):i.ObjectUtils.set(e,t,o.PlayerConfigUpdateConstraint.Immediate)}))};return r(e),i.ObjectUtils.updateValues(e,t),e},e.prototype.getImmediatelyUpdatableConfig=function(e){e=i.ObjectUtils.extendDeep({},e);var t=this.getUpdateSupportFor(e),n=i.ObjectUtils.filter(t,o.PlayerConfigUpdateConstraint.Immediate),r=i.ObjectUtils.compact(n);return i.ObjectUtils.updateValues(r,e),r},e.prototype.createConfigInstance=function(e){var t=new u.ConfigInstance(this._config.toData());if(e){var n=this._merge(this._config.toData(),e);t.extend(n)}return t},e.prototype.getOrElse=function(e,t){return this._config.getOrElse(e,t)},e}();t.ConfigManager=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerConfigUpdateConstraints=void 0;var r=n(41);t.PlayerConfigUpdateConstraints={container:r.PlayerConfigUpdateConstraint.Never,config:{ads:{enabled:r.PlayerConfigUpdateConstraint.Next_Play,profile:r.PlayerConfigUpdateConstraint.Next_Play,kvps:r.PlayerConfigUpdateConstraint.Next_Play,companions:r.PlayerConfigUpdateConstraint.Immediate},features:{ccpa:r.PlayerConfigUpdateConstraint.Immediate,gdpr:r.PlayerConfigUpdateConstraint.Next_Play,tve:r.PlayerConfigUpdateConstraint.Next_Play},playback:{components:r.PlayerConfigUpdateConstraint.Next_Play},auth:r.PlayerConfigUpdateConstraint.Next_Play,media:{capBitrateToSize:r.PlayerConfigUpdateConstraint.Next_Play,offset:r.PlayerConfigUpdateConstraint.Next_Play,startBitrate:r.PlayerConfigUpdateConstraint.Next_Play},drm:r.PlayerConfigUpdateConstraint.Next_Play,cms:{providers:r.PlayerConfigUpdateConstraint.Next_Play},lifecycle:r.PlayerConfigUpdateConstraint.Next_Play,monitors:{liveAdSession:r.PlayerConfigUpdateConstraint.Next_Play,contentStall:r.PlayerConfigUpdateConstraint.Next_Play,adStartDetection:r.PlayerConfigUpdateConstraint.Next_Play,prune:r.PlayerConfigUpdateConstraint.Next_Play},mocks:r.PlayerConfigUpdateConstraint.Next_Play,ui:r.PlayerConfigUpdateConstraint.Immediate,debug:r.PlayerConfigUpdateConstraint.Immediate}}},function(module,exports,__webpack_require__){"use strict";(function(global){Object.defineProperty(exports,"__esModule",{value:!0}),exports.StringReplacer=void 0;var std_lib_block_shared_1=__webpack_require__(1),Option_1=__webpack_require__(4),logger=std_lib_block_shared_1.Log.getLogger("StringReplacer").filter("config"),RANDOM_LIMIT=2e3,StringReplacer=function(){function StringReplacer(){this._initialized=!1}return StringReplacer.prototype._configTokenReplacement=function(e,t){var n=this;std_lib_block_shared_1.ObjectUtils.isObj(e)?std_lib_block_shared_1.ObjectUtils.keyValues(e).forEach((function(r){var i=r.value;std_lib_block_shared_1.ObjectUtils.isPlainObject(r.value)||Array.isArray(r.value)?i=n._configTokenReplacement(r.value,t):"string"==typeof r.value&&(i=n._stringTokenReplacement(r.value,t)),std_lib_block_shared_1.ObjectUtils.set(e,r.key,i)})):Array.isArray(e)?e.forEach((function(e){return n._configTokenReplacement(e,t)})):"string"==typeof e&&this._stringTokenReplacement(e,t);return e},StringReplacer.prototype._stringTokenReplacement=function(e,t){var n=this._getTokensMap(e,t);return std_lib_block_shared_1.replaceTokens(e,n,{pattern:"${token}"})},StringReplacer.prototype._getTokensMap=function(e,t){t=t||{};for(var n={},r=/\$\{(.+?)\}/i;r.test(e);){var i=e.match(r),o=i[1],a=o.split("."),s=a.shift(),u=a.join("."),c=null;switch(s){case"javascript":c=this._searchTheClient(global,u);break;case"page":switch(u){case"url":c=this._getPlatformUrl();break;case"domain":c=this._getPlatformDomain();break;default:c=null}break;case"random":c=std_lib_block_shared_1.getRandomInt(RANDOM_LIMIT).toString();break;case"content":switch(u){case"id":c=this._playlistItem.entry.id;break;default:c=std_lib_block_shared_1.ObjectUtils.getOrElse(this._contentMetadata,u,null)}break;case"config":c=std_lib_block_shared_1.ObjectUtils.getOrElse(this._configMetadata,u,null);break;case"metadata":c=std_lib_block_shared_1.ObjectUtils.getOrElse(this._contentMetadata,u,std_lib_block_shared_1.ObjectUtils.getOrElse(this._configMetadata,u,null));break;case"context":c=std_lib_block_shared_1.ObjectUtils.getOrElse(t,u,null)}logger.verbose("[_getTokensMap] value: "+std_lib_block_shared_1.stringify(c)),null!==c?n[o]=c:logger.warn('[_getTokensMap] invalid token "'+o+'"'),e=std_lib_block_shared_1.matchedRight(i)}return n},StringReplacer.prototype._searchTheClient=function(objectRoot,path){var stringReplacerRoot=Option_1.fromNullable(objectRoot).getOrElse(global);try{return eval("stringReplacerRoot."+path)}catch(e){return void logger.warn("[searchTheClient] Unable to find path "+path+" on object "+objectRoot+", error: "+e)}},StringReplacer.prototype._getPlatformUrl=function(){return location?location.href:null},StringReplacer.prototype._getPlatformDomain=function(){return location?location.host:null},StringReplacer.prototype.init=function(e){var t;this._playlistItem=null!==(t=e.playlistItem)&&void 0!==t?t:{id:"",entry:{},options:{}},this._configMetadata=e.configMetadata,this._contentMetadata=std_lib_block_shared_1.ObjectUtils.getOrElse(e.playlistItem,"entry.metadata",{}),this._initialized=!0},StringReplacer.prototype.setupConfigTokenReplacement=function(e,t){var n=this;this._initialized?std_lib_block_shared_1.ObjectUtils.keyValues(e).forEach((function(r){"ads"!==r.key&&std_lib_block_shared_1.ObjectUtils.set(e,r.key,n._configTokenReplacement(r.value,t))})):logger.warn("[setupConfigTokenReplacement] used before replacer initialized")},StringReplacer.prototype.configTokenReplacement=function(e,t){this._initialized?this._configTokenReplacement(e,t):logger.warn("[configTokenReplacement] used before replacer initialized")},StringReplacer}();exports.StringReplacer=StringReplacer}).call(this,__webpack_require__(19))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthDrmTokenHeaderName=void 0,function(e){e.iSP="x-isp-token"}(t.AuthDrmTokenHeaderName||(t.AuthDrmTokenHeaderName={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthDRMToken=void 0;var r=function(){function e(e,t,n,r,i){this._token=e,this._assetId=r,this._companyId=i,this._ttl=t/1e3,this._createdAt=n/1e3,this._expiresAt=this._createdAt+this._ttl}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assetId",{get:function(){return this._assetId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"companyId",{get:function(){return this._companyId},enumerable:!1,configurable:!0}),e.prototype.isExpired=function(e){var t,n;return(null!==(t=null==e?void 0:e.currentTime)&&void 0!==t?t:Date.now())/1e3>=this._expiresAt-(null!==(n=null==e?void 0:e.threshold)&&void 0!==n?n:10)},e}();t.AuthDRMToken=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentEntryDataToPlaylistItem=t.SelectContentFromContentEntryData=t.LoadContentEntryData=void 0;var r=n(4),i=n(1),o=n(44),a=n(3),s=n(115),u=n(0);t.LoadContentEntryData=function(e,t,n,r){return i.TaskFactory.create((function(c){var l=n.contentData;if(!l)return c.reject(a.PlayerErrorFactory.cmsResolutionFailure("Unresolvable play data "+l));t.isSectionEnabled(u.ToggleableSections.Ads)&&s.ExtendPlayDataWithAdProfileKvps(t,l);var d=t.getOrElse("cms",o.PlayerConfigDefaults.config.cms);e.load(l,d).execute().fold((function(e){return c.reject(e)}),(function(e){r.execute({data:i.ObjectUtils.extendDeep({},e)}).fold((function(e){return c.reject(e)}),(function(e){return c.resolve(e.data)}))}))})).execute()},t.SelectContentFromContentEntryData=function(e,t,n){return i.TaskFactory.create((function(r){return e.selectContent(t,n).fold((function(e){return r.reject(e)}),(function(e){e.url?r.resolve(e):r.reject(a.PlayerErrorFactory.cmsSelectionFailure("Resolved content file entry has no playback URL"))}))})).execute()},t.ContentEntryDataToPlaylistItem=function(e,t){return i.ObjectUtils.extendDeep({},{id:"playlist-item-"+e.id,entry:e,options:r.fromNullable(t).getOrElse({})})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(209),t),i(n(114),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMergeStrategyHandler=void 0;var r=n(1),i=n(114),o=n(88),a=n(210),s=n(0);t.DefaultMergeStrategyHandler=function(e){return void 0===e&&(e=!1),{getForPreProcessing:function(t){var n={};return r.getEnumValues(s.ToggleableSections).filter((function(e){switch(e){case s.ToggleableSections.Auth:case s.ToggleableSections.Analytics:case s.ToggleableSections.DRM:return!1;default:return!0}})).forEach((function(o){var a=e?"config."+o:o,s=r.ObjectUtils.getOrElse(t,a,void 0),u=r.isNull(s),c=r.isBoolean(s),l=r.ObjectUtils.isPlainObject(s)&&!r.ObjectUtils.has(s,"enabled");(u||c||l)&&r.ObjectUtils.set(n,a,i.ToggleExpansion())})),n},getForStandardProcessing:function(t){var n,s,u;return n={auth:{cdn:{services:i.CollectionItemsByKey("type")}},ads:{companions:{containers:i.CollectionItemsByKey("id",a.DefaultAdCompanionContainer)}},metadata:i.AddConditionalMap([{usingKey:"env",data:o.PlayerConfigEnv}])},s=r.ObjectUtils.extendDeep({},t),(u=function(e,t){Object.keys(t).forEach((function(n){if(r.ObjectUtils.has(e,n)){var o=r.ObjectUtils.get(t,n),a=r.ObjectUtils.isPlainObject(o),s=r.ObjectUtils.get(e,n),c=r.ObjectUtils.isPlainObject(s);r.isFunction(s)?r.ObjectUtils.set(t,n,s):c&&a&&u(s,o)}else r.ObjectUtils.set(t,n,i.PassthroughOverrides())}))})(e?{config:n}:n,s),s},getForPostProcessing:function(t){var n={};return[s.ToggleableSections.Auth,s.ToggleableSections.Analytics,s.ToggleableSections.DRM].forEach((function(o){var a=e?"config."+o:o,s=r.ObjectUtils.getOrElse(t,a,void 0),u=r.isNull(s),c=r.isBoolean(s),l=r.ObjectUtils.isPlainObject(s)&&!r.ObjectUtils.has(s,"enabled");(u||c||l)&&r.ObjectUtils.set(n,a,i.ToggleExpansion())})),n}}}},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleExpansion=t.CollectionItemsByKey=t.AddConditionalMap=t.TransformAndExtend=t.ConservativeShallowExtend=t.ShallowExtend=t.PassthroughOverrides=void 0;var i=n(0),o=n(1);t.PassthroughOverrides=function(){return function(e,t){return t}};t.ShallowExtend=function(){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o.ObjectUtils.assign.apply(o.ObjectUtils,r([{},e],t))}};var a=function(){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o.ObjectUtils.assign.apply(o.ObjectUtils,r(r([{}],t),[e]))}};t.ConservativeShallowExtend=a;var s=function(e){var t=function(t){return e.forEach((function(e){t=e.transform(t)})),t};return function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return e=t(e),n=n.map(t),i.StandardExtend().apply(void 0,r([e],n))}};t.TransformAndExtend=s;t.AddConditionalMap=function(e){var t=e.map((function(e){var t=e.usingKey,n=e.data;return{transform:function(e){if(e.hasOwnProperty(t)){var r=e[t];return n.hasOwnProperty(r)?a()(e,n[r]):e}return e}}}));return function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return s(t).apply(void 0,r([e],n))}};t.CollectionItemsByKey=function(e,t){return function(n,r){return r.forEach((function(r){var a=o.ObjectUtils.get(r,e),s=n.filter((function(t){return o.ObjectUtils.get(t,e)===a}));s.length>0?s.forEach((function(e){var t=n.indexOf(e);n[t]=i.StandardExtend()(e,r)})):t?n.push(i.StandardExtend()(t,r)):n.push(r)})),n}};t.ToggleExpansion=function(){return function(e,t){if(o.isNull(t)&&(t=!1),o.isBoolean(t))return i.StandardExtend()(e,{enabled:t});if(o.ObjectUtils.isPlainObject(t)){var n=o.ObjectUtils.getOrElse(t,"enabled",!0);return i.StandardExtend()(t,{enabled:n})}return{enabled:!1}}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.GetConfiguredDRMDataSourcesFor=t.ExtendPlayDataWithAdProfileKvps=void 0;var i=n(45);t.ExtendPlayDataWithAdProfileKvps=function(e,t){var n=e.getOrElseNullable("ads",{}).profile;i.isProviderData(t)&&n&&(t.kvps=r({ssaiProfile:n},t.kvps))},t.GetConfiguredDRMDataSourcesFor=function(e,t,n){switch(e){case"assetId":return n.assetIdSource[t];case"companyId":return n.companyIdSource[t];default:return[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CmsEntryResolver=void 0;var r=n(1),i=n(46),o=n(214),a=n(47),s=n(3),u=n(0),c=r.Log.getLogger("CmsEntryResolver").filter("cms"),l={en:"English",eng:"English","en-us":"English (U.S.)","en-ca":"English (Canada)","en-gb":"English (UK)",es:"Spanish",spa:"Spanish","es-es":"Spanish (Castilian)","es-mx":"Spanish (Mexico)"},d=function(){function e(e,t,n){this._providerMap=e,this._config=t,this._playData=n,this._task=r.TaskFactory.create(this._onTaskExecuted.bind(this))}return e.prototype._onTaskExecuted=function(e){this._resolver=e,this._nextProvider()},e.prototype._nextProvider=function(){var e=this;if(this._needsResolution())this._providerTask=this._createProviderTask(),this._providerTask.execute().onResolved((function(t){e._playData=t,e._nextProvider()})).onRejected((function(t){e._resolver.reject(t)}));else{var t=this._normalizePlayData(this._playData);this._isValidEntry(t)?this._resolver.resolve(t):this._resolver.reject(s.PlayerErrorFactory.cmsResolutionFailure("Invalid content entry result: "+r.stringify(t)))}},e.prototype._needsResolution=function(){return"string"==typeof this._playData||(!!a.isProviderData(this._playData)||!!a.isRemoteMetadata(this._playData.metadata))},e.prototype._createProviderTask=function(){var e=this,t=this._getProviderForData();return r.TaskFactory.create((function(n){t?t({playData:e._playData,providerConfig:e._config.providers||{}},n):n.reject(s.PlayerErrorFactory.cmsResolutionFailure("No known provider for play data"))}))},e.prototype._getProviderForData=function(){if("string"==typeof this._playData)return o.isLegend(this._playData)?o.LegendProvider:i.URLProvider;if(a.isContentEntryData(this._playData)&&a.isRemoteMetadata(this._playData.metadata))return i.RemoteMetadataProvider;if(a.isProviderData(this._playData)){var e=this._providerMap[this._playData.providerType];if(c.debug("[getProviderForData] using '"+this._playData.providerType+"' to resolve data: "+r.stringify(this._playData)),e)return e}},e.prototype._isValidEntry=function(e){return e.files&&e.files.length>0},e.prototype._normalizePlayData=function(e){if("string"==typeof e)throw new Error("Should never receive the string type of ContentPlayData");if(a.isProviderData(e))throw new Error("Should never be ContentProviderData, it should have been resolved to a entry");var t=r.ObjectUtils.extendDeep({},e),n=null,i=null;a.isSugarEntryData(t)&&(n=t.url,t.auth&&(i=t.auth.type),delete t.url,delete t.auth);var o=r.ObjectUtils.extendDeep(u.ContentEntryBuilder.forEntryData().build(),t);if(n)o.files.push({url:n,contentProtection:u.ContentProtectionType.Unknown,encryptionMode:u.EncryptionMode.Unknown,playlistProtection:i});else{var s={url:null,playlistProtection:i,encryptionMode:u.EncryptionMode.Unknown,contentProtection:u.ContentProtectionType.Unprotected};o.files=o.files.map((function(e){return r.ObjectUtils.extendDeep({},s,e)}))}o.captions.sources.forEach((function(e){e.tracks.forEach((function(e){var t;e.label||(e.label=null!==(t=l[e.lang.toLowerCase()])&&void 0!==t?t:"Unlabeled Track")}))}));for(var c=0,d=o.files;c<d.length;c++){var f=d[c];f.url&&(f.type=f.type&&f.type!==u.MediaFileType.Unknown?f.type:this._getMediaFileType(f.url),f.deliveryType=f.deliveryType&&f.deliveryType!==u.MediaDeliveryType.Unknown?f.deliveryType:this._getMediaDeliveryType(f.type))}return o},e.prototype._getMediaFileType=function(e){return u.MediaFileType[r.extension(e).toUpperCase()]||u.MediaFileType.Unknown},e.prototype._getMediaDeliveryType=function(e){switch(e){case u.MediaFileType.MP4:return u.MediaDeliveryType.Progressive;case u.MediaFileType.M3U8:return u.MediaDeliveryType.Streaming;default:return u.MediaDeliveryType.Unknown}},e.prototype.load=function(){return this._task.execute()},e}();t.CmsEntryResolver=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMediaJSONError=void 0,t.isMediaJSONError=function(e){return void 0!==e.error}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaJSONParser=void 0;var r=n(1),i=n(119),o=n(3),a=n(0),s=r.Log.getLogger("MediaJSONParser").filter("cms");t.MediaJSONParser=function(e,t,n){var u=a.ContentEntryBuilder.forEntryData();if(!n.media)return i.left(o.PlayerErrorFactory.cmsResolutionFailure("Invalid MediaJSON: 'media' missing"));if(!n.mediaId)return i.left(o.PlayerErrorFactory.cmsResolutionFailure("expected mediaId to exist in result from MediaJSON request"));var c=n.media[t.platform];if(!c)return i.left(o.PlayerErrorFactory.cmsResolutionFailure("invalid MediaJSON: "+t.platform+" assets missing"));for(var l=!1,d=0,f=t.mediaTypes;d<f.length;d++){var p=f[d];if(c[p]){l=!0;break}}if(!l)return i.left(o.PlayerErrorFactory.cmsResolutionFailure("The requested asset from Medium has no available asset for the configured media types: ["+t.mediaTypes.join(", ")+"]"));var h=t.mediaTypes.filter((function(e){var t=c[e];return!(!t||!t.secureUrl)})).map((function(e){return{authType:e,asset:c[e]}})),g={mediaId:e.mediaId};u.withId(n.mediaId).withMetadata(g).isLive("live"===n.type);for(var y=0,v=h;y<v.length;y++){var _=v[y];u.addFile({assetId:_.asset.assetId,contentProtection:_.authType,playlistProtection:_.asset.playlistProtection||null,url:_.asset.secureUrl})}var m=h[0].asset;m.captions||(m.captions=[]);for(var b=0,C=m.captions;b<C.length;b++){var E=C[b];E.type?u.addCaptionTrackEmbedded({format:E.type,platform:t.platform,type:"embedded"},{kind:a.TextTrackKind.Caption,channel:E.location||"unknown",lang:E.language||"unknown",label:"English"}):s.debug("Got track without a type: "+r.stringify(E))}if(m.contentSegments)for(var T=0,S=m.contentSegments;T<S.length;T++){var P=S[T];"number"==typeof P.duration&&"number"==typeof P.segmentIdx&&"number"==typeof P.start?u.addSegment(P):s.warn("[mediaJsonProvider] segment missing required properties: "+r.stringify(P))}m.totalRuntime&&u.withTrt(m.totalRuntime),n.validation&&Object.keys(n.validation).forEach((function(e){u.addValidator(e,n.validation[e])}));var M=u.build();return s.debug("[mediaJSONProvider] content entry data: "+r.stringify(M)),i.right(M)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(212),o=n(6),a=n(32),s=n(33);t.URI="Either";var u=function(){function e(e){this.value=e,this._tag="Left"}return e.prototype.map=function(e){return this},e.prototype.ap=function(e){return e.isLeft()?e:this},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return this},e.prototype.bimap=function(t,n){return new e(t(this.value))},e.prototype.alt=function(e){return e},e.prototype.orElse=function(e){return e(this.value)},e.prototype.extend=function(e){return this},e.prototype.reduce=function(e,t){return e},e.prototype.fold=function(e,t){return e(this.value)},e.prototype.getOrElse=function(e){return e},e.prototype.getOrElseL=function(e){return e(this.value)},e.prototype.mapLeft=function(t){return new e(t(this.value))},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"left("+o.toString(this.value)+")"},e.prototype.isLeft=function(){return!0},e.prototype.isRight=function(){return!1},e.prototype.swap=function(){return new c(this.value)},e.prototype.filterOrElse=function(e,t){return this},e.prototype.filterOrElseL=function(e,t){return this},e.prototype.refineOrElse=function(e,t){return this},e.prototype.refineOrElseL=function(e,t){return this},e}();t.Left=u;var c=function(){function e(e){this.value=e,this._tag="Right"}return e.prototype.map=function(t){return new e(t(this.value))},e.prototype.ap=function(e){return e.isRight()?this.map(e.value):t.left(e.value)},e.prototype.ap_=function(e){return e.ap(this)},e.prototype.chain=function(e){return e(this.value)},e.prototype.bimap=function(t,n){return new e(n(this.value))},e.prototype.alt=function(e){return this},e.prototype.orElse=function(e){return this},e.prototype.extend=function(t){return new e(t(this))},e.prototype.reduce=function(e,t){return t(e,this.value)},e.prototype.fold=function(e,t){return t(this.value)},e.prototype.getOrElse=function(e){return this.value},e.prototype.getOrElseL=function(e){return this.value},e.prototype.mapLeft=function(t){return new e(this.value)},e.prototype.inspect=function(){return this.toString()},e.prototype.toString=function(){return"right("+o.toString(this.value)+")"},e.prototype.isLeft=function(){return!1},e.prototype.isRight=function(){return!0},e.prototype.swap=function(){return new u(this.value)},e.prototype.filterOrElse=function(e,n){return e(this.value)?this:t.left(n)},e.prototype.filterOrElseL=function(e,n){return e(this.value)?this:t.left(n(this.value))},e.prototype.refineOrElse=function(e,n){return e(this.value)?this:t.left(n)},e.prototype.refineOrElseL=function(e,n){return e(this.value)?this:t.left(n(this.value))},e}();function l(e,t){return a.fromEquals((function(n,r){return n.isLeft()?r.isLeft()&&e.equals(n.value,r.value):r.isRight()&&t.equals(n.value,r.value)}))}function d(e){return{URI:t.URI,_L:void 0,compact:function(n){return n.isLeft()?n:n.value.isNone()?t.left(e.empty):t.right(n.value.value)},separate:function(n){return n.isLeft()?{left:n,right:n}:n.value.isLeft()?{left:t.right(n.value.value),right:t.left(e.empty)}:{left:t.left(e.empty),right:t.right(n.value.value)}}}}function f(e){var n=d(e);return r({},n,{map:t.either.map,partitionMap:function(n,r){if(n.isLeft())return{left:n,right:n};var i=r(n.value);return i.isLeft()?{left:t.right(i.value),right:t.left(e.empty)}:{left:t.left(e.empty),right:t.right(i.value)}},filterMap:function(n,r){if(n.isLeft())return n;var i=r(n.value);return i.isSome()?t.right(i.value):t.left(e.empty)},partition:function(n,r){return n.isLeft()?{left:n,right:n}:r(n.value)?{left:t.left(e.empty),right:t.right(n.value)}:{left:t.right(n.value),right:t.left(e.empty)}},filter:function(t,n){return t.filterOrElse(n,e.empty)}})}t.Right=c,t.getShow=function(e,t){return{show:function(n){return n.fold((function(t){return"left("+e.show(t)+")"}),(function(e){return"right("+t.show(e)+")"}))}}},t.getSetoid=l,t.getEq=l,t.getSemigroup=function(e){return{concat:function(n,r){return r.isLeft()?n:n.isLeft()?r:t.right(e.concat(n.value,r.value))}}},t.getApplySemigroup=function(e){return{concat:function(n,r){return n.isLeft()?n:r.isLeft()?r:t.right(e.concat(n.value,r.value))}}},t.getApplyMonoid=function(e){return r({},t.getApplySemigroup(e),{empty:t.right(e.empty)})},t.left=function(e){return new u(e)},t.right=function(e){return new c(e)},t.fromRefinement=function(e,n){return function(r){return e(r)?t.right(r):t.left(n(r))}},t.fromOption=function(e){return function(n){return n.isNone()?t.left(e):t.right(n.value)}},t.fromNullable=function(e){return function(n){return null==n?t.left(e):t.right(n)}},t.toError=function(e){return e instanceof Error?e:new Error(String(e))},t.tryCatch=function(e,n){return void 0===n&&(n=t.toError),t.tryCatch2v(e,n)},t.tryCatch2v=function(e,n){try{return t.right(e())}catch(e){return t.left(n(e))}},t.fromValidation=function(e){return e.isFailure()?t.left(e.value):t.right(e.value)},t.isLeft=function(e){return e.isLeft()},t.isRight=function(e){return e.isRight()},t.getCompactable=d,t.getFilterable=f,t.getWitherable=function(e){var n=f(e);return r({},n,{traverse:t.either.traverse,reduce:t.either.reduce,wither:function(e){var r=t.either.traverse(e);return function(t,i){return e.map(r(t,i),n.compact)}},wilt:function(e){var r=t.either.traverse(e);return function(t,i){return e.map(r(t,i),n.separate)}}})},t.parseJSON=function(e,n){return t.tryCatch2v((function(){return JSON.parse(e)}),n)},t.stringifyJSON=function(e,n){return t.tryCatch2v((function(){return JSON.stringify(e)}),n)};var p=t.left,h=o.identity;function g(e,n){return{concat:function(r,i){return t.isLeft(r)?t.isLeft(i)?t.left(e.concat(r.value,i.value)):r:t.isLeft(i)?i:t.right(n.concat(r.value,i.value))}}}t.either={URI:t.URI,map:function(e,t){return e.map(t)},of:t.right,ap:function(e,t){return t.ap(e)},chain:function(e,t){return e.chain(t)},reduce:function(e,t,n){return e.reduce(t,n)},foldMap:function(e){return function(t,n){return t.isLeft()?e.empty:n(t.value)}},foldr:function(e,t,n){return e.isLeft()?t:n(e.value,t)},traverse:function(e){return function(n,r){return n.isLeft()?e.of(t.left(n.value)):e.map(r(n.value),t.right)}},sequence:function(e){return function(n){return n.isLeft()?e.of(t.left(n.value)):e.map(n.value,t.right)}},bimap:function(e,t,n){return e.bimap(t,n)},alt:function(e,t){return e.alt(t)},extend:function(e,t){return e.extend(t)},chainRec:function(e,n){return i.tailRec((function(e){if(e.isLeft())return t.right(t.left(e.value));var r=e.value;return r.isLeft()?t.left(n(r.value)):t.right(t.right(r.value))}),n(e))},throwError:p,fromEither:h,fromOption:function(e,n){return e.isNone()?p(n):t.right(e.value)}},t.fold=function(e,t){return function(n){return n.fold(e,t)}},t.orElse=function(e){return function(t){return t.orElse(e)}},t.getOrElse=function(e){return function(t){return t.getOrElseL(e)}},t.elem=function(e){return function(n){return function(r){return!t.isLeft(r)&&e.equals(n,r.value)}}},t.getValidation=function(e){return{URI:t.URI,_L:void 0,map:t.either.map,of:t.either.of,ap:function(n,r){return t.isLeft(n)?t.isLeft(r)?t.left(e.concat(n.value,r.value)):n:t.isLeft(r)?r:t.right(n.value(r.value))},chain:t.either.chain,alt:function(n,r){return t.isRight(n)?n:t.isLeft(r)?t.left(e.concat(n.value,r.value)):r}}},t.getValidationSemigroup=g,t.getValidationMonoid=function(e,n){return{concat:g(e,n).concat,empty:t.right(n.empty)}};var y=s.pipeable(t.either),v=y.alt,_=y.ap,m=y.apFirst,b=y.apSecond,C=y.bimap,E=y.chain,T=y.chainFirst,S=y.duplicate,P=y.extend,M=y.flatten,O=y.foldMap,k=y.map,A=y.mapLeft,w=y.reduce,R=y.reduceRight,I=y.fromPredicate,j=y.filterOrElse,D=y.fromOption;t.alt=v,t.ap=_,t.apFirst=m,t.apSecond=b,t.bimap=C,t.chain=E,t.chainFirst=T,t.duplicate=S,t.extend=P,t.flatten=M,t.foldMap=O,t.map=k,t.mapLeft=A,t.reduce=w,t.reduceRight=R,t.fromPredicate=I,t.filterOrElse=j,t.fromOptionL=D},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDeliveryType=void 0,function(e){e.VOD="VOD",e.Live="LIVE"}(t.StreamDeliveryType||(t.StreamDeliveryType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(46),o=n(116),a=n(25),s=n(4),u=n(3),c=n(0),l=r.Log.getLogger("CmsManager").filter("cms"),d=function(){function e(e,t){var n=this;this._taskMap=new Map,this._supportsDRM=!0,this._supportedDRM=e().catch((function(){return n._supportsDRM=!1,[]})),this._providerMap=t||i.DefaultProviderMap()}return e.prototype.resolveEntry=function(e,t){var n=this;l.debug("[resolveEntry] resolving for data: "+r.stringify(e)+" | config: "+r.stringify(t)+")");var i=new o.CmsEntryResolver(this._providerMap,t,e),a=i.load();return this._taskMap.set(a.id,i),a.onResolved((function(e){n.onTaskCompleted(a,e)})),a},e.prototype.onTaskCompleted=function(e,t){this._taskMap.has(e.id)&&(l.debug("[onTaskCompleted] result: "+r.stringify(t)),this._taskMap.delete(e.id))},e.prototype.load=function(e,t){return this.resolveEntry(e,t)},e.prototype.selectContent=function(e,t){var n=this,i=a.populateEntryByKeysystems(e),o=r.TaskFactory.create((function(e){n._supportedDRM.then((function(e){return t.forceKeySystem?function(e){switch(e){case c.KeySystems.Widevine:return["com.widevine.alpha"];case c.KeySystems.Fairplay:return["com.apple.fps.1_0","com.apple.fps.2_0"];case c.KeySystems.Playready:return["com.microsoft.playready"]}}(t.forceKeySystem):e})).then((function(r){var o=function(e,t,n){var r=null;n&&(r=f(e,t));r||(r=e.bulkaes);r||(r=e.unprotected);r||n||(r=f(e,t));r||(r=e.preview);r||(r=e.unknown);return r}(i,r,s.fromNullable(t.preferDRM).getOrElse(!0));if(!o)return!n._supportsDRM&&function(e){if(e.fairplay)return!0;if(e.multidrm)return!0;if(e.playready)return!0;if(e.primetime)return!0;if(e.widevine)return!0;return!1}(i)?e.reject(u.PlayerErrorFactory.cmsContentSupportFailure("Missing DRM support.")):e.reject(u.PlayerErrorFactory.cmsSelectionFailure("Unable to find a piece of content to suggest for playback"));e.resolve(o)})).catch((function(t){return e.reject(t)}))}));return o.execute(),o},e}();function f(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(("com.widevine.alpha"===i||"com.microsoft.playready"===i||"com.microsoft.playready.recommendation"===i)&&e.multidrm)return e.multidrm;switch(i){case"com.widevine.alpha":if(!e.widevine)continue;return e.widevine;case"com.microsoft.playready":case"com.microsoft.playready.recommendation":if(!e.playready)continue;return e.playready;case"com.adobe.primetime":case"com.adobe.access":if(!e.primetime)continue;return e.primetime;case"com.apple.fps.1_0":case"com.apple.fps.2_0":case"com.apple.fairplay":if(!e.fairplay)continue;return e.fairplay}}return null}t.default=d},function(e,t,n){(function(n){var r;!function(n,i){e.exports=function(n){"use strict";var i,o=(n=n||{}).Base64,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(a),u=String.fromCharCode,c=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(e){return e.replace(l,c)},f=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[a.charAt(n>>>18),a.charAt(n>>>12&63),t>=2?"=":a.charAt(n>>>6&63),t>=1?"=":a.charAt(63&n)].join("")},p=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,f)},h=function(e){return p(d(String(e)))},g=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},y=function(e,t){return t?g(h(e)):h(e)};n.Uint8Array&&(i=function(e,t){for(var n="",r=0,i=e.length;r<i;r+=3){var o=e[r],s=e[r+1],u=e[r+2],c=o<<16|s<<8|u;n+=a.charAt(c>>>18)+a.charAt(c>>>12&63)+(void 0!==s?a.charAt(c>>>6&63):"=")+(void 0!==u?a.charAt(63&c):"=")}return t?g(n):n});var v,_=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,m=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return u(55296+(t>>>10))+u(56320+(1023&t));case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},b=function(e){return e.replace(_,m)},C=function(e){var t=e.length,n=t%4,r=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),i=[u(r>>>16),u(r>>>8&255),u(255&r)];return i.length-=[0,0,2,1][n],i.join("")},E=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,C)},T=function(e){return E(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},S=function(e){return function(e){return b(E(e))}(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))};n.Uint8Array&&(v=function(e){return Uint8Array.from(T(e),(function(e){return e.charCodeAt(0)}))});var P=function(){var e=n.Base64;return n.Base64=o,e};if(n.Base64={VERSION:"2.6.2",atob:T,btoa:p,fromBase64:S,toBase64:y,utob:d,encode:y,encodeURI:function(e){return y(e,!0)},btou:b,decode:S,noConflict:P,fromUint8Array:i,toUint8Array:v},"function"==typeof Object.defineProperty){var M=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",M((function(){return S(this)}))),Object.defineProperty(String.prototype,"toBase64",M((function(e){return y(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",M((function(){return y(this,!0)})))}}n.Meteor&&(Base64=n.Base64);e.exports?e.exports.Base64=n.Base64:void 0===(r=function(){return n.Base64}.apply(t,[]))||(e.exports=r);return{Base64:n.Base64}}(n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:this)}).call(this,n(19))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayConfigValidator=t.SetupConfigValidator=void 0;var r=n(4),i=n(1);t.SetupConfigValidator=function(e){var n=null==e?void 0:e.config;return n?t.PlayConfigValidator(n):r.none};t.PlayConfigValidator=function(e){var t,n=[],o=i.ObjectUtils.extendDeep({},e).playback;return(null==o?void 0:o.autoPlay)&&(null===(t=null==o?void 0:o.autoPlayOptions)||void 0===t?void 0:t.forceMedia)&&!1===(null==o?void 0:o.muted)&&n.push("Specifying `muted: false` in conjunction with `forceMedia: true` is invalid and may not behave as expected."),n.length>0?r.some(n):r.none}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogConfigValidationResult=void 0;t.LogConfigValidationResult=function(e,t){(t.valid?e.info:e.warn).call(e,t.message)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsController=void 0;var r=n(1),i=n(126),o=n(0),a=r.Log.getLogger("AnalyticsController").filter("analytics"),s=function(){function e(e){var t=this;this._onMeasurerEvent=function(e,n){var r={module:o.ModuleType.Analytics,category:o.ModuleEventCategory.Component_Event,result:n};t.moduleNotification.dispatch(r)},this.moduleNotification=r.createEvent("moduleNotification"),this._sinks=[],this._measurer=e,this._bindings=[this._measurer.events.listen(this._onMeasurerEvent)]}return e.prototype.setup=function(e){var t=this;return r.TaskFactory.create((function(n){var r={model:e.playerModel,config:e.playerConfig,contentEntryFileData:e.contentFileData},o=[];if(e.playerConfig.analytics.conviva.enabled){var a=new i.ConvivaAnalytics;o.push(a.init(r)),t._sinks.push(a)}Promise.all(o).then((function(){return n.resolve()})).catch((function(e){return n.reject(e)}))})).execute()},e.prototype.handleModuleNotification=function(e){this._sinks.forEach((function(t){return t.handleModuleNotification(e)}))},e.prototype.handlePlayerNotification=function(e){this._sinks.forEach((function(t){return t.handlePlayerNotification(e)}))},e.prototype.processCommand=function(e){a.verbose("[processCommand] "+e.type+" / "+e.data),this._sinks.forEach((function(t){return t.processCommand(e)}))},e.prototype.updateConfig=function(e){this._sinks.forEach((function(t){return t.updateConfig(e)}))},e.prototype.destroy=function(){var e=this._sinks.map((function(e){return e.destroy()}));return this._bindings.forEach((function(e){return e.detach()})),this._bindings.length=0,Promise.all(e).then((function(e){}))},e}();t.AnalyticsController=s},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConvivaAnalytics=void 0;var o=i(n(52)),a=n(1),s=n(219),u=n(127),c=n(220),l=n(16),d=n(120),f=n(8),p=n(50),h=n(221),g=n(222),y=n(0),v=n(0),_=a.Log.getLogger("ConvivaAnalytics").filter("analytics.conviva");s.setLogger(_);var m=function(){function e(){this._activeSession=!1,this._trackingPaused=!1,this._podIndex=0,this._podPosition=o.default.Constants.AdPosition.PREROLL,this._currentAdBreak=null,this._customTags={}}return e.prototype.isSessionActive=function(){return this._activeSession},e.prototype._inAdBreak=function(){return null!==this._currentAdBreak},e.prototype.handleVideoEngineNotification=function(e){var t,n,r,i,a,s,u,c,l,d,f,p,h,g,_,m,b,C,E,T,S,P,M,O,k,A,w,R,I,j,D,L,N,F,U;if(this.videoAnalytics)switch(e.type){case y.VideoEngineEventType.Media_State_Changed:this.handleMediaState(e);break;case y.VideoEngineEventType.Ad_State_Changed:this.handleAdState(e);break;case y.VideoEngineEventType.Media_Profile_Changed:this._bitrate=e.profile.bitrate,this._inAdBreak()&&this._bitrate?null===(i=this.adAnalytics)||void 0===i||i.reportAdMetric(o.default.Constants.Playback.BITRATE,e.profile.bitrate):this._bitrate&&(null===(a=this.videoAnalytics)||void 0===a||a.reportPlaybackMetric(o.default.Constants.Playback.BITRATE,e.profile.bitrate));break;case y.VideoEngineEventType.Ad_Started:this._currentAdBreak=e.adBreakId,this._podIndex++;var x=0;this._model.currentAdBreak?(x=this._model.currentAdBreak.duration,this._podPosition=this.mapAdPosition(this._model.currentAdBreak)):this._podPosition=o.default.Constants.AdPosition.MIDROLL,null===(s=this.videoAnalytics)||void 0===s||s.reportAdBreakStarted(o.default.Constants.AdType.SERVER_SIDE,o.default.Constants.AdPlayer.CONTENT,((t={})[o.default.Constants.POD_POSITION]=this._podPosition,t[o.default.Constants.POD_DURATION]=x.toString(),t[o.default.Constants.POD_INDEX]=this._podIndex.toString(),t)),null===(u=this.videoAnalytics)||void 0===u||u.reportPlaybackEvent(o.default.Constants.Events.USER_WAIT_STARTED);break;case y.VideoEngineEventType.Ad_Creative_Started:if(!this._config.adInsights)break;var B=this._model.currentAdCreative;if(!B)break;var V=B.id,q="";switch(B.adSystem){case"FreeWheel":n=V.split("."),V=n[0],q=n[1]}var H=this._model.currentAdBreak,K=((r={})[o.default.Constants.STREAM_URL]=null!==(c=B.mediaFileUrl)&&void 0!==c?c:null===(l=this._metadata)||void 0===l?void 0:l[o.default.Constants.STREAM_URL],r[o.default.Constants.ASSET_NAME]=null!==(d=null==B?void 0:B.adTitle)&&void 0!==d?d:"NA",r[o.default.Constants.IS_LIVE]=null===(f=this._metadata)||void 0===f?void 0:f[o.default.Constants.IS_LIVE],r[o.default.Constants.DEFAULT_RESOURCE]=null===(p=this._metadata)||void 0===p?void 0:p[o.default.Constants.DEFAULT_RESOURCE],r["c3.ad.id"]=null!=V?V:"NA",r["c3.ad.system"]=null!==(h=B.adSystem)&&void 0!==h?h:"NA",r["c3.ad.isSlate"]=B.isFiller.toString(),r["c3.ad.position"]=this.mapAdPosition(H),r["c3.ad.adStitcher"]="YoSpace",r["c3.ad.firstAdSystem"]=null!==(g=B.firstAdSystem)&&void 0!==g?g:B.adSystem,r["c3.ad.firstAdId"]=null!==(_=B.firstAdId)&&void 0!==_?_:B.id,r["c3.ad.firstCreativeId"]=null!==(m=B.firstCreativeId)&&void 0!==m?m:B.creativeId,r["c3.ad.creativeId"]=B.creativeId,r["c3.ad.sequence"]=null!==(b=B.sequence.toString())&&void 0!==b?b:"NA",r["c3.ad.advertiser"]=B.advertiser,r.adBreakId=null!==(C=null==H?void 0:H.id)&&void 0!==C?C:"NA",r);q&&(K.adLogId=q),(null===(E=this._metadata)||void 0===E?void 0:E[o.default.Constants.ASSET_NAME])&&(K.contentAssetName=this._metadata[o.default.Constants.ASSET_NAME]),B.requiresUi?(K["c3.ad.technology"]=o.default.Constants.AdType.CLIENT_SIDE,K["c3.ad.mediaFileApiFramework"]="VPAID"):(K[o.default.Constants.DURATION]=B.duration,K["c3.ad.technology"]=o.default.Constants.AdType.SERVER_SIDE,K["c3.ad.mediaFileApiFramework"]="NA"),null===(T=this.adAnalytics)||void 0===T||T.reportAdStarted(K),this.setAdPlayerStateWithModelState(),this._bitrate&&(null===(S=this.adAnalytics)||void 0===S||S.reportAdMetric(o.default.Constants.Playback.BITRATE,this._bitrate));break;case y.VideoEngineEventType.Ad_Time_Changed:null===(P=this.adAnalytics)||void 0===P||P.reportAdMetric(o.default.Constants.Playback.PLAY_HEAD_TIME,null===(M=this._model.currentAdCreative)||void 0===M?void 0:M.currentTime);break;case y.VideoEngineEventType.Ad_Creative_Ended:if(!this._config.adInsights)break;null===(O=this.adAnalytics)||void 0===O||O.reportAdEnded();break;case y.VideoEngineEventType.Ad_Error:if(!this.isSessionActive())return;if(e.adErrorType&&e.adErrorType===v.AdErrorType.PolicyError)return void(null===(k=this.videoAnalytics)||void 0===k||k.reportPlaybackEvent("Conviva.AdPolicy",{reason:e.name}));var W=this.mapErrorSeverity(e.severity);switch(W){case o.default.Constants.ErrorSeverity.FATAL:null===(A=this.adAnalytics)||void 0===A||A.reportAdFailed(e.message),null===(w=this.videoAnalytics)||void 0===w||w.reportPlaybackFailed(e.message);break;case o.default.Constants.ErrorSeverity.WARNING:null===(R=this.adAnalytics)||void 0===R||R.reportAdFailed(e.message),null===(I=this.videoAnalytics)||void 0===I||I.reportPlaybackError(e.message,W)}this._currentAdBreak=null;break;case y.VideoEngineEventType.Ad_Finished:if(this._currentAdBreak=null,!this.isSessionActive())return;null===(j=this.videoAnalytics)||void 0===j||j.reportAdBreakEnded(),null===(D=this.videoAnalytics)||void 0===D||D.reportPlaybackEvent(o.default.Constants.Events.USER_WAIT_ENDED),this.setPlayerStateWithModelState();break;case y.VideoEngineEventType.Media_Error:if(!this.isSessionActive())return;this._inAdBreak()&&(null===(L=this.adAnalytics)||void 0===L||L.reportAdFailed(e.message),this._currentAdBreak=null),null===(N=this.videoAnalytics)||void 0===N||N.reportPlaybackFailed(e.message);break;case y.VideoEngineEventType.Media_Seeking_Started:null===(F=this.videoAnalytics)||void 0===F||F.reportPlaybackMetric(o.default.Constants.Playback.SEEK_STARTED,Math.round(e.requestedTime));break;case y.VideoEngineEventType.Media_Seeking_Finished:null===(U=this.videoAnalytics)||void 0===U||U.reportPlaybackMetric(o.default.Constants.Playback.SEEK_ENDED)}},e.prototype.mapAdStateToConvivaPlayerState=function(e){switch(e){case v.AdState.Playing:return o.default.Constants.PlayerState.PLAYING;case v.AdState.Paused:return o.default.Constants.PlayerState.PAUSED;case v.AdState.Buffering:return o.default.Constants.PlayerState.BUFFERING}},e.prototype.setAdPlayerStateWithModelState=function(){var e,t,n=this.mapAdStateToConvivaPlayerState(null===(e=this._model.currentAdBreak)||void 0===e?void 0:e.state);n&&(null===(t=this.adAnalytics)||void 0===t||t.reportAdMetric(o.default.Constants.Playback.PLAYER_STATE,n))},e.prototype.setPlayerStateWithModelState=function(){var e,t;switch(this._model.mediaState){case y.MediaState.Playing:null===(e=this.videoAnalytics)||void 0===e||e.reportPlaybackMetric(o.default.Constants.Playback.PLAYER_STATE,o.default.Constants.PlayerState.PLAYING);break;case y.MediaState.Paused:null===(t=this.videoAnalytics)||void 0===t||t.reportPlaybackMetric(o.default.Constants.Playback.PLAYER_STATE,o.default.Constants.PlayerState.PAUSED)}},e.prototype.handleMediaState=function(e){var t;if(this.videoAnalytics){var n,r=e.currentState,i=e.previousState;switch(r){case y.MediaState.Pending:n=o.default.Constants.PlayerState.NOT_MONITORED;break;case y.MediaState.Playing:n=o.default.Constants.PlayerState.PLAYING;break;case y.MediaState.Paused:n=this._model.contentState===y.TransactionState.Ads_Playback?o.default.Constants.PlayerState.PLAYING:o.default.Constants.PlayerState.PAUSED;break;case y.MediaState.Buffering:i!==y.MediaState.Seeking&&(n=o.default.Constants.PlayerState.BUFFERING);break;case y.MediaState.Finished:case y.MediaState.Stopped:n=o.default.Constants.PlayerState.STOPPED}n&&!this._inAdBreak()&&(null===(t=this.videoAnalytics)||void 0===t||t.reportPlaybackMetric(o.default.Constants.Playback.PLAYER_STATE,n))}else _.warn("[videoAnalytics] not initialized, cannot report player state")},e.prototype.handleAdState=function(e){if(this.adAnalytics){var t=e.currentState,n=this.mapAdStateToConvivaPlayerState(t);n&&this.adAnalytics.reportAdMetric(o.default.Constants.Playback.PLAYER_STATE,n)}},e.prototype.mapErrorSeverity=function(e){switch(e){case v.ErrorSeverity.Fatal:return o.default.Constants.ErrorSeverity.FATAL;default:return o.default.Constants.ErrorSeverity.WARNING}},e.prototype.mapAdPosition=function(e){switch(null==e?void 0:e.position){case v.AdBreakPosition.Preroll:return o.default.Constants.AdPosition.PREROLL;case v.AdBreakPosition.Midroll:return o.default.Constants.AdPosition.MIDROLL;case v.AdBreakPosition.Postroll:return o.default.Constants.AdPosition.POSTROLL;case v.AdBreakPosition.Unknown:default:return o.default.Constants.AdPosition.MIDROLL}},e.prototype.prepareTags=function(e){for(var t in e)e[t]&&"function"==typeof e[t].toString?e[t]=e[t].toString():(_.warn("Cannot convert conviva tag "+t+" to string, setting to empty string."),e[t]="");return e.playerVendor="TOP",e.playerVersion=y.PlayerVersion.libVersion,e},e.prototype.init=function(e){var t,n,r,i,a,u,c,l,d,p,y,m,b,C,E,T,S,P=this,M=e.config,O=e.model,k=e.contentEntryFileData;_.debug("initialize conviva");var A=M.analytics.conviva;if(!A.customerKey)return Promise.reject(f.PlayerErrorFactory.analyticsConfigFailure("Missing required Conviva customer key."));var w={};A.touchstoneUrl&&(w[o.default.Constants.GATEWAY_URL]=A.touchstoneUrl),A.touchstoneUrl&&(null===(r=M.debug.logging)||void 0===r?void 0:r.enabled)&&(w[o.default.Constants.LOG_LEVEL]=o.default.Constants.LogLevel.DEBUG);var R=((t={})[o.default.Constants.CallbackFunctions.CONSOLE_LOG]=s.logCallback,t[o.default.Constants.CallbackFunctions.SAVE_DATA]=g.saveData,t[o.default.Constants.CallbackFunctions.LOAD_DATA]=g.loadData,t);o.default.Analytics.init(A.customerKey,R,w),void 0===A.deviceInfo&&(A.deviceInfo={tubVersion:null!==(i=M.metadata["versions.tub"])&&void 0!==i?i:"unknown",type:null!==(a=M.metadata["device.type"])&&void 0!==a?a:"unknown",model:null!==(u=M.metadata["device.model"])&&void 0!==u?u:null,brand:null!==(c=M.metadata["device.brand"])&&void 0!==c?c:null}),this.applicationName=A.applicationName;var I=null!==(d=null===(l=A.deviceInfo)||void 0===l?void 0:l.type)&&void 0!==d?d:v.DeviceType.Unknown,j=null!==(y=null===(p=A.deviceInfo)||void 0===p?void 0:p.tubVersion)&&void 0!==y?y:"unknown",D=null!==(b=null===(m=A.deviceInfo)||void 0===m?void 0:m.model)&&void 0!==b?b:void 0,L=null!==(E=null===(C=A.deviceInfo)||void 0===C?void 0:C.brand)&&void 0!==E?E:void 0,N=new h.Metadata(I,j,M.metadata,D,L),F=this.createDeviceMetadata(N);o.default.Analytics.setDeviceMetadata(F),this.videoAnalytics=o.default.Analytics.buildVideoAnalytics();var U=((n={})[o.default.Constants.FRAMEWORK_NAME]=N.getFrameworkName(),n[o.default.Constants.FRAMEWORK_VERSION]=N.getFrameworkVersion(),n);return null===(T=this.videoAnalytics)||void 0===T||T.setPlayerInfo(U),null===(S=this.videoAnalytics)||void 0===S||S.setCallback((function(){var e,t;null===(e=P.videoAnalytics)||void 0===e||e.reportPlaybackMetric(o.default.Constants.Playback.PLAY_HEAD_TIME,P._model.mediaTime),P._model.contentBufferedRange.contains(P._model.mediaTime)&&(null===(t=P.videoAnalytics)||void 0===t||t.reportPlaybackMetric(o.default.Constants.Playback.BUFFER_LENGTH,P._model.contentBufferedRange.end-P._model.mediaTime))})),A.adInsights&&(this.adAnalytics=o.default.Analytics.buildAdAnalytics(this.videoAnalytics)),this._model=O,this._config=A,this._contentEntryFileData=k,Promise.resolve()},e.prototype.createDeviceMetadata=function(e){var t;return(t={})[o.default.Constants.DeviceMetadata.BRAND]=e.getDeviceBrand(),t[o.default.Constants.DeviceMetadata.MANUFACTURER]=e.getDeviceManufacturer(),t[o.default.Constants.DeviceMetadata.MODEL]=e.getDeviceModel(),t[o.default.Constants.DeviceMetadata.TYPE]=e.getDeviceType(),t[o.default.Constants.DeviceMetadata.OS_NAME]=e.getOperatingSystemName(),t[o.default.Constants.DeviceMetadata.OS_VERSION]=e.getOperatingSystemVersion(),t[o.default.Constants.DeviceMetadata.CATEGORY]=e.getDeviceCategory(),t[o.default.Constants.DeviceMetadata.SCREEN_RESOLUTION_WIDTH]=e.getScreenWidth(),t[o.default.Constants.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT]=e.getScreenHeight(),t[o.default.Constants.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR]=e.getScaleFactor(),t},e.prototype._convertStreamType=function(e){switch(e){case d.StreamDeliveryType.Live:return o.default.Constants.StreamType.LIVE;case d.StreamDeliveryType.VOD:return o.default.Constants.StreamType.VOD;default:return o.default.Constants.StreamType.UNKNOWN}},e.prototype.endSession=function(){var e;_.debug("end session"),null===(e=this.videoAnalytics)||void 0===e||e.reportPlaybackEnded(),this._activeSession=!1},e.prototype.createSession=function(e,t){var n,i,s,u,c,l,d,f;if(_.debug("createSession"),this.isSessionActive())return _.warn("There is already a session running."),this;this._activeSession=!0,this._customTags=this.prepareTags(null!==(i=t.tags)&&void 0!==i?i:{});var p=r(((n={})[o.default.Constants.STREAM_URL]=e.streamUrl,n[o.default.Constants.ASSET_NAME]=null!==(s=t.assetName)&&void 0!==s?s:"unknown asset name",n[o.default.Constants.IS_LIVE]=this._convertStreamType(e.streamType),n[o.default.Constants.PLAYER_NAME]=this.applicationName,n[o.default.Constants.VIEWER_ID]=null!==(u=t.viewerId)&&void 0!==u?u:"",n[o.default.Constants.DEFAULT_RESOURCE]=null!==(c=t.defaultResource)&&void 0!==c?c:a.ObjectUtils.getOrElse(null===(l=this._model.playlistItem)||void 0===l?void 0:l.entry.metadata,"cdnType",""),n[o.default.Constants.DURATION]=e.duration,n[o.default.Constants.ENCODED_FRAMERATE]=null!==(d=t.encodedFrameRate)&&void 0!==d?d:-1,n),this._customTags);return this._metadata=p,_.debug("report playback requested: "+e.streamUrl),null===(f=this.videoAnalytics)||void 0===f||f.reportPlaybackRequested(p),this},e.prototype.reportEvent=function(e){var t;try{null===(t=this.videoAnalytics)||void 0===t||t.reportPlaybackEvent(e.name,{data:e.data})}catch(e){_.warn("[reportEvent] Error reporting event to Conviva: "+e)}return this},e.prototype.reportError=function(e){var t,n,r;if(!this.videoAnalytics)return this;switch(e.severity){case v.ErrorSeverity.Fatal:case v.ErrorSeverity.Error:n=o.default.Constants.ErrorSeverity.FATAL;break;default:n=o.default.Constants.ErrorSeverity.WARNING}r=u.isAnalyticsErrorData(e)?e.data:e.toString();try{null===(t=this.videoAnalytics)||void 0===t||t.reportPlaybackError(r,n)}catch(e){_.warn("[reportError] Error reporting error to Conviva: "+e)}return this},e.prototype.pauseTracking=function(){var e;return this.isSessionActive()?this._trackingPaused||this._inAdBreak()?(_.warn("[pauseTracking] ignoring, tracking is paused or already not monitored in ad break"),this):(null===(e=this.videoAnalytics)||void 0===e||e.reportPlaybackEvent(o.default.Constants.Events.USER_WAIT_STARTED),this._trackingPaused=!0,this):(_.warn("[pauseTracking] could not pause tracking, no valid session found"),this)},e.prototype.resumeTracking=function(){var e;return this.isSessionActive()?(this._trackingPaused&&!this._inAdBreak()||_.warn("[resumeTracking] ignoring, tracking not paused or already not monitored"),null===(e=this.videoAnalytics)||void 0===e||e.reportPlaybackEvent(o.default.Constants.Events.USER_WAIT_ENDED),this._trackingPaused=!1,this):(_.warn("[resumeTracking] could not resume tracking, no valid session found"),this)},e.prototype.cleanupSession=function(){var e,t;return this.isSessionActive()?(this.endSession(),null===(e=this.videoAnalytics)||void 0===e||e.release(),this.videoAnalytics=void 0,null===(t=this.adAnalytics)||void 0===t||t.release(),this.adAnalytics=void 0,this):this},e.prototype.processCommand=function(e){var t,n=e.type;switch(n){case p.AnalyticsCommand.CreateSession:(r=e.data).metadata||_.error("[processCommand] unable to create Conviva session, missing content data"),this.createSession(r.metadata,this._config);break;case p.AnalyticsCommand.ReportEvent:var r=e.data;this.reportEvent(r.event);break;case p.AnalyticsCommand.ReportError:if((r=e.data).event)this.reportError(r.event);else{var i=null!==(t=r.error)&&void 0!==t?t:f.PlayerErrorFactory.unknownError();this.reportError(i)}break;case p.AnalyticsCommand.PauseTracking:this.pauseTracking();break;case p.AnalyticsCommand.ResumeTracking:this.resumeTracking();break;case p.AnalyticsCommand.CleanupSession:this.cleanupSession();break;default:throw new a.UnreachableCaseError(n)}return this},e.prototype.handlePlayerNotification=function(e){var t;switch(e.eventType){case l.PlayerControllerEventType.Transaction_State_Changed:var n=e.eventResult,r=n.currentState,i=n.previousState;switch(r){case y.TransactionState.Transforming:var o=c.playlistItemToCreateSessionMetadata(null!==(t=this._model.playlistItem)&&void 0!==t?t:{},this._contentEntryFileData);this.createSession(o,this._config);break;case y.TransactionState.Waiting:this.pauseTracking();break;case y.TransactionState.Validating:i===y.TransactionState.Waiting&&this.resumeTracking();break;case y.TransactionState.Ended:this.cleanupSession()}}return this},e.prototype.handleModuleNotification=function(e){return e.category===y.ModuleEventCategory.Component_Event&&e.module===y.ModuleType.Video_Engine&&this.handleVideoEngineNotification(e.result),this},e.prototype.updateConfig=function(e){var t,n,r=null===(t=null==e?void 0:e.analytics)||void 0===t?void 0:t.conviva;return r&&this.isSessionActive()?(this._metadata||(this._metadata={}),r.applicationName&&(this._metadata[o.default.Constants.PLAYER_NAME]=r.applicationName),r.assetName&&(this._metadata[o.default.Constants.ASSET_NAME]=r.assetName),r.defaultResource&&(this._metadata[o.default.Constants.DEFAULT_RESOURCE]=r.defaultResource),r.encodedFrameRate&&(this._metadata[o.default.Constants.ENCODED_FRAMERATE]=r.encodedFrameRate),r.tags&&(this._customTags=y.StandardExtend()(this._customTags,this.prepareTags(r.tags)),this._metadata=y.StandardExtend()(this._metadata,this._customTags)),r.viewerId&&(this._metadata[o.default.Constants.VIEWER_ID]=r.viewerId),null===(n=this.videoAnalytics)||void 0===n||n.setContentInfo(this._metadata),this._config=y.StandardExtend()(this._config,r),this):this},e.prototype.destroy=function(){return this.cleanupSession(),Promise.resolve()},e}();t.ConvivaAnalytics=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAnalyticsErrorData=void 0,t.isAnalyticsErrorData=function(e){return"string"==typeof e.data&&void 0!==e.severity}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(226),t),i(n(227),t),i(n(229),t),i(n(129),t),i(n(230),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timeline=void 0;var r=n(1),i=n(15),o=n(0),a=function(){function e(){var e=this;this._onMarkerEvent=function(t,n){var i=n.marker;switch(t){case o.MarkerEventType.Approaching:e.events.markerApproaching.dispatch({marker:i});break;case o.MarkerEventType.Activated:e.activeMarkers.push(i),e.events.markerActivated.dispatch({marker:i});break;case o.MarkerEventType.Finishing:e.events.markerFinishing.dispatch({marker:i});break;case o.MarkerEventType.Deactivated:var a=e.activeMarkers.findIndex((function(e){return e===i}));a>-1&&e.activeMarkers.splice(a,1),e.events.markerDeactivated.dispatch({marker:i});break;default:throw new r.UnreachableCaseError(t)}},this.events=i.createTimelineEventCollection(),this.activeMarkers=[],this._markers=new r.LinkedList,this._currentTime=0}return e.prototype._add=function(e){return!this._options.allowDuplicates&&this._isDuplicateMarker(e)?null:(e.events.listen(this._onMarkerEvent),this._markers.add(e),e)},e.prototype._syncModelTime=function(){this._requestModelUpdates([{property:o.ModelKeys.Timeline_Time,value:this._currentTime}])},e.prototype._syncModelMarkers=function(){this._requestModelUpdates([{property:o.ModelKeys.Timeline_Markers,value:this._markers.iterator()}])},e.prototype._isDuplicateMarker=function(e){return this._markers.iterator().filter((function(t){return r.hashCode(t.toString())===r.hashCode(e.toString())})).length>0},e.prototype._requestModelUpdates=function(e){this.events.modelUpdateRequest.dispatch({changes:e})},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._currentTime},enumerable:!1,configurable:!0}),e.prototype.init=function(e){return this._options=r.ObjectUtils.extendDeep({},{allowDuplicates:!0},e||{}),this},e.prototype.addMany=function(e){var t=this,n=e.map((function(e){return t._add(e)})).filter((function(e){return null!==e}));return this._syncModelMarkers(),n.forEach((function(e){return t.events.markerAdded.dispatch({marker:e})})),n},e.prototype.addMarker=function(e){var t=this._add(e);return t?(this._syncModelMarkers(),this.events.markerAdded.dispatch({marker:e}),t):null},e.prototype.removeMarker=function(e){var t=this._markers.remove(e);return t&&(e.events.unlistenAll(),this.events.markerRemoved.dispatch({marker:t})),t},e.prototype.hasMarker=function(e){return!!this._markers.findBy((function(t){return t===e}))},e.prototype.getNextMarker=function(e){e=e||this.activeMarkers[0];var t=this._markers.findNodeBy((function(t){return t===e}));return t&&t.next?t.next.value:null},e.prototype.getPreviousMarker=function(e){e=e||this.activeMarkers[0];var t=this._markers.findPreviousNodeBy((function(t){return t===e}));return t?t.value:null},e.prototype.getMarkersForTime=function(e){return this._markers.iterator().filter((function(t){return t.range.contains(e)}))},e.prototype.getMarkersForRange=function(e){return this._markers.iterator().filter((function(t){return r.TimeRangeUtils.intersectsRange(t.range,e)}))},e.prototype.getLastMarker=function(){return this._markers.last()},e.prototype.isLastMarker=function(e){return e=e||this.activeMarkers[0],this._markers.last()===e},e.prototype.updateTime=function(e){var t=this._currentTime;this._currentTime=e,this._syncModelTime(),this._markers.iterator().forEach((function(t){return t.updateTime(e)})),0===t&&e>0&&this.events.started.dispatch({initialTime:e})},e.prototype.reset=function(){this._markers.iterator().forEach((function(e){return e.events.unlistenAll()})),this._markers.clear(),this._currentTime=0,this.activeMarkers.length=0},e.prototype.iterator=function(){return this._markers.iterator()},e}();t.Timeline=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTimelineStrategy=void 0;var r=n(1),i=n(30),o=n(0),a=r.Log.getLogger("DefaultTimelineStrategy").filter("timeline"),s=function(){function e(){}return e.prototype.init=function(e){var t=e.config,n=e.model,r=e.timeline,i=e.playlistItem;return this._config=t,this._model=n,this._timeline=r,this._playlistItem=i,this},e.prototype.updateConfig=function(e){r.ObjectUtils.extendDeep(this._config,e)},e.prototype.populateTimeline=function(e){return[]},e.prototype.handleModuleNotification=function(e){},e.prototype.handlePlayerNotification=function(e){},e.prototype.handleModelUpdated=function(e){var t=this;e.changed.forEach((function(e){switch(e.property){case o.ModelKeys.Ad_Breaks:var n=e.currentValue,r=t._timeline.addMany(n.map((function(e){return i.AdsConverter.toTimelineMarker(e)})));a.debug("[handleModelUpdated] populated timeline with "+r.length+" markers")}}))},e.prototype.cancel=function(){return Promise.resolve()},e.prototype.destroy=function(){return Promise.resolve()},e}();t.DefaultTimelineStrategy=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InitEventType=t.createInitEventCollection=void 0;var r,i=n(1);t.createInitEventCollection=function(){return i.createEventCollection({stateChanged:i.createEvent(r.State_Changed)})},function(e){e.State_Changed="stateChanged"}(r=t.InitEventType||(t.InitEventType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewEventType=t.createViewEventCollection=t.createViewEvent=void 0;var r,i=n(1);function o(e){return i.createEvent(e)}t.createViewEvent=o,t.createViewEventCollection=function(){return i.createEventCollection({stateChanged:o(r.State_Changed)})},function(e){e.State_Changed="stateChanged"}(r=t.ViewEventType||(t.ViewEventType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTransactionEventCollection=t.createPlayerControllerEventCollection=t.createViewEventCollection=t.createInitEventCollection=void 0;var r=n(132);Object.defineProperty(t,"createViewEventCollection",{enumerable:!0,get:function(){return r.createViewEventCollection}});var i=n(16);Object.defineProperty(t,"createPlayerControllerEventCollection",{enumerable:!0,get:function(){return i.createPlayerControllerEventCollection}});var o=n(42);Object.defineProperty(t,"createTransactionEventCollection",{enumerable:!0,get:function(){return o.createTransactionEventCollection}});var a=n(131);Object.defineProperty(t,"createInitEventCollection",{enumerable:!0,get:function(){return a.createInitEventCollection}})},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(40),a=n(133),s=r(n(237)),u=n(5),c=n(4),l=n(0),d=function(){function e(e,t){var n=this;this._detachOpts={exitFullscreenOnDetach:!1},this._viewStateOnDetach=l.ViewState.Windowed,this._viewStateOnExitRemote=l.ViewState.Windowed,this._viewStateOnEnterFullscreen=l.ViewState.Fullscreen,this._viewStateOnExitFullscreen=l.ViewState.Windowed,this._onFsmEvent=function(e,t){var r=t.from,a=t.to,s=t.args;switch(e){case i.FsmEventType.State_Entered:switch(a){case l.ViewState.Attached:n._isAttached=!0;break;case l.ViewState.Detached:n._isAttached=!1;break;case l.ViewState.Entering_Fullscreen:n._viewStateOnExitRemote=l.ViewState.Fullscreen;break;case l.ViewState.Exiting_Fullscreen:n._viewStateOnExitRemote=l.ViewState.Windowed;break;case l.ViewState.Exiting_Remote:n._viewStateOnEnterFullscreen=l.ViewState.Fullscreen;break;case l.ViewState.Fullscreen:n._viewStateOnDetach=l.ViewState.Fullscreen,n._viewStateOnExitRemote=l.ViewState.Fullscreen,n._viewStateOnExitFullscreen=l.ViewState.Windowed;break;case l.ViewState.Remote:n._viewStateOnDetach=l.ViewState.Remote,n._viewStateOnEnterFullscreen=l.ViewState.Remote,n._viewStateOnExitFullscreen=l.ViewState.Remote;break;case l.ViewState.Windowed:n._viewStateOnDetach=l.ViewState.Windowed,n._viewStateOnExitRemote=l.ViewState.Windowed,n._viewStateOnEnterFullscreen=l.ViewState.Fullscreen,n._viewStateOnExitFullscreen=l.ViewState.Windowed}break;case i.FsmEventType.State_Changed:switch(n._notifyStateChanged(r,a,s),a){case l.ViewState.Creating:var u=s[0];n._activeTask=n._platformHelper.createSubstructure().onCompleted((function(){n._activeTask=null})).fold((function(e){return n._fsm.fireTransition(o.ViewEvent.Error,[{error:e}])}),(function(){return n._fsm.fireTransition(o.ViewEvent.Created,[u])}));break;case l.ViewState.Created:var d=s[0];c.fromNullable(d).getOrElse(!1)?n._fsm.fireTransition(o.ViewEvent.Attach,[d]):n._logger.warn("[ViewController] A container must be provided before the player can be attached. Please provide one through configuration or call the attach API.");break;case l.ViewState.Attaching:d=s[0];n._activeTask=n._platformHelper.attachToContainer(d).onCompleted((function(){n._activeTask=null})).fold((function(e){return n._fsm.fireTransition(o.ViewEvent.Error,[{error:e}])}),(function(e){var t=e.root,r=e.sub;n._fsm.fireTransition(o.ViewEvent.Attached,[{root:t,sub:r}])}));break;case l.ViewState.Attached:if(n._detachOpts.exitFullscreenOnDetach)n._fsm.fireTransition(o.ViewEvent.Windowed);else switch(n._viewStateOnDetach){case l.ViewState.Remote:n._fsm.fireTransition(o.ViewEvent.Remote);break;case l.ViewState.Fullscreen:n._fsm.fireTransition(o.ViewEvent.Fullscreen);break;case l.ViewState.Windowed:n._fsm.fireTransition(o.ViewEvent.Windowed)}break;case l.ViewState.Entering_Fullscreen:n._platformHelper.enterFullscreen().fold((function(e){n._logger.warn("Could not enter fullscreen: "+e),n._fsm.attemptTransition(o.ViewEvent.Windowed)}),(function(){switch(n._viewStateOnEnterFullscreen){case l.ViewState.Fullscreen:n._fsm.fireTransition(o.ViewEvent.Fullscreen);break;case l.ViewState.Remote:n._fsm.fireTransition(o.ViewEvent.Remote)}}));break;case l.ViewState.Exiting_Fullscreen:n._platformHelper.exitFullscreen().fold((function(e){n._logger.warn("Could not exit fullscreen: "+e),n._fsm.attemptTransition(o.ViewEvent.Fullscreen)}),(function(){switch(n._viewStateOnExitFullscreen){case l.ViewState.Windowed:n._fsm.fireTransition(o.ViewEvent.Windowed);break;case l.ViewState.Remote:n._fsm.fireTransition(o.ViewEvent.Remote)}}));break;case l.ViewState.Entering_Remote:n._fsm.fireTransition(o.ViewEvent.Remote);break;case l.ViewState.Exiting_Remote:switch(n._viewStateOnExitRemote){case l.ViewState.Windowed:n._fsm.fireTransition(o.ViewEvent.Windowed);break;case l.ViewState.Fullscreen:n._fsm.fireTransition(o.ViewEvent.Fullscreen)}break;case l.ViewState.Detaching:var f=s.length?s[0]:"";n._detachTask=n._platformHelper.releaseFromContainer().onCompleted((function(){n._detachTask=null})).fold((function(e){return n._fsm.fireTransition(o.ViewEvent.Error,[{error:e}])}),(function(){n._fsm.fireTransition(o.ViewEvent.Detached,[f])}));break;case l.ViewState.Detached:"destroy"===(s.length?s[0]:"")&&n._fsm.fireTransition(o.ViewEvent.Destroy);break;case l.ViewState.Destroying:n._activeTask&&(n._activeTask.cancel(),n._activeTask=null),n._detachTask?n._detachTask.onCompleted((function(){n._fsm.fireTransition(o.ViewEvent.Destroyed)})):n._fsm.fireTransition(o.ViewEvent.Destroyed);break;case l.ViewState.Destroyed:n._bindings.forEach((function(e){return e.detach()})),n._bindings=[],n._fsm=null}break;case i.FsmEventType.Error:n._notifyStateChanged(n._fsm.currentState(),l.ViewState.Error)}},this._onPlatformEvent=function(e,t){switch(e){case u.PlatformEventType.Fullscreen_Entered:n._fsm.attemptTransition(o.ViewEvent.Enter_Fullscreen);break;case u.PlatformEventType.Fullscreen_Exited:n._fsm.attemptTransition(o.ViewEvent.Exit_Fullscreen);break;default:throw new i.UnreachableCaseError(e)}},this._playerId=e,this._logger=i.Log.getLogger("ViewController"+this._playerId),this.events=a.createViewEventCollection(),this._fsm=new i.Fsm,this._isAttached=!1,this._activeTask=null,this._detachTask=null,this._platformHelper=t,this._bindings=[this._platformHelper.events.listen(this._onPlatformEvent)]}return e.prototype._notifyStateChanged=function(e,t,n){this._logger.info("[_notifyStateChanged] "+e+" -> "+t),this.events.stateChanged.dispatch({previousState:e,currentState:t,args:n})},e.prototype.init=function(e){this._fsm.init(s.default),this._bindings.push(this._fsm.events.listen(this._onFsmEvent)),this._fsm.fireTransition(o.ViewEvent.Create,[e.container])},e.prototype.canAttach=function(){return this._fsm.canFireTransition(o.ViewEvent.Attach)},e.prototype.attach=function(e){var t=this;this._detachTask?this._detachTask.onCompleted((function(){t._fsm.attemptTransition(o.ViewEvent.Attach,[e])})):this._fsm.attemptTransition(o.ViewEvent.Attach,[e])},e.prototype.isAttached=function(){return this._isAttached},e.prototype.isFullscreen=function(){return this._fsm.currentState()===l.ViewState.Fullscreen},e.prototype.enterFullscreen=function(){this._fsm.attemptTransition(o.ViewEvent.Enter_Fullscreen)},e.prototype.exitFullscreen=function(){this._fsm.attemptTransition(o.ViewEvent.Exit_Fullscreen)},e.prototype.enterRemotePlayback=function(){this._fsm.attemptTransition(o.ViewEvent.Enter_Remote)},e.prototype.exitRemotePlayback=function(){this._fsm.attemptTransition(o.ViewEvent.Exit_Remote)},e.prototype.canDetach=function(){return this._fsm.canFireTransition(o.ViewEvent.Detach)},e.prototype.detach=function(e){this._detachOpts=e,this._fsm.attemptTransition(o.ViewEvent.Detach)},e.prototype.destroy=function(){this.isAttached()?this._fsm.attemptTransition(o.ViewEvent.Detach,["destroy"]):this._fsm.attemptTransition(o.ViewEvent.Destroy)},e.prototype.handleModuleNotification=function(e){var t=e.module,n=e.result;switch(t){case l.ModuleType.Video_Engine:switch(n.type){case l.VideoEngineEventType.Remote_Playback_Selected:this.enterRemotePlayback();break;case l.VideoEngineEventType.Remote_Playback_Deselected:this.exitRemotePlayback()}}},e}();t.default=d},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(43),t),i(n(110),t),i(n(109),t),i(n(49),t),i(n(238),t),i(n(239),t),i(n(54),t),i(n(55),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveDRMTokenError=t.resolveCDNTokenError=void 0;var r=n(3),i=n(3),o=function(e,t){switch(e){case"2802":return r.PlayerErrorFactory.tokenMismatch("["+t+"] Invalid token for path").setMetadata({recoverySuggestion:i.PlayerRecoveryMessaging.TOKEN_MISMATCH});case"2803":return r.PlayerErrorFactory.maxAllowedStreamsExceeded("["+t+"] Maximum allowed streams exceeded").setMetadata({recoverySuggestion:i.PlayerRecoveryMessaging.BACKEND_SERVICES_ERROR});case"2804":return r.PlayerErrorFactory.maxAllowedRenewalsExceeded("["+t+"] Maximum renewals exceeded").setMetadata({recoverySuggestion:i.PlayerRecoveryMessaging.BACKEND_SERVICES_ERROR});default:return null}};t.resolveCDNTokenError=function(e,t){var n;return null!==(n=o(e,t))&&void 0!==n?n:r.PlayerErrorFactory.authCdnTokenFailure("["+t+"] Token service response failed").setMetadata({recoverySuggestion:i.PlayerRecoveryMessaging.BACKEND_SERVICES_ERROR})};t.resolveDRMTokenError=function(e,t){var n;return null!==(n=o(e,t))&&void 0!==n?n:r.PlayerErrorFactory.authDrmTokenFailure("["+t+"] Token service response failed").setMetadata({recoverySuggestion:i.PlayerRecoveryMessaging.BACKEND_SERVICES_ERROR})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCueEventCollection=void 0;var r=n(0),i=n(1);t.createCueEventCollection=function(){return i.createEventCollection({stateChanged:i.createEvent(r.CueEventType.State_Changed),processed:i.createEvent(r.CueEventType.Processed),activated:i.createEvent(r.CueEventType.Activated)})}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerCollection=void 0;var o=function(e){function t(t){var n=e.call(this)||this;return n._onTriggerFired=function(e){n._receivedChangeCount++,n._receivedChangeCount===n._expectedChangeCount&&n.fireTriggered()},n._triggers=t,n._expectedChangeCount=t.length,n._receivedChangeCount=0,n._bindings=[],n}return i(t,e),t.prototype._addTriggerListeners=function(){var e=this;this._bindings.length>0||this._triggers.forEach((function(t){var n=t.events.fired.listen(e._onTriggerFired);e._bindings.push(n)}))},t.prototype._removeTriggerListeners=function(){this._bindings.forEach((function(e){return e.detach()})),this._bindings.length=0},Object.defineProperty(t.prototype,"size",{get:function(){return this._triggers.length},enumerable:!1,configurable:!0}),t.prototype.init=function(t){e.prototype.init.call(this,t),this._triggers.forEach((function(e){return e.init(t)}))},t.prototype.enable=function(){e.prototype.enable.call(this),this._triggers.forEach((function(e){return e.enable()}))},t.prototype.disable=function(){e.prototype.disable.call(this),this._triggers.forEach((function(e){return e.disable()}))},t.prototype.reset=function(){e.prototype.reset.call(this),this._addTriggerListeners(),this._receivedChangeCount=0,this._triggers.forEach((function(e){return e.reset()}))},t.prototype.destroy=function(){this._removeTriggerListeners()},t}(n(139).DefaultTrigger);t.TriggerCollection=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTrigger=t.DefaultTriggerOptions=void 0;var r=n(1),i=n(140),o=n(243);t.DefaultTriggerOptions={frequency:i.TriggerFrequency.Default};var a=function(){function e(){var e=this;this.fireTriggered=function(){e._options.frequency===i.TriggerFrequency.Once&&0!==e._triggerCount&&e.disable(),e.enabled&&(e._events.fired.dispatch({trigger:e}),e._triggerCount++)},this._events=o.createTriggerEventCollection(),this._enabled=!1,this._options=t.DefaultTriggerOptions,this._triggerCount=0}return Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),e.prototype.init=function(e){this._options=r.ObjectUtils.extendDeep({},t.DefaultTriggerOptions,e),this.reset()},e.prototype.enable=function(){this._enabled=!0},e.prototype.disable=function(){this._enabled=!1},e.prototype.reset=function(){this._triggerCount=0,this.enable()},e.prototype.destroy=function(){this.disable()},e}();t.DefaultTrigger=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerFrequency=void 0,function(e){e.Default="default",e.Once="once"}(t.TriggerFrequency||(t.TriggerFrequency={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCTEMetadataParser=t.createSCTESegmentationDescriptor=t.createSCTEMetadata=void 0;var r=n(122),i=n(1),o=n(246),a=n(0),s=i.Log.getLogger("SCTEMetadataParser").filter("cues");t.createSCTEMetadata=function(e){return{splice_command_type:e,splice_descriptors:[]}};t.createSCTESegmentationDescriptor=function(e,t){var n={type:a.SCTEDescriptorType.Segmentation,type_name:a.SCTEDescriptorType[a.SCTEDescriptorType.Segmentation],identifier:-1,archive_allowed_flag:-1,delivery_not_restricted_flag:-1,device_restrictions:-1,no_regional_blackout_flag:-1,program_segmentation_flag:-1,segment_num:-1,segmentation_duration:-1,segmentation_duration_flag:-1,segmentation_event_cancel_indicator:-1,segmentation_event_id:-1,segmentation_type_id:e,segmentation_type_id_name:a.SCTESegmentationType[e],segmentation_upid:-1,segmentation_upid_length:-1,segmentation_upid_type:-1,segments_expected:-1,web_delivery_allowed_flag:-1};return i.ObjectUtils.extendDeep({},n,t||{})};var u=function(e){var t=null!==e.splice_command_type&&void 0!==e.splice_command_type,n=null!==e.splice_descriptors&&Array.isArray(e.splice_descriptors);return t||(s.warn("[normalizeParsedPayload] no command type found, inserting default value"),e.splice_command_type=a.SCTESpliceCommandType.Null),n||(s.warn("[normalizeParsedPayload] no descriptors list found, inserting default value"),e.splice_descriptors=[]),e},c=function(e){try{r.Base64.atob(e)}catch(e){return!1}return!0},l=function(e){return null!==e&&i.ObjectUtils.isPlainObject(e)},d=function(){function e(){}return e.parse=function(n){var r,i=(r=null,Object.keys(e._parsers).forEach((function(t){var i=e._parsers[t];i.Select(n)&&(r=i)})),r);if(null===i)return s.warn("[parse] Could not determine appropriate handlers for given source, returning empty data"),t.createSCTEMetadata(a.SCTESpliceCommandType.Null);var o=i,u=o.Transform(n);return o.Normalize(u)},e.parseJSON=function(e){return{splice_command_type:i.ObjectUtils.get(e,"splice_command_type"),splice_descriptors:i.ObjectUtils.get(e,"splice_descriptors")}},e.parseString=function(e){var n=o.SpliceInfo.FromBase64(e,r.Base64.atob);return n?n.toJSON():(s.warn("[parseString] could not parse SCTE base64 payload, returning empty data"),t.createSCTEMetadata(a.SCTESpliceCommandType.Null))},e._parsers={String_Base64:{Select:c,Transform:e.parseString,Normalize:u},JSONObj:{Select:l,Transform:e.parseJSON,Normalize:u}},e}();t.SCTEMetadataParser=d},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerModelTrigger=void 0;var o=function(e){function t(t,n){var r=e.call(this)||this;return r._onModelKeyChanged=function(e){e.changed.forEach((function(e){return r._checkConditional(e.property,e.currentValue)}))},r._model=t,r._conditionals=n,r._receivedChanges=new Map,r._expectedChangeCount=n.size,r._modelBinding=null,r}return i(t,e),t.prototype._addModelListener=function(){this._modelBinding||(this._modelBinding=this._model.modelUpdated.listen(this._onModelKeyChanged))},t.prototype._removeModelListener=function(){var e;null===(e=this._modelBinding)||void 0===e||e.detach(),this._modelBinding=null},t.prototype._checkConditional=function(e,t){var n;if(this.enabled){var r=this._conditionals.get(e);if(r)if(r(t)){var i=null!==(n=this._receivedChanges.get(e))&&void 0!==n?n:0;this._receivedChanges.set(e,i+1),this._receivedChanges.size===this._expectedChangeCount&&this.fireTriggered()}}},t.prototype._checkConditionals=function(){var e=this;this._conditionals.forEach((function(t,n){var r,i,o=null===(i=null===(r=e._model)||void 0===r?void 0:r._data)||void 0===i?void 0:i.get(n);e._checkConditional(n,o)}))},t.prototype.enable=function(){e.prototype.enable.call(this),this._checkConditionals(),this._addModelListener()},t.prototype.disable=function(){e.prototype.disable.call(this),this._removeModelListener()},t.prototype.reset=function(){e.prototype.reset.call(this),this._receivedChanges.clear()},t.prototype.destroy=function(){this._receivedChanges.clear(),this._removeModelListener()},t}(n(139).DefaultTrigger);t.PlayerModelTrigger=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CreateRetriggerFor=t.CreateTriggerFor=t.MessageTriggersToTriggerCollection=t.MessageTriggerSupportedInContext=t.MessageTriggerExecutionTypeSupport=t.RelativeMessageTriggerTimingToAbsolute=t.IsRelativeTimeOffset=t.EnsureAbsoluteTimeValue=t.NormalizeMessageTriggerTiming=t.TransformMessageData=void 0;var i=n(0),o=n(1),a=n(138),s=n(26),u=n(252),c=n(254),l=/(\+|-)((\d|\.)+)/,d=/(\+|-)((\d|\.)+)(\((\+|-)\))(\+|-)?((\d|\.)+)(\((\+|-)\))?(\+|-)?((\d|\.)+)?(\((\+|-)\))?(\+|-)?((\d|\.)+)?/;t.TransformMessageData=function(e,t,n){switch(t){case i.MockMessageType.Timed_Metadata:return u.ConvertMockTimedMetadataMessageData(e,n);default:return n}};t.NormalizeMessageTriggerTiming=function(e,n){var r=o.ObjectUtils.extendDeep({},n);return Object.keys(r).forEach((function(n){var o,a,s=n,u=r[s];switch(n){case i.MockMessageTriggerName.Content_Time:r[s]=t.EnsureAbsoluteTimeValue(u,e.timeline.currentTime);break;case i.MockMessageTriggerName.Media_Time:r[s]=t.EnsureAbsoluteTimeValue(u,e.mediaTime);break;case i.MockMessageTriggerName.Ad_Time:r[s]=t.EnsureAbsoluteTimeValue(u,null!==(a=null===(o=e.currentAdCreative)||void 0===o?void 0:o.currentTime)&&void 0!==a?a:-1)}})),r};t.EnsureAbsoluteTimeValue=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return"number"==typeof e?e:t.IsRelativeTimeOffset(e)?t.RelativeMessageTriggerTimingToAbsolute(e,n[0]):-1};t.IsRelativeTimeOffset=function(e){return l.test(e)};t.RelativeMessageTriggerTimingToAbsolute=function(e,t){var n,r=l.exec(e);if(null===r)return-1;var i=t,o=function(e){switch(e.operationSymbol){case"+":i+=e.offsetValue;break;case"-":i-=e.offsetValue}},a=function(e,t){return void 0===t&&(t="+"),""+t+e};if(o({operationSymbol:r[1],offsetValue:parseFloat(r[2])}),d.test(e)){var s=null!==(n=d.exec(e))&&void 0!==n?n:[];void 0!==s[7]&&o({operationSymbol:s[5],offsetValue:parseFloat(a(s[7],s[6]))}),void 0!==s[12]&&o({operationSymbol:s[10],offsetValue:parseFloat(a(s[12],s[11]))}),void 0!==s[17]&&o({operationSymbol:s[15],offsetValue:parseFloat(a(s[17],s[16]))})}return i},t.MessageTriggerExecutionTypeSupport=((r={})[i.MockMessageTriggerName.Content_Time]=s.MocksExecutionState.In_Play,r[i.MockMessageTriggerName.Media_Time]=s.MocksExecutionState.In_Play,r[i.MockMessageTriggerName.Ad_Time]=s.MocksExecutionState.In_Play,r);t.MessageTriggerSupportedInContext=function(e,n){return t.MessageTriggerExecutionTypeSupport[e]===n};t.MessageTriggersToTriggerCollection=function(e,n,r,i){var o=[];return Object.keys(n).forEach((function(a){var s=a,u=n[s];if(t.MessageTriggerSupportedInContext(s,r)){var c=i(e,s,u);null!==c&&o.push(c)}})),new a.TriggerCollection(o)};t.CreateTriggerFor=function(e,t,n){switch(t){case i.MockMessageTriggerName.Ad_Time:case i.MockMessageTriggerName.Media_Time:case i.MockMessageTriggerName.Content_Time:var r=o.TimeRange.create(n,1);switch(t){case i.MockMessageTriggerName.Ad_Time:return c.AdTimeInsideRangeTrigger(r,e);case i.MockMessageTriggerName.Media_Time:return c.MediaTimeInsideRangeTrigger(r,e);case i.MockMessageTriggerName.Content_Time:return c.ContentTimeInsideRangeTrigger(r,e)}}return null};t.CreateRetriggerFor=function(e,t,n){switch(t){case i.MockMessageTriggerName.Ad_Time:case i.MockMessageTriggerName.Media_Time:case i.MockMessageTriggerName.Content_Time:var r=o.TimeRange.create(n,1);switch(t){case i.MockMessageTriggerName.Ad_Time:return c.AdTimeOutsideRangeTrigger(r,e);case i.MockMessageTriggerName.Media_Time:return c.MediaTimeOutsideRangeTrigger(r,e);case i.MockMessageTriggerName.Content_Time:return c.ContentTimeOutsideRangeTrigger(r,e)}}return null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(260),t),i(n(36),t),i(n(263),t)},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),n(146);var i,o=n(273);window.initPlayerUI=function(e,t,n,r){var o=[u(t.css),s(t.js)];t.cssOverride&&o.push(u(t.cssOverride,!1)),Promise.all(o).then((function(){i=new a(e,n,document.getElementById("ui-container")),r()})).catch((function(e){return e.message}))},window.handleEvent=function(e){i&&i.handleEvent(e.type,e)},window.updateConfig=function(e){i&&i.updateConfig(e)};var a=function(){function e(e,t,n){this._proxy=new o.PlayerProxy(e,t,n);var r=new window.TOP.PlayerUI;r.init(this._formatConfig(e.config.ui)),r.attachPlayer(this._proxy),r.attachToDom(n),this._controls=r,window._proxy=this._proxy,window._controls=this._controls}return e.prototype.handleEvent=function(e,t){this._proxy.handleEvent(e,t)},e.prototype.updateConfig=function(e){var t=this._formatConfig(e);this._proxy.updateConfig({ui:t}),this._controls.updateConfig(t)},e.prototype._formatConfig=function(e){var t=r({},e);return delete t.enabled,t},e}();function s(e,t){return void 0===t&&(t=!0),new Promise((function(n,r){var i,o=document.createElement("script");o.src=e,o.async=!0,o.onload=function(){n()},o.onerror=function(e){if(!t)return console.error("Error loading: "+e.srcElement.src),void n();r(e)},null===(i=document.querySelector("body"))||void 0===i||i.appendChild(o)}))}function u(e,t){return void 0===t&&(t=!0),new Promise((function(n,r){var i,o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.onload=function(){n()},o.onerror=function(e){if(!t)return console.error("Error loading: "+e.srcElement.href),void n();r(e)},o.href=e,null===(i=document.querySelector("head"))||void 0===i||i.appendChild(o)}))}window.PlayerUI=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(60),i=n(0),o=n(272).Environment.determine(navigator.userAgent);window.TOP={logging:{Log:r.Log,LogTheme:r.LogTheme,LogLevelType:r.LogLevelType},Player:{PlayerCommandType:i.PlayerCommandType,PlayerEventType:i.PlayerEventType,ads:{AdState:i.AdState},captions:{CCState:i.CCState,settings:{Color:i.Color,Opacity:i.Opacity,Size:i.Size,Edge:i.Edge,FontType:i.FontType}},media:{MediaState:i.MediaState},playback:{ContentState:i.TransactionState,timeline:{MarkerType:i.MarkerType}},view:{ViewState:i.ViewState},utils:{Browser:{edge:function(){return o.isEdge},ie:function(){return o.isIE11},ios:function(){return o.isIOS},topUI:function(){return o.isTopUI}}}}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=n(148);t.fold=function(e){return o.fold(e)(e.empty)},t.getTupleMonoid=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r({},o.getTupleSemigroup.apply(void 0,e),{empty:e.map((function(e){return e.empty}))})},t.getProductMonoid=function(e,n){return t.getTupleMonoid(e,n)},t.getDualMonoid=function(e){return r({},o.getDualSemigroup(e),{empty:e.empty})},t.monoidAll=r({},o.semigroupAll,{empty:!0}),t.monoidAny=r({},o.semigroupAny,{empty:!1});t.unsafeMonoidArray={concat:i.concat,empty:[]},t.getArrayMonoid=function(){return t.unsafeMonoidArray};var a={};t.getDictionaryMonoid=function(e){return r({},o.getDictionarySemigroup(e),{empty:a})},t.monoidSum=r({},o.semigroupSum,{empty:0}),t.monoidProduct=r({},o.semigroupProduct,{empty:1}),t.monoidString=r({},o.semigroupString,{empty:""}),t.monoidVoid=r({},o.semigroupVoid,{empty:void 0}),t.getFunctionMonoid=function(e){return function(){return r({},o.getFunctionSemigroup(e)(),{empty:function(){return e.empty}})}},t.getEndomorphismMonoid=function(){return{concat:function(e,t){return function(n){return e(t(n))}},empty:i.identity}},t.getStructMonoid=function(e){for(var t={},n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];t[a]=e[a].empty}return r({},o.getStructSemigroup(e),{empty:t})},t.getRecordMonoid=function(e){return t.getStructMonoid(e)},t.getMeetMonoid=function(e){return r({},o.getMeetSemigroup(e),{empty:e.top})},t.getJoinMonoid=function(e){return r({},o.getJoinSemigroup(e),{empty:e.bottom})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(63),o=n(10);function a(e){return{concat:function(t,n){for(var i=r({},t),o=Object.keys(n),a=o.length,s=0;s<a;s++){var u=o[s];i[u]=t.hasOwnProperty(u)?e.concat(t[u],n[u]):n[u]}return i}}}t.fold=function(e){return function(t){return function(n){return n.reduce(e.concat,t)}}},t.getFirstSemigroup=function(){return{concat:o.identity}},t.getLastSemigroup=function(){return{concat:function(e,t){return t}}},t.getTupleSemigroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{concat:function(t,n){return e.map((function(e,r){return e.concat(t[r],n[r])}))}}},t.getProductSemigroup=function(e,n){return t.getTupleSemigroup(e,n)},t.getDualSemigroup=function(e){return{concat:function(t,n){return e.concat(n,t)}}},t.getFunctionSemigroup=function(e){return function(){return{concat:function(t,n){return function(r){return e.concat(t(r),n(r))}}}}},t.getStructSemigroup=function(e){return{concat:function(t,n){for(var r={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];r[a]=e[a].concat(t[a],n[a])}return r}}},t.getRecordSemigroup=function(e){return t.getStructSemigroup(e)},t.getMeetSemigroup=function(e){return{concat:i.min(e)}},t.getJoinSemigroup=function(e){return{concat:i.max(e)}},t.semigroupAll={concat:function(e,t){return e&&t}},t.semigroupAny={concat:function(e,t){return e||t}},t.getArraySemigroup=function(){return{concat:o.concat}},t.getDictionarySemigroup=a;var s=a(t.getLastSemigroup());t.getObjectSemigroup=function(){return s},t.semigroupSum={concat:function(e,t){return e+t}},t.semigroupProduct={concat:function(e,t){return e*t}},t.semigroupString={concat:function(e,t){return e+t}},t.semigroupVoid={concat:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sign=function(e){return e<=-1?-1:e>=1?1:0},t.eqOrdering={equals:function(e,t){return e===t}},t.setoidOrdering=t.eqOrdering,t.semigroupOrdering={concat:function(e,t){return 0!==e?e:t}},t.invert=function(e){switch(e){case-1:return 1;case 1:return-1;default:return 0}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createPlayer=void 0;var i=n(151),o=n(56),a=n(28),s=n(54),u=n(48),c=n(135),l=r(n(121)),d=n(55),f=n(5),p=n(22),h=n(17),g=n(38),y=n(96),v=n(98),_=n(240),m=n(251),b=n(99),C=n(0),E=0;t.createPlayer=function(e,t){return function(e,t){var n={instanceId:e,category:C.ComponentCategory.Video_Engine,URI:a.VideoEngineComponentURI.TUB,factory:t.createVideoEngine},r={instanceId:e,category:C.ComponentCategory.PlatformHelper,URI:f.PlatformHelperComponentURI.Default,factory:t.createPlatformHelper},i={instanceId:e,category:C.ComponentCategory.Captions,URI:h.CaptionsComponentURI.Default,factory:function(e){return new h.CCManager(e)}},E={instanceId:e,category:C.ComponentCategory.Cues,URI:v.CuesComponentURI.Default,factory:function(){return new _.CuesManager}},T={instanceId:e,category:C.ComponentCategory.Auth,URI:s.AuthComponentURI.Default,factory:function(){return{handleTokenAuth:c.DefaultAuthHandler.handleTokenAuth}}},S={instanceId:e,category:C.ComponentCategory.AuthDRM,URI:d.AuthDRMComponentURI.Default,factory:function(){return{handleDRMTokenAuth:c.DefaultAuthDRMHandler.handleDRMTokenAuth}}},P={instanceId:e,category:C.ComponentCategory.CMS,URI:u.CmsComponentURI.Default,factory:function(){return new l.default(t.getSupportedDRMs)}},M={instanceId:e,category:C.ComponentCategory.Lifecycle,URI:p.LifecycleComponentURI.Default,factory:function(){}},O={instanceId:e,category:C.ComponentCategory.Analytics,URI:y.AnalyticsComponentURI.Default,factory:function(){}},k={instanceId:e,category:C.ComponentCategory.UI,URI:g.UIComponentURI.Default,factory:function(){return new g.DefaultUIController}},A={instanceId:e,category:C.ComponentCategory.Mocks,URI:b.MocksComponentURI.Default,factory:function(){return new m.MocksManager}};o.ComponentRegistry.add(r),o.ComponentRegistry.add(P),o.ComponentRegistry.add(T),o.ComponentRegistry.add(S),o.ComponentRegistry.add(n),o.ComponentRegistry.add(i),o.ComponentRegistry.add(E),o.ComponentRegistry.add(M),o.ComponentRegistry.add(O),o.ComponentRegistry.add(k),o.ComponentRegistry.add(A)}(++E,e),new i.Player(E,void 0,t)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var i=n(0),o=n(1),a=n(152),s=n(17),u=n(34),c=n(174),l=n(175),d=n(21),f=n(3),p=n(22),h=n(86),g=n(36),y=n(15),v=n(16),_=n(100),m=n(102),b=n(62),C=function(){function e(e,t,n){var r=this;void 0===t&&(t=new g.PlayerModel),this._lastViewMode=i.ViewMode.Pending,this._onModelUpdated=function(e){r.events.modelUpdated.dispatch(e)},this._onControllerEvent=function(e,t){switch(e){case v.PlayerControllerEventType.Player_Error:var n=t.error;r._logPlayerError(n),r.events.playerError.dispatch({error:n}),r._model.playerState===i.PlayerState.Error&&r._spotlightImpl.sendPlayerError(n,"initError");break;case v.PlayerControllerEventType.Player_State_Changed:switch(r._model.handlePlayerStateChange(t),r._notifyStateChanged(t.previousState,t.currentState),t.currentState){case i.PlayerState.Initialized:r.events.playerInitialized.dispatch();break;case i.PlayerState.Listening:r._firedReady||(r._firedReady=!0,r.events.playerReady.dispatch()),r.events.playerListening.dispatch()}break;case v.PlayerControllerEventType.View_State_Changed:switch(r._model.handleViewStateChange(t),r._notifyViewStateChanged(t.previousState,t.currentState,t.args),t.currentState){case i.ViewState.Fullscreen:r.events.viewModeChanged.dispatch({property:"viewMode",previousValue:r._lastViewMode,currentValue:i.ViewMode.Fullscreen}),r._lastViewMode=i.ViewMode.Fullscreen;break;case i.ViewState.Windowed:r.events.viewModeChanged.dispatch({property:"viewMode",previousValue:r._lastViewMode,currentValue:i.ViewMode.Windowed}),r._lastViewMode=i.ViewMode.Windowed;break;case i.ViewState.Remote:r.events.viewModeChanged.dispatch({property:"viewMode",previousValue:r._lastViewMode,currentValue:i.ViewMode.Remote}),r._lastViewMode=i.ViewMode.Remote}break;case v.PlayerControllerEventType.Transaction_State_Changed:switch(r._model.handleTransactionStateChange(t),r._notifyContentStateChanged(t.previousState,t.currentState),t.currentState){case i.TransactionState.Initializing:r._mediaStateBeforeLifecyclePause=void 0,r._adStateBeforeLifecyclePause=void 0,r.events.contentBeginning.dispatch();break;case i.TransactionState.Initialized:r.events.contentSetup.dispatch();break;case i.TransactionState.Waiting:r.events.contentWaiting.dispatch();break;case i.TransactionState.Interrupted:r.events.contentInterrupted.dispatch();break;case i.TransactionState.Finished:r.events.contentCompleted.dispatch();break;case i.TransactionState.Error:n=o.ObjectUtils.getOrElse(t.args[0],"error",new f.PlayerError({code:{category:i.CategoryType.Unknown,code:i.CategoryCode.Unspecified,domain:i.Domain.Shared},message:"An unknown content error occured",severity:i.ErrorSeverity.Fatal}));r.events.contentError.dispatch({error:n});break;case i.TransactionState.Ended:r.events.contentEnded.dispatch()}break;case v.PlayerControllerEventType.Transaction_Config_Updated:r._model.handleTransactionConfigUpdate(t);break;case v.PlayerControllerEventType.Module_Notification:switch(r._model.handleModuleNotification(t),t.module){case i.ModuleType.UI:switch(t.result.type){case i.PlayerEventType.Message_From_UI:r.events.messageFromUI.dispatch({type:i.PlayerEventType.Message_From_UI,name:t.result.name,payload:t.result.payload});break;case i.PlayerEventType.Message_To_UI:r.events.messageToUI.dispatch({type:i.PlayerEventType.Message_To_UI,name:t.result.name,payload:t.result.payload})}break;case i.ModuleType.Video_Engine:var a=t.result;r._onVideoEngineNotification(a);break;case i.ModuleType.Lifecycle:var s=t.result;r._onLifecycleNotification(s.type,s);break;case i.ModuleType.Timeline:var u=t.result;r._onTimelineNotification(u.type,u);break;case i.ModuleType.Captions:var c=t.result;r._onCCNotification(c.type,c);break;case i.ModuleType.Cues:var l=t.result;r._onCueNotification(l.type,l);break;case i.ModuleType.Mocks:var d=t.result;r._onMocksNotification(d.type,d);break;case i.ModuleType.Auth:switch(t.result.type){case i.PlayerEventType.Token_Response_Received:r.events.tokenResponseReceived.dispatch(t.result.payload)}}break;default:throw new o.UnreachableCaseError(e)}},this._playerId=e,this._logger=o.Log.getLogger("Player"+this._playerId),this._spotlightImpl=new a.SpotlightImpl,this.events=b.createPlayerEventCollection(n),this._model=t,this._controller=new m.PlayerController(this._playerId),this._hooks=new _.PlayerHookCollection,this._addDefaultHookHandlers(),this._bindings=[this._model.modelUpdated.listen(this._onModelUpdated),this._controller.events.listen(this._onControllerEvent)],this._destroyPromise=null,this._firedReady=!1}return e.prototype._addDefaultHookHandlers=function(){this._hooks.validateDRMTokenResponse.set((function(e){return e.error?Promise.reject(e.error):Promise.resolve(e)}),o.HookHandlerType.Default)},e.prototype._onVideoEngineNotification=function(e){switch(e.type){case i.VideoEngineEventType.Model_Update_Request:case i.VideoEngineEventType.Caption_Track_Added:case i.VideoEngineEventType.Caption_Track_Selected:case i.VideoEngineEventType.Caption_Track_Deselected:case i.VideoEngineEventType.Caption_Track_Removed:case i.VideoEngineEventType.Caption_Cue_Parsed:case i.VideoEngineEventType.Caption_Cue_Entered:case i.VideoEngineEventType.Caption_Cue_Exited:case i.VideoEngineEventType.Caption_Cue_Updated:break;case i.VideoEngineEventType.Volume_Changed:this.events.volumeChanged.dispatch(e);break;case i.VideoEngineEventType.Mute_Changed:this.events.muteChanged.dispatch(e);break;case i.VideoEngineEventType.Media_Command_Received:this.events.mediaCommandReceived.dispatch(e);break;case i.VideoEngineEventType.Media_Command_Rejected:this.events.mediaCommandRejected.dispatch(e);break;case i.VideoEngineEventType.Media_State_Changed:this.events.mediaStateChanged.dispatch(e);break;case i.VideoEngineEventType.Media_Ready:this.events.mediaReady.dispatch();break;case i.VideoEngineEventType.Media_Starting:this.events.mediaStarting.dispatch(e);break;case i.VideoEngineEventType.Media_Blocked:this.events.mediaBlocked.dispatch(e);break;case i.VideoEngineEventType.Media_Loaded:this.events.mediaLoaded.dispatch(e);break;case i.VideoEngineEventType.Media_Started:this.events.mediaStarted.dispatch();break;case i.VideoEngineEventType.Media_Buffering_Started:this.events.mediaBufferingStarted.dispatch();break;case i.VideoEngineEventType.Media_Buffering_Finished:this.events.mediaBufferingFinished.dispatch();break;case i.VideoEngineEventType.Media_Seeking_Started:this.events.mediaSeekingStarted.dispatch(e);break;case i.VideoEngineEventType.Media_Seeking_Finished:this.events.mediaSeekingFinished.dispatch(e);break;case i.VideoEngineEventType.Media_Request_Profile_Changed:this.events.mediaRequestProfileChanged.dispatch(e);break;case i.VideoEngineEventType.Media_Profile_Changed:this.events.mediaProfileChanged.dispatch(e);break;case i.VideoEngineEventType.Media_Time_Changed:this.events.mediaTimeChanged.dispatch(e);break;case i.VideoEngineEventType.Media_Paused:this.events.mediaPaused.dispatch();break;case i.VideoEngineEventType.Media_Resumed:this.events.mediaResumed.dispatch();break;case i.VideoEngineEventType.Media_Recovery_Started:this.events.mediaRecoveryStarted.dispatch(e);break;case i.VideoEngineEventType.Media_Recovery_Finished:this.events.mediaRecoveryFinished.dispatch(e);break;case i.VideoEngineEventType.Media_Resized:this.events.mediaResized.dispatch(e);break;case i.VideoEngineEventType.Media_Stopped:this.events.mediaStopped.dispatch();break;case i.VideoEngineEventType.Media_Timed_Metadata_Parsed:this.events.mediaTimedMetadataParsed.dispatch(e);break;case i.VideoEngineEventType.Media_Timed_Metadata_Received:this.events.mediaTimedMetadataReceived.dispatch(e);break;case i.VideoEngineEventType.Media_Audio_Track_Availability_Changed:this.events.mediaAudioTrackAvailabilityChanged.dispatch(e);break;case i.VideoEngineEventType.Media_Audio_Track_Selected:this.events.mediaAudioTrackSelected.dispatch(e);break;case i.VideoEngineEventType.Media_Finished:this.events.mediaFinished.dispatch();break;case i.VideoEngineEventType.Media_Error:var t=void 0;switch((n=e).domain){case"content":t=f.PlayerErrorFactory.contentError(f.PlayerRecoveryMessaging.CONTENT_MEDIA_ERROR,i.ErrorSeverity.Fatal).setMetadata({subErrorCode:n.code.toString(),subErrorMessage:n.message,subErrorData:n.metadata});break;case"network":t=f.PlayerErrorFactory.networkError(f.PlayerRecoveryMessaging.NETWORK_MEDIA_ERROR,i.ErrorSeverity.Fatal).setMetadata({subErrorCode:n.code.toString(),subErrorMessage:n.message,subErrorData:n.metadata});break;case"drm":t=f.PlayerErrorFactory.drmError(f.PlayerRecoveryMessaging.DRM_MEDIA_ERROR,i.ErrorSeverity.Fatal).setMetadata({subErrorCode:n.code.toString(),subErrorMessage:n.message,subErrorData:n.metadata});break;default:t=f.PlayerErrorFactory.mediaError(f.PlayerRecoveryMessaging.GENERAL_MEDIA_ERROR,i.ErrorSeverity.Fatal).setMetadata({subErrorCode:n.code.toString(),subErrorMessage:n.message,subErrorData:n.metadata})}this.events.mediaError.dispatch({error:t}),this._logPlayerError(t),this.events.playerError.dispatch({error:t});break;case i.VideoEngineEventType.Media_Stalled:this.events.mediaStalled.dispatch(e);break;case i.VideoEngineEventType.Ad_State_Changed:this.events.adStateChanged.dispatch(e);break;case i.VideoEngineEventType.Ad_Starting:this.events.adStarting.dispatch(e);break;case i.VideoEngineEventType.Ad_Started:this.events.adStarted.dispatch(e);break;case i.VideoEngineEventType.Ad_Blocked:this.events.adBlocked.dispatch(e);break;case i.VideoEngineEventType.Ad_Loaded:this.events.adLoaded.dispatch(e);break;case i.VideoEngineEventType.Ad_Creative_Started:this.events.adCreativeStarted.dispatch(e);break;case i.VideoEngineEventType.Ad_Time_Changed:this.events.adTimeChanged.dispatch(e);break;case i.VideoEngineEventType.Ad_Paused:this.events.adPaused.dispatch(e);break;case i.VideoEngineEventType.Ad_Resumed:this.events.adResumed.dispatch(e);break;case i.VideoEngineEventType.Ad_Stopped:this.events.adStopped.dispatch(e);break;case i.VideoEngineEventType.Ad_Creative_Ended:this.events.adCreativeEnded.dispatch(e);break;case i.VideoEngineEventType.Ad_Finished:this.events.adFinished.dispatch(e);break;case i.VideoEngineEventType.Ad_Error:var n=e,r=f.PlayerErrorFactory.adError(f.PlayerRecoveryMessaging.DIRECT_TO_UNDERLYING_ERROR,i.ErrorSeverity.Warn).setMetadata({subErrorCode:n.code.toString(),subErrorMessage:n.message||n.adErrorType+" - "+n.name});this.events.adError.dispatch({adBreakId:n.adBreakId,error:r}),this._logPlayerError(r),this.events.playerError.dispatch({error:r});break;case i.VideoEngineEventType.DRM_Token_Request:case i.VideoEngineEventType.Remote_Playback_Selected:case i.VideoEngineEventType.Remote_Playback_Deselected:case i.VideoEngineEventType.Ad_Buffering_Started:case i.VideoEngineEventType.Ad_Buffering_Finished:break;default:throw new o.UnreachableCaseError(e)}},e.prototype._onTimelineNotification=function(e,t){switch(e){case y.TimelineEventType.Model_Update_Request:case y.TimelineEventType.Started:break;case y.TimelineEventType.Marker_Added:this.events.timelineMarkerAdded.dispatch({marker:t.marker});break;case y.TimelineEventType.Marker_Approaching:this.events.timelineMarkerApproaching.dispatch({marker:t.marker});break;case y.TimelineEventType.Marker_Activated:this.events.timelineMarkerActivated.dispatch({marker:t.marker});break;case y.TimelineEventType.Marker_Finishing:this.events.timelineMarkerFinishing.dispatch({marker:t.marker});break;case y.TimelineEventType.Marker_Deactivated:this.events.timelineMarkerDeactivated.dispatch({marker:t.marker});break;case y.TimelineEventType.Marker_Removed:this.events.timelineMarkerRemoved.dispatch({marker:t.marker});break;default:throw new o.UnreachableCaseError(e)}},e.prototype._onLifecycleNotification=function(e,t){switch(e){case p.LifecycleEventType.Model_Update_Request:break;case p.LifecycleEventType.State_Changed:var n=t;switch(this.events.lifecycleStateChanged.dispatch({type:i.PlayerEventType.Lifecycle_State_Changed,previousState:n.previousState,currentState:n.currentState}),n.currentState){case i.LifecycleState.Continue:if(n.previousState==i.LifecycleState.Pause){var r=!!this._mediaStateBeforeLifecyclePause&&(this._mediaStateBeforeLifecyclePause===i.MediaState.Playing||this._mediaStateBeforeLifecyclePause===i.MediaState.Buffering||this._mediaStateBeforeLifecyclePause===i.MediaState.Seeking),o=!!this._adStateBeforeLifecyclePause&&this._adStateBeforeLifecyclePause===i.AdState.Playing;(r||o)&&(this._processCommand({type:i.PlayerCommandType.Resume}),this._mediaStateBeforeLifecyclePause=void 0,this._adStateBeforeLifecyclePause=void 0)}break;case i.LifecycleState.Pause:if(this._model.viewState===i.ViewState.Remote||this._model.viewState===i.ViewState.Entering_Remote)return;this._mediaStateBeforeLifecyclePause=this._model.mediaState,this._adStateBeforeLifecyclePause=this._model.currentAdBreak?this._model.currentAdBreak.state:void 0,this._processCommand({type:i.PlayerCommandType.Pause});break;case i.LifecycleState.Unload:this._processCommand({type:i.PlayerCommandType.Destroy})}}},e.prototype._onCCNotification=function(e,t){switch(e){case s.CCEventType.Model_Update_Request:break;case s.CCEventType.State_Changed:this.events.captionsStateChanged.dispatch(t);break;case s.CCEventType.Settings_Updated:this.events.captionSettingsUpdated.dispatch(t);break;case s.CCEventType.Track_Added:this.events.captionTrackAdded.dispatch(t);break;case s.CCEventType.Track_Selected:this.events.captionTrackSelected.dispatch(t);break;case s.CCEventType.Track_Deselected:this.events.captionTrackDeselected.dispatch(t);break;case s.CCEventType.Track_Removed:this.events.captionTrackRemoved.dispatch(t)}if(this.model.captionsEnabled)switch(e){case s.CCEventType.Cue_Parsed:this.events.captionCueParsed.dispatch(t);break;case s.CCEventType.Cue_Entered:this.events.captionCueEntered.dispatch(t);break;case s.CCEventType.Cue_Exited:this.events.captionCueExited.dispatch(t);break;case s.CCEventType.Cue_Updated:this.events.captionCueUpdated.dispatch(t)}},e.prototype._onCueNotification=function(e,t){if(!l.isDebugCueManagerEvent(t)||this.config.debug.enabled)switch(e){case d.CuesManagerEventType.Cue_State_Changed:this.events.cueStateChanged.dispatch(t);break;case d.CuesManagerEventType.Cue_Processed:this.events.cueProcessed.dispatch(t);break;case d.CuesManagerEventType.Cue_Activated:this.events.cueActivated.dispatch(t)}},e.prototype._onMocksNotification=function(e,t){switch(e){case h.MocksEventType.Message_Triggered:this.events.mockMessageTriggered.dispatch(t)}},e.prototype._notifyStateChanged=function(e,t){this.events.playerStateChanged.dispatch({previousState:e,currentState:t})},e.prototype._notifyViewStateChanged=function(e,t,n){this.events.viewStateChanged.dispatch({previousState:e,currentState:t,args:n})},e.prototype._notifyContentStateChanged=function(e,t){this.events.contentStateChanged.dispatch({previousState:e,currentState:t})},e.prototype._logPlayerError=function(e){if(this.model.config.debug.enabled)switch(e.severity){case i.ErrorSeverity.Fatal:case i.ErrorSeverity.Error:this._logger.error(e.toString());break;case i.ErrorSeverity.Warn:this._logger.warn(e.toString())}},e.prototype._processCommandWithResult=function(e){return this._logger.info("Processing command with result: "+o.stringify(e)),this._controller.processCommandWithResult(e)},e.prototype._processCommand=function(e){this._logger.info("Processing command: "+o.stringify(e)),this._controller.processCommand(e)},Object.defineProperty(e.prototype,"id",{get:function(){return this._playerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hooks",{get:function(){return this._hooks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerState",{get:function(){return this._model.playerState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentState",{get:function(){return this._model.contentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lifecycleState",{get:function(){return this._model.lifecycleState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._model.config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playlistItem",{get:function(){return this._model.playlistItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._model.volume},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._model.muted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"analytics",{get:function(){return this._model.analytics},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"captions",{get:function(){return this._model.captions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cues",{get:function(){return this._model.cues},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeline",{get:function(){return this._model.timeline},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaState",{get:function(){return this._model.mediaState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaDuration",{get:function(){return this._model.mediaDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaTime",{get:function(){return this._model.mediaTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentSeekableRange",{get:function(){return this._model.contentSeekableRange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentIsLive",{get:function(){return this._model.contentIsLive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentBufferedRange",{get:function(){return this._model.contentBufferedRange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFullscreen",{get:function(){return this._model.viewState===i.ViewState.Fullscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewState",{get:function(){return this._model.viewState},enumerable:!1,configurable:!0}),e.prototype.processCommand=function(e){this._processCommand(e)},e.prototype.getCurrentAdBreak=function(){return this._model.currentAdBreak},e.prototype.getCurrentAdCreative=function(){return this._model.currentAdCreative},e.prototype.getAdBreaks=function(){return this._model.adBreaks},e.prototype.setup=function(e){var t,n,r=this._model.playerState;switch(e=c.normalizePlayerSetupConfigData(e),r){case i.PlayerState.Pending:this._controller.init(e),this._spotlightImpl.setup(null===(n=null===(t=e.config)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.appId),this._spotlightImpl.sendVersion();break;case i.PlayerState.Destroyed:this._logger.warn("[setup] must re-create player, state is: "+r),this._spotlightImpl.dispose();break;default:this._logger.warn("[setup] player already initialized: "+r)}},e.prototype.ready=function(e){throw new Error("Method not implemented.")},e.prototype.attach=function(e){this._processCommand({type:i.PlayerCommandType.Attach,container:e})},e.prototype.detach=function(e){this._processCommand({type:i.PlayerCommandType.Detach,exitFullscreenOnDetach:e.exitFullscreenOnDetach})},e.prototype.updateConfig=function(e){null!=e&&(e=c.normalizePlayConfig(e)),this._processCommand({type:i.PlayerCommandType.Update_Config,config:e})},e.prototype.preloadContent=function(e,t){var n;void 0===t&&(t={}),e=c.normalizeMediaJSONPlayData(e);var r=o.ObjectUtils.extendDeep({},((n={})[i.CmsProviderKey.MediaJSON]=e,n),t);return this._processCommandWithResult({type:i.PlayerCommandType.Preload_Content,contentData:e,options:r})},e.prototype.sendMessageToUI=function(e,t){this._processCommand({type:i.PlayerCommandType.Send_Message_To_UI,name:e,payload:t})},e.prototype.play=function(e,t){void 0===t&&(t={}),e=c.normalizeContentPlayData(e),t=c.normalizeContentEntryOptionalData(t),this._processCommand({type:i.PlayerCommandType.Play,contentData:e,options:t,hooks:this._hooks.handlers()})},e.prototype.playByMediaJson=function(e,t){var n;void 0===t&&(t={}),e=c.normalizeMediaJSONPlayData(e),t=c.normalizeContentEntryOptionalData(t);var a=o.ObjectUtils.extendDeep({},e,{providerType:i.CmsProviderKey.MediaJSON}),s=o.ObjectUtils.extendDeep({},{providers:(n={},n[i.CmsProviderKey.MediaJSON]=e,n)},o.ObjectUtils.get(t.config,"cms")),u=r(r({},t.config||{}),{cms:s}),l=r(r({},t),{config:r({},u)});this._processCommand({type:i.PlayerCommandType.Play,contentData:a,options:l,hooks:this._hooks.handlers()})},e.prototype.proceed=function(){this._processCommand({type:i.PlayerCommandType.Proceed})},e.prototype.pause=function(){this._processCommand({type:i.PlayerCommandType.Pause})},e.prototype.resume=function(){this._processCommand({type:i.PlayerCommandType.Resume})},e.prototype.seek=function(e){this._processCommand({type:i.PlayerCommandType.Seek,time:e})},e.prototype.seekToLive=function(){this._processCommand({type:i.PlayerCommandType.Seek_To_Live})},e.prototype.setVolume=function(e){this._processCommand({type:i.PlayerCommandType.Update_Config,config:{playback:{volume:e}}})},e.prototype.mute=function(){this._processCommand({type:i.PlayerCommandType.Update_Config,config:{playback:{muted:!0}}})},e.prototype.unmute=function(){this._processCommand({type:i.PlayerCommandType.Update_Config,config:{playback:{muted:!1}}})},e.prototype.resize=function(e,t){this._processCommand({type:i.PlayerCommandType.Resize,width:e,height:t})},e.prototype.selectCaptionTrack=function(e){this._processCommand({type:i.PlayerCommandType.Captions_Select_Track,track:e})},e.prototype.selectCaptionTrackByLang=function(e){this._processCommand({type:i.PlayerCommandType.Captions_Select_Track_By_Lang,lang:e})},e.prototype.setCaptionsEnabled=function(e){this._processCommand({type:i.PlayerCommandType.Captions_Set_Enabled,enabled:e})},e.prototype.updateCaptionSettings=function(e,t){t.fontColor&&!u.colorValidator(t.fontColor)&&(this._logger.error("Unknown fontColor: "+t.fontColor+", setting to Color.Default."),t.fontColor=i.Color.Default),t.backgroundColor&&!u.colorValidator(t.backgroundColor)&&(this._logger.error("Unknown backgroundColor: "+t.backgroundColor+", setting to Color.Default."),t.backgroundColor=i.Color.Default),this._processCommand({type:i.PlayerCommandType.Captions_Update_Settings,source:e,settings:t})},e.prototype.enterFullscreen=function(){this._processCommand({type:i.PlayerCommandType.Enter_Fullscreen})},e.prototype.exitFullscreen=function(){this._processCommand({type:i.PlayerCommandType.Exit_Fullscreen})},e.prototype.stop=function(){this._processCommand({type:i.PlayerCommandType.Stop})},e.prototype.replay=function(){this._processCommand({type:i.PlayerCommandType.Replay})},e.prototype.setPlayerMode=function(e){this._processCommand({type:i.PlayerCommandType.Set_Player_Mode,event:e})},e.prototype.reportEvent=function(e){this._processCommand({type:i.PlayerCommandType.Report_Event,event:e})},e.prototype.reportError=function(e){this._processCommand({type:i.PlayerCommandType.Report_Error,event:e})},e.prototype.destroy=function(){var e=this;return this._destroyPromise?this._destroyPromise:(this._destroyPromise=this._controller.destroy(),this._destroyPromise.then((function(){e._bindings.forEach((function(e){return e.detach()})),e._bindings=[]})))},e}();t.Player=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpotlightImpl=void 0;var r=n(1),i=n(60),o=n(0),a=r.Log.getLogger("Spotlight").filter("spotlight"),s=function(e){if(e instanceof i.PlayerError){var t={error_code:e.code,error_message:e.message,error_severity:e.severity},n=e.toJSON().metadata;return r.ObjectUtils.isPlainObject(n)&&r.ObjectUtils.keyValues(n).forEach((function(e){var n=e.key,r=e.value;t["error_metadata_"+n.toLowerCase()]=function(e){try{return JSON.stringify(e)}catch(e){return""}}(r)})),t}return String(e)},u=function(){function e(){this._spotlightWrapper=new r.SpotlightWrapper("player")}return e.prototype.setup=function(e){try{this._spotlightWrapper.setup(e)}catch(e){a.warn("setup() failed: "+e)}},e.prototype.dispose=function(){try{this._spotlightWrapper.dispose()}catch(e){a.warn("dispose() failed: "+e)}},e.prototype.sendVersion=function(){try{this._spotlightWrapper.sendVersion(o.PlayerVersion.libVersion)}catch(e){a.warn("sendVersion() failed: "+e)}},e.prototype.sendPlayerError=function(e,t,n){void 0===t&&(t="error"),void 0===n&&(n=function(e){var t=e.severity;if(!t)return r.SpotlightEventLevel.ERROR;switch(t){case o.ErrorSeverity.Fatal:return r.SpotlightEventLevel.CRITICAL;case o.ErrorSeverity.Error:return r.SpotlightEventLevel.ERROR;case o.ErrorSeverity.Warn:return r.SpotlightEventLevel.WARN;default:return r.SpotlightEventLevel.INFO}}(e));try{var i=s(e);this._spotlightWrapper.sendError(i,t,n)}catch(e){a.warn("sendPlayerError() failed: "+e)}},e}();t.SpotlightImpl=u},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67),t),i(n(168),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(68),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(156),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVideoEngineEventCollection=void 0;var r=n(0),i=n(1);t.createVideoEngineEventCollection=function(){return i.createEventCollection({modelUpdateRequest:i.createEvent(r.VideoEngineEventType.Model_Update_Request),drmTokenRequest:i.createEvent(r.VideoEngineEventType.DRM_Token_Request),volumeChanged:i.createEvent(r.VideoEngineEventType.Volume_Changed),muteChanged:i.createEvent(r.VideoEngineEventType.Mute_Changed),mediaCommandReceived:i.createEvent(r.VideoEngineEventType.Media_Command_Received),mediaCommandRejected:i.createEvent(r.VideoEngineEventType.Media_Command_Rejected),mediaStateChanged:i.createEvent(r.VideoEngineEventType.Media_State_Changed),mediaReady:i.createEvent(r.VideoEngineEventType.Media_Ready),mediaStarting:i.createEvent(r.VideoEngineEventType.Media_Starting),mediaBlocked:i.createEvent(r.VideoEngineEventType.Media_Blocked),mediaLoaded:i.createEvent(r.VideoEngineEventType.Media_Loaded),mediaStarted:i.createEvent(r.VideoEngineEventType.Media_Started),mediaBufferingStarted:i.createEvent(r.VideoEngineEventType.Media_Buffering_Started),mediaBufferingFinished:i.createEvent(r.VideoEngineEventType.Media_Buffering_Finished),mediaSeekingStarted:i.createEvent(r.VideoEngineEventType.Media_Seeking_Started),mediaSeekingFinished:i.createEvent(r.VideoEngineEventType.Media_Seeking_Finished),mediaRequestProfileChanged:i.createEvent(r.VideoEngineEventType.Media_Request_Profile_Changed),mediaProfileChanged:i.createEvent(r.VideoEngineEventType.Media_Profile_Changed),mediaTimeChanged:i.createEvent(r.VideoEngineEventType.Media_Time_Changed),mediaPaused:i.createEvent(r.VideoEngineEventType.Media_Paused),mediaResumed:i.createEvent(r.VideoEngineEventType.Media_Resumed),mediaRecoveryStarted:i.createEvent(r.VideoEngineEventType.Media_Recovery_Started),mediaRecoveryFinished:i.createEvent(r.VideoEngineEventType.Media_Recovery_Finished),mediaResized:i.createEvent(r.VideoEngineEventType.Media_Resized),mediaStopped:i.createEvent(r.VideoEngineEventType.Media_Stopped),mediaTimedMetadataParsed:i.createEvent(r.VideoEngineEventType.Media_Timed_Metadata_Parsed),mediaTimedMetadataReceived:i.createEvent(r.VideoEngineEventType.Media_Timed_Metadata_Received),mediaFinished:i.createEvent(r.VideoEngineEventType.Media_Finished),mediaError:i.createEvent(r.VideoEngineEventType.Media_Error),mediaStalled:i.createEvent(r.VideoEngineEventType.Media_Stalled),mediaAudioTrackAvailabilityChanged:i.createEvent(r.VideoEngineEventType.Media_Audio_Track_Availability_Changed),mediaAudioTrackSelected:i.createEvent(r.VideoEngineEventType.Media_Audio_Track_Selected),adStateChanged:i.createEvent(r.VideoEngineEventType.Ad_State_Changed),adStarting:i.createEvent(r.VideoEngineEventType.Ad_Starting),adStarted:i.createEvent(r.VideoEngineEventType.Ad_Started),adBufferingStarted:i.createEvent(r.VideoEngineEventType.Ad_Buffering_Started),adBufferingFinished:i.createEvent(r.VideoEngineEventType.Ad_Buffering_Finished),adBlocked:i.createEvent(r.VideoEngineEventType.Ad_Blocked),adLoaded:i.createEvent(r.VideoEngineEventType.Ad_Loaded),adCreativeStarted:i.createEvent(r.VideoEngineEventType.Ad_Creative_Started),adTimeChanged:i.createEvent(r.VideoEngineEventType.Ad_Time_Changed),adPaused:i.createEvent(r.VideoEngineEventType.Ad_Paused),adResumed:i.createEvent(r.VideoEngineEventType.Ad_Resumed),adStopped:i.createEvent(r.VideoEngineEventType.Ad_Stopped),adCreativeEnded:i.createEvent(r.VideoEngineEventType.Ad_Creative_Ended),adFinished:i.createEvent(r.VideoEngineEventType.Ad_Finished),adError:i.createEvent(r.VideoEngineEventType.Ad_Error),captionTrackAdded:i.createEvent(r.VideoEngineEventType.Caption_Track_Added),captionTrackRemoved:i.createEvent(r.VideoEngineEventType.Caption_Track_Removed),captionTrackSelected:i.createEvent(r.VideoEngineEventType.Caption_Track_Selected),captionTrackDeselected:i.createEvent(r.VideoEngineEventType.Caption_Track_Deselected),captionCueParsed:i.createEvent(r.VideoEngineEventType.Caption_Cue_Parsed),captionCueEntered:i.createEvent(r.VideoEngineEventType.Caption_Cue_Entered),captionCueExited:i.createEvent(r.VideoEngineEventType.Caption_Cue_Exited),captionCueUpdated:i.createEvent(r.VideoEngineEventType.Caption_Cue_Updated),remotePlaybackSelected:i.createEvent(r.VideoEngineEventType.Remote_Playback_Selected),remotePlaybackDeselected:i.createEvent(r.VideoEngineEventType.Remote_Playback_Deselected)})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(158),t),i(n(159),t),i(n(71),t),i(n(166),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoEngineStateChangeHandler=void 0;var r=n(69),i=n(70),o=n(1),a=n(71),s=n(73),u=n(7),c=n(165),l=n(11),d=n(5),f=n(0),p=n(0),h=o.Log.getLogger("VideoEngineStateChangeHandler").filter("playback"),g=o.Log.getLogger("VideoEngineStateChangeHandler"),y=function(){function e(){var e=this;if(this._waitForAdId3=!0,this._foundAdId3=!1,this._mediaTimeBreaker=new c.LimitBreaker(0),this._waitingForAdStateToChange=null,this._onMediaFsmEvent=function(t,n){var r=n.to,i=n.from,a=n.args;switch(t){case o.FsmEventType.State_Changed:switch(e._requestModelUpdates([{property:f.ModelKeys.Media_State,value:r}]),e._events.mediaStateChanged.dispatch({previousState:i,currentState:r}),r){case f.MediaState.Starting:var s=a[0],u=s.url,c=s.config;e._events.mediaStarting.dispatch({url:u,config:c});break;case f.MediaState.Loaded:var l=a[0],d=l.isLive,p=l.initialTimedMetadata,h=l.duration,g=l.seekableRange,y=g.start,v=g.end;e._mediaIsLive=d,e._mediaDuration=e._normalizeMediaDuration(h),e._requestModelUpdates([{property:f.ModelKeys.Content_Is_Live,value:d},{property:f.ModelKeys.Media_Duration,value:e._mediaDuration},{property:f.ModelKeys.Content_Seekable_Range,value:o.TimeRange.createWithEnd(y,v)}]),e._events.mediaLoaded.dispatch({initialTimedMetadata:p});break;case f.MediaState.Buffering:e._events.mediaBufferingStarted.dispatch({});break;case f.MediaState.Seeking:var _=a[0],m=_.requestedTime,b=_.time;e._events.mediaSeekingStarted.dispatch({requestedTime:m,time:b});break;case f.MediaState.Playing:switch(i){case f.MediaState.Loaded:e._events.mediaStarted.dispatch();break;case f.MediaState.Paused:e._events.mediaResumed.dispatch();break;case f.MediaState.Buffering:e._events.mediaBufferingFinished.dispatch();break;case f.MediaState.Seeking:var C=a[0],E=C.requestedTime,T=C.time;e.notifyMediaSeekingFinished(E,T)}break;case f.MediaState.Paused:switch(i){case f.MediaState.Seeking:var S=a[0],P=S.requestedTime,M=S.time;e.notifyMediaSeekingFinished(P,M)}e._events.mediaPaused.dispatch();break;case f.MediaState.Stopped:e._events.mediaStopped.dispatch();break;case f.MediaState.Finished:e._events.mediaFinished.dispatch();break;case f.MediaState.Error:var O=a[0];e._events.mediaError.dispatch(O)}}},this._onAdFsmEvent=function(t,n){var a=n.from,u=n.to,c=n.args;switch(t){case o.FsmEventType.State_Changed:switch(e._currentAdBreak&&(e._currentAdBreak.state=u,e._requestModelUpdates([{property:f.ModelKeys.Current_Ad_Break,value:{state:u},mode:f.ModelUpdateMode.Extend}])),e._events.adStateChanged.dispatch({previousState:a,currentState:u}),u){case p.AdState.Starting:var l=c[0],d=s.AdsConverter.toAdBreak(l,e._mediaDuration,e._mediaIsLive),h=e._getAdBreakById(d.id);h&&(d=h),d.state=u,e._currentAdBreak=d,e._waitForAdId3=!1,e._requestModelUpdates([{property:f.ModelKeys.Current_Ad_Break,value:o.ObjectUtils.extendDeep({},d)}]),e._events.adStarting.dispatch({adBreakId:d.id});break;case p.AdState.Loaded:var g=c[0].duration;e._requestModelUpdates([{property:f.ModelKeys.Current_Ad_Break,value:{duration:g},mode:f.ModelUpdateMode.Extend}]),e._events.adLoaded.dispatch({adBreakId:e._getCurrentAdBreakId()}),e._attemptFsmTransition(e._mediaFsm,i.MediaStateTriggers.Idle);break;case p.AdState.Buffering:e._events.adBufferingStarted.dispatch({adBreakId:e._getCurrentAdBreakId()});break;case p.AdState.Playing:switch(a){case p.AdState.Buffering:e._events.adBufferingFinished.dispatch({adBreakId:e._getCurrentAdBreakId()});break;case p.AdState.Paused:e._events.adResumed.dispatch({adBreakId:e._getCurrentAdBreakId()});break;default:e._events.adStarted.dispatch({adBreakId:e._getCurrentAdBreakId()})}break;case p.AdState.Paused:e._events.adPaused.dispatch({adBreakId:e._getCurrentAdBreakId()});break;case p.AdState.Stopped:e._requestModelUpdates([{property:f.ModelKeys.Current_Ad_Break,value:null},{property:f.ModelKeys.Current_Ad_Creative,value:null}]),e._events.adStopped.dispatch({adBreakId:e._getCurrentAdBreakId()}),e._foundAdId3=!1,e._currentAdBreak=null,e._currentAdCreative=null;break;case p.AdState.Finished:e._requestModelUpdates([{property:f.ModelKeys.Current_Ad_Break,value:null},{property:f.ModelKeys.Current_Ad_Creative,value:null}]),e._events.adFinished.dispatch({adBreakId:e._getCurrentAdBreakId()}),e._foundAdId3=!1,e._currentAdBreak=null,e._currentAdCreative=null,e._adsFsm.fireTransition(r.AdStateTriggers.Idle);break;case p.AdState.Pending:switch(a){case p.AdState.Finished:e._attemptFsmTransition(e._mediaFsm,i.MediaStateTriggers.Play)}}}},this._mediaIsLive=!1,this._mediaDuration=-1,this._adBreaks=[],this._currentAdBreak=null,this._currentAdCreative=null,l.PlatformInfo.application.userAgent){var t=l.PlatformInfo.application.userAgent,n=/edge/i.test(t),a=!n&&/edg\//i.test(t);(!(!n&&!a&&/chrome|crios/i.test(t))&&!n&&!a&&/safari/i.test(t)||l.PlatformInfo.nexus.nexusTarget===d.NexusPlatform.iOS)&&(this._mediaTimeBreaker=new c.LimitBreaker(2))}this._mediaFsm=new o.Fsm,this._adsFsm=new o.Fsm}return e.prototype._enteringAdBreak=function(){return!(!this._currentAdBreak||null!==this._currentAdCreative)||!!this._waitForAdId3},e.prototype._playingAd=function(){return!!this._currentAdCreative||!!this._foundAdId3},e.prototype._normalizeMediaDuration=function(e){return this._mediaIsLive&&-1!==e&&(e=-1),e},e.prototype._requestModelUpdates=function(e){this._events.modelUpdateRequest.dispatch({changes:e})},e.prototype._getCurrentAdBreakId=function(){return this._currentAdBreak?this._currentAdBreak.id:(h.warn("[_getCurrentAdBreakId] No current ad break"),"unknown-ad-break-id")},e.prototype._getCurrentAdCreativeId=function(){return this._currentAdCreative?this._currentAdCreative.id:(h.warn("[_getCurrentAdBreakId] No current ad creative"),"unknown-ad-creative-id")},e.prototype._getCurrentAdCreativeSequence=function(){return this._currentAdCreative?this._currentAdCreative.sequence:(h.warn("[_getCurrentAdCreativeSequence] No current ad creative"),0)},e.prototype._getAdBreakById=function(e){return this._adBreaks.find((function(t){return t.id===e}))},e.prototype._attemptFsmTransition=function(e,t,n){e.attemptTransition(t,n)},e.prototype.init=function(e,t,n){this._events=e,this._config=t,this._adStartDetection=n,this._mediaFsm.init(a.StateChangeHandlerMediaFsmConfig),this._mediaFsm.events.listen(this._onMediaFsmEvent),this._adsFsm.init(a.StateChangeHandlerAdFsmConfig),this._adsFsm.events.listen(this._onAdFsmEvent)},e.prototype.handleTimeChanged=function(e){if(this._enteringAdBreak())this._mediaTimeBreaker.count()&&(this._waitForAdId3=!1);else{var t=this._playingAd(),n=this._adsFsm.currentState();if(this._adStartDetection.enabled&&t&&n===p.AdState.Pending){null==this._waitingForAdStateToChange&&(this._waitingForAdStateToChange=Date.now());var r=1e3*this._adStartDetection.timeout;Date.now()-this._waitingForAdStateToChange>r&&(g.warn("[handleTimeChanged] Stop waiting, past threshold; forcing media time changed"),this._waitForAdId3=!1,this._foundAdId3=!1,t=!1,this._waitingForAdStateToChange=null)}t?this.handleAdTimeChanged(e.time,e.duration):this.handleMediaTimeChanged(e)}},e.prototype.handleVolumeChanged=function(e){this._requestModelUpdates([{property:f.ModelKeys.Volume,value:e}]),this._events.volumeChanged.dispatch({volume:e})},e.prototype.handleMuteChanged=function(e){this._requestModelUpdates([{property:f.ModelKeys.Muted,value:e}]),this._events.muteChanged.dispatch({muted:e})},e.prototype.handleResumed=function(){this._playingAd()?this.handleAdResumed():this.handleMediaResumed()},e.prototype.handleBufferingStarted=function(){this._playingAd()?this.handleAdBufferingStarted():this.handleMediaBufferingStarted()},e.prototype.handleBufferingFinished=function(){this._playingAd()?this.handleAdBufferingFinished():this.handleMediaBufferingFinished()},e.prototype.handlePaused=function(){this._playingAd()?this.handleAdPaused():this.handleMediaPaused()},e.prototype.handleStopped=function(){this._playingAd()&&this.handleAdStopped(),this.handleMediaStopped()},e.prototype.handleDRMTokenRequest=function(e){var t=e.requestId,n=e.keyData;this._events.drmTokenRequest.dispatch({requestId:t,keyData:n})},e.prototype.handleMediaCommandReceived=function(e,t){this._events.mediaCommandReceived.dispatch({command:e,args:t})},e.prototype.handleMediaCommandRejected=function(e,t){this._events.mediaCommandRejected.dispatch({command:e,args:t})},e.prototype.handleMediaReady=function(){this._events.mediaReady.dispatch({})},e.prototype.handleMediaStarting=function(e,t){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Load,[{url:e,config:t}])},e.prototype.handleMediaBlocked=function(e){this._events.mediaBlocked.dispatch({reason:e})},e.prototype.handleMediaLoaded=function(e){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Loaded,[e])},e.prototype.handleMediaRequestProfileChanged=function(e){var t=e.profile,n=e.mediaHeight,r=e.mediaWidth;this._events.mediaRequestProfileChanged.dispatch({profile:t,mediaWidth:r,mediaHeight:n})},e.prototype.handleMediaProfileChanged=function(e){var t=e.profile,n=e.mediaHeight,r=e.mediaWidth;this._events.mediaProfileChanged.dispatch({profile:t,mediaWidth:r,mediaHeight:n})},e.prototype.handleMediaBufferingStarted=function(){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Buffer_Stall_Started)},e.prototype.handleMediaBufferingFinished=function(){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Buffer_Stall_Finished)},e.prototype.handleMediaStarted=function(){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Play)},e.prototype.handleMediaPaused=function(){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Pause)},e.prototype.handleMediaResumed=function(){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Play)},e.prototype.handleMediaRecoveryStarted=function(e){this._events.mediaRecoveryStarted.dispatch({reason:e})},e.prototype.handleMediaRecoveryFinished=function(e){this._events.mediaRecoveryFinished.dispatch({reason:e})},e.prototype.handleMediaTimeChanged=function(e){var t=e.time,n=e.duration,r=e.seekableRange,i=e.bufferedRange;this._requestModelUpdates([{property:f.ModelKeys.Media_Time,value:t},{property:f.ModelKeys.Media_Duration,value:this._normalizeMediaDuration(n)},{property:f.ModelKeys.Content_Seekable_Range,value:r},{property:f.ModelKeys.Content_Buffered_Range,value:i}]),this._events.mediaTimeChanged.dispatch({time:t})},e.prototype.handleMediaSeekingStarted=function(e){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Seek,[e])},e.prototype.handleMediaSeekingFinished=function(e){if(this._mediaFsm.currentState()!==f.MediaState.Pending)switch(this._mediaFsm.previousState()){case f.MediaState.Paused:this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Pause,[e]);break;default:this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Play,[e])}else h.warn("Invalid state transition, `mediaSeekingFinished` handled when `mediaState` is `Pending` - ignoring.")},e.prototype.notifyMediaSeekingFinished=function(e,t){this._events.mediaSeekingFinished.dispatch({requestedTime:e,time:t}),this._requestModelUpdates([{property:f.ModelKeys.Media_Time,value:t}]),this._events.mediaTimeChanged.dispatch({time:t})},e.prototype.handleMediaResized=function(e){var t=e.viewHeight,n=e.viewWidth,r=e.mediaHeight,i=e.mediaWidth;this._events.mediaResized.dispatch({viewHeight:t,viewWidth:n,mediaHeight:r,mediaWidth:i})},e.prototype.handleMediaStopped=function(){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Stop)},e.prototype.handleMediaFinished=function(){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Finish)},e.prototype.handleMediaTimedMetadataParsed=function(e){this._waitForAdId3&&e.metadata.subType===f.VideoEngineMetadataType.ID3&&(this._foundAdId3=!0,this._waitForAdId3=!1),this._events.mediaTimedMetadataParsed.dispatch(e)},e.prototype.handleMediaTimedMetadataReceived=function(e){this._events.mediaTimedMetadataReceived.dispatch(e)},e.prototype.handleMediaAudioTrackAvailabilityChanged=function(e,t){this._events.mediaAudioTrackAvailabilityChanged.dispatch({track:e,added:t})},e.prototype.handleMediaAudioTrackSelected=function(e){this._events.mediaAudioTrackSelected.dispatch({track:e})},e.prototype.handleMediaStalled=function(e){this._events.mediaStalled.dispatch({description:e})},e.prototype.handleMediaError=function(e){this._attemptFsmTransition(this._mediaFsm,i.MediaStateTriggers.Error,[e])},e.prototype.handleAdBreakListChange=function(e){var t=this;this._adBreaks=e.map((function(e){return s.AdsConverter.toAdBreak(e,t._mediaDuration,t._mediaIsLive)})).filter((function(e){return 0!=e.ads.length||(g.warn("[handleAdBreakListChange] Ignoring ad break "+e.id+" with empty ad creative list"),!1)})),this._requestModelUpdates([{property:f.ModelKeys.Ad_Breaks,value:this._adBreaks.map(s.AdsConverter.toAdBreakMetadata)}])},e.prototype.handleAdCreativeListChange=function(e){if(this._currentAdBreak){var t=this._currentAdBreak.ads.length,n=e.length;this._currentAdBreak.ads=o.ArrayUtils.deepCopy(e),this._requestModelUpdates([{property:f.ModelKeys.Current_Ad_Break,value:o.ObjectUtils.extendDeep({},this._currentAdBreak)}]),h.warn('[handleAdCreativeListChange] Updated current ad break "ads" value - previous: '+t+", now: "+n)}},e.prototype.handleAdStarting=function(e){this._attemptFsmTransition(this._adsFsm,r.AdStateTriggers.Load,[e])},e.prototype.handleAdStarted=function(){this._attemptFsmTransition(this._adsFsm,r.AdStateTriggers.Play)},e.prototype.handleAdBufferingStarted=function(){this._attemptFsmTransition(this._adsFsm,r.AdStateTriggers.Buffer_Stall_Started)},e.prototype.handleAdBufferingFinished=function(){this._attemptFsmTransition(this._adsFsm,r.AdStateTriggers.Buffer_Stall_Finished)},e.prototype.handleAdBlocked=function(e){this._events.adBlocked.dispatch({adBreakId:this._getCurrentAdBreakId(),reason:e})},e.prototype.handleAdLoaded=function(e){this._attemptFsmTransition(this._adsFsm,r.AdStateTriggers.Loaded,[{duration:e}])},e.prototype.handleAdCreativeStarted=function(e){this._attemptFsmTransition(this._adsFsm,r.AdStateTriggers.Play),this._currentAdCreative=e,this._requestModelUpdates([{property:f.ModelKeys.Current_Ad_Creative,value:o.ObjectUtils.extendDeep({},e)}]),this._events.adCreativeStarted.dispatch({adBreakId:this._getCurrentAdBreakId(),adCreativeId:e.id})},e.prototype.handleAdTimeChanged=function(e,t){if(this._currentAdCreative)if(this._currentAdBreak){e>t&&h.debug("[handleAdTimeChanged] time should never be greater than duration here because we are dealing with a single ad creatives events"),t!==this._currentAdCreative.duration&&h.debug("[handleAdTimeChanged] duration coming from target level should be equal to current ad creative duration");var n=this._getCurrentAdCreativeId(),r=this._getCurrentAdCreativeSequence(),i=0;this._currentAdBreak.ads.some((function(e){return e.id===n&&e.sequence===r||(i+=e.duration,!1)}))||(h.debug("[handleAdTimeChanged] could not find creative by ID in ad break"),i=0),i+=e,this._requestModelUpdates([{property:f.ModelKeys.Current_Ad_Creative,value:{currentTime:e,duration:t},mode:f.ModelUpdateMode.Extend}]),this._events.adTimeChanged.dispatch({adBreakId:this._getCurrentAdBreakId(),adCreativeId:n,time:i,duration:this._currentAdBreak.duration})}else h.debug("[handleAdTimeChanged] we should not receive a time changed for ads without having an ad break");else h.debug("[handleAdTimeChanged] we should not receive a time changed for ads without having an ad creative")},e.prototype.handleAdPaused=function(){this._attemptFsmTransition(this._adsFsm,r.AdStateTriggers.Pause)},e.prototype.handleAdResumed=function(){this._attemptFsmTransition(this._adsFsm,r.AdStateTriggers.Play)},e.prototype.handleAdStopped=function(){this._attemptFsmTransition(this._adsFsm,r.AdStateTriggers.Stop)},e.prototype.handleAdCreativeEnded=function(){this._requestModelUpdates([{property:f.ModelKeys.Current_Ad_Creative,value:null}]),this._events.adCreativeEnded.dispatch({adBreakId:this._getCurrentAdBreakId(),adCreativeId:this._getCurrentAdCreativeId()}),this._currentAdCreative=null},e.prototype.handleAdFinished=function(){this._attemptFsmTransition(this._adsFsm,r.AdStateTriggers.Finish)},e.prototype.handleAdError=function(e){this._events.adError.dispatch({adBreakId:this._getCurrentAdBreakId(),message:e.message,severity:e.severity,adErrorType:e.type,code:e.code,name:e.name})},e.prototype.handleCaptionTrack=function(e,t){switch(e){case u.CaptionTrackAction.Added:this._events.captionTrackAdded.dispatch({track:t});break;case u.CaptionTrackAction.Selected:this._events.captionTrackSelected.dispatch({track:t});break;case u.CaptionTrackAction.Deselected:this._events.captionTrackDeselected.dispatch({track:t});break;case u.CaptionTrackAction.Removed:this._events.captionTrackRemoved.dispatch({track:t});break;default:h.warn("[handleCaptionTrack] unknown action: "+e)}},e.prototype.handleCaptionCue=function(e,t){switch(e){case u.CaptionCueAction.Parsed:this._events.captionCueParsed.dispatch({cue:t});break;case u.CaptionCueAction.Updated:this._events.captionCueUpdated.dispatch({cue:t});break;case u.CaptionCueAction.Entered:this._events.captionCueEntered.dispatch({cue:t});break;case u.CaptionCueAction.Exited:this._events.captionCueExited.dispatch({cue:t});break;default:h.warn("[handleCaptionCue] unknown action: "+e)}},e.prototype.handleRemotePlayback=function(e){e?this._events.remotePlaybackSelected.dispatch():this._events.remotePlaybackDeselected.dispatch()},e}();t.VideoEngineStateChangeHandler=y},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(161);t.fold=function(e){return o.fold(e)(e.empty)},t.getTupleMonoid=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r({},o.getTupleSemigroup.apply(void 0,e),{empty:e.map((function(e){return e.empty}))})},t.getProductMonoid=function(e,n){return t.getTupleMonoid(e,n)},t.getDualMonoid=function(e){return r({},o.getDualSemigroup(e),{empty:e.empty})},t.monoidAll=r({},o.semigroupAll,{empty:!0}),t.monoidAny=r({},o.semigroupAny,{empty:!1});t.unsafeMonoidArray={concat:i.concat,empty:[]},t.getArrayMonoid=function(){return t.unsafeMonoidArray};var a={};t.getDictionaryMonoid=function(e){return r({},o.getDictionarySemigroup(e),{empty:a})},t.monoidSum=r({},o.semigroupSum,{empty:0}),t.monoidProduct=r({},o.semigroupProduct,{empty:1}),t.monoidString=r({},o.semigroupString,{empty:""}),t.monoidVoid=r({},o.semigroupVoid,{empty:void 0}),t.getFunctionMonoid=function(e){return function(){return r({},o.getFunctionSemigroup(e)(),{empty:function(){return e.empty}})}},t.getEndomorphismMonoid=function(){return{concat:function(e,t){return function(n){return e(t(n))}},empty:i.identity}},t.getStructMonoid=function(e){for(var t={},n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];t[a]=e[a].empty}return r({},o.getStructSemigroup(e),{empty:t})},t.getRecordMonoid=function(e){return t.getStructMonoid(e)},t.getMeetMonoid=function(e){return r({},o.getMeetSemigroup(e),{empty:e.top})},t.getJoinMonoid=function(e){return r({},o.getJoinSemigroup(e),{empty:e.bottom})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(76),o=n(6);function a(e){return{concat:function(t,n){for(var i=r({},t),o=Object.keys(n),a=o.length,s=0;s<a;s++){var u=o[s];i[u]=t.hasOwnProperty(u)?e.concat(t[u],n[u]):n[u]}return i}}}t.fold=function(e){return function(t){return function(n){return n.reduce(e.concat,t)}}},t.getFirstSemigroup=function(){return{concat:o.identity}},t.getLastSemigroup=function(){return{concat:function(e,t){return t}}},t.getTupleSemigroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{concat:function(t,n){return e.map((function(e,r){return e.concat(t[r],n[r])}))}}},t.getProductSemigroup=function(e,n){return t.getTupleSemigroup(e,n)},t.getDualSemigroup=function(e){return{concat:function(t,n){return e.concat(n,t)}}},t.getFunctionSemigroup=function(e){return function(){return{concat:function(t,n){return function(r){return e.concat(t(r),n(r))}}}}},t.getStructSemigroup=function(e){return{concat:function(t,n){for(var r={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];r[a]=e[a].concat(t[a],n[a])}return r}}},t.getRecordSemigroup=function(e){return t.getStructSemigroup(e)},t.getMeetSemigroup=function(e){return{concat:i.min(e)}},t.getJoinSemigroup=function(e){return{concat:i.max(e)}},t.semigroupAll={concat:function(e,t){return e&&t}},t.semigroupAny={concat:function(e,t){return e||t}},t.getArraySemigroup=function(){return{concat:o.concat}},t.getDictionarySemigroup=a;var s=a(t.getLastSemigroup());t.getObjectSemigroup=function(){return s},t.semigroupSum={concat:function(e,t){return e+t}},t.semigroupProduct={concat:function(e,t){return e*t}},t.semigroupString={concat:function(e,t){return e+t}},t.semigroupVoid={concat:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sign=function(e){return e<=-1?-1:e>=1?1:0},t.eqOrdering={equals:function(e,t){return e===t}},t.setoidOrdering=t.eqOrdering,t.semigroupOrdering={concat:function(e,t){return 0!==e?e:t}},t.invert=function(e){switch(e){case-1:return 1;case 1:return-1;default:return 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPlatformEventCollection=t.PlatformEventType=void 0;var r,i=n(1);!function(e){e.Fullscreen_Entered="fullscreenEntered",e.Fullscreen_Exited="fullscreenExited"}(r=t.PlatformEventType||(t.PlatformEventType={})),t.createPlatformEventCollection=function(){return i.createEventCollection({fullscreenEntered:i.createEvent(r.Fullscreen_Entered),fullscreenExited:i.createEvent(r.Fullscreen_Exited)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LimitBreaker=void 0;var r=function(){function e(e){void 0===e&&(e=10),this._count=0,this._broke=!1,this._limit=e}return e.prototype.count=function(){return this._broke||(this._count+=1,this._count>this._limit&&(this._broke=!0)),this._broke},e.prototype.reset=function(){this._count=0},e}();t.LimitBreaker=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveCCSettings=t.getSavedCCSettings=t.saveCCEnabled=t.getSavedCCEnabled=t.saveCCLang=t.getSavedCCLang=t.CCStorageKeys=void 0;var r,i=n(12);!function(e){e.Language="cc-lang",e.Enablement="cc-enabled",e.Settings="cc-settings"}(r||(r={})),t.CCStorageKeys=r;t.getSavedCCLang=function(){return i.Storage.get(r.Language).then((function(e){return e||null}))};t.saveCCLang=function(e){var t=null!==e?e:null;return i.Storage.set(r.Language,t)};t.getSavedCCEnabled=function(){return i.Storage.get(r.Enablement).then((function(e){return e?JSON.parse(e):null}))};t.saveCCEnabled=function(e){return i.Storage.set(r.Enablement,JSON.stringify(e))};t.getSavedCCSettings=function(){return i.Storage.get(r.Settings).then((function(e){return e?JSON.parse(e):null}))};t.saveCCSettings=function(e){return i.Storage.set(r.Settings,JSON.stringify(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CCManager=void 0;var r=n(1),i=n(7),o=n(18),a=n(27),s=n(0),u=r.Log.getLogger("CCManager").filter("captions"),c=function(){function e(e){var t=this;this._onProviderEvent=function(e,n){switch(e){case a.CCProviderEventType.Track_Changed:t._handleTrackAction(n.action,n.track);break;case a.CCProviderEventType.Cue_Changed:t._handleCueAction(n.action,n.cue);break;default:throw new r.UnreachableCaseError(e)}},this.events=o.createCCEventCollection(),this._provider=e,this._bindings=[this._provider.events.listen(this._onProviderEvent)],this._tracks=[],this._cues=[],this._lastUserSelectedTrack=null,this._activeTrack=null,this._expectedSelectedTrack=null,this._enabled=!1,this._state=s.CCState.Pending}return e.prototype._requestModelUpdates=function(e){this.events.modelUpdateRequest.dispatch({changes:e})},e.prototype._updateState=function(e){var t=this._state;e!==t&&(this._state=e,this._requestModelUpdates([{property:s.ModelKeys.Caption_State,value:e}]),this.events.stateChanged.dispatch({currentState:e,previousState:t}))},e.prototype._syncCaptionTracksModel=function(){this._requestModelUpdates([{property:s.ModelKeys.Caption_Tracks,value:r.ArrayUtils.deepCopy(this._tracks)}])},e.prototype._syncCaptionCuesModel=function(){this._requestModelUpdates([{property:s.ModelKeys.Caption_Cues,value:r.ArrayUtils.deepCopy(this._cues)}])},e.prototype._requestCueRemovalFromModel=function(e){this._requestModelUpdates([{property:s.ModelKeys.Caption_Cues,value:e,mode:s.ModelUpdateMode.Array_Remove_By_Position}])},e.prototype._requestCueAdditionToModel=function(e){this._requestModelUpdates([{property:s.ModelKeys.Caption_Cues,value:e,mode:s.ModelUpdateMode.Array_Append}])},e.prototype._requestTrackRemovalFromModel=function(e){this._requestModelUpdates([{property:s.ModelKeys.Caption_Tracks,value:e,mode:s.ModelUpdateMode.Array_Remove_By_Position}])},e.prototype._requestTrackAdditionToModel=function(e){this._requestModelUpdates([{property:s.ModelKeys.Caption_Tracks,value:r.ObjectUtils.extendDeep({},e),mode:s.ModelUpdateMode.Array_Append}])},e.prototype._getCaptionTrackById=function(e){var t=this._tracks.find((function(t){return t.id===e}));return t||null},e.prototype._getCaptionCueById=function(e){var t=this._cues.find((function(t){return t.id===e}));return t||null},e.prototype._handleTrackAction=function(e,t){var n=this;switch(e){case i.CaptionTrackAction.Added:this._tracks.push(t),this._requestTrackAdditionToModel(t),this.events.trackAdded.dispatch({id:t.id});break;case i.CaptionTrackAction.Selected:if(null!==this._expectedSelectedTrack&&this._expectedSelectedTrack!==t.id){u.warn("[_handleTrackAction] Selected, ignoring. Expected track: "+this._expectedSelectedTrack+", received: "+t.id);break}!this._activeTrack&&this._enabled||this._updateState(s.CCState.Changing_Track),this._activeTrack=function(){var e=n._getCaptionTrackById(t.id);return e?(e.active=!0,e):(u.warn("Cannot select track, no matching track found with ID: "+t.id),null)}(),this._enabled||(this._enabled=!0),null!==this._activeTrack&&(this._syncCaptionCuesModel(),this._syncCaptionTracksModel(),this._updateState(s.CCState.Showing_Track),this.events.trackSelected.dispatch({id:this._activeTrack.id}));break;case i.CaptionTrackAction.Deselected:if(!this._activeTrack){u.warn("[_handleTrackAction] Deselected, ignoring. No active track found");break}if(this._activeTrack.id!==t.id){u.warn("[_handleTrackAction] Deselected, ignoring. Expected active track ("+this._activeTrack.id+"), received: "+t.id);break}this._enabled&&this._updateState(s.CCState.Changing_Track);var o=this._activeTrack.id;this._activeTrack.active=!1,this._activeTrack=null,this._cues.length=0,this._syncCaptionCuesModel(),this._syncCaptionTracksModel(),this._enabled?this._updateState(s.CCState.Ready):this._updateState(s.CCState.Disabled),this.events.trackDeselected.dispatch({id:o});break;case i.CaptionTrackAction.Removed:var a=this._getCaptionTrackById(t.id);if(a){var c=this._tracks.indexOf(a);this._tracks.splice(c,1),this._requestTrackRemovalFromModel(c),this.events.trackRemoved.dispatch({id:a.id})}else u.warn("Could not match track by ID: "+t.id);break;default:throw new r.UnreachableCaseError(e)}},e.prototype._handleCueAction=function(e,t){switch(e){case i.CaptionCueAction.Parsed:this._cues.push(t);var n=-1;this._model.config.captions.maxCues>0&&this._cues.length>this._model.config.captions.maxCues&&(n=0),this._enabled&&this._activeTrack&&(this._requestCueAdditionToModel(t),this.events.cueParsed.dispatch({id:t.id,trackId:this._activeTrack.id}),n>-1&&this._provider.removeCue(this._cues[n]));break;case i.CaptionCueAction.Updated:var o=this._getCaptionCueById(t.id);if(o){if(r.ObjectUtils.extendDeep(o,t),this._enabled&&this._activeTrack)(a=this._cues.findIndex((function(e){return t.id===e.id})))>-1&&this._requestCueRemovalFromModel(a),this._requestCueAdditionToModel(t),this.events.cueUpdated.dispatch({id:t.id,trackId:this._activeTrack.id})}else u.warn("Could not update cue, not found by ID: "+t.id);break;case i.CaptionCueAction.Entered:this._enabled&&this._activeTrack&&this.events.cueEntered.dispatch({id:t.id,trackId:this._activeTrack.id});break;case i.CaptionCueAction.Exited:this._enabled&&this._activeTrack&&this.events.cueExited.dispatch({id:t.id,trackId:this._activeTrack.id});break;case i.CaptionCueAction.Removed:var a;(a=this._cues.findIndex((function(e){return t.id===e.id})))>-1&&(this._cues.splice(a,1),this._enabled&&this._activeTrack&&(this._requestCueRemovalFromModel(a),this.events.cueRemoved.dispatch({id:t.id,trackId:this._activeTrack.id})));break;default:throw new r.UnreachableCaseError(e)}},Object.defineProperty(e.prototype,"tracks",{get:function(){return this._tracks},enumerable:!1,configurable:!0}),e.prototype.init=function(e){var t=e.model;this._model=t,this._updateState(s.CCState.Ready)},e.prototype.setEnabled=function(e){var t=!this._enabled&&e,n=this._enabled&&!e;t&&this._lastUserSelectedTrack&&(this._expectedSelectedTrack=this._lastUserSelectedTrack,this._provider.selectTrack(this._lastUserSelectedTrack)),n&&this._activeTrack&&this._provider.deselectTrack(this._activeTrack.id),this._enabled=e},e.prototype.selectTrack=function(e){return this._activeTrack&&this._activeTrack.id===e||this._expectedSelectedTrack===e?(u.warn('[selectTrack] ignoring selectTrack request - track "'+e+'" already selected'),!1):(this._lastUserSelectedTrack=e,this._expectedSelectedTrack=this._lastUserSelectedTrack,this._provider.selectTrack(this._expectedSelectedTrack),!0)},e.prototype.selectTrackByLang=function(e){var t=this._tracks.find((function(t){return t.lang===e}));return t?(this.selectTrack(t.id),!0):(u.warn("[selectTrackByLang] could not find matching track with lang: "+e),!1)},e.prototype.updateSettings=function(e){var t=this._model.captionSettings;this._requestModelUpdates([{property:s.ModelKeys.Caption_Settings,value:e,mode:s.ModelUpdateMode.Extend}]);var n=r.ObjectUtils.extendDeep({},t,e);this._provider.updateSettings(n),this.events.settingsUpdated.dispatch({settings:n})},e.prototype.prune=function(e){this._provider.prune(e)},e.prototype.destroy=function(){this._bindings.forEach((function(e){return e.detach()})),this._bindings.length=0,this._provider.destroy(),this._lastUserSelectedTrack=null,this._activeTrack=null,this._expectedSelectedTrack=null,this._enabled=!1,this._state=s.CCState.Pending,this._cues.length=0,this._tracks.length=0},e}();t.CCManager=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CaptionsComponentURI=void 0,function(e){e.Default="com.turner.top.captions.default"}(r||(r={})),t.CaptionsComponentURI=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizePlayerSetupConfigData=t.normalizeContentEntryOptionalData=t.normalizeContentPlayData=t.normalizeMediaJSONPlayData=t.normalizePlayConfig=t.normalizeConfig=void 0;var o=n(0),a=n(1),s=a.Log.getLogger("ConfigNormalization"),u=function(e){return a.ObjectUtils.isPlainObject(e)},c={playback:{autoPlay:0,autoPlayOptions:{preloadBehavior:0,preCheckAutoPlay:0},playMode:0},metadata:{companyId:0},auth:{cdn:{services:[{serviceUrl:0,appId:0}]},drm:{serviceUrl:0,appId:0}},cms:{preferDRM:0,providers:(r={},r[o.CmsProviderKey.MediaJSON]={versionId:0,appId:0,serviceUrl:0},r)},analytics:{bitmovin:{videoId:0,userId:0},conviva:{viewerId:0,touchstoneUrl:0},comscore:{publisherId:0,isOTT:0,uniqueContentId:0,programId:0,episodeId:0,digitalAirdate:0,tvAirdate:0,childDirectedAppMode:0}},drm:{fairplay:{certificateURL:0}},features:{gdpr:{consentDataOverride:{consentFrameworkVersion:0,subjectToGDPR:0,vendorIds:0}},tve:{enableTrueX:0}},lifecycle:0,ui:{autoAttachToDom:0,style:{paddingBottom:0}}},l={mediaId:0,versionId:0,appId:0,serviceUrl:0,kvps:0},d=i(i(i({},l),{files:[{assetId:0,url:0}],id:0,trt:0,metadata:{id:0,mediaId:0}}),{url:0}),f={mvpdId:0,companyId:0,config:c},p={config:c},h={},g={};t.normalizeConfig=function(e){if(e<=0)return function(e,t){return e};return function(n,r){var i,o=function(n,r){if(a.ObjectUtils.isPlainObject(n)){var i=g;return u(r)&&(i=r),t.normalizeConfig(e-1)(n,i)}if(Array.isArray(n)&&function(e){return Array.isArray(e)}(r)){var o=g;return r.length&&u(r[0])&&(o=r[0]),n.map((function(n){return t.normalizeConfig(e-1)(n,o)}))}return n},c={};if(a.ObjectUtils.isPlainObject(n)){var l=u(r)?(i=r,Object.keys(i).reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{})):h;a.ObjectUtils.keyValues(n).forEach((function(e){var t=e.key,i=e.value,a=u(r)?r[t]:g;c[t]=o(i,a);var d=t.toLowerCase(),f=d in l&&t!==l[d]&&l[d];if(f)if(f in n)s.info('Improper casing observed: "'+t+'"; however, the expected prop also exists "'+f+'"; will not overwrite correct prop');else{s.warn('Improper casing observed: "'+t+'"; renaming key to "'+f+'"');var p=r[f];c[f]=o(i,p),delete c[t]}}))}return c}};t.normalizePlayConfig=function(e){return t.normalizeConfig(5)(e,c)};t.normalizeMediaJSONPlayData=function(e){return t.normalizeConfig(5)(e,l)};t.normalizeContentPlayData=function(e){return"string"==typeof e?e:t.normalizeConfig(5)(e,d)};t.normalizeContentEntryOptionalData=function(e){return t.normalizeConfig(5)(e,f)};t.normalizePlayerSetupConfigData=function(e){return t.normalizeConfig(6)(e,p)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDebugCueManagerEvent=void 0;var r=n(0),i=n(21);t.isDebugCueManagerEvent=function(e){switch(e.type){case i.CuesManagerEventType.Cue_State_Changed:switch(e.previousState){case null:case r.CueState.Pending:return!0}}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LifecycleComponentURI=void 0,function(e){e.Default="com.turner.top.lifecycle.default"}(t.LifecycleComponentURI||(t.LifecycleComponentURI={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(179),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CCPAFeatureDefaults=void 0,t.CCPAFeatureDefaults={enabled:!1,doNotSell:!1}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(90),t),i(n(181),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GDPRFeatureDefaults=void 0;var r={consentFrameworkVersion:n(0).TCFVersionDefault,enabled:!0};t.GDPRFeatureDefaults=r},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(183),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TVEFeatureDefaults=void 0,t.TVEFeatureDefaults={enabled:!0,trapDuration:30,enableTrueX:!1}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerFeatureType=void 0,function(e){e.CCPA="ccpa",e.GDPR="gdpr",e.TVE="tve"}(r||(r={})),t.PlayerFeatureType=r},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(186),t),i(n(188),t),i(n(196),t),i(n(14),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(187),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(189),t),i(n(192),t),i(n(194),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(190),t),i(n(92),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(91),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonitorFsmConfig=void 0;var r=n(14);t.MonitorFsmConfig={initial:{name:r.MonitorStateTrigger.Inactive,state:r.MonitorState.Inactive},events:[{name:r.MonitorStateTrigger.Connect,from:[r.MonitorState.Inactive,r.MonitorState.Disconnected],to:r.MonitorState.Connected},{name:r.MonitorStateTrigger.Disconnect,from:[r.MonitorState.Connected],to:r.MonitorState.Disconnected}]}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(193),t),i(n(94),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(93),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(195),t),i(n(95),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r,i,o,a,s,u,c;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerHookCollection=void 0;var l=n(1),d=n(0),f=function(){function e(){this[r]=l.BaseHook.createFor(d.PlayerHookName.Add_Platform_Metadata),this[i]=l.BaseHook.createFor(d.PlayerHookName.Auth_Refresh),this[o]=l.BaseHook.createFor(d.PlayerHookName.Check_Auto_Play),this[a]=l.BaseHook.createFor(d.PlayerHookName.Check_GDPR_Consent),this[s]=l.BaseHook.createFor(d.PlayerHookName.Validate_Content_Resolution),this[u]=l.BaseHook.createFor(d.PlayerHookName.Validate_DRM_Token_Request),this[c]=l.BaseHook.createFor(d.PlayerHookName.Validate_DRM_Token_Response)}return e.prototype.handlers=function(){var e;return(e={})[d.PlayerHookName.Add_Platform_Metadata]=this[d.PlayerHookName.Add_Platform_Metadata].handlers,e[d.PlayerHookName.Auth_Refresh]=this[d.PlayerHookName.Auth_Refresh].handlers,e[d.PlayerHookName.Check_Auto_Play]=this[d.PlayerHookName.Check_Auto_Play].handlers,e[d.PlayerHookName.Check_GDPR_Consent]=this[d.PlayerHookName.Check_GDPR_Consent].handlers,e[d.PlayerHookName.Validate_Content_Resolution]=this[d.PlayerHookName.Validate_Content_Resolution].handlers,e[d.PlayerHookName.Validate_DRM_Token_Request]=this[d.PlayerHookName.Validate_DRM_Token_Request].handlers,e[d.PlayerHookName.Validate_DRM_Token_Response]=this[d.PlayerHookName.Validate_DRM_Token_Response].handlers,e},e}();t.PlayerHookCollection=f,r=d.PlayerHookName.Add_Platform_Metadata,i=d.PlayerHookName.Auth_Refresh,o=d.PlayerHookName.Check_Auto_Play,a=d.PlayerHookName.Check_GDPR_Consent,s=d.PlayerHookName.Validate_Content_Resolution,u=d.PlayerHookName.Validate_DRM_Token_Request,c=d.PlayerHookName.Validate_DRM_Token_Response},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(103),i=n(1),o=n(199),a=n(0),s=i.Log.getLogger("PlayerControllerOpManager").filter("controllers.ops");s.setEnabled(!1);var u=function(){function e(){var e=this;this._startProcessing=function(){e._gatherProcessableOps(),e._processNextOp()},this._ops={queued:[],processable:[],current:[]}}return e.prototype._queueOp=function(e,t,n,r){var a=this,s=new o.PlayerOperation(e,t,n,r).onCompleted((function(){i.ArrayUtils.remove(a._ops.current,s),a._processNextOp()}));this._ops.queued.push(s)},e.prototype._scheduleProcessing=function(){this._processTimer||(this._processTimer=setTimeout(this._startProcessing,0))},e.prototype._gatherProcessableOps=function(){var e=25-this._ops.processable.length;if(0!==e){var t=i.ArrayUtils.take(this._ops.queued,e);if(0!==t.length)for(var n=0,r=t;n<r.length;n++){var o=r[n];i.ArrayUtils.remove(this._ops.queued,o),this._ops.processable.push(o)}}},e.prototype._processNextOp=function(){if(0===this._ops.processable.length)return this._processTimer=void 0,void(this._ops.queued.length>0&&this._scheduleProcessing());var e=this._ops.processable[0];if(!(this._ops.current.filter((function(t){return!t.allow(e.type,e.args)})).length>0)){var t=this._ops.processable.shift();this._ops.current.push(t),t.execute()}},e.prototype._resetOps=function(){var e=this._ops,t=e.current,n=e.processable,r=e.queued;t.length=0,n.length=0,r.length=0},e.prototype.queueCommandOp=function(e,t){switch(this._queueOp(r.PlayerOperationType.Command,e,[t]),t.type){case a.PlayerCommandType.Enter_Fullscreen:case a.PlayerCommandType.Exit_Fullscreen:this._startProcessing();break;default:this._scheduleProcessing()}},e.prototype.queueNotificationOp=function(e,t){if(this._queueOp(r.PlayerOperationType.Notification,e,[t]),WEBPACK_CONSTANT_BUILD_FLAG_SYNCHRONOUS_OP_MANAGER){if(this._processTimer)return;this._startProcessing()}else this._scheduleProcessing()},e.prototype.queuePlayerError=function(e,t){if(this._queueOp(r.PlayerOperationType.Player_Error,e,[t]),WEBPACK_CONSTANT_BUILD_FLAG_SYNCHRONOUS_OP_MANAGER){if(this._processTimer)return;this._startProcessing()}else this._scheduleProcessing()},e.prototype.reset=function(){this._processTimer&&(clearTimeout(this._processTimer),this._processTimer=void 0),this._resetOps()},e}();t.default=u},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerOperation=t.allowDefault=void 0;var a=n(103),s=n(1);function u(e,t){return e===a.PlayerOperationType.Notification||e===a.PlayerOperationType.Player_Error}t.allowDefault=u;var c=function(e){function t(t,n,r,i){void 0===r&&(r=[]),void 0===i&&(i=u);var a=e.call(this,(function(e){return n.apply(void 0,o([e],r))}))||this;return a.type=t,a.args=r,a.allow=i,a}return i(t,e),t}(s.DefaultTask);t.PlayerOperation=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(104),i=n(0),o={initial:{name:r.PlayerStateTriggers.Start,state:i.PlayerState.Pending},events:[{name:r.PlayerStateTriggers.Initialize,from:[i.PlayerState.Pending],to:i.PlayerState.Initializing},{name:r.PlayerStateTriggers.Initialized,from:[i.PlayerState.Initializing],to:i.PlayerState.Initialized},{name:r.PlayerStateTriggers.Attach,from:[i.PlayerState.Initialized,i.PlayerState.Detached],to:i.PlayerState.Attaching},{name:r.PlayerStateTriggers.Attached,from:[i.PlayerState.Attaching],to:i.PlayerState.Attached},{name:r.PlayerStateTriggers.Listen,from:[i.PlayerState.Attached],to:i.PlayerState.Listening},{name:r.PlayerStateTriggers.Detach,from:[i.PlayerState.Listening],to:i.PlayerState.Detaching},{name:r.PlayerStateTriggers.Detached,from:[i.PlayerState.Detaching],to:i.PlayerState.Detached},{name:r.PlayerStateTriggers.Destroy,to:i.PlayerState.Destroying},{name:r.PlayerStateTriggers.Destroyed,from:[i.PlayerState.Destroying],to:i.PlayerState.Destroyed},{name:r.PlayerStateTriggers.Error,to:i.PlayerState.Error}]};t.default=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=n(106),u=n(42),c=n(108),l=i(n(202)),d=n(20),f=n(113),p=n(123),h=n(217),g=n(218),y=n(124),v=n(4),_=n(8),m=n(51),b=n(48),C=n(111),E=n(23),T=n(68),S=n(67),P=n(80),M=n(125),O=n(85),k=n(223),A=n(225),w=n(54),R=n(55),I=n(231),j=n(232),D=n(129),L=n(14),N=n(92),F=n(94),U=n(95),x=n(43),B=n(38),V=n(84),q=n(34),H=n(18),K=function(){function e(e){var t,n=this;this._loadedAndSetupInitComponents={},this._hooks=null,this._storedCaptionSettings=((t={})[o.CCSettingsSource.System]=d.DefaultCCSettings(),t[o.CCSettingsSource.User]={},t),this._onTransactionEvent=function(e,t){switch(e){case o.TransactionEventType.Module_Notification:n.events.moduleNotification.dispatch(t);break;case o.TransactionEventType.State_Changed:n._onTransactionStateChanged(t);break;case o.TransactionEventType.Config_Updated:n.events.configUpdated.dispatch(t);break;default:throw new a.UnreachableCaseError(e)}},this._playerId=e,this._logger=a.Log.getLogger("TransactionManager"+this._playerId),this.events=u.createTransactionEventCollection(),this._transaction=null,this._transactionController=null,this._endingPreviousState=null,this._selectedCCProvider=null,this._configManager=new s.ConfigManager({},f.DefaultMergeStrategyHandler(),p.PlayConfigValidator),this._replacer=new c.StringReplacer,this._analyticsMeasurer=h.AnalyticsMeasurer.createWithMeasuringSpecification(g.DefaultMeasuringSpecification())}return e.prototype._processPreloadCommand=function(e){var t=this._configManager.createConfigInstance({cms:{providers:e.options}});t=this._transformConfig(t);var n=this._getTransactionPreloadTask(e,t);return n.execute(),new Promise((function(e,t){n.onResolved((function(t){return e(t)})),n.onRejected(t)}))},e.prototype._processPlayCommand=function(e){var t,n,r=this;((null===(t=this._transactionController)||void 0===t?void 0:t.isRunning())||(null===(n=this._transactionController)||void 0===n?void 0:n.isWaiting()))&&(this._stopController(),this._setControllerListeners(!1)),this._analyticsMeasurer.resetForPlay(),this._transactionController=new l.default(this._playerId),this._setControllerListeners(!0),this._transaction=a.createDeferred();var i=(e.options||{}).config||{};y.LogConfigValidationResult(this._logger,this._configManager.validate(i));var o=this._configManager.createConfigInstance(i);o=this._transformConfig(o),this._playConfig=o;var s=this._getTransactionStartTask(e,o);this._transactionController.start(s),this._transaction.promise.then((function(e){return r._logger.debug("Transaction ended successfully with state: "+e.state)})).catch((function(e){return r._logger.error("Transaction ended with an error: "+a.stringify(e.args))})),s.fold((function(e){return r._logger.warn("Transaction start task errored: "+e)}),(function(e){return r._logger.debug("Successful resolution of transaction start task")})),s.execute(),this._configManager.extend({playback:{autoPlay:!0}})},e.prototype._transformConfig=function(e){var t=this;if(!1===(e=this._pruneDebugConfig(e)).isSectionEnabled(o.ToggleableSections.DRM)){var n=e.get("cms");if(n.isSome()){if(n.value.preferDRM=!1,n.value.providers){var r=v.fromNullable(n.value.providers[o.CmsProviderKey.MediaJSON]);if(r.isSome()){var i=r.value.mediaTypes||[];r.value.mediaTypes=i.filter((function(e){switch(e){case o.ContentProtectionType.MultiDRM:case o.ContentProtectionType.Fairplay:case o.ContentProtectionType.PlayReady:case o.ContentProtectionType.Primetime:case o.ContentProtectionType.Widevine:return t._logger.debug("Removing "+e+" from CMS media types because DRM is disabled"),!1;default:return!0}})),n.value.providers[o.CmsProviderKey.MediaJSON]=r.value}}e.set("cms",n.value)}e.set("auth.drm.enabled",!1)}return e},e.prototype._onTransactionStateChanged=function(e){var t=e.currentState,n=e.previousState,r=e.args;switch(t){case o.TransactionState.Ending:this._endingPreviousState=n;break;case o.TransactionState.Ended:if(!this._transaction){this._logger.debug("[_onTransactionStateChanged] could not handle ended transition - no transaction found to resolve|reject");break}if(!this._endingPreviousState)return void this._logger.warn("[_onTransactionStateChanged] unknown previous state to `Ending`");var i={state:this._endingPreviousState,args:r};switch(this._endingPreviousState){case o.TransactionState.Error:this._transaction.rejector(i);break;default:this._transaction.resolver(i)}}this.events.stateChanged.dispatch(e)},e.prototype._getTransactionPreloadTask=function(e,t){var n=this;return a.TaskFactory.create((function(r){var i=m.ComponentRegistry.get(o.ComponentCategory.CMS,b.CmsComponentURI.Default,n._playerId);if(!i)return r.reject(_.PlayerErrorFactory.transactionComponentSetupFailure("default cms component not found"));var a=i.factory();n._resolveStringReplacedConfig(void 0,t).fold(r.reject,(function(t){a.load(e.contentData,t.toData().cms).fold(r.reject,r.resolve)})).execute()}))},e.prototype._getTransactionStartTask=function(e,t){var n=this;return a.TaskFactory.create((function(i){var o={},s=function(e){i.reject(r(r({},o),{error:e}))};n._createComponents(t).fold(s,(function(e){return o.components=e})).execute().onResolved((function(){n._resolveStringReplacedConfig(o.playlistItem,t).fold(s,(function(e){return o.config=e})).execute().onResolved((function(){a.TaskFactory.create((function(r){if(!n._hooks)return s(_.PlayerErrorFactory.transactionInitFailure("Missing required hooks collection during transaction CMS resolution"));var i=o.components.cms,a=e.options||{},u=n._hooks.validateContentResolution;C.LoadContentEntryData(i,t,e,u).fold(s,(function(e){var n=t.getOrElse("cms",E.PlayerConfigDefaults.config.cms),u=C.ContentEntryDataToPlaylistItem(e,a);C.SelectContentFromContentEntryData(i,e,n).fold(s,(function(e){o.playlistItem=u,o.contentFileData=e,r.resolve()}))}))})).execute().onResolved((function(){n._resolveTimelineStrategy(o.config,o.playlistItem).fold(s,(function(e){o.timeline=e[0],o.timelineStrategy=e[1]})).execute().onResolved((function(){if(!n._hooks)return s(_.PlayerErrorFactory.transactionInitFailure("Missing required hooks collection during player initialization"));var r=n._getAuthTokenFromPlaylistItem(o.playlistItem),a=n._setupMonitors(t.toData(),o.playlistItem),u={command:e,config:t,authToken:r,contentFileData:o.contentFileData,playlistItem:o.playlistItem,components:o.components,model:n._model,timeline:o.timeline,timelineStrategy:o.timelineStrategy,selectedCCProvider:n._selectedCCProvider,hooks:n._hooks,monitors:a};i.resolve(u)}))}))}))}))}))},e.prototype._createComponents=function(e){var t=this;return a.TaskFactory.create((function(n){var r={modules:new Map},i=e.getOrElse("playback.components",{});Object.keys(i).forEach((function(n){var s=n,u=a.ObjectUtils.get(i,s),c=m.ComponentRegistry.get(s,u,t._playerId);if(c)switch(s){case o.ComponentCategory.Video_Engine:var l=c.factory();r.modules.set(s,{controller:new T.VideoEngineController(l),required:!0});break;case o.ComponentCategory.Captions:var d=t._selectedCCProvider=new S.DefaultCCProvider,f=c.factory(d);r.modules.set(s,{controller:new P.CCController(f,t._storedCaptionSettings.system,t._storedCaptionSettings.user),required:!1});break;case o.ComponentCategory.Analytics:e.isSectionEnabled(o.ToggleableSections.Analytics)&&r.modules.set(s,{controller:new M.AnalyticsController(t._analyticsMeasurer),required:!1});break;case o.ComponentCategory.Lifecycle:e.isSectionEnabled(o.ToggleableSections.Lifecycle)&&r.modules.set(s,{controller:new O.LifecycleController,required:!0});break;case o.ComponentCategory.Cues:var p=c.factory();r.modules.set(s,{controller:new k.CuesController(p),required:!1});break;case o.ComponentCategory.Mocks:var h=c.factory();r.modules.set(s,{controller:new A.MocksController(h),required:!1});break;case o.ComponentCategory.Custom:break;case o.ComponentCategory.PlatformHelper:case o.ComponentCategory.Auth:case o.ComponentCategory.AuthDRM:case o.ComponentCategory.CMS:case o.ComponentCategory.UI:break;default:throw new a.UnreachableCaseError(s)}else t._logger.warn("Could not find component by category/URI: "+s+"/"+u)})),[{category:o.ComponentCategory.Auth,URI:w.AuthComponentURI.Default},{category:o.ComponentCategory.AuthDRM,URI:R.AuthDRMComponentURI.Default},{category:o.ComponentCategory.CMS,URI:b.CmsComponentURI.Default}].forEach((function(e){var n=e.category,i=e.URI,o=m.ComponentRegistry.get(n,i,t._playerId);a.ObjectUtils.set(r,n,o.factory())})),n.resolve(r)}))},e.prototype._resolveTimelineStrategy=function(e,t){var n=this;return a.TaskFactory.create((function(r){var i=(new D.Timeline).init({allowDuplicates:!1}),o=(t.entry.isLive?new I.LiveTimelineStrategy:new j.VODTimelineStrategy).init({config:e.toData(),model:n._model,timeline:i,playlistItem:t});r.resolve([i,o])}))},e.prototype._resolveStringReplacedConfig=function(e,t){var n=this;return a.TaskFactory.create((function(r){n._replacer.init({playlistItem:e,configMetadata:t.getOrElse("metadata",{}),contentMetadata:{}}),n._parsePlayConfig(n._replacer,t),r.resolve(t)}))},e.prototype._stopController=function(){this._transactionController?this._transactionController.stop():this._logger.warn("[_stopController] could not stop controller")},e.prototype._passthroughCommand=function(e){this._transactionController?this._transactionController.processCommand(e):this._logger.warn("[_passthroughCommand] could not pass command through to controller")},e.prototype._setControllerListeners=function(e){this._transactionController?e?this._transactionController.events.listen(this._onTransactionEvent):this._transactionController.events.unlistenAll():this._logger.warn("[_setControllerListeners] controller not found")},e.prototype._parsePlayConfig=function(e,t){var n=t.toData();e.setupConfigTokenReplacement(n),t.extend(n)},e.prototype._pruneDebugConfig=function(e){var t=e.getOrElse("debug.enabled",!1),n=e.getOrElse("analytics.conviva.touchstoneUrl",null);return!t&&n&&e.set("analytics.conviva.touchstoneUrl",null),e},e.prototype._setupMonitors=function(e,t){var n=this,r=new Map;return Object.keys(e.monitors).forEach((function(i){var o=i,a=e.monitors[o];if(a.enabled)switch(o){case L.MonitorType.Content_Stall:r.set(o,new N.ContentStallMonitor(n._model,a));break;case L.MonitorType.Live_Ad_Session:e.ads.enabled&&t.entry.isLive&&r.set(o,new F.LiveAdSessionMonitor(n._model,a));break;case L.MonitorType.Prune:r.set(o,new U.PruneMonitor(n._model,a));break;default:n._logger.warn("Monitor "+o+" was enabled but not created")}else n._logger.info("Monitor "+o+" is disabled, skipping creation...")})),r.forEach((function(e,t){n._logger.debug('Monitor "'+t+'" was created')})),r},e.prototype._getAuthTokenFromPlaylistItem=function(e){var t=e.options,n=t.accessToken,r=t.accessTokenType;return n?new x.AuthToken(n,r||a.AuthTokenType.Adobe):null},e.prototype.init=function(e,t){var n,r=this;this._model=e.model,this._hooks=e.hooks;var i=this._configManager.extend(e.config);this._replacer.init({configMetadata:null!==(n=i.metadata)&&void 0!==n?n:{},playlistItem:{},contentMetadata:{}}),this._replacer.setupConfigTokenReplacement(i),this.events.configUpdated.dispatch({config:i});var s=[{category:o.ComponentCategory.UI,URI:B.UIComponentURI.Default}],u=[];return s.filter((function(e){var t,n=e.category,r=e.URI;if((null===(t=i.playback)||void 0===t?void 0:t.components)&&i.playback.components[n]===r)return!0;return!1})).forEach((function(e){var n=e.category,a=e.URI,s=m.ComponentRegistry.get(n,a,r._playerId);if(s){var c=s.factory();n===o.ComponentCategory.UI&&(c.setPlatformHelper(t),c.moduleNotification.listen((function(e){r.events.moduleNotification.dispatch(e)}))),u.push(c.setup({playerConfig:i})),r._loadedAndSetupInitComponents[n]=c}else r._logger.warn("Could not find component by category/URI: "+n+"/"+a)})),a.TaskFactory.all.apply(a.TaskFactory,u).execute()},e.prototype.processCommandWithResult=function(e){switch(e.type){case o.PlayerCommandType.Preload_Content:return this._processPreloadCommand(e);default:return Promise.reject("unhandled command type")}},e.prototype.processCommand=function(e){var t,n,r,i,s,u,c=this;switch(e.type){case o.PlayerCommandType.Play:var l=e,d=null!==(r=null===(n=null===(t=l.options)||void 0===t?void 0:t.config)||void 0===n?void 0:n.metadata)&&void 0!==r?r:{};this._logger.info("[processCommand] Play - Checking if platform specific metadata can be applied"),(null===(i=this._hooks)||void 0===i?void 0:i.addPlatformMetadata.hasRegisteredHandlers)?this._hooks.addPlatformMetadata.execute({metadata:d}).fold((function(e){c._logger.warn("[processCommand] Play - Unable to append platform specific metadata: "+e),c._processPlayCommand(l)}),(function(e){a.ObjectUtils.set(l,"options.config.metadata",e.metadata),c._logger.info("[processCommand] Play - Platform metadata retrieved"),c._processPlayCommand(l)})):(this._logger.info("[processCommand] Play - No platform metadata hooks registered, proceeding as normal"),this._processPlayCommand(l));break;case o.PlayerCommandType.Stop:this._stopController();break;case o.PlayerCommandType.Set_Player_Mode:if(null===(s=this._transactionController)||void 0===s?void 0:s.isRunning())this._logger.debug("[processCommand] setPlayerMode called with controller, passing through command to be handled by TransactionController"),this._passthroughCommand(e);else{this._logger.debug("[processCommand] setPlayerMode called with no initialized controller, emitting state change respond to default");var f={type:V.LifecycleEventType.State_Changed,previousState:o.LifecycleState.Continue,currentState:o.LifecycleState.Continue};this.events.moduleNotification.dispatch({module:o.ModuleType.Lifecycle,category:o.ModuleEventCategory.Component_Event,result:f})}break;case o.PlayerCommandType.Captions_Update_Settings:if(null===(u=this._transactionController)||void 0===u?void 0:u.isRunning())this._passthroughCommand(e);else{this._logger.debug("[processCommand] captionUpdateSettings called without TransactionController, storing settings for future play session"),this._storedCaptionSettings[e.source]=e.settings;var p={settings:q.mergeSystemAndUserSettings(this._storedCaptionSettings.system,this._storedCaptionSettings.user),type:H.CCEventType.Settings_Updated};this.events.moduleNotification.dispatch({module:o.ModuleType.Captions,category:o.ModuleEventCategory.Component_Event,result:p})}break;case o.PlayerCommandType.Send_Message_To_UI:var h=this._loadedAndSetupInitComponents.ui;h&&h.processCommand(e);break;case o.PlayerCommandType.Destroy:this._logger.warn("[processCommand] destroy command unsupported");break;default:this._passthroughCommand(e)}},e.prototype.updateConfig=function(e){this._replacer.setupConfigTokenReplacement(e),y.LogConfigValidationResult(this._logger,this._configManager.validate(e));var t=this._configManager.merge(e);if(this._configManager.extend(t),this.isRunning()){var n=this._configManager.getImmediatelyUpdatableConfig(t),r=new o.ConfigInstance(n),i=this._transformConfig(r).toData();this._transactionController?this._transactionController.updateConfig(i):this._logger.warn("[updateConfig] controller not available")}else this._logger.debug("[updateConfig] not propagating changes to controller - not available")},e.prototype.isRunning=function(){var e,t;return null!==(t=null===(e=this._transactionController)||void 0===e?void 0:e.isRunning())&&void 0!==t&&t},e.prototype.propagateNotification=function(e){this._analyticsMeasurer.handleModuleNotification(e),this._transactionController?this._transactionController.propagateNotification(e):this._logger.warn("[propagateNotification] could not pass through to controller")},e.prototype.completeNotification=function(e){this._transactionController?this._transactionController.completeNotification(e):this._logger.warn("[completeNotification] could not pass through to controller")},e.prototype.handlePlayerNotification=function(e){var t;this._analyticsMeasurer.handlePlayerNotification(e),(null===(t=this._transactionController)||void 0===t?void 0:t.isRunning())?this._transactionController.handlePlayerNotification(e):this._logger.warn("[handlePlayerNotification] could not pass through to controller")},e.prototype.destroy=function(){var e,t;this._transactionController&&this._transactionController.stop(),this._transactionController=null,this._selectedCCProvider&&(this._selectedCCProvider.destroy(),this._selectedCCProvider=null),null===(e=this._loadedAndSetupInitComponents.ui)||void 0===e||e.moduleNotification.unlistenAll(),null===(t=this._loadedAndSetupInitComponents.ui)||void 0===t||t.destroy(),this._analyticsMeasurer.destroy()},e}();t.default=K},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(203),u=n(39),c=o(n(204)),l=n(90),d=n(4),f=n(11),p=n(13),h=n(205),g=n(110),y=n(206),v=n(115),_=n(42),m=n(8),b=n(49),C=n(14),E=n(75),T=n(25),S=n(50),P=n(29),M=n(35),O=n(7),k=n(9),A=n(0),w=n(216),R=function(){function e(e){var t=this;this._onModuleNotification=function(e){t.events.moduleNotification.dispatch(e)},this._onFsmEvent=function(e,n){var r=n.from,o=n.to,c=n.args;switch(e){case a.FsmEventType.State_Changed:switch(t._notifyStateChanged(r,o,c),t._logger.verbose("[onFsmEvent] state: "+o),o){case A.TransactionState.Initializing:t._startTask.fold((function(e){var n=e.error,r=e.components;r&&(t._components=r),t._forceErrorTransition(n)}),(function(e){if(t._hooks=e.hooks,t._playCommand=e.command,t._authToken=e.authToken,t._contentFileData=e.contentFileData,t._playlistItem=e.playlistItem,t._components=e.components,t._config=e.config,t._model=e.model,t._timeline=e.timeline,t._timelineStrategy=e.timelineStrategy,t._selectedCCProvider=e.selectedCCProvider,t._monitors=e.monitors,!t._components.modules.has(A.ComponentCategory.Video_Engine)){var n=m.PlayerErrorFactory.transactionInitFailure("Could not start transaction, required video engine module not provided");return t._logger.warn(n.toString()),void t._forceErrorTransition(n)}t._timeline.events.listen(t._onTimelineEvent),t._modelUpdatedBinding=t._model.modelUpdated.listen(t._onModelUpdated);var r=t._config.toData(),i=a.ObjectUtils.getOrElse(t._playlistItem.entry.metadata,"ssaiEnabled",!0);r.ads.enabled&&!i&&(t._logger.warn("ssaiEnabled is false; forcibly disabling ads"),t.updateConfig({ads:{enabled:!1}})),!t._playlistItem.entry.isLive&&t._playlistItem.entry.segments.length>0&&r.ads.enabled||!r.features.tve.enabled||(t._logger.info("Auto-disabling TVE feature, current content entry data detected as not TVE content..."),t.updateConfig({features:{tve:{enabled:!1}}}))})).onResolved((function(){var e=t._fsm.currentState();if(e===A.TransactionState.Initializing){var n=t._getPlaybackConfig(),r=n.autoPlay,i=n.autoPlayOptions,o=function(){var e=t._fsm.currentState();if(e===A.TransactionState.Initializing){var n=function(e){t._fireTransition(e,[{config:t._config.toData(),playlistItem:a.ObjectUtils.extendDeep({},t._playlistItem)}])};if(t._canAutoPlay.unmuted)t._logger.info("Autoplay is allowed, transitioning to `Preparing`..."),n(u.TransactionEvent.Prepare);else if(t._canAutoPlay.muted&&i.forceMedia)t.updateConfig({playback:{muted:!0}}),t._logger.info("Only muted auto-play is allowed and `forceMedia` is enabled, attempting with muted playback..."),n(u.TransactionEvent.Prepare);else switch(i.preloadBehavior){case A.AutoPlayPreloadBehavior.None:t._logger.info("Autoplay blocked behavior states to `Wait` before finalizing init, transitioning to `Waiting`..."),n(u.TransactionEvent.Wait);break;case A.AutoPlayPreloadBehavior.Full:t._logger.info("Autoplay blocked behavior states to `Wait` after init, transitioning to `Preparing`..."),n(u.TransactionEvent.Prepare);break;default:throw new a.UnreachableCaseError(i.preloadBehavior)}}else t._logger.warn('[_onFsmEvent:Initializing] interrupted because state changed to "'+e+'" during autoplay check')},s=t._config.toData();r&&i.preCheckAutoPlay?t._hooks.checkAutoPlay.execute({canAutoPlay:!0,canAutoPlayMuted:!0}).onResolved((function(e){var n=e.canAutoPlay,r=e.canAutoPlayMuted;s.metadata["webos.appId"]||s.metadata["tizen.appId"]?(t._canAutoPlay.unmuted=!0,t._canAutoPlay.muted=!0):(t._canAutoPlay.unmuted=n,t._canAutoPlay.muted=r)})).onCompleted((function(){return o()})):o()}else t._logger.warn('[_onFsmEvent:Initializing] interrupted because state changed to "'+e+'" during start tasks')}));break;case A.TransactionState.Preparing:var p=i(i([],t._getModuleSetupTasks(t._components.modules)),t._getProviderSetupTasks());a.TaskFactory.all.apply(a.TaskFactory,p).fold((function(e){return t._forceErrorTransition(e)}),(function(e){var n=t._fsm.currentState();n!==A.TransactionState.Preparing?t._logger.warn('[_onFsmEvent:Preparing] interrupted because state changed to "'+n+'" during preparation tasks'):t._fireTransition(u.TransactionEvent.Transform)}));break;case A.TransactionState.Transforming:var h=t._timelineStrategy.populateTimeline();h.length>0&&t._logger.warn("Could not add "+h.length+" markers to the timeline");var g=t._config.getOrElse("features.gdpr.enabled",!0),y={},v=[];if(g&&t._hooks.checkGDPRConsent.hasRegisteredHandlers){var _=function(e){e.error?t._logger.warn("[GDPR] "+e.error):t._contentFileData.url?(e.subjectToGDPR!==A.SubjectToGDPROptions.Yes&&e.subjectToGDPR!==A.SubjectToGDPROptions.No||(y[l.GDPRConsentQueryKeys.GDPR_Subject_To]=e.subjectToGDPR),e.consentString&&(y[l.GDPRConsentQueryKeys.GDPR_Consent]=e.consentString)):t._logger.error("[onGDPRConsentResolved] Content File Data Url does not exist.")},C=t._config.getOrElse("features.gdpr.consentDataOverride",{}),P=C.subjectToGDPR,M=C.consentString,O=void 0;void 0!==P&&void 0!==M?(t._logger.info("[GDPR] Static consent data overrides detected and will be applied."),O=a.TaskFactory.resolve({subjectToGDPR:P,consentString:M}).execute().onResolved(_)):(t._logger.info("[GDPR] No consent data overrides were provided. Consent framework will be used."),O=t._hooks.checkGDPRConsent.execute({consentString:null,subjectToGDPR:A.SubjectToGDPROptions.Unknown}).onResolved(_)),v.push(O)}var k=function(){!function(){if(t._contentFileData.url)if(t._config.isSectionEnabled(A.ToggleableSections.Ads)){var e=E.transformTemplatedAdsKvps({contentUrlKvpsMap:a.getQueryAsMap(t._contentFileData.url),configMetadataKvpsMap:t._config.getOrElseNullable("metadata",{}),playlistEntry:d.fromNullable(t._playlistItem.entry).getOrElse({}),PlatformInfo:f.PlatformInfo}),n=t._config.getOrElseNullable("ads.kvps",{}),r=a.ObjectUtils.extendDeep({},e,y,n);t._contentFileData.url=decodeURIComponent(a.appendQuery(t._contentFileData.url,r))}else t._logger.info("[applyContentUrlTransforms] Ads are not enabled. Content url ad kvps will not be applied");else t._logger.warn("[applyContentUrlTransforms] Content URL is undefined, no transforms were applied")}(),t._fireTransition(u.TransactionEvent.Initialized)};v.length>0?a.TaskFactory.all.apply(a.TaskFactory,v).fold((function(e){return t._forceErrorTransition(e)}),(function(){return k()})):k();break;case A.TransactionState.Initialized:t._isInitialized=!0;var w=t._getPlaybackConfig().autoPlayOptions;if(t._canAutoPlay.unmuted||t._canAutoPlay.muted&&w.forceMedia)t._fireTransition(u.TransactionEvent.Validate);else switch(w.preloadBehavior){case A.AutoPlayPreloadBehavior.None:t._fireTransition(u.TransactionEvent.Validate);break;case A.AutoPlayPreloadBehavior.Full:t._fireTransition(u.TransactionEvent.Wait);break;default:throw new a.UnreachableCaseError(w.preloadBehavior)}break;case A.TransactionState.Validating:t._fireTransition(u.TransactionEvent.Validated);break;case A.TransactionState.Validated:t._fireTransition(u.TransactionEvent.Authorize);break;case A.TransactionState.Authorizing:var R=[];T.contentEntryFileRequiresCdnAuth(t._contentFileData)&&R.push(t._initiateCdnAuthFlow()),T.contentEntryFileRequiresDrmAuth(t._contentFileData)&&(t._contentFileData.assetId||t._config.getOrElse("metadata.assetId",null))&&t._createDrmAuthTask(b.DRMDataSourceRetrievalContext.Pre_Play).execute(),a.TaskFactory.all.apply(a.TaskFactory,R).fold((function(e){return t._forceErrorTransition(e)}),(function(e){return t._fsm.attemptTransition(u.TransactionEvent.Authorized)}));break;case A.TransactionState.Authorized:t._fireTransition(u.TransactionEvent.Media_Begin);break;case A.TransactionState.Media_Beginning:t._setupMonitorListeners(),t._startMonitors();var I=t._config.toData(),j=t._toComponentCommands({type:A.PlayerCommandType.Play,fileData:t._contentFileData,playlistItem:t._playlistItem,config:I});t._propagateCommands.apply(t,j);break;case A.TransactionState.Ads_Completed:switch(t._model.mediaState){case A.MediaState.Pending:t._fsm.fireTransition(u.TransactionEvent.Media_Playback)}break;case A.TransactionState.Interrupting:var D=[],L=d.fromNullable(c[0]).getOrElse({}),N=d.fromNullable(L.interruptMode).getOrElse(s.InterruptMode.Interrupt);if(t._interruptData.mode=N,t._interruptData.error=L.error,t._cancelTasks(),t._cancelHooks(),t._stopAndDestroyMonitors(),!t._isInitialized){t._logger.info("[_isInitialized=false] early interrupt flow"),t._completeInterrupt();break}switch(N===s.InterruptMode.Error&&t._propagateCommands({type:S.AnalyticsCommand.ReportError,targets:[A.ComponentCategory.Analytics],data:a.ObjectUtils.extendDeep({},L)}),t._logger.verbose("[_onFsmEvent:Interrupting] mediaState: "+t._model.mediaState),t._model.mediaState){case A.MediaState.Pending:case A.MediaState.Starting:case A.MediaState.Stopped:case A.MediaState.Finished:case A.MediaState.Error:break;default:D.push((function(){t._logger.debug("[_onFsmEvent:Interrupting] interrupting video engine..."),t._interruptData.responses.push(A.VideoEngineEventType.Media_Stopped)}))}var F=t._toComponentCommands({type:A.PlayerCommandType.Stop});t._propagateCommands.apply(t,F),t._logger.debug("[_onFsmEvent:Interrupting] waiting for: "+D.length+" interrupt ops"),D.length>0?D.forEach((function(e){return e()})):t._completeInterrupt();break;case A.TransactionState.Media_Completed:t._fireTransition(u.TransactionEvent.Finish);break;case A.TransactionState.Finished:t._fireTransition(u.TransactionEvent.End);break;case A.TransactionState.Interrupted:t._playCommand=null,t._components.modules.forEach((function(e){return e.controller.moduleNotification.unlistenAll()})),t._fireTransition(u.TransactionEvent.End);break;case A.TransactionState.Ending:t._cancelHooks(),t._stopAndDestroyMonitors();var U=[];t._components.modules.forEach((function(e){U.push(e.controller.destroy())})),t._timelineStrategy&&U.push(t._timelineStrategy.destroy()),Promise.all(U).then((function(){var e=t._fsm.currentState();e!==A.TransactionState.Ending?t._logger.warn('[_onFsmEvent:Ending] interrupted because state changed to "'+e+'" while destroying ops'):(t._model&&t._model.modelUpdated.unlisten(t._modelUpdatedBinding),t._timeline&&t._timeline.events.unlistenAll(),t._fireTransition(u.TransactionEvent.Ended,c))})).catch((function(e){t._forceErrorTransition(m.PlayerErrorFactory.transactionStateTransitionFailure("[onFsmEvent] error occured when destroying modules").setMetadata({subErrorMessage:e}))}));break;case A.TransactionState.Error:if(r===A.TransactionState.Ending)return void t._fireTransition(u.TransactionEvent.Ended);t._fireTransition(u.TransactionEvent.End,c)}break;case a.FsmEventType.Error:t._notifyStateChanged(t._fsm.currentState(),A.TransactionState.Error)}},this._onModelUpdated=function(e){t._timelineStrategy.handleModelUpdated(e)},this._onTimelineEvent=function(e,n){t._onModuleNotification({module:A.ModuleType.Timeline,category:A.ModuleEventCategory.Component_Event,result:n})},this._applyDRMToken=function(e,n){t._propagateCommands({type:P.VideoEngineCommand.Apply_DRM_Token,targets:[A.ComponentCategory.Video_Engine],data:{id:e,token:n}})},this._handleContentLost=function(){t._fsm.attemptTransition(u.TransactionEvent.Stop,[{interruptMode:s.InterruptMode.Error,error:m.PlayerErrorFactory.networkConnectionLost("Connection with content lost, playback stopped and reset")}])},this._handleAdSessionTimeout=function(){var e=m.PlayerErrorFactory.adSessionTimeout("Ad session is timed out, stopping playback session.",A.ErrorSeverity.Fatal);t._propagateCommands.apply(t,[{type:S.AnalyticsCommand.ReportError,data:{error:e},targets:[A.ComponentCategory.Analytics]}]),t._forceErrorTransition(e)},this._handlePruneEvent=function(e,n){switch(e){case k.PruneMonitorEventType.Sliding_Window_Changed:t.handlePlayerNotification({sourceType:p.PlayerNotificationSourceType.Monitors,eventCategory:p.PlayerNotificationEventCategory.Prune,eventType:n.type,eventResult:n})}},this._playerId=e,this._logger=a.Log.getLogger("TransactionController"+this._playerId),this.events=_.createTransactionEventCollection(),this._components={modules:new Map},this._fsm=new a.Fsm,this._canAutoPlay={unmuted:!1,muted:!1},this._isInitialized=!1,this._accessTokenRefreshTask=null,this._cdnTokenResolutionTask=null,this._drmTokenResolutionTask=null,this._queuedDRMTokenResolutionTasks=[],this._parsedDRMKeyDataCache=new Map,this._authToken=null,this._authDRMToken=null,this._mediaStarted=!1}return e.prototype._onVideoEngineEvent=function(e){var t=this;switch(e.type){case A.VideoEngineEventType.Media_Starting:this._fsm.attemptTransition(u.TransactionEvent.Media_Playback);break;case A.VideoEngineEventType.Media_Started:this._mediaStarted=!0;break;case A.VideoEngineEventType.Ad_Starting:this._fsm.attemptTransition(u.TransactionEvent.Ads_Begin);break;case A.VideoEngineEventType.Ad_Started:this._fsm.attemptTransition(u.TransactionEvent.Ads_Playback);break;case A.VideoEngineEventType.Ad_Finished:this._fsm.attemptTransition(u.TransactionEvent.Ads_Complete);break;case A.VideoEngineEventType.Media_Stopped:switch(this._fsm.currentState()){case A.TransactionState.Media_Playback:this._logger.debug("[_onVideoEngineEvent] Media playback interrupted via internal stop; transitioning to complete"),this._fsm.attemptTransition(u.TransactionEvent.Media_Complete);break;case A.TransactionState.Interrupting:this._logger.debug("[_onVideoEngineEvent] Video Engine successfully interrupted"),this._checkAndCompleteInterrupt(e.type);break;default:this._logger.warn("[_onVideoEngineEvent] Video Engine interrupted in an unexpected state")}break;case A.VideoEngineEventType.Media_Finished:switch(this._fsm.currentState()){case A.TransactionState.Interrupting:case A.TransactionState.Interrupted:case A.TransactionState.Pending:this._logger.debug("[_onVideoEngineEvent] The transaction was stopped before media complete was received - skipping");break;default:this._fsm.attemptTransition(u.TransactionEvent.Media_Complete)}break;case A.VideoEngineEventType.Ad_Error:e.severity===A.ErrorSeverity.Fatal&&this._fsm.attemptTransition(u.TransactionEvent.Stop,[{interruptMode:s.InterruptMode.Interrupt}]);break;case A.VideoEngineEventType.Media_Error:this._fsm.attemptTransition(u.TransactionEvent.Stop,[{interruptMode:s.InterruptMode.Interrupt}]);break;case A.VideoEngineEventType.DRM_Token_Request:var n=e,r=n.requestId,i=n.keyData,o=t._mediaStarted&&-1!==t._model.mediaTime?b.DRMDataSourceRetrievalContext.In_Play:b.DRMDataSourceRetrievalContext.Pre_Play;this._parsedDRMKeyDataCache.set(i,null);var a={requestId:r,task:this._createDrmAuthTask(o,i)};this._queuedDRMTokenResolutionTasks.push(a),this._processDRMTokenRequestQueue()}},e.prototype._processDRMTokenRequestQueue=function(){var e,t=this;if(null===(e=this._drmTokenResolutionTask)||void 0===e?void 0:e.running)this._logger.debug("Cannot process DRM token request queue - previous task is still running");else{var n=this._queuedDRMTokenResolutionTasks.shift();if(n){var r=n.task,i=n.requestId;this._drmTokenResolutionTask=r,r.execute().fold((function(e){t._forceErrorTransition(e)}),(function(e){var n=t._config.get(A.ToggleableSections.DRM);n.isSome()&&0==n.value.setHeaders?t._applyDRMToken(i,""):t._applyDRMToken(i,e.token),t._drmTokenResolutionTask=null,t._processDRMTokenRequestQueue()}))}}},e.prototype._fireTransition=function(e,t){return this._fsm.cannotFireTransition(e)?this._forceErrorTransition(m.PlayerErrorFactory.transactionStateTransitionFailure("Unable to fire '"+e+"' from current state: "+this._fsm.currentState())):this._fsm.fireTransition(e,t)},e.prototype._notifyStateChanged=function(e,t,n){this._logger.info("[_notifyStateChanged] "+e+" -> "+t),this.events.stateChanged.dispatch({previousState:e,currentState:t,args:n})},e.prototype._checkAndCompleteInterrupt=function(e){var t=this._interruptData.responses,n=t.indexOf(e);-1!==n&&t.splice(n,1),0===t.length&&this._completeInterrupt()},e.prototype._completeInterrupt=function(){var e=this._interruptData,t=e.mode,n=e.error;switch(t){case s.InterruptMode.Interrupt:this._fireTransition(u.TransactionEvent.Interrupted);break;case s.InterruptMode.Error:this._fireTransition(u.TransactionEvent.Error,[{error:n,interruptMode:t}]);break;default:throw new a.UnreachableCaseError(t)}},e.prototype._propagateCommands=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){t.targets?t.targets.forEach((function(n){var r=e._components.modules.get(n);r&&r.controller.processCommand(t)})):e._components.modules.forEach((function(e){return e.controller.processCommand(t)}))}))},e.prototype._toComponentCommands=function(e){var t=r({},e);switch(delete t.type,e.type){case A.PlayerCommandType.Play:return[{type:P.VideoEngineCommand.Play,data:t,targets:[A.ComponentCategory.Video_Engine]}];case A.PlayerCommandType.Stop:return[{type:P.VideoEngineCommand.Stop,targets:[A.ComponentCategory.Video_Engine]}];case A.PlayerCommandType.Pause:return[{type:P.VideoEngineCommand.Pause,targets:[A.ComponentCategory.Video_Engine]}];case A.PlayerCommandType.Resume:return[{type:P.VideoEngineCommand.Resume,targets:[A.ComponentCategory.Video_Engine]}];case A.PlayerCommandType.Seek:return[{type:P.VideoEngineCommand.Seek,data:t,targets:[A.ComponentCategory.Video_Engine]}];case A.PlayerCommandType.Seek_To_Live:return[{type:P.VideoEngineCommand.Seek_To_Live,targets:[A.ComponentCategory.Video_Engine]}];case A.PlayerCommandType.Resize:return[{type:P.VideoEngineCommand.Resize,data:t,targets:[A.ComponentCategory.Video_Engine]}];case A.PlayerCommandType.Set_Player_Mode:return[{type:M.LifecycleCommand.LifecycleChange,data:t,targets:[A.ComponentCategory.Lifecycle]}];case A.PlayerCommandType.Captions_Select_Track:return[{type:O.CCCommand.Select_Track,data:t,targets:[A.ComponentCategory.Captions]}];case A.PlayerCommandType.Captions_Select_Track_By_Lang:return[{type:O.CCCommand.Select_Track_By_Lang,data:t,targets:[A.ComponentCategory.Captions]}];case A.PlayerCommandType.Captions_Set_Enabled:return[{type:O.CCCommand.Set_Enabled,data:t,targets:[A.ComponentCategory.Captions]}];case A.PlayerCommandType.Captions_Update_Settings:return[{type:O.CCCommand.Update_Settings,data:t,targets:[A.ComponentCategory.Captions]}];case A.PlayerCommandType.Update_Config:return[];case A.PlayerCommandType.Report_Event:return[{type:S.AnalyticsCommand.ReportEvent,data:t,targets:[A.ComponentCategory.Analytics]}];case A.PlayerCommandType.Report_Error:return[{type:S.AnalyticsCommand.ReportError,data:t,targets:[A.ComponentCategory.Analytics]}];case A.PlayerCommandType.Destroy:return[];case A.PlayerCommandType.Ad_Clicked:return[{type:P.VideoEngineCommand.Ad_Click,targets:[A.ComponentCategory.Video_Engine]}];default:return[]}},e.prototype._setupMonitorListeners=function(){var e=this;this._monitors&&this._monitors.forEach((function(t,n){switch(n){case C.MonitorType.Content_Stall:t.events.contentLost.once(e._handleContentLost);break;case C.MonitorType.Live_Ad_Session:t.events.timedOut.once(e._handleAdSessionTimeout);break;case C.MonitorType.Prune:t.events.listen(e._handlePruneEvent)}}))},e.prototype._getModuleSetupTasks=function(e){var t=this,n=[];return e.forEach((function(e,r){var i=e.controller,o=e.required;n.push(a.TaskFactory.create((function(e){i.moduleNotification.listen(t._onModuleNotification),i.setup({contentFileData:t._contentFileData,playerId:t._playerId,playerConfig:t._config.toData(),playerModel:t._model,playlistItem:t._playlistItem}).fold((function(n){i.moduleNotification.unlistenAll(),o?e.reject(m.PlayerErrorFactory.transactionInitFailure("Component initialization failure").setMetadata({recoverySuggestion:m.PlayerRecoveryMessaging.DIRECT_TO_UNDERLYING_ERROR,subErrorCode:n.code,subErrorMessage:n.message})):(t._logger.warn("Optional component for category "+r+" failed setup, omitting and continuing..."),t._components.modules.delete(r),e.resolve())}),(function(t){return e.resolve()}))})))})),n},e.prototype._getProviderSetupTasks=function(){var e=this;return[a.TaskFactory.create((function(t){if(e._selectedCCProvider){var n=e._components.modules.get(A.ComponentCategory.Video_Engine).controller;e._selectedCCProvider.setSourceContext(n)}t.resolve()}))]},e.prototype._initiateCdnAuthFlow=function(){var e,t=this;if(null===(e=this._cdnTokenResolutionTask)||void 0===e?void 0:e.running)return this._logger.debug("Using currently running CDN token request task"),this._cdnTokenResolutionTask;var n=a.TaskFactory.create((function(e){t._logger.debug("Initiating CDN token request task");a.TaskFactory.seq(t._refreshAccessToken(),a.TaskFactory.create((function(e){var n;h.HandleTransactionCDNAuth(t._playlistItem,t._contentFileData,t._config,null!==(n=t._components.auth)&&void 0!==n?n:null).execute().fold((function(n){t._logger.warn(n.toString()),e.reject(n)}),(function(n){t._logger.debug("CDN token request task resolved");var i={type:w.TokenResponseEventType.Token_Response_Received,payload:r({},n.tokenData)};t._onModuleNotification({module:A.ModuleType.Auth,category:A.ModuleEventCategory.Component_Event,result:i}),t._contentFileData=n.file,e.resolve(t._contentFileData)}))}))).fold((function(t){return e.reject(t)}),(function(n){return e.resolve(t._contentFileData)}))})).execute();return this._cdnTokenResolutionTask=n,n},e.prototype._createDrmAuthTask=function(e,t){var n=this;return a.TaskFactory.create((function(r){n._logger.debug("Initiating DRM token request task");a.TaskFactory.seq(n._refreshAccessToken(),a.TaskFactory.create((function(r){var i,o;(i=e,o=t,a.TaskFactory.create((function(e){n._resolveDRMAssetMetadata(i,o).execute().fold((function(t){return e.reject(t)}),(function(t){var r=t.assetId,i=t.companyId;n._hooks.validateDRMTokenRequest.execute({assetId:r,companyId:i}).fold((function(t){return e.reject(t)}),(function(t){return e.resolve(t)}))}))})).execute()).fold((function(e){r.reject(e),n._forceErrorTransition(e)}),(function(e){var t;(t=e,a.TaskFactory.create((function(e){return n._authDRMToken?n._authDRMToken.assetId!==t.assetId||n._authDRMToken.companyId!==t.companyId||n._authDRMToken.isExpired()?(n._logger.debug("Existing DRM token found, but is either expired or does not match new asset details"),e.reject()):(n._logger.debug("Existing DRM token still valid, resolving early with same token"),e.resolve(n._authDRMToken)):e.reject()})).execute()).fold((function(t){var i;(i=e,a.TaskFactory.create((function(e){var t;h.HandleTransactionDRMAuth(n._playlistItem,i.assetId,i.companyId,n._config,null!==(t=n._components.authDRM)&&void 0!==t?t:null,n._authToken).fold((function(t){n._hooks.validateDRMTokenResponse.execute({error:t,data:{jwt:"",ttl:500,timestamp:Date.now()}}).fold((function(t){return e.reject(t)}),(function(t){n._logger.debug("DRM token request task resolved for: "+i.assetId);var r=new g.AuthDRMToken(t.data.jwt,t.data.ttl,t.data.timestamp,i.assetId,i.companyId);e.resolve(r)}))}),(function(t){var r={type:w.TokenResponseEventType.Token_Response_Received,payload:t};n._onModuleNotification({module:A.ModuleType.Auth,category:A.ModuleEventCategory.Component_Event,result:r}),n._hooks.validateDRMTokenResponse.execute({data:t}).fold((function(t){return e.reject(t)}),(function(t){n._logger.debug("DRM token request task resolved for: "+i.assetId);var r=new g.AuthDRMToken(t.data.jwt,t.data.ttl,t.data.timestamp,i.assetId,i.companyId);e.resolve(r)}))}))})).execute()).fold((function(e){n._forceErrorTransition(e)}),(function(e){return r.resolve(e)}))}),(function(e){return r.resolve(e)}))}))}))).fold((function(e){return r.reject(e)}),(function(e){var t=e[1];n._authDRMToken=t,r.resolve(t)}))}))},e.prototype._refreshAccessToken=function(){var e,t=this;if(null===(e=this._accessTokenRefreshTask)||void 0===e?void 0:e.running)return this._accessTokenRefreshTask;var n=a.TaskFactory.create((function(e){t._logger.debug("Initiating Access Token refresh task"),h.HandleTransactionAccessTokenRefresh(t._playlistItem,t._hooks.authRefresh,t._authToken).fold((function(n){e.reject(n),t._forceErrorTransition(n)}),(function(n){t._logger.debug("Access Token refresh task resolved"),t._playlistItem=n[0],t._model.playlistItem&&t._model.handleChangeRequests([{property:A.ModelKeys.Playlist_Item,value:{options:t._playlistItem.options},mode:A.ModelUpdateMode.Extend}]),t._authToken=n[1],e.resolve(t._authToken)}))}));return this._accessTokenRefreshTask=n,n},e.prototype._resolveDRMAssetMetadata=function(e,t){var n=this;return a.TaskFactory.create((function(r){if(n._config.get(A.ToggleableSections.AuthDRM).isNone())return r.reject(m.PlayerErrorFactory.authDrmTokenFailure("Missing DRM configuration"));var i=n._config.get(A.ToggleableSections.AuthDRM).toNullable(),o=["assetId","companyId"],s={assetId:[],companyId:[]};o.forEach((function(r){var o={prePlay:[],inPlay:[]},a={assetIdSource:i.assetIdSource||o,companyIdSource:i.companyIdSource||o},u=v.GetConfiguredDRMDataSourcesFor(r,e,a);s[r]=u.map((function(i){var o;return{source:i,task:y.GetRequestedDRMValueRetrievalTaskFor(r,i,e,{keyData:t,parsedKeyDataCache:n._parsedDRMKeyDataCache,config:n._config,cmsComponent:n._components.cms,contentFileData:n._contentFileData,playCommandData:null===(o=n._playCommand)||void 0===o?void 0:o.contentData})}}))}));var u=o.map((function(e){return y.ProcessRequestedDRMValueRetrievalTasksFor(e,s[e])}));a.TaskFactory.all.apply(a.TaskFactory,u).fold((function(e){n._logger.error('Error processing retrieval tasks for requested values: "'+o.join(", ")+'"'),r.reject(e)}),(function(e){var t=e[0],n=e[1];r.resolve({assetId:t,companyId:n})}))}))},e.prototype._getPlaybackConfig=function(){return this._config.get("playback").toNullable()},e.prototype._forceErrorTransition=function(e){return this._fireTransition(u.TransactionEvent.Error,[{error:e}])},e.prototype._cancelTasks=function(){var e,t,n;null===(e=this._accessTokenRefreshTask)||void 0===e||e.cancel(),this._accessTokenRefreshTask=null,null===(t=this._cdnTokenResolutionTask)||void 0===t||t.cancel(),this._cdnTokenResolutionTask=null,null===(n=this._drmTokenResolutionTask)||void 0===n||n.cancel(),this._queuedDRMTokenResolutionTasks.length=0},e.prototype._cancelHooks=function(){this._hooks&&(this._hooks.checkAutoPlay.cancel(),this._hooks.checkGDPRConsent.cancel(),this._hooks.authRefresh.cancel(),this._hooks.validateContentResolution.cancel(),this._hooks.validateDRMTokenRequest.cancel(),this._hooks.validateDRMTokenResponse.cancel())},e.prototype._startMonitors=function(){this._monitors&&this._monitors.forEach((function(e){e.start()}))},e.prototype._stopAndDestroyMonitors=function(){this._monitors&&(this._monitors.forEach((function(e){e.stop(),e.destroy()})),this._monitors.clear())},e.prototype.start=function(e){this._startTask=e,this._interruptData={responses:[],mode:s.InterruptMode.Interrupt},this._fsm.init(c.default),this._fsm.events.listen(this._onFsmEvent),this._fireTransition(u.TransactionEvent.Initialize)},e.prototype.processCommand=function(e){switch(e.type){case A.PlayerCommandType.Proceed:this._fsm.attemptTransition(this._isInitialized?u.TransactionEvent.Validate:u.TransactionEvent.Prepare);break;default:var t=this._toComponentCommands(e);this._propagateCommands.apply(this,t)}},e.prototype.updateConfig=function(e){this._config.extend(e),this._components.modules.forEach((function(t){t.controller.updateConfig(e)})),this._timelineStrategy&&this._timelineStrategy.updateConfig(e),this.events.configUpdated.dispatch({config:this._config.toData()})},e.prototype.isRunning=function(){var e=null!==this._fsm.currentState(),t=this._fsm.cannotFireTransition(u.TransactionEvent.Initialize),n=this._fsm.currentState()===A.TransactionState.Ended||this._fsm.currentState()===A.TransactionState.Ending,r=this._fsm.currentState()!==A.TransactionState.Initializing,i=!n&&!this.isWaiting()&&e&&t;return r&&i},e.prototype.isWaiting=function(){return this._fsm.currentState()===A.TransactionState.Waiting},e.prototype.propagateNotification=function(e){this._components.modules.forEach((function(t){t.controller.handleModuleNotification(e)})),this._timelineStrategy&&this._timelineStrategy.handleModuleNotification(e),this._monitors&&this._monitors.forEach((function(t){t.handleModuleNotification(e)}))},e.prototype.completeNotification=function(e){switch(e.module){case A.ModuleType.Video_Engine:this._onVideoEngineEvent(e.result);break;case A.ModuleType.Timeline:case A.ModuleType.Captions:case A.ModuleType.Lifecycle:case A.ModuleType.Analytics:case A.ModuleType.Cues:case A.ModuleType.UI:case A.ModuleType.Mocks:case A.ModuleType.Auth:break;default:throw new a.UnreachableCaseError(e.module)}},e.prototype.handlePlayerNotification=function(e){this._components.modules.forEach((function(t){t.controller.handlePlayerNotification(e)})),this._timelineStrategy&&this._timelineStrategy.handlePlayerNotification(e)},e.prototype.stop=function(){this._fsm.attemptTransition(u.TransactionEvent.Stop,[{interruptMode:s.InterruptMode.Interrupt}])},e}();t.default=R},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterruptMode=void 0,function(e){e.Interrupt="interrupt",e.Error="error"}(t.InterruptMode||(t.InterruptMode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(39),o={initial:{name:i.TransactionEvent.Start,state:r.TransactionState.Pending},events:[{name:i.TransactionEvent.Idle,from:[r.TransactionState.Finished,r.TransactionState.Interrupted,r.TransactionState.Error],to:r.TransactionState.Pending},{name:i.TransactionEvent.Initialize,from:[r.TransactionState.Pending],to:r.TransactionState.Initializing},{name:i.TransactionEvent.Prepare,from:[r.TransactionState.Waiting,r.TransactionState.Initializing],to:r.TransactionState.Preparing},{name:i.TransactionEvent.Transform,from:[r.TransactionState.Preparing],to:r.TransactionState.Transforming},{name:i.TransactionEvent.Initialized,from:[r.TransactionState.Transforming],to:r.TransactionState.Initialized},{name:i.TransactionEvent.Wait,from:[r.TransactionState.Initializing,r.TransactionState.Initialized],to:r.TransactionState.Waiting},{name:i.TransactionEvent.Validate,from:[r.TransactionState.Waiting,r.TransactionState.Initialized],to:r.TransactionState.Validating},{name:i.TransactionEvent.Validated,from:[r.TransactionState.Validating],to:r.TransactionState.Validated},{name:i.TransactionEvent.Ads_Begin,from:[r.TransactionState.Validated],to:r.TransactionState.Ads_Beginning},{name:i.TransactionEvent.Ads_Playback,from:[r.TransactionState.Ads_Beginning],to:r.TransactionState.Ads_Playback},{name:i.TransactionEvent.Ads_Complete,from:[r.TransactionState.Ads_Beginning,r.TransactionState.Ads_Playback],to:r.TransactionState.Ads_Completed},{name:i.TransactionEvent.Authorize,from:[r.TransactionState.Validated,r.TransactionState.Ads_Completed],to:r.TransactionState.Authorizing},{name:i.TransactionEvent.Authorized,from:[r.TransactionState.Authorizing],to:r.TransactionState.Authorized},{name:i.TransactionEvent.Media_Begin,from:[r.TransactionState.Authorized,r.TransactionState.Ads_Completed],to:r.TransactionState.Media_Beginning},{name:i.TransactionEvent.Media_Playback,from:[r.TransactionState.Media_Beginning],to:r.TransactionState.Media_Playback},{name:i.TransactionEvent.Media_Complete,from:[r.TransactionState.Media_Beginning,r.TransactionState.Media_Playback],to:r.TransactionState.Media_Completed},{name:i.TransactionEvent.Finish,from:[r.TransactionState.Media_Completed],to:r.TransactionState.Finished},{name:i.TransactionEvent.Stop,to:r.TransactionState.Interrupting},{name:i.TransactionEvent.Interrupted,from:[r.TransactionState.Interrupting],to:r.TransactionState.Interrupted},{name:i.TransactionEvent.Error,to:r.TransactionState.Error},{name:i.TransactionEvent.End,from:[r.TransactionState.Finished,r.TransactionState.Interrupted,r.TransactionState.Error],to:r.TransactionState.Ending},{name:i.TransactionEvent.Ended,from:[r.TransactionState.Error,r.TransactionState.Ending],to:r.TransactionState.Ended},{name:i.TransactionEvent.Ads_Begin,from:[r.TransactionState.Media_Playback],to:r.TransactionState.Ads_Beginning},{name:i.TransactionEvent.Media_Playback,from:[r.TransactionState.Ads_Completed],to:r.TransactionState.Media_Playback},{name:i.TransactionEvent.Ads_Begin,from:[r.TransactionState.Media_Completed],to:r.TransactionState.Ads_Beginning},{name:i.TransactionEvent.Finish,from:[r.TransactionState.Ads_Completed],to:r.TransactionState.Finished}]};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolveDRMAuthForPlaylistItem=t.ResolveCDNAuthForPlaylistItem=t.HandleTransactionAccessTokenRefresh=t.HandleTransactionDRMAuth=t.HandleTransactionCDNAuth=void 0;var r=n(0),i=n(8),o=n(1),a=n(25),s=n(43),u=n(109);t.HandleTransactionCDNAuth=function(e,n,s,u){return o.TaskFactory.create((function(o){var c;if(!s.isSectionEnabled(r.ToggleableSections.Auth))return o.reject(i.PlayerErrorFactory.authCdnTokenFailure("Authorization is disabled, but content requires authorization"));if(!s.isSectionEnabled(r.ToggleableSections.AuthCDN))return o.reject(i.PlayerErrorFactory.authCdnTokenFailure("CDN authorization is disabled, but content requires authorization"));if(!u)return o.reject(i.PlayerErrorFactory.authCdnTokenFailure("AuthCDN component is missing"));if(!n.playlistProtection)return o.reject(i.PlayerErrorFactory.authCdnTokenFailure("Could not determine required auth type from content entry file data"));var l=s.getAuthForType(n.playlistProtection);if(!l)return o.reject(i.PlayerErrorFactory.authCdnTokenFailure("Could not find auth config for type: "+n.playlistProtection));var d=null!==(c=n.url)&&void 0!==c?c:"";return t.ResolveCDNAuthForPlaylistItem(u,e,d,l,s.getOrElse("metadata",{})).execute().fold((function(e){return o.reject(e)}),(function(e){var t,r=e.token;a.applyTokenToContentEntryFileData(n,r,null!==(t=l.prefix)&&void 0!==t?t:""),o.resolve({tokenData:e,file:n})}))})).execute()};t.HandleTransactionDRMAuth=function(e,n,a,s,c,l){return o.TaskFactory.create((function(o){var d;if(!s.isSectionEnabled(r.ToggleableSections.Auth))return o.reject(i.PlayerErrorFactory.authDrmTokenFailure("Authorization is disabled, but content requires authorization"));var f=s.get(r.ToggleableSections.AuthDRM);if(f.isNone())return o.reject(i.PlayerErrorFactory.authDrmTokenFailure("Cannot do DRM authed playback, no DRM authentication service provided."));if(0==f.value.enabled){var p=s.get(r.ToggleableSections.DRM);return p.isSome()&&0==p.value.setHeaders?o.resolve({jwt:"",timestamp:Date.now(),ttl:3735928559,version:1}):o.reject(i.PlayerErrorFactory.authDrmTokenFailure("DRM authorization is disabled, but content requires authorization"))}if(!n)return o.reject(i.PlayerErrorFactory.authDrmTokenFailure("Missing asset ID, a required property to get a DRM token."));if(!c)return o.reject(i.PlayerErrorFactory.authDrmTokenFailure("AuthDRM component is missing"));var h=e.entry.metadata;if(!h.mediaId)return o.reject(i.PlayerErrorFactory.authDrmTokenFailure("A mediaID is required to do DRM authenticated playback"));var g=null!==(d=h.mediaId)&&void 0!==d?d:"";t.ResolveDRMAuthForPlaylistItem(c,f.value,{accessToken:null==l?void 0:l.token,accessTokenType:null==l?void 0:l.type,assetId:n,companyId:a,mediaId:g}).execute().fold((function(e){return o.reject(e)}),(function(e){var t,n,a,c="";switch(f.value.type){case r.AuthDrmTokenType.iSP:c=u.AuthDrmTokenHeaderName.iSP;break;default:return o.reject(i.PlayerErrorFactory.authDrmTokenFailure("Unknown DRM service type, please set license server headers manually in config"))}s.getOrElseNullable("auth.drm.setHeaders",!0)&&s.extend({drm:{fairplay:{headers:(t={},t[c]=e.jwt,t)},playready:{headers:(n={},n[c]=e.jwt,n)},widevine:{headers:(a={},a[c]=e.jwt,a)}}}),o.resolve(e)}))})).execute()};t.HandleTransactionAccessTokenRefresh=function(e,t,n){return o.TaskFactory.create((function(r){var o,a;if(n&&!n.isExpired())return r.resolve([e,n]);t.execute({accessToken:null!==(o=e.options.accessToken)&&void 0!==o?o:"",accessTokenType:null!==(a=e.options.accessTokenType)&&void 0!==a?a:""}).fold((function(e){return r.reject(i.PlayerErrorFactory.authRequestFailure("Could not request refreshed accessToken: "+e.toString()))}),(function(t){var n=t.accessToken,i=t.accessTokenType,o=null;try{o=new s.AuthToken(n,i)}catch(t){return o=null,r.resolve([e,null])}e.options.accessToken=n,e.options.accessTokenType=i,r.resolve([e,o])}))})).execute()};t.ResolveCDNAuthForPlaylistItem=function(e,t,n,r,i){return e.handleTokenAuth(t,{url:n,config:r,metadata:i})};t.ResolveDRMAuthForPlaylistItem=function(e,t,n){return e.handleDRMTokenAuth(t,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessRequestedDRMValueRetrievalTasksFor=t.GetRequestedDRMValueRetrievalTaskFor=t.TransactionManifestDRMKeyDataHandler=t.TransactionMediumDRMKeyDataHandler=void 0;var r=n(1),i=n(3),o=n(111),a=n(49),s=n(215),u=n(0),c=r.Log.getLogger("TransactionDRMKeyDataHelpers");t.TransactionMediumDRMKeyDataHandler=function(e,t,n){return r.TaskFactory.create((function(r){e.load(n,t).fold((function(e){return r.reject(e)}),(function(n){o.SelectContentFromContentEntryData(e,n,t).fold((function(e){return r.reject(e)}),(function(e){var t;r.resolve({assetId:null!==(t=e.assetId)&&void 0!==t?t:"",companyId:""})}))}))})).execute()};t.TransactionManifestDRMKeyDataHandler=function(e){return r.TaskFactory.create((function(t){var n={assetId:"",companyId:""};try{switch(e.protectionType){case u.ContentProtectionType.Fairplay:n=s.DRMKeyDataParser.forFairplay(e.rawData);break;case u.ContentProtectionType.Widevine:n=s.DRMKeyDataParser.forWidevine(e.rawData);break;case u.ContentProtectionType.PlayReady:n=s.DRMKeyDataParser.forPlayReady(e.rawData)}}catch(e){return t.reject(i.PlayerErrorFactory.authDrmAssetMetadataFailure(e.toString()))}t.resolve(n)})).execute()};t.GetRequestedDRMValueRetrievalTaskFor=function(e,n,o,s){return r.TaskFactory.create((function(r){var c;switch(n){case u.DRMDataSource.Metadata:switch(e){case"assetId":var l=s.contentFileData.assetId&&s.contentFileData.assetId.length>0,d=s.config.getOrElse("metadata.assetId",""),f=function(){d?r.resolve(d):r.reject(i.PlayerErrorFactory.authDrmAssetMetadataFailure('Unable to resolve "assetId" from "Metadata" data source'))};switch(o){case a.DRMDataSourceRetrievalContext.Pre_Play:case a.DRMDataSourceRetrievalContext.In_Play:l?r.resolve(s.contentFileData.assetId):f()}break;case"companyId":var p=s.config.getOrElse("metadata.companyId","");p?r.resolve(p):r.reject(i.PlayerErrorFactory.authDrmAssetMetadataFailure('Unable to resolve "companyId" from "Metadata" data source'))}break;case u.DRMDataSource.Manifest:var h=s.keyData;if(!h)return r.reject(i.PlayerErrorFactory.authDrmAssetMetadataFailure("Missing DRM raw key data payload"));var g=null===(c=s.parsedKeyDataCache)||void 0===c?void 0:c.get(h);g?r.resolve(g[e]):t.TransactionManifestDRMKeyDataHandler(h).fold((function(e){return r.reject(i.PlayerErrorFactory.authDrmAssetMetadataFailure("Error parsing raw DRM key data: "+e))}),(function(t){var n;null===(n=s.parsedKeyDataCache)||void 0===n||n.set(h,t),r.resolve(t[e])}))}}))};t.ProcessRequestedDRMValueRetrievalTasksFor=function(e,t){return r.TaskFactory.create((function(n){var r=function(t){var o=t.shift();if(!o)return n.reject(i.PlayerErrorFactory.authDrmAssetMetadataFailure("Could not retrieve value for "+e));o.task.execute().fold((function(n){c.debug('Could not resolve requested value: "'+e+'" from source: "'+o.source+'", error: '+n),r(t)}),(function(t){c.debug('Resolved requested value: "'+e+'" from source: "'+o.source+'"'),n.resolve(t)}))};if(0===t.length)return n.reject(i.PlayerErrorFactory.authDrmAssetMetadataFailure('No retrieval tasks to process for requested value: "'+e+'", resolving with empty value'));r(t)}))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(108),t),i(n(208),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(113),t),i(n(211),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultAdCompanionContainer=void 0,t.DefaultAdCompanionContainer={width:100,height:100,active:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tailRec=function(e,t){for(var n=e(t);n.isLeft();)n=e(n.value);return n.value}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaJSONParserV2=void 0;var i=n(119),o=n(1),a=n(3),s=n(0),u=o.Log.getLogger("MediaJSONParser").filter("cms");t.MediaJSONParserV2=function(e,t,n){var c=s.ContentEntryBuilder.forEntryData();if(!n.media)return i.left(a.PlayerErrorFactory.cmsResolutionFailure("Invalid MediaJSON: 'media' missing"));if(!n.mediaId)return i.left(a.PlayerErrorFactory.cmsResolutionFailure("expected mediaId to exist in result from MediaJSON request"));var l=n.media[t.platform];if(!l)return i.left(a.PlayerErrorFactory.cmsResolutionFailure("invalid MediaJSON: "+t.platform+" assets missing"));for(var d=!1,f=0,p=t.mediaTypes;f<p.length;f++){var h=p[f],g=l[h];if(g&&void 0!==(g.cbcs||g.cenc||g.unencrypted)){d=!0;break}}if(!d)return i.left(a.PlayerErrorFactory.cmsResolutionFailure("The requested asset from Medium has no available asset for the configured media types: ["+t.mediaTypes.join(", ")+"]"));var y=t.mediaTypes.filter((function(e){var t=l[e];if(!t)return!1;var n=t.cenc||!1;return n||(n=t.cbcs||!1),n||(n=t.unencrypted||!1),!(!n||!n.url)})).map((function(e){var t=l[e],n=s.EncryptionMode.CENC,r=t.cenc||!1;return r||(r=t.cbcs||!1)&&(n=s.EncryptionMode.CBCS),r||(r=t.unencrypted||!1)&&(n=s.EncryptionMode.Unencrypted),{authType:e,encryptionMode:n,asset:r}})),v=r({mediaId:e.mediaId},n.metadata);c.withId(n.mediaId).withMetadata(v).isLive("live"===n.type);for(var _=0,m=y;_<m.length;_++){var b=m[_],C="none"===b.asset.playlistProtection?null:b.asset.playlistProtection;c.addFile({assetId:b.asset.assetId,contentProtection:b.authType,encryptionMode:b.encryptionMode,playlistProtection:C||null,url:b.asset.url})}var E=y[0].asset;E.captions||(E.captions=[]);for(var T=0,S=E.captions;T<S.length;T++){var P=S[T];P.type?c.addCaptionTrackEmbedded({format:P.type,platform:t.platform,type:"embedded"},{kind:s.TextTrackKind.Caption,channel:P.location||"unknown",lang:P.language||"unknown",label:"English"}):u.debug("Got track without a type: "+o.stringify(P))}if(E.contentSegments)for(var M=0,O=E.contentSegments;M<O.length;M++){var k=O[M];"number"==typeof k.duration&&"number"==typeof k.segmentIdx&&"number"==typeof k.start?c.addSegment(k):u.warn("[mediaJsonProvider] segment missing required properties: "+o.stringify(k))}E.totalRuntime&&c.withTrt(E.totalRuntime),n.validation&&Object.keys(n.validation).forEach((function(e){c.addValidator(e,n.validation[e])}));var A=c.build();return u.debug("[mediaJSONProvider] content entry data: "+o.stringify(A)),i.right(A)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegendProvider=t.isLegend=void 0;var r=n(1),i=n(0),o=r.Log.getLogger("providers").filter("cms");t.isLegend=function(e){return/^cdg$/.test(e)||/^jerbear$/.test(e)};t.LegendProvider=function(e,t){o.debug("[legendProvider] data: "+e);var n=function(e){switch(!0){case/^cdg$/.test(e):return"https://httpstream.ngtv.io/never-forget/whiskey-1.mp4";case/^jerbear$/.test(e):return"https://httpstream.ngtv.io/never-forget/bear-1.mp4"}}(e.playData);t.resolve(i.ContentEntryBuilder.forEntryData().addFile({url:n}).withMetadata({legendMarker:"neverForget"}).build())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DRMKeyDataParser=void 0;var r=n(122),i=function(){function e(){}return e.forWidevine=function(e){var t={companyId:"",assetId:""},n=r.Base64.atob(e).trim();if(n.length<=2)throw new Error("Error parsing given Widevine key data");var i=n.split('istreamplanet"\\')[1].substr(0,92),o=r.Base64.atob(i).split(";");return t.companyId=o[0],t.assetId=o[1],t},e.forFairplay=function(e){var t=e.split("istreamplanet")[1],n=null==t?void 0:t.split("/");if(!n||n.length<3)throw new Error("Error parsing given Fairplay contentId");return{companyId:n[1],assetId:n[2]}},e.forPlayReady=function(e){return{companyId:"",assetId:""}},e}();t.DRMKeyDataParser=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenResponseEventType=void 0,function(e){e.Token_Response_Received="tokenResponseReceived"}(t.TokenResponseEventType||(t.TokenResponseEventType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsMeasurer=void 0;var r=n(1),i=n(87),o=n(16),a=n(0),s=function(){function e(e){this._events=i.createAnalyticsEventCollection(),this._marks={},this._measures={},this._measuringSpec=e}return e.createWithMeasuringSpecification=function(t){return new e(t)},e.prototype._requestModelUpdates=function(e){this.events.modelUpdateRequest.dispatch({changes:e})},e.prototype._addEntry=function(e){var t=e.entryType,n=e.name;switch(t){case"mark":this._marks[n]=e,this._requestModelUpdates([{property:a.ModelKeys.Analytic_Marks,value:r.ObjectUtils.extendDeep({},this._marks)}]),this._events.markCreated.dispatch({mark:e}),this._determineMeasures();break;case"measure":this._measures[n]=e,this._requestModelUpdates([{property:a.ModelKeys.Analytic_Measures,value:r.ObjectUtils.extendDeep({},this._measures)}]),this._events.measureCreated.dispatch({measure:e});break;default:throw new r.UnreachableCaseError(t)}return e},e.prototype._determineMeasures=function(){var e=this;Object.keys(this._measuringSpec).forEach((function(t){var n=e._measuringSpec[t],r=e._marks[n.mark1],i=e._marks[n.mark2];r&&i&&(e._measures[t]||e.createMeasureFor(t,r,i))}))},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),e.prototype.createMarkFor=function(e){return this._addEntry({entryType:"mark",duration:0,name:e,startTime:Date.now()})},e.prototype.createMeasureFor=function(e,t,n){return this._addEntry({entryType:"measure",name:e,duration:(n.startTime-t.startTime)/1e3,startTime:Date.now()})},e.prototype.handleModuleNotification=function(e){var t=e.module,n=e.result;switch(t){case a.ModuleType.Video_Engine:switch(n.type){case a.VideoEngineEventType.Media_Started:this.createMarkFor(a.AnalyticsMarkName.MediaEngine_Started)}}},e.prototype.handlePlayerNotification=function(e){switch(e.eventType){case o.PlayerControllerEventType.Transaction_State_Changed:var t=e.eventResult,n=t.currentState;switch(t.previousState){case a.TransactionState.Initializing:switch(n){case a.TransactionState.Waiting:break;default:this.createMarkFor(a.AnalyticsMarkName.Transaction_Details_Resolved)}break;case a.TransactionState.Waiting:this.createMarkFor(a.AnalyticsMarkName.Transaction_User_Action)}switch(n){case a.TransactionState.Initializing:this.createMarkFor(a.AnalyticsMarkName.Transaction_Initializing);break;case a.TransactionState.Preparing:this.createMarkFor(a.AnalyticsMarkName.Transaction_Preparing);break;case a.TransactionState.Transforming:this.createMarkFor(a.AnalyticsMarkName.Transaction_Transforming);break;case a.TransactionState.Initialized:this.createMarkFor(a.AnalyticsMarkName.Transaction_Initialized);break;case a.TransactionState.Media_Beginning:this.createMarkFor(a.AnalyticsMarkName.Transaction_Media_Beginning);break;case a.TransactionState.Waiting:this.createMarkFor(a.AnalyticsMarkName.Transaction_Waiting)}}},e.prototype.resetForPlay=function(){this._marks={},this._measures={}},e.prototype.destroy=function(){this._marks={},this._measures={}},e}();t.AnalyticsMeasurer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMeasuringSpecification=void 0;var r=n(0);t.DefaultMeasuringSpecification=function(){var e;return(e={})[r.AnalyticsMeasureName.CMS_Resolution]={mark1:r.AnalyticsMarkName.Transaction_Initializing,mark2:r.AnalyticsMarkName.Transaction_Details_Resolved},e[r.AnalyticsMeasureName.Transaction_Setup]={mark1:r.AnalyticsMarkName.Transaction_Preparing,mark2:r.AnalyticsMarkName.Transaction_Transforming},e[r.AnalyticsMeasureName.Transaction_Initialized]={mark1:r.AnalyticsMarkName.Transaction_Initializing,mark2:r.AnalyticsMarkName.Transaction_Initialized},e[r.AnalyticsMeasureName.Content_Resolution]={mark1:r.AnalyticsMarkName.Transaction_Media_Beginning,mark2:r.AnalyticsMarkName.MediaEngine_Started},e[r.AnalyticsMeasureName.Total_Time_To_First_Frame]={mark1:r.AnalyticsMarkName.Transaction_Initializing,mark2:r.AnalyticsMarkName.MediaEngine_Started},e[r.AnalyticsMeasureName.Time_Waiting_For_User]={mark1:r.AnalyticsMarkName.Transaction_Waiting,mark2:r.AnalyticsMarkName.Transaction_User_Action},e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logCallback=t.setLogger=void 0;var r,i=n(52);t.setLogger=function(e){r=e},t.logCallback=function(e,t){switch(t){case i.Constants.LogLevel.DEBUG:r.debug(e);break;case i.Constants.LogLevel.INFO:r.info(e);break;case i.Constants.LogLevel.WARNING:r.warn(e);break;case i.Constants.LogLevel.ERROR:r.error(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playlistItemToCreateSessionMetadata=void 0;var r=n(45);t.playlistItemToCreateSessionMetadata=function(e,t){var n,i,o;return{duration:null!==(i=null===(n=null==e?void 0:e.entry)||void 0===n?void 0:n.trt)&&void 0!==i?i:-1,streamUrl:t.url||"",streamType:(null===(o=null==e?void 0:e.entry)||void 0===o?void 0:o.isLive)?r.StreamDeliveryType.Live:r.StreamDeliveryType.VOD}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(11),i=n(4),o=n(5),a=n(52),s=n(0),u=function(){function e(e,t,n,i,o){this._deviceType=e,this._tubVersion=t,this._deviceModel=null!=i?i:r.PlatformInfo.device.hardwareModel,this._deviceBrand=null!=o?o:r.PlatformInfo.device.hardwareModel,this._overrides=n}return e.prototype.getBrowserName=function(){var e=i.fromNullable(r.PlatformInfo.nexus.nexusTarget);return e.isNone()?null:e.value===o.NexusPlatform.Web?i.fromNullable(r.PlatformInfo.device.softwarePlatform).getOrElse(null):null},e.prototype.getBrowserVersion=function(){var e=i.fromNullable(r.PlatformInfo.nexus.nexusTarget);return e.isNone()?null:e.value===o.NexusPlatform.Web?i.fromNullable(r.PlatformInfo.device.softwareVersion).getOrElse(null):null},e.prototype.getDeviceBrand=function(){return this._deviceBrand},e.prototype.getDeviceCategory=function(){var e=i.fromNullable(r.PlatformInfo.nexus.nexusTarget),t=i.fromNullable(r.PlatformInfo.nexus.nexusVariant);if(!e.isNone()){if(i.fromNullable(r.PlatformInfo.device.isEmulator).getOrElse(!1))return a.Constants.DeviceCategory.DEVICE_SIMULATOR;switch(e.value){case"web":return a.Constants.DeviceCategory.WEB;case"android":return a.Constants.DeviceCategory.ANDROID_DEVICE;case"ios":return a.Constants.DeviceCategory.APPLE_DEVICE;case"react-native":if(t.isNone())return;switch(t.value){case"android":return a.Constants.DeviceCategory.ANDROID_DEVICE;case"ios":return a.Constants.DeviceCategory.APPLE_DEVICE;default:return}default:return}}},e.prototype.getDeviceManufacturer=function(){return r.PlatformInfo.device.hardwareManufacturer},e.prototype.getDeviceModel=function(){return this._deviceModel},e.prototype.getDeviceType=function(){switch(this._deviceType){case s.DeviceType.Fire_Tv:case s.DeviceType.Tv_Os:return a.Constants.DeviceType.SETTOP;case s.DeviceType.Android_Tv:return a.Constants.DeviceType.SMARTTV;case s.DeviceType.Console:return a.Constants.DeviceType.CONSOLE;case s.DeviceType.Desktop:return a.Constants.DeviceType.DESKTOP;case s.DeviceType.Phone:return a.Constants.DeviceType.MOBILE;case s.DeviceType.Tablet:return a.Constants.DeviceType.TABLET;case s.DeviceType.Unknown:return}},e.prototype.getDeviceVersion=function(){return i.fromNullable(r.PlatformInfo.device.hardwareVersion).getOrElse(null)},e.prototype.getOperatingSystemName=function(){return r.PlatformInfo.device.softwarePlatform},e.prototype.getOperatingSystemVersion=function(){var e=i.fromNullable(r.PlatformInfo.nexus.nexusTarget);if(!e.isNone())switch(e.value){case"android":return this._overrides["device.osVersion"];default:return r.PlatformInfo.device.softwareVersion}},e.prototype.release=function(){},e.prototype.getFrameworkName=function(){return"TUB"},e.prototype.getFrameworkVersion=function(){var e=i.fromNullable(r.PlatformInfo.nexus.nexusTarget),t=i.fromNullable(r.PlatformInfo.nexus.nexusVariant);if(e.isNone())return"unknown";switch(e.value){case"web":var n=s.PlayerVersion.dependencyVersions.find((function(e){return"Tub"===e.name}));return n?n.version:"unknown";case"android":case"ios":return this._tubVersion;case"react-native":if(t.isNone())return"unknown";switch(t.value){case"android":case"ios":return this._tubVersion;default:return"unknown"}default:return"unknown"}},e.prototype.getScreenWidth=function(){var e;if(null===(e=null===window||void 0===window?void 0:window.screen)||void 0===e?void 0:e.width)return window.screen.width},e.prototype.getScreenHeight=function(){var e;if(null===(e=null===window||void 0===window?void 0:window.screen)||void 0===e?void 0:e.height)return window.screen.height},e.prototype.getScaleFactor=function(){if(null===window||void 0===window?void 0:window.devicePixelRatio)return window.devicePixelRatio},e}();t.Metadata=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadData=t.saveData=void 0;var r=n(12);t.saveData=function(e,t,n,i){var o=e+"."+t;r.Storage.set(o,n).then((function(){return i(!0,null)})).catch((function(e){return i(!1,e.toString())}))},t.loadData=function(e,t,n){var i=e+"."+t;r.Storage.get(i).then((function(e){return n(!0,e)})).catch((function(e){return n(!1,e.toString())}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CuesController=void 0;var r=n(1),i=n(13),o=n(224),a=n(9),s=n(0),u=function(){function e(e){var t=this;this._onCuesManagerEvent=function(e,n){t._dispatchModuleNotification({module:s.ModuleType.Cues,category:s.ModuleEventCategory.Component_Event,result:n})},this.moduleNotification=r.createEvent("moduleNotification"),this._cuesManager=e,this._bindings=[this._cuesManager.events.listen(this._onCuesManagerEvent)]}return e.prototype._dispatchModuleNotification=function(e){this.moduleNotification.dispatch(e)},e.prototype._handlePruneMonitorEvent=function(e){switch(e.type){case a.PruneMonitorEventType.Sliding_Window_Changed:this._cuesManager.prune(r.TimeRange.createWithEnd(0,e.minTime))}},e.prototype.setup=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return r.TaskFactory.create((function(n){var r=e.playerModel;t._cuesManager.init({model:r}),t._model=r,n.resolve()})).execute()},e.prototype.updateConfig=function(e){},e.prototype.processCommand=function(e){},e.prototype.handleModuleNotification=function(e){switch(e.module){case s.ModuleType.Video_Engine:var t=e.result;switch(t.type){case s.VideoEngineEventType.Media_Timed_Metadata_Parsed:var n=o.createAnonymousCueFromTimedMetadata(t);this._cuesManager.processCue(n)}}},e.prototype.handlePlayerNotification=function(e){switch(e.sourceType){case i.PlayerNotificationSourceType.Monitors:switch(e.eventCategory){case i.PlayerNotificationEventCategory.Prune:this._handlePruneMonitorEvent(e.eventResult)}}},e.prototype.destroy=function(){var e=this;return new Promise((function(t,n){e._bindings.forEach((function(e){return e.detach()})),e._bindings.length=0,e._cuesManager.destroy(),t()}))},e}();t.CuesController=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoEngineMetadataSourceToCueSource=t.videoEngineMetadataSubTypeToCueType=t.determineCueTypeFromVideoEngineMetadata=t.normalizeCueContent=t.createAnonymousCueFromTimedMetadata=void 0;var r=n(1),i=n(0);t.createAnonymousCueFromTimedMetadata=function(e){var n="number"!=typeof e.start||Number.isNaN(e.start)?0:e.start,i="number"!=typeof e.end||Number.isNaN(e.end)?n+1:e.end,o=t.determineCueTypeFromVideoEngineMetadata(e);return{type:o,source:t.videoEngineMetadataSourceToCueSource(e.source),data:{timeReceived:e.timeReceived,range:r.TimeRange.createWithEnd(n,i),content:t.normalizeCueContent(o,e.metadata)}}};t.normalizeCueContent=function(e,t){var n={subType:"",attributes:{}};if("object"!=typeof t||null===t)return n;switch(n.subType=r.ObjectUtils.get(t,"subType",""),n.attributes=r.ObjectUtils.get(t,"attributes",{}),e){case i.CueType.SCTE:n.payload=r.ObjectUtils.getOrElse(t,"payload",t.attributes.CUE);break;case i.CueType.ID3:n.payload={id:r.ObjectUtils.get(t,"id",""),message:r.ObjectUtils.get(t,"messageData","")}}return n};t.determineCueTypeFromVideoEngineMetadata=function(e){switch(e.metadataType){case i.VideoEngineMetadataType.ID3:return i.CueType.ID3;case i.VideoEngineMetadataType.EMSG:return e.metadata.subType===i.VideoEngineMetadataType.ID3?i.CueType.ID3:i.CueType.Unknown;case i.VideoEngineMetadataType.CUETAG:return t.videoEngineMetadataSubTypeToCueType(e.metadata.subType);case i.VideoEngineMetadataType.SCTE:return i.CueType.SCTE;default:return i.CueType.Unknown}};t.videoEngineMetadataSubTypeToCueType=function(e){switch(e){case"CUE-IN":return i.CueType.Ext_In;case"CUE-OUT":return i.CueType.Ext_Out;case"CUE-OUT-CONT":return i.CueType.Ext_Out_Cont;case"SCTE":return i.CueType.SCTE;default:return i.CueType.Unknown}};t.videoEngineMetadataSourceToCueSource=function(e){switch(e){case i.VideoEngineMetadataSourceType.EMBEDDED:return i.CueSource.Embedded;case i.VideoEngineMetadataSourceType.TAG:return i.CueSource.Manifest;case i.VideoEngineMetadataSourceType.OTHER:default:return i.CueSource.Unknown}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MocksController=void 0;var r=n(1),i=n(26),o=n(128),a=n(0),s=r.Log.getLogger("MocksController").filter("mocks"),u=function(){function e(e){var t=this;this._onMocksManagerEvent=function(e,n){t._dispatchModuleNotification({module:a.ModuleType.Mocks,category:a.ModuleEventCategory.Component_Event,result:n})},this.moduleNotification=r.createEvent("moduleNotification"),this._mocksManager=e,this._bindings=[this._mocksManager.events.listen(this._onMocksManagerEvent)]}return e.prototype._dispatchModuleNotification=function(e){this.moduleNotification.dispatch(e)},e.prototype._isMocksConfigEnabled=function(){var e,t,n,r;return(null===(t=null===(e=this._config)||void 0===e?void 0:e.debug)||void 0===t?void 0:t.enabled)&&(null===(r=null===(n=this._config)||void 0===n?void 0:n.debug)||void 0===r?void 0:r.enableMocks)},e.prototype._queueConfiguredMessages=function(){var e,t,n,r,i=this;(e=[]).concat.apply(e,null!==(r=null===(n=null===(t=this._config.mocks)||void 0===t?void 0:t.timedMetadata)||void 0===n?void 0:n.messages)&&void 0!==r?r:[]).forEach((function(e){return i._mocksManager.queueMessage(e)}))},e.prototype.setup=function(e){for(var t=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return r.TaskFactory.create((function(n){var r=e.playerModel,o=e.playerConfig;t._model=r,t._config=o,t._mocksManager.init({model:r}),t._isMocksConfigEnabled()?(t._mocksManager.enable(),t._queueConfiguredMessages(),t._mocksManager.processQueuedMessages(i.MocksExecutionState.Pre_Play)):s.debug("Mocks module initialized but disabled - either debug mode or mocks are disabled"),n.resolve()})).execute()},e.prototype.updateConfig=function(e){return this._config=r.ObjectUtils.extendDeep({},this._config,e),!this._mocksManager.enabled&&this._isMocksConfigEnabled()?(s.info("Enabling mocking module in response to ad-hoc config update"),this._mocksManager.enable(),this._queueConfiguredMessages(),void this._mocksManager.processQueuedMessages(i.MocksExecutionState.Pre_Play)):this._mocksManager.enabled&&!this._isMocksConfigEnabled()?(s.info("Disabling mocking module in response to ad-hoc config update"),void this._mocksManager.disable()):void 0},e.prototype.processCommand=function(e){},e.prototype.handleModuleNotification=function(e){switch(e.module){case a.ModuleType.Timeline:switch(e.result.type){case o.TimelineEventType.Started:this._mocksManager.processQueuedMessages(i.MocksExecutionState.In_Play)}}},e.prototype.handlePlayerNotification=function(e){},e.prototype.destroy=function(){var e=this;return new Promise((function(t,n){e._bindings.forEach((function(e){return e.detach()})),e._bindings.length=0,e._mocksManager.destroy(),t()}))},e}();t.MocksController=u},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(74),t),i(n(15),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(31),t),i(n(53),t),i(n(228),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LiveTimelineStrategy=void 0;var o=n(1),a=n(130),s=n(13),u=n(53),c=n(9),l=n(0),d=o.Log.getLogger("LiveTimelineStrategy").filter("timeline"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._handleVideoEngineEvent=function(e){switch(e.type){case l.VideoEngineEventType.Media_Time_Changed:this._timeline.updateTime(e.time);break;case l.VideoEngineEventType.Ad_Time_Changed:var t=e,n=this._model.mediaTime+t.time;this._timeline.updateTime(n)}},t.prototype._handlePruneMonitorEvent=function(e){switch(e.type){case c.PruneMonitorEventType.Sliding_Window_Changed:var t=e.minTime,n=this._removeMarkers(this._getMarkersBeforeTime(t));d.debug("Removed "+n.length+' markers within range: "0 -> '+t+'" in response to a prune event')}},t.prototype._getMarkersBeforeTime=function(e){var t=o.TimeRange.createWithEnd(0,e);return this._timeline.iterator().filter((function(e){return!o.TimeRangeUtils.outsideRange(e.range,t)}))},t.prototype._removeMarkers=function(e){var t=this,n=[];e.forEach((function(e){n.push(t._timeline.removeMarker(e))}));var r=n.filter((function(e){return null===e})),i=n.filter((function(e){return null!==e}));return r.length>0&&d.warn("Could not remove "+r.length+" markers from timeline"),i},t.prototype.populateTimeline=function(e){if(0===(e=(e=e||[]).concat(this._playlistItem.entry.segments.map(u.MarkerConverter.fromContentSegment))).length)return[];var t=this._timeline.addMany(e);return e.filter((function(e){return 0===t.filter((function(t){return t.id===e.id})).length}))},t.prototype.handleModuleNotification=function(e){switch(e.category){case l.ModuleEventCategory.Component_Event:switch(e.module){case l.ModuleType.Video_Engine:this._handleVideoEngineEvent(e.result)}}},t.prototype.handlePlayerNotification=function(t){switch(t.sourceType){case s.PlayerNotificationSourceType.Monitors:switch(t.eventCategory){case s.PlayerNotificationEventCategory.Prune:this._handlePruneMonitorEvent(t.eventResult)}}e.prototype.handlePlayerNotification.call(this,t)},t}(a.DefaultTimelineStrategy);t.LiveTimelineStrategy=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.VODTimelineStrategy=void 0;var o=n(1),a=n(15),s=n(53),u=n(130),c=n(0),l=o.Log.getLogger("VODTimelineStrategy").filter("timeline"),d=function(e){function t(){var t=e.call(this)||this;return t._lastTimeUpdate=0,t}return i(t,e),t.prototype._updateTimeline=function(e){e>this._lastTimeUpdate?(this._lastTimeUpdate=e,this._timeline.updateTime(e)):l.warn("Could not update timeline, new time value is in the past; skipping")},t.prototype._onTimelineEvent=function(e){switch(e.type){case a.TimelineEventType.Marker_Deactivated:switch(e.marker.type){case c.MarkerType.Ad_Break:this._timeline.removeMarker(e.marker)||l.warn("Could not remove deactivated ad marker: "+e.marker)}}},t.prototype._onVideoEngineEvent=function(e){switch(e.type){case c.VideoEngineEventType.Media_Time_Changed:var t=e.time;this._updateTimeline(this._getOffsetMediaTimeFor(t));break;case c.VideoEngineEventType.Ad_Time_Changed:var n=e;this._timeline.updateTime(this._getOffsetMediaTimeFor(this._model.mediaTime)+n.time);break;case c.VideoEngineEventType.Media_Seeking_Finished:this._lastTimeUpdate=0;var r=e.time;this._updateTimeline(r)}},t.prototype._getOffsetMediaTimeFor=function(e){return this._model.adBreaks.filter((function(t){return t.scheduleTime<e})).reduce((function(e,t){return e+t.duration}),0)+e},t.prototype.populateTimeline=function(e){if(e=e||[],this._config.features.tve.enabled&&(e=e.concat(this._playlistItem.entry.segments.map(s.MarkerConverter.fromContentSegment))),0===e.length)return[];var t=this._timeline.addMany(e);return e.filter((function(e){return 0===t.filter((function(t){return t.id===e.id})).length}))},t.prototype.handleModuleNotification=function(e){switch(e.category){case c.ModuleEventCategory.Component_Event:switch(e.module){case c.ModuleType.Video_Engine:this._onVideoEngineEvent(e.result);break;case c.ModuleType.Timeline:this._onTimelineEvent(e.result)}}},t}(u.DefaultTimelineStrategy);t.VODTimelineStrategy=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerCommandHelper=void 0;var r=n(0),i=function(){function e(){}return e.isPriority=function(e){switch(e.type){case r.PlayerCommandType.Detach:case r.PlayerCommandType.Destroy:return!0;default:return!1}},e.canProcess=function(e,t,n){switch(e.type){case r.PlayerCommandType.Attach:return t===r.PlayerState.Initialized||t===r.PlayerState.Detached||t===r.PlayerState.Detaching||t===r.PlayerState.Listening;case r.PlayerCommandType.Proceed:return n===r.TransactionState.Waiting;case r.PlayerCommandType.Send_Message_To_UI:return t===r.PlayerState.Listening||t===r.PlayerState.Initialized||t===r.PlayerState.Attaching||t===r.PlayerState.Attached;case r.PlayerCommandType.Detach:case r.PlayerCommandType.Enter_Fullscreen:case r.PlayerCommandType.Exit_Fullscreen:case r.PlayerCommandType.Update_Config:case r.PlayerCommandType.Preload_Content:case r.PlayerCommandType.Play:case r.PlayerCommandType.Resize:case r.PlayerCommandType.Set_Player_Mode:case r.PlayerCommandType.Report_Event:case r.PlayerCommandType.Report_Error:case r.PlayerCommandType.Ad_Clicked:case r.PlayerCommandType.Message_From_UI:case r.PlayerCommandType.Captions_Update_Settings:return t===r.PlayerState.Listening;case r.PlayerCommandType.Pause:case r.PlayerCommandType.Resume:case r.PlayerCommandType.Captions_Select_Track:case r.PlayerCommandType.Captions_Select_Track_By_Lang:case r.PlayerCommandType.Captions_Set_Enabled:return n===r.TransactionState.Media_Playback||n===r.TransactionState.Ads_Playback;case r.PlayerCommandType.Seek:case r.PlayerCommandType.Seek_To_Live:return n===r.TransactionState.Media_Playback;case r.PlayerCommandType.Stop:if(t!==r.PlayerState.Listening)return!1;switch(n){case r.TransactionState.Pending:case r.TransactionState.Interrupting:case r.TransactionState.Interrupted:case r.TransactionState.Ending:case r.TransactionState.Ended:return!1;default:return!0}case r.PlayerCommandType.Replay:switch(n){case r.TransactionState.Media_Playback:case r.TransactionState.Ended:return!0;default:return!1}case r.PlayerCommandType.Destroy:switch(t){case r.PlayerState.Pending:case r.PlayerState.Listening:case r.PlayerState.Detached:return!0;default:return!1}default:return!1}},e.canFutureQueue=function(e){switch(e){case r.PlayerState.Listening:case r.PlayerState.Error:case r.PlayerState.Destroying:case r.PlayerState.Destroyed:return!1;default:return!0}},e}();t.PlayerCommandHelper=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(44),a=n(24),s=n(133),u=n(56),c=r(n(236)),l=n(112),d=n(3),f=n(123),p=n(124),h=n(0),g=function(){function e(e){var t=this;this._onFsmEvent=function(e,n){var r=n.from,o=n.to;switch(e){case i.FsmEventType.State_Changed:switch(t._notifyStateChanged(r,o),o){case a.InitState.Initializing:if(!t._hasRequiredComponents())return t._logger.warn("[_onFsmEvent] Component registry is missing required components"),void t._fsm.fireTransition(a.InitEvent.Error,[{error:d.PlayerErrorFactory.playerInitFailure("Component registry is missing required components")}]);t._validateAndApplyConfig(t._rawConfig),t._fsm.fireTransition(a.InitEvent.Initialized)}break;case i.FsmEventType.Error:t._notifyStateChanged(t._fsm.currentState(),a.InitState.Error)}},this._playerId=e,this._logger=i.Log.getLogger("InitController"+this._playerId),this.events=s.createInitEventCollection(),this._rawConfig={},this._fsm=new i.Fsm,this._bindings=[],this._configManager=new o.ConfigManager(o.PlayerConfigDefaults,l.DefaultMergeStrategyHandler(!0),f.SetupConfigValidator)}return e.prototype._notifyStateChanged=function(e,t,n){this._logger.info("[_notifyStateChanged] "+e+" -> "+t),this.events.stateChanged.dispatch({previousState:e,currentState:t,args:n})},e.prototype._validateAndApplyConfig=function(e){return p.LogConfigValidationResult(this._logger,this._configManager.validate(e)),this._configManager.apply(e)},e.prototype._hasRequiredComponents=function(){var e=u.ComponentRegistry.getAllByCategory(h.ComponentCategory.Video_Engine,this._playerId),t=u.ComponentRegistry.getAllByCategory(h.ComponentCategory.PlatformHelper,this._playerId),n=e.length>0,r=t.length>0;return n&&r},e.prototype.init=function(e){this._rawConfig=e,this._fsm.init(c.default),this._bindings.push(this._fsm.events.listen(this._onFsmEvent)),this._fsm.fireTransition(a.InitEvent.Initialize)},Object.defineProperty(e.prototype,"config",{get:function(){return this._configManager.createConfigInstance().toData()},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._bindings.forEach((function(e){return e.detach()})),this._bindings=[]},e}();t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i={initial:{name:r.InitEvent.Start,state:r.InitState.Pending},events:[{name:r.InitEvent.Initialize,from:[r.InitState.Pending],to:r.InitState.Initializing},{name:r.InitEvent.Initialized,from:[r.InitState.Initializing],to:r.InitState.Initialized},{name:r.InitEvent.Error,from:[r.InitState.Initializing],to:r.InitState.Error}]};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(40),i=n(0),o={initial:{name:r.ViewEvent.Start,state:i.ViewState.Pending},events:[{name:r.ViewEvent.Create,from:[i.ViewState.Pending],to:i.ViewState.Creating},{name:r.ViewEvent.Created,from:[i.ViewState.Creating],to:i.ViewState.Created},{name:r.ViewEvent.Attach,from:[i.ViewState.Created,i.ViewState.Detached],to:i.ViewState.Attaching},{name:r.ViewEvent.Attached,from:[i.ViewState.Attaching,i.ViewState.Attached],to:i.ViewState.Attached},{name:r.ViewEvent.Windowed,from:[i.ViewState.Attached,i.ViewState.Entering_Fullscreen,i.ViewState.Exiting_Fullscreen,i.ViewState.Exiting_Remote],to:i.ViewState.Windowed},{name:r.ViewEvent.Enter_Fullscreen,from:[i.ViewState.Windowed,i.ViewState.Remote],to:i.ViewState.Entering_Fullscreen},{name:r.ViewEvent.Fullscreen,from:[i.ViewState.Attached,i.ViewState.Entering_Fullscreen,i.ViewState.Exiting_Fullscreen,i.ViewState.Exiting_Remote],to:i.ViewState.Fullscreen},{name:r.ViewEvent.Exit_Fullscreen,from:[i.ViewState.Fullscreen,i.ViewState.Remote],to:i.ViewState.Exiting_Fullscreen},{name:r.ViewEvent.Enter_Remote,from:[i.ViewState.Windowed,i.ViewState.Fullscreen,i.ViewState.Attached],to:i.ViewState.Entering_Remote},{name:r.ViewEvent.Remote,from:[i.ViewState.Entering_Remote,i.ViewState.Entering_Fullscreen,i.ViewState.Exiting_Fullscreen],to:i.ViewState.Remote},{name:r.ViewEvent.Exit_Remote,from:[i.ViewState.Remote],to:i.ViewState.Exiting_Remote},{name:r.ViewEvent.Detach,from:[i.ViewState.Windowed,i.ViewState.Fullscreen,i.ViewState.Remote],to:i.ViewState.Detaching},{name:r.ViewEvent.Detached,from:[i.ViewState.Detaching],to:i.ViewState.Detached},{name:r.ViewEvent.Destroy,to:i.ViewState.Destroying},{name:r.ViewEvent.Destroyed,from:[i.ViewState.Destroying],to:i.ViewState.Destroyed},{name:r.ViewEvent.Error,to:i.ViewState.Error}]};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultAuthDRMHandler=t.isErrorResponse=t.isSuccessResponse=void 0;var r=n(1),i=n(3),o=n(136);function a(e){return void 0!==e.jwt}function s(e){return void 0!==e.auth}t.isSuccessResponse=a,t.isErrorResponse=s;var u=function(){function e(){}return e.handleDRMTokenAuth=function(e,t){var n={assetId:t.assetId,appId:e.appId,format:"json",mediaId:t.mediaId};t.accessToken&&(n.accessToken=t.accessToken),t.accessTokenType&&(n.accessTokenType=t.accessTokenType),t.deviceId&&(n.deviceId=t.deviceId);var u=r.parse(e.serviceUrl),c=u.toString();u.set("query",n);var l=r.NetworkTask(u.toString());return r.TaskFactory.create((function(e){l.fold((function(t){var n=function(e,t){var n=i.PlayerErrorFactory.authRequestFailure("[handleDRMTokenAuth] Token service request failed");n.setMetadata({recoverySuggestion:i.PlayerRecoveryMessaging.SUGGEST_NETWORK_REQUEST_INSPECTION,subErrorCode:t.status.toString(),subErrorMessage:t.statusText}),e.reject(n)};r.isResponse(t)&&t.json().then((function(r){if(s(r))return e.reject(o.resolveDRMTokenError(r.auth.error.code,"handleDRMTokenAuth").setMetadata({subErrorCode:r.auth.error.code,subErrorMessage:r.auth.error.message}));n(e,t)})).catch((function(){n(e,t)}))}),(function(t){return s(t)?e.reject(o.resolveDRMTokenError(t.auth.error.code,"handleDRMTokenAuth").setMetadata({subErrorCode:t.auth.error.code,subErrorMessage:t.auth.error.message})):a(t)?void e.resolve({jwt:t.jwt,ttl:t.ttl,timestamp:t.timestamp,version:t.version,turnerToken:t.turner,requestUrl:c}):e.reject(i.PlayerErrorFactory.authDrmTokenFailure("[handleDRMTokenAuth] Token service response was not an error, but didn't match expectation."))})),l.execute()})).execute()},e}();t.DefaultAuthDRMHandler=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultAuthHandler=void 0;var r,i=n(1),o=n(3),a=n(136),s=i.Log.getLogger("DefaultAuthHandler").filter("auth");!function(e){e.JSON="json"}(r||(r={}));var u=function(){function e(){}return e.handleTokenAuth=function(e,t){var n=t.config,u=e.options,c=t.metadata,l=i.getQueryAsMap(n.serviceUrl),d=i.ObjectUtils.has(l,"appId"),f=i.directory(t.url)+"*",p={format:r.JSON,path:f};t.config.profile&&(p.profile=t.config.profile),d?s.warn("[handleTokenAuth] You have manually added the appId to the serviceUrl. Please add it to the player configuration instead."):(null==c?void 0:c.appId)&&n.appId&&(p.appId=n.appId),u.mvpdId&&(p.mvpdId=u.mvpdId),u.accessTokenType&&(p.accessTokenType=u.accessTokenType),u.accessToken&&(p.accessToken=u.accessToken),u.tokenParams&&i.ObjectUtils.extendDeep(p,u.tokenParams),i.ObjectUtils.mapValues(p,(function(e,t){return encodeURIComponent(t)}));var h=decodeURIComponent(i.appendQuery(n.serviceUrl,p));return i.TaskFactory.create((function(e){i.NetworkTask(h).fold((function(t){var n=function(e,t){var n=o.PlayerErrorFactory.cmsRequestFailure("[mediaJSONProvider] request failed");n.setMetadata({recoverySuggestion:o.PlayerRecoveryMessaging.SUGGEST_NETWORK_REQUEST_INSPECTION,subErrorCode:t.status.toString(),subErrorMessage:t.statusText}),e.reject(n)};i.isResponse(t)&&t.json().then((function(r){if(function(e){return void 0!==e.error}(r)){var i=a.resolveCDNTokenError(r.error.code,"handleTokenAuth").setMetadata({recoverySuggestion:o.PlayerRecoveryMessaging.SUGGEST_NETWORK_REQUEST_INSPECTION,subErrorCode:r.error.code,subErrorMessage:r.error.message});return e.reject(i)}n(e,t)})).catch((function(){n(e,t)}))}),(function(t){if(t&&i.ObjectUtils.has(t,"auth")){var n=i.ObjectUtils.getOrElse(t,"auth",{});n.error?e.reject(a.resolveCDNTokenError(n.error.code,"handleTokenAuth").setMetadata({subErrorCode:n.error.code,subErrorMessage:n.error.message})):n.token?e.resolve({token:n.token,turnerToken:n.turner,requestUrl:h}):e.reject(o.PlayerErrorFactory.authCdnTokenFailure("[handleTokenAuth] Token service response did not not contain a token"))}else e.reject(o.PlayerErrorFactory.authCdnTokenFailure("[handleTokenAuth] Token service response could not be parsed"))})).execute()})).execute()},e}();t.DefaultAuthHandler=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CuesManager=void 0;var r=n(21),i=n(1),o=n(241),a=n(0),s=i.Log.getLogger("CuesManager").filter("cues"),u=function(){function e(){var e=this;this._onCueEvent=function(t,n){switch(t){case a.CueEventType.State_Changed:var r=e._findCueById(n.id);if(!r){s.warn("Could not handle cue state changed event, unable to locate cue");break}var i=e._findPositionOfCue(r);e._requestModelChanges([{mode:a.ModelUpdateMode.Array_Remove_By_Position,property:a.ModelKeys.Timed_Metadata_Cues,value:i},{mode:a.ModelUpdateMode.Array_Append,property:a.ModelKeys.Timed_Metadata_Cues,value:r.toCue()}]),e._cues.splice(i,1),e._cues.push(r),e._events.cueStateChanged.dispatch(n);break;case a.CueEventType.Processed:e._events.cueProcessed.dispatch(n);break;case a.CueEventType.Activated:e._events.cueActivated.dispatch(n)}},this._events=r.createCuesManagerEventCollection(),this._cues=[],this._cueBindings=new Map}return e.prototype._requestModelChanges=function(e){this._events.modelUpdateRequest.dispatch({changes:e})},e.prototype._addCueListeners=function(e){this._cueBindings.set(e.id,e.events.listen(this._onCueEvent))},e.prototype._removeCueListeners=function(e){var t=this._cueBindings.get(e.id);null==t||t.detach(),this._cueBindings.delete(e.id)},e.prototype._removeStatefulCue=function(e){this._removeCueListeners(e),e.destroy();var t=this._findPositionOfCue(e);this._requestModelChanges([{mode:a.ModelUpdateMode.Array_Remove_By_Position,property:a.ModelKeys.Timed_Metadata_Cues,value:t}]),this._cues.splice(t,1)},e.prototype._findCueById=function(e){return this._cues.find((function(t){return t.id===e}))||null},e.prototype._findPositionOfCue=function(e){return this._cues.indexOf(e)},e.prototype._isDuplicate=function(e,t,n){return this._cues.filter((function(n){return n.type===e&&n.source===t})).filter((function(t){var r=t.data.range.equals(n.range),o=i.isEqual(t.data.content.attributes,n.content.attributes),s=t.data.content.subType===n.content.subType,u=!0;switch(e){case a.CueType.SCTE:var c=t.data.content,l=n.content;u=l.payload?i.isEqual(c.payload,l.payload):i.isEqual(c.metadata,l.metadata);break;case a.CueType.ID3:var d=t.data.content.metadata;u=i.isEqual(d,n.content.metadata)}return r&&o&&s&&u})).length>0},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cues",{get:function(){return this._cues},enumerable:!1,configurable:!0}),e.prototype.init=function(e){this._model=e.model},e.prototype.prune=function(e){var t=this,n=this._cues.filter((function(t){return i.TimeRangeUtils.intersectsRange(t.data.range,e)}));s.debug("Pruning "+n.length+" cues"),n.forEach((function(e){return t._removeStatefulCue(e)}))},e.prototype.processCue=function(e){var t,n;if(this._isDuplicate(e.type,e.source,e.data))return s.debug("Ignoring duplicate cue request for "+JSON.stringify(e,null,4)),null;var r=null===(n=null===(t=this._model)||void 0===t?void 0:t.config)||void 0===n?void 0:n.metadata["cues.enabledYospaceID3"];if(!("string"==typeof r?"true"===r.toLowerCase():!!r)&&"embedded"===e.source)return s.debug("Ignoring embedded cue request for "+JSON.stringify(e,null,4)),null;var i=o.CueFactory.createStatefulCueFor(e.type,e.source,e.data);return this._addCueListeners(i),this._cues.push(i),this._requestModelChanges([{mode:a.ModelUpdateMode.Array_Append,property:a.ModelKeys.Timed_Metadata_Cues,value:i.toCue()}]),o.CueFactory.initializeStatefulCue(i,{model:this._model}),i},e.prototype.removeCueById=function(e){var t=this._findCueById(e);t?this._removeStatefulCue(t):s.debug("Could not locate cue by id for removal: "+e)},e.prototype.destroy=function(){var e=this;this._cues.forEach((function(t){e._removeCueListeners(t),t.destroy()})),this._cueBindings.clear(),this._cues.length=0,this._requestModelChanges([{property:a.ModelKeys.Timed_Metadata_Cues,value:[]}])},e}();t.CuesManager=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CueFactory=void 0;var r=n(57),i=n(244),o=n(245),a=n(250),s=n(0),u=0,c=function(){function e(){}return e.createCueId=function(){return"cue-"+(u+=1)},e.createStatefulCueFor=function(t,n,a){switch(t){case s.CueType.ID3:return new i.ID3Cue(e.createCueId(),n,a);case s.CueType.SCTE:return new o.SCTECue(e.createCueId(),n,a);default:return new r.DefaultCue(e.createCueId(),t,n,a)}},e.initializeStatefulCue=function(e,t){var n=[a.ModelPlayheadInsideRangeTrigger(e,t.model)],r=[a.ModelPlayheadOutsideRangeTrigger(e,t.model)];switch(e.type){case s.CueType.SCTE:var u=[o.SCTECue.SCTEParsingTransform];e.init(n,r,u);break;case s.CueType.ID3:var c=[i.ID3Cue.ID3ParsingTransform];e.init(n,r,c);break;default:e.init(n,r,[])}return e},e}();t.CueFactory=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CueFsmConfig=void 0;var r=n(58),i=n(0);t.CueFsmConfig={initial:{name:r.CueStateTrigger.Start,state:i.CueState.Pending},events:[{name:r.CueStateTrigger.Process,from:[i.CueState.Pending],to:i.CueState.Processing},{name:r.CueStateTrigger.Processed,from:[i.CueState.Processing],to:i.CueState.Processed},{name:r.CueStateTrigger.Listen,from:[i.CueState.Processed,i.CueState.Activated],to:i.CueState.Listening},{name:r.CueStateTrigger.Triggered,from:[i.CueState.Listening],to:i.CueState.Activated},{name:r.CueStateTrigger.Completed,from:[i.CueState.Activated],to:i.CueState.Completed}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerEventType=t.createTriggerEventCollection=void 0;var r,i=n(1);t.createTriggerEventCollection=function(){return i.createEventCollection({fired:i.createEvent(r.Fired)})},function(e){e.Fired="fired"}(r=t.TriggerEventType||(t.TriggerEventType={}))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ID3Cue=void 0;var a=n(0),s=function(e){function t(t,n,r){return e.call(this,t,a.CueType.ID3,n,r)||this}return i(t,e),t.ID3ParsingTransform=function(e){return e.content=o(o({},e.content),{metadata:o({},e.content.payload)}),e},t}(n(57).DefaultCue);t.ID3Cue=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SCTECue=void 0;var a=n(57),s=n(141),u=n(0),c=function(e){function t(t,n,r){return e.call(this,t,u.CueType.SCTE,n,r)||this}return i(t,e),t.SCTEParsingTransform=function(e){return e.content=o(o({},e.content),{metadata:s.SCTEMetadataParser.parse(e.content.payload)}),e},t}(a.DefaultCue);t.SCTECue=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpliceInfo=void 0;var r=n(247),i=n(248),o=n(249),a=function(){function e(e){null!=e&&this._parseSplice(e)}return e.FromBase64=function(t,n){var i=r.SimpleBuffer.FromBase64(t,n);return i?new e(i):null},e.FromArrayBuffer=function(t){return new e(r.SimpleBuffer.FromArrayBuffer(t))},e.prototype._parseSplice=function(e){var t=e.getInt32();this.table_id=t>>24&255,this.section_syntax_indicator=t>>23&1,this.private_indicator=t>>22&1,this.section_length=t>>8&4095,this.protocol_version=255&t,t=e.getInt8(),this.encrypted_packet=t>>7&1,this.encryption_algorithm=t>>1&63,this.pts_adjustment=4294967296*(1&t),this.pts_adjustment+=e.getUint32(),t=e.getInt32(),this.cw_index=t>>24&255,this.tier=t>>12&4095,this.splice_command_length=4095&t,this.splice_command_type=e.getUint8();var n=e.position;this.splice_command=i.SpliceCommand.Build(this.splice_command_type,e),e.position=n+this.splice_command_length;var r=e.getUint16();n=e.position,this.splice_descriptors=o.SpliceDescriptor.Build(e,r),e.position=n+r,this.crc_32=e.getUint32()},e.prototype.toJSON=function(){return{table_id:this.table_id,section_syntax_indicator:this.section_syntax_indicator,private_indicator:this.private_indicator,section_length:this.section_length,protocol_version:this.protocol_version,encrypted_packet:this.encrypted_packet,encryption_algorithm:this.encryption_algorithm,pts_adjustment:this.pts_adjustment,cw_index:this.cw_index,tier:this.tier,splice_command_length:this.splice_command_length,splice_command_type:this.splice_command_type,splice_command:this.splice_command.toJSON(),splice_descriptors:this.splice_descriptors.map((function(e){return e.toJSON()})),crc_32:this.crc_32}},e}();t.SpliceInfo=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleBuffer=void 0;var r=function(){function e(e){this.data=new DataView(e),this.position=0}return e.FromBase64=function(t,n){var r=null;try{r=e.Base64ToArrayBuffer(t,n)}catch(e){return null}return null===r?null:new e(r)},e.FromArrayBuffer=function(t){return new e(t)},e.prototype.getInt8=function(){var e=this.data.getInt8(this.position);return this.position+=1,e},e.prototype.getInt16=function(){var e=this.data.getInt16(this.position);return this.position+=2,e},e.prototype.getInt32=function(){var e=this.data.getInt32(this.position);return this.position+=4,e},e.prototype.getUint8=function(){var e=this.data.getUint8(this.position);return this.position+=1,e},e.prototype.getUint16=function(){var e=this.data.getUint16(this.position);return this.position+=2,e},e.prototype.getUint32=function(){var e=this.data.getUint32(this.position);return this.position+=4,e},e.prototype.peekInt8=function(){return this.data.getInt8(this.position)},e.prototype.peekInt16=function(){return this.data.getInt16(this.position)},e.prototype.peekInt32=function(){return this.data.getInt32(this.position)},e.prototype.peekUint8=function(){return this.data.getUint8(this.position)},e.prototype.peekUint16=function(){return this.data.getUint16(this.position)},e.prototype.peekUint32=function(){return this.data.getUint32(this.position)},e.prototype.byteLength=function(){return this.data.byteLength},e.prototype.buffer=function(){return this.data.buffer},e.Base64ToArrayBuffer=function(e,t){if(!t&&!window)throw Error("Please provide a fallback method for window.atob as your second argument.");var n=t||window.atob;if("string"!=typeof e)return null;for(var r=n(e),i=r.length,o=new Uint8Array(i),a=0,s=i,u=0<=s;u?a<s:a>s;u?a++:a--)o[a]=r.charCodeAt(a);return o.buffer},e}();t.SimpleBuffer=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SpliceCommand=void 0;var a=n(0),s=function(){function e(e){this.type=e,this.type_name=a.SCTESpliceCommandType[e]||a.SCTESpliceCommandType[a.SCTESpliceCommandType.Null]}return e.Build=function(e,t){switch(e){case 0:return new u;case 4:return;case 5:return new c(t);case 6:return new l(t);case 7:case 255:return}},e.splice_time=function(e){var t={},n=e.getUint8();return t.time_specified_flag=n>>7&1,1===t.time_specified_flag&&(t.pts_time=4294967296*(1&n),t.pts_time+=e.getUint32()),t},e.break_duration=function(e){var t=e.getInt8(),n={auto_return:t>>7&1,duration:4294967296*(1&t)};return n.duration+=e.getUint32(),n},e.prototype.toJSON=function(){return{type:this.type,type_name:this.type_name}},e}();t.SpliceCommand=s;var u=function(e){function t(){return e.call(this,0)||this}return i(t,e),t}(s),c=function(e){function t(t){var n=e.call(this,5)||this;n.splice_event_id=t.getUint32();var r=t.getInt8();if(n.splice_event_cancel_indicator=r>>7&1,0===n.splice_event_cancel_indicator){if(r=t.getInt8(),n.out_of_network_indicator=r>>7&1,n.program_splice_flag=r>>6&1,n.duration_flag=r>>5&1,n.splice_immediate_flag=r>>4&1,1===n.program_splice_flag&&0===n.splice_immediate_flag)n.splice_time=s.splice_time(t);else if(0===n.program_splice_flag){var i=t.getUint8();n.splice_times={};for(var o=0,a=i,u=0<=a;u?o<a:o>a;u?o++:o--){var c=t.getUint8();0===n.splice_immediate_flag&&(n.splice_times[c]=s.splice_time(t))}}1===n.duration_flag&&(n.break_duration=s.break_duration(t)),n.unique_program_id=t.getUint16(),n.avail_num=t.getUint8(),n.avails_expected=t.getUint8()}return n}return i(t,e),t.prototype.toJSON=function(){return o(o({},e.prototype.toJSON.call(this)),{splice_event_id:this.splice_event_id,splice_event_cancel_indicator:this.splice_event_cancel_indicator,out_of_network_indicator:this.out_of_network_indicator,program_splice_flag:this.program_splice_flag,duration_flag:this.duration_flag,splice_immediate_flag:this.splice_immediate_flag,splice_time:this.splice_time,splice_times:this.splice_times,break_duration:this.break_duration,unique_program_id:this.unique_program_id,avail_num:this.avail_num,avails_expected:this.avails_expected})},t}(s),l=function(e){function t(t){var n=e.call(this,6)||this;return n.splice_time=s.splice_time(t),n}return i(t,e),t.prototype.toJSON=function(){return o(o({},e.prototype.toJSON.call(this)),{splice_time:this.splice_time})},t}(s)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SpliceDescriptor=void 0;var a=n(0),s=function(){function e(e){this.type=e,this.type_name=a.SCTEDescriptorType[e]||a.SCTEDescriptorType[a.SCTEDescriptorType.Unknown]}return e.Build=function(e,t){var n,r,i,o=e.position+t,a=[];try{for(;e.position<o;)n=void 0,r=void 0,i=void 0,n=e.getUint8(),r=e.getUint8(),null!==(i=function(){switch(n){case 0:return new u(e);case 2:return new c(e);default:for(var t=0,i=r,o=0<=i;o?t<i:t>i;o?t++:t--)e.getUint8();return null}}())&&a.push(i)}catch(e){}return a},e.prototype.toJSON=function(){return{type:this.type,type_name:this.type_name}},e}();t.SpliceDescriptor=s;var u=function(e){function t(t){var n=e.call(this,0)||this;return n.identifier=t.getUint32(),n.provider_avail_id=t.getUint32(),n}return i(t,e),t.prototype.toJSON=function(){return o(o({},e.prototype.toJSON.call(this)),{identifier:this.identifier,provider_avail_id:this.provider_avail_id})},t}(s),c=function(e){function t(n){var r=e.call(this,2)||this;if(r.identifier=n.getUint32(),r.segmentation_event_id=n.getUint32(),r.segmentation_event_cancel_indicator=n.getUint8()>>7&1,0===r.segmentation_event_cancel_indicator){var i=void 0,o=n.getUint8();if(r.program_segmentation_flag=o>>7&1,r.segmentation_duration_flag=o>>6&1,r.delivery_not_restricted_flag=o>>5&1,0===r.delivery_not_restricted_flag&&(r.web_delivery_allowed_flag=o>>4&1,r.no_regional_blackout_flag=o>>3&1,r.archive_allowed_flag=o>>2&1,r.device_restrictions=3&o),0===r.program_segmentation_flag){var a,s,u=n.getUint8();for(r.components=[],i=0,a=0<=(s=u);a?i<s:i>s;a?i++:i--){var c=n.getUint8(),l=4294967296*(1&n.getUint8());l+=n.getUint32(),r.components.push({component_tag:c,pts_offset:l})}}if(1===r.segmentation_duration_flag&&(r.segmentation_duration=4294967296*n.getUint8(),r.segmentation_duration+=n.getUint32()),r.segmentation_upid_type=n.getUint8(),r.segmentation_upid_length=n.getUint8(),8===r.segmentation_upid_type)r.segmentation_upid=4294967296*n.getUint32(),r.segmentation_upid+=n.getUint32();else{var d,f;for(i=0,d=0<=(f=r.segmentation_upid_length);d?i<f:i>f;d?i++:i--)n.getInt8()}r.segmentation_type_id=n.getUint8(),r.segment_num=n.getUint8(),r.segments_expected=n.getUint8(),r.segmentation_type_id_name=t.nameForTypeId(r.segmentation_type_id)}return r}return i(t,e),t.prototype.toJSON=function(){return o(o({},e.prototype.toJSON.call(this)),{identifier:this.identifier,segmentation_event_id:this.segmentation_event_id,segmentation_event_cancel_indicator:this.segmentation_event_cancel_indicator,program_segmentation_flag:this.program_segmentation_flag,segmentation_duration_flag:this.segmentation_duration_flag,delivery_not_restricted_flag:this.delivery_not_restricted_flag,web_delivery_allowed_flag:this.web_delivery_allowed_flag,no_regional_blackout_flag:this.no_regional_blackout_flag,archive_allowed_flag:this.archive_allowed_flag,device_restrictions:this.device_restrictions,segmentation_duration:this.segmentation_duration,segmentation_upid_type:this.segmentation_upid_type,segmentation_upid_length:this.segmentation_upid_length,segmentation_upid:this.segmentation_upid,segmentation_type_id:this.segmentation_type_id,segment_num:this.segment_num,segments_expected:this.segments_expected,segmentation_type_id_name:this.segmentation_type_id_name,components:this.components})},t.nameForTypeId=function(e){return a.SCTESegmentationType[e]||a.SCTESegmentationType[a.SCTESegmentationType.Unknown]},t}(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModelPlayheadOutsideRangeTrigger=t.ModelPlayheadInsideRangeTrigger=void 0;var r=n(0),i=n(142);t.ModelPlayheadInsideRangeTrigger=function(e,t){var n=new Map([[r.ModelKeys.Timeline_Time,function(t){return e.data.range.contains(t)}]]);return new i.PlayerModelTrigger(t,n)};t.ModelPlayheadOutsideRangeTrigger=function(e,t){var n=new Map([[r.ModelKeys.Timeline_Time,function(t){return!e.data.range.contains(t)}]]);return new i.PlayerModelTrigger(t,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MocksManager=void 0;var r=n(0),i=n(1),o=n(86),a=n(143),s=n(26),u=i.Log.getLogger("MocksManager").filter("mocks"),c=function(){function e(){this._events=o.createMocksEventCollection(),this._messages=new Map,this._nextMessageId=0,this._enabled=!1,this._messageQueue=[]}return e.prototype._determineMessageProcessability=function(e,t){var n={triggers:this._filterTriggersForState(e.triggers,t),retriggers:this._filterTriggersForState(e.retriggers,t)},r=i.isEqual(n.triggers.before,n.triggers.after),o=i.isEqual(n.retriggers.before,n.retriggers.before);return r&&o?s.MockMessageProcessability.Full:i.ObjectUtils.isEmpty(n.triggers.after)?s.MockMessageProcessability.None:s.MockMessageProcessability.Partial},e.prototype._filterTriggersForState=function(e,t){var n={};return Object.keys(e).filter((function(e){return a.MessageTriggerSupportedInContext(e,t)})).forEach((function(t){var r=t;n[r]=e[r]})),{before:e,after:n}},e.prototype._processTriggers=function(e,t){var n,i=this,o=function(e){return a.NormalizeMessageTriggerTiming(i._model,e)};e.triggers=o(e.triggers),e.retriggers=o(e.retriggers);var s=function(e){return a.MessageTriggersToTriggerCollection(i._model,e,t,a.CreateTriggerFor)}(e.triggers),u=function(e){return a.MessageTriggersToTriggerCollection(i._model,e,t,a.CreateRetriggerFor)}(e.retriggers);switch(e.type){case r.MockMessageType.Timed_Metadata:var c=e.data,l=o(((n={})[r.MockMessageTriggerName.Content_Time]=c.startTime,n));c.startTime=l[r.MockMessageTriggerName.Content_Time]}return{triggers:s,retriggers:u}},e.prototype._getTrackedMessageById=function(e){var t=this._messages.get(e);return t||null},e.prototype._onMessageTriggered=function(e){if(this.enabled){var t=this._getTrackedMessageById(e);if(t){var n=t.message,r=t.triggers,i=r.triggers,o=r.retriggers;this._events.messageTriggered.dispatch({message:{type:n.type,data:n.data}}),i.disable(),o.size>0&&o.init()}}else u.warn("Message triggered but module is disabled")},e.prototype._onMessageRetriggered=function(e){var t=this._getTrackedMessageById(e);if(t){var n=t.triggers,r=n.triggers,i=n.retriggers;r.init(),i.disable()}},e.prototype._trackMessage=function(e,t,n){var r=this;this._messages.has(e)&&this._untrackMessage(e),this._messages.set(e,{message:t,triggers:n}),n.triggers.events.fired.listen((function(){return r._onMessageTriggered(e)})),n.retriggers.events.fired.listen((function(){return r._onMessageRetriggered(e)})),n.triggers.init(),n.retriggers.disable()},e.prototype._untrackMessage=function(e){var t=this._messages.get(e);if(t){var n=t.triggers,r=n.triggers,i=n.retriggers;r.events.removeAllListeners(),r.destroy(),i.events.removeAllListeners(),i.destroy(),this._messages.delete(e),u.debug("Untracked message: "+e)}},e.prototype._untrackAllMessages=function(){var e=this;Array.from(this._messages.keys()).forEach((function(t){return e._untrackMessage(t)}))},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messages",{get:function(){return Array.from(this._messages.values()).map((function(e){return e.message}))},enumerable:!1,configurable:!0}),e.prototype.init=function(e){this._model=e.model},e.prototype.enable=function(){this._enabled=!0},e.prototype.queueMessage=function(e){this._messageQueue.push({id:"mock-"+this._nextMessageId++,message:e})},e.prototype.processQueuedMessages=function(e){var t=this;this._messageQueue=this._messageQueue.filter((function(n){switch(t._determineMessageProcessability(n.message,e)){case s.MockMessageProcessability.Full:return t._trackMessage(n.id,n.message,t._processTriggers(n.message,e)),u.debug("Fully processed queued message: "+n.id),!1;case s.MockMessageProcessability.Partial:return t._trackMessage(n.id,n.message,t._processTriggers(n.message,e)),u.debug("Partially processed queued message: "+n.id),!0;default:return u.debug("Skipped processing of queued message: "+n.id),!0}}))},e.prototype.disable=function(){this._enabled=!1},e.prototype.reset=function(){this._untrackAllMessages(),this._messageQueue.length=0,this._messages.clear()},e.prototype.destroy=function(){this.disable(),this.reset()},e}();t.MocksManager=c},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertMockTimedMetadataMessageData=void 0;var i=n(1),o=n(253),a=n(141),s=n(0);t.ConvertMockTimedMetadataMessageData=function(e,t){var n={start:t.startTime,end:Number.NaN,timeReceived:e.timeline.currentTime,source:o.videoEngineMetadataTypeToVideoEngineMetadataSourceType(t.metadataType),metadataType:t.metadataType,metadata:{subType:t.metadataType,attributes:{}}};switch(t.metadataType){case s.VideoEngineMetadataType.SCTE:var u=t,c=a.createSCTEMetadata(u.metadata.spliceType);switch(u.metadata.spliceType){case s.SCTESpliceCommandType.Time_Signal:Object.keys(u.metadata.descriptors).forEach((function(e){switch(e){case s.SCTEDescriptorType[s.SCTEDescriptorType.Segmentation]:var t=u.metadata.descriptors[e],n=i.ObjectUtils.get(t,"subType");c.splice_descriptors.push(a.createSCTESegmentationDescriptor(n,t))}}))}n.metadata.payload=r({},c);break;case s.VideoEngineMetadataType.ID3:n.metadata=r(r({},n.metadata),{id:t.metadata.id,messageData:t.metadata.message});break;default:n.metadata={subType:t.metadataType,attributes:t.attributes}}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoEngineMetadataTypeToVideoEngineMetadataSourceType=void 0;var r=n(0);t.videoEngineMetadataTypeToVideoEngineMetadataSourceType=function(e){switch(e){case r.VideoEngineMetadataType.CAST:case r.VideoEngineMetadataType.DATERANGE:case r.VideoEngineMetadataType.EMSG:case r.VideoEngineMetadataType.EVENT_STREAM:case r.VideoEngineMetadataType.ID3:return r.VideoEngineMetadataSourceType.EMBEDDED;case r.VideoEngineMetadataType.SCTE:case r.VideoEngineMetadataType.CUETAG:return r.VideoEngineMetadataSourceType.TAG;case r.VideoEngineMetadataType.CUSTOM:return r.VideoEngineMetadataSourceType.OTHER}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdTimeOutsideRangeTrigger=t.AdTimeInsideRangeTrigger=t.MediaTimeOutsideRangeTrigger=t.MediaTimeInsideRangeTrigger=t.ContentTimeOutsideRangeTrigger=t.ContentTimeInsideRangeTrigger=void 0;var r=n(0),i=n(142);t.ContentTimeInsideRangeTrigger=function(e,t){var n=new Map([[r.ModelKeys.Timeline_Time,function(t){return e.contains(t)}]]);return new i.PlayerModelTrigger(t,n)};t.ContentTimeOutsideRangeTrigger=function(e,t){var n=new Map([[r.ModelKeys.Timeline_Time,function(t){return!e.contains(t)}]]);return new i.PlayerModelTrigger(t,n)};t.MediaTimeInsideRangeTrigger=function(e,t){var n=new Map([[r.ModelKeys.Media_Time,function(t){return e.contains(t)}]]);return new i.PlayerModelTrigger(t,n)};t.MediaTimeOutsideRangeTrigger=function(e,t){var n=new Map([[r.ModelKeys.Media_Time,function(t){return!e.contains(t)}]]);return new i.PlayerModelTrigger(t,n)};t.AdTimeInsideRangeTrigger=function(e,t){var n=new Map([[r.ModelKeys.Current_Ad_Creative,function(t){var n;return e.contains(null!==(n=null==t?void 0:t.currentTime)&&void 0!==n?n:-1)}]]);return new i.PlayerModelTrigger(t,n)};t.AdTimeOutsideRangeTrigger=function(e,t){var n=new Map([[r.ModelKeys.Current_Ad_Creative,function(t){var n;return!e.contains(null!==(n=null==t?void 0:t.currentTime)&&void 0!==n?n:-1)}]]);return new i.PlayerModelTrigger(t,n)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(256),t),i(n(257),t),i(n(258),t),i(n(127),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(50),t),i(n(125),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(126),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(58),t),i(n(137),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(261),t),i(n(262),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(265),t),i(n(266),t),i(n(26),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MockMessageDispatcher=void 0;var i=n(0),o=n(143),a={handlers:(r={},r[i.MockMessageType.Timed_Metadata]=function(){},r)},s=function(){function e(e){var t=this;this._onPlayerMockMessageTriggered=function(e){var n=e.message,r=t._config.handlers,a=t._player.model,s=o.TransformMessageData(a,n.type,n.data);switch(n.type){case i.MockMessageType.Timed_Metadata:r.timedMetadata(s)}},this._player=null,this._bindings=[],this._config=Object.assign(a,e)}return e.prototype.attach=function(e){this._player||(this._player=e,this._bindings.push(this._player.events.mockMessageTriggered.listen(this._onPlayerMockMessageTriggered)))},e.prototype.updateConfig=function(e){this._config=Object.assign(this._config,e)},e.prototype.detach=function(){this._bindings.forEach((function(e){return e.detach()})),this._bindings.length=0,this._player=null},e.prototype.destroy=function(){this.detach(),this._config=a},e}();t.MockMessageDispatcher=s},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(100),t),i(n(102),t),i(n(268),t)},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewController=void 0;var i=r(n(134));t.ViewController=i.default},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(270),t),i(n(271),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrmManager=void 0,t.DrmManager={platformInfo:null,storedPromise:null,callback:function(){},setup:function(e){if(t.DrmManager.platformInfo=[],e.config){var n=e.config.metadata;if(n)switch(n.platform){case"ios":t.DrmManager.platformInfo=["com.apple.fairplay","com.apple.fps.2_0","com.apple.fps.1_0"];break;case"android":t.DrmManager.platformInfo=["com.widevine.alpha"]}}t.DrmManager.storedPromise&&t.DrmManager.callback()},getSupportedDRMs:function(){return t.DrmManager.storedPromise=new Promise((function(e,n){if(t.DrmManager.platformInfo)return e(t.DrmManager.platformInfo);t.DrmManager.callback=function(){return t.DrmManager.platformInfo?e(t.DrmManager.platformInfo):n("callback called without any stored platform data")}})),t.DrmManager.storedPromise}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Environment=void 0;var r=function(){function e(){}return e.determine=function(t){var n=e,r={isEdgium:n.isEdgium,isEdge:n.isEdge,isChrome:n.isChrome,isIE11:n.isIE11,isFirefox:n.isFirefox,isSafari:n.isSafari,isAndroid:n.isAndroid,isIOS:n.isIOS,isWindows:n.isWindows,isOSX:n.isOSX,isLinux:n.isLinux,isChromecast:n.isChromecast,isTizen:n.isTizen,isWebOS:n.isWebOS,isTopUI:n.isTopUI},i=Object.keys(r);return t=t.toLowerCase(),i.reduce((function(e,n){var i=r[n];return e[n]=i(t),e}),{})},e.isEdgium=function(t){return!e.isEdge(t)&&/edg\//i.test(t)},e.isEdge=function(e){return/edge/i.test(e)},e.isChrome=function(t){var n=e.isEdge(t),r=e.isEdgium(t);return!n&&!r&&/chrome|crios/i.test(t)},e.isIE11=function(e){return/trident.*rv:11/i.test(e)},e.isSafari=function(t){var n=e.isChrome(t),r=e.isEdge(t),i=e.isEdgium(t);return!n&&!r&&!i&&/safari/i.test(t)},e.isFirefox=function(e){return/firefox/i.test(e)},e.isAndroid=function(e){return/android/i.test(e)},e.isIOS=function(e){return/ipod|iphone|ipad/i.test(e)},e.isWindows=function(e){return/windows/i.test(e)},e.isOSX=function(t){return!e.isIOS(t)&&/mac os x/i.test(t)},e.isLinux=function(t){return!e.isAndroid(t)&&/linux/i.test(t)},e.isChromecast=function(e){return/crkey/i.test(e)},e.isTopUI=function(e){return/topuiview/i.test(e)},e.isTizen=function(e){return/tizen/i.test(e)},e.isWebOS=function(e){return/web0s/i.test(e)},e}();t.Environment=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerProxy=void 0;var r=n(61),i=n(144),o=n(0),a=function(){function e(e,t,n){var o=this;this.events=r.createPlayerEventCollection(),this._model=i.PlayerModel.fromDataObject(e),this._model.modelUpdated.listen((function(e){o.events.modelUpdated.dispatch(e)})),this._commandHandler=t}return e.prototype.handleEvent=function(e,t){switch(e){case o.PlayerEventType.Model_Updated:this._model.handleChangeRequests(this.formatIncomingEventChanges(t.changed));break;default:if(this.events.hasOwnProperty(e))this.events[e].dispatch(t)}},e.prototype.formatIncomingEventChanges=function(e){return e.map((function(e){return{property:e.property,value:e.currentValue,mode:e.mode}}))},e.prototype.updateConfig=function(e){this._model.handleChangeRequests([{property:o.ModelKeys.Config,value:e,mode:o.ModelUpdateMode.Extend}])},e.prototype._processOutgoingCommand=function(e){this._commandHandler(e)},Object.defineProperty(e.prototype,"id",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cues",{get:function(){return this._model.cues},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerState",{get:function(){return this._model.playerState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentState",{get:function(){return this._model.contentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lifecycleState",{get:function(){return this._model.lifecycleState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._model.config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playlistItem",{get:function(){return this._model.playlistItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._model.volume},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._model.muted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"analytics",{get:function(){return this._model.analytics},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"captions",{get:function(){return this._model.captions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeline",{get:function(){return this._model.timeline},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaState",{get:function(){return this._model.mediaState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaDuration",{get:function(){return this._model.mediaDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaTime",{get:function(){return this._model.mediaTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentSeekableRange",{get:function(){return this._model.contentSeekableRange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentBufferedRange",{get:function(){return this._model.contentBufferedRange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentIsLive",{get:function(){return this._model.contentIsLive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFullscreen",{get:function(){return this._model.viewState===o.ViewState.Fullscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewState",{get:function(){return this._model.viewState},enumerable:!1,configurable:!0}),e.prototype.getCurrentAdBreak=function(){return this._model.currentAdBreak},e.prototype.getCurrentAdCreative=function(){return this._model.currentAdCreative},e.prototype.getAdBreaks=function(){return this._model.adBreaks},e.prototype.enterFullscreen=function(){this._processOutgoingCommand({type:o.PlayerCommandType.Enter_Fullscreen})},e.prototype.exitFullscreen=function(){this._processOutgoingCommand({type:o.PlayerCommandType.Exit_Fullscreen})},e.prototype.mute=function(){this._processOutgoingCommand({type:o.PlayerCommandType.Update_Config,config:{playback:{muted:!0}}})},e.prototype.pause=function(){this._processOutgoingCommand({type:o.PlayerCommandType.Pause})},e.prototype.proceed=function(){this._processOutgoingCommand({type:o.PlayerCommandType.Proceed})},e.prototype.replay=function(){this._processOutgoingCommand({type:o.PlayerCommandType.Replay})},e.prototype.resume=function(){this._processOutgoingCommand({type:o.PlayerCommandType.Resume})},e.prototype.resize=function(e,t){this._processOutgoingCommand({type:o.PlayerCommandType.Resize,width:e,height:t})},e.prototype.seek=function(e){this._processOutgoingCommand({type:o.PlayerCommandType.Seek,time:e})},e.prototype.seekToLive=function(){this._processOutgoingCommand({type:o.PlayerCommandType.Seek_To_Live})},e.prototype.setVolume=function(e){this._processOutgoingCommand({type:o.PlayerCommandType.Update_Config,config:{playback:{volume:e}}})},e.prototype.stop=function(){this._processOutgoingCommand({type:o.PlayerCommandType.Stop})},e.prototype.unmute=function(){this._processOutgoingCommand({type:o.PlayerCommandType.Update_Config,config:{playback:{muted:!1}}})},e.prototype.selectCaptionTrack=function(e){this._processOutgoingCommand({type:o.PlayerCommandType.Captions_Select_Track,track:e})},e.prototype.selectCaptionTrackByLang=function(e){this._processOutgoingCommand({type:o.PlayerCommandType.Captions_Select_Track_By_Lang,lang:e})},e.prototype.setCaptionsEnabled=function(e){this._processOutgoingCommand({type:o.PlayerCommandType.Captions_Set_Enabled,enabled:e})},e.prototype.updateCaptionSettings=function(e){this._processOutgoingCommand({type:o.PlayerCommandType.Captions_Update_Settings,source:o.CCSettingsSource.User,settings:e})},e}();t.PlayerProxy=a}])}));